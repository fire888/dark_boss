(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{40:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var o={};a.r(o),a.d(o,"SIZE_QUADRANT",(function(){return h})),a.d(o,"LOCATIONS_QUADRANTS",(function(){return m})),a.d(o,"MATERIALS_CONFIG",(function(){return b})),a.d(o,"CONFIG_FOR_INIT",(function(){return d})),a.d(o,"lCol",(function(){return f})),a.d(o,"lW",(function(){return v})),a.d(o,"START_ENV_CONFIG",(function(){return O})),a.d(o,"ENV_CONFIG_WORD_1",(function(){return y})),a.d(o,"ENV_CONFIG_WORD_2",(function(){return j})),a.d(o,"studioConfig",(function(){return g})),a.d(o,"playerConfig",(function(){return _}));var r=a(11),n=a.n(r),i=a(12);function s(){return(s=Object(i.a)(n.a.mark((function e(t,a){var o,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("pageLoaded",t,o={CONSTANTS:a}),r=o.loaderAssets,i=l(t),e.next=6,r.loadAssets(i);case 6:o.assets=e.sent,c("beforeStartPlay",t,o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e,t,a){for(var o=0;o<t.length;++o){var r=t[o],n=r.key,i=r.constr;r.initStateKey===e&&(a[n]=new i(a))}},l=function(e){for(var t=[],a=0;a<e.length;++a)if(e[a].assetsToLoad&&e[a].assetsToLoad.length)for(var o=0;o<e[a].assetsToLoad.length;++o)t.push(e[a].assetsToLoad[o]);return t},u=a(1),p={unit:{mat:"MeshPhongMaterial",props:{color:16777215,emissive:0,reflectivity:5,shininess:5,vertexColors:!0,flatShading:!1,side:u.DoubleSide}},wallVirtual:{mat:"MeshStandardMaterial",props:{color:16711935,emissive:0}},wallVirtualColor:{mat:"MeshBasicMaterial",props:{color:16777215,emissive:4369,map:"mapParams",bumpMap:"mapParams",bumpScale:.1,specular:255,vertexColors:!0}},body:{mat:"MeshPhongMaterial",props:{color:11184895,emissive:0,map:"mapBody",bumpMap:"mapBody",bumpScale:.1,reflectivity:.005,shininess:.005,specular:16777215}},body_sh:{mat:"MeshPhongMaterial",props:{color:0,emissive:0,transparent:!0,alphaMap:"mapBodySh"}},floorMat1:{mat:"MeshPhongMaterial",props:{color:16742399,map:"mapTop",bumpMap:"mapTop",bumpScale:3,envMap:"skyBox2",reflectivity:.01,shininess:.01,specular:16777215}},floorMat:{mat:"MeshPhongMaterial",props:{color:65280,map:"mapVirtual2",bumpMap:"mapVirtual2",bumpScale:3}},testWhite:{mat:"MeshBasicMaterial",props:{color:16777045}},testRed:{mat:"MeshBasicMaterial",props:{color:16711680}},carNorm:{mat:"MeshStandardMaterial",props:{color:11141290}},carBattery:{mat:"MeshBasicMaterial",props:{color:11141120,transparent:!0}},testGreen:{mat:"MeshBasicMaterial",props:{color:43520}},testGreen1:{mat:"MeshBasicMaterial",props:{color:39168}},testBlack:{mat:"MeshBasicMaterial",props:{color:0,side:u.DoubleSide}}},h=5e3,m={"3_-3":"location01","-3_-3":"location02","3_3":"location03","100_1000":"locationToFinish"},b=p,d={isInCar:!1,currentSceneConfig:{isInVirtual:!1,isPlayerInCar:!1,carProps:{keyMesh:"car",keyCollide:"carCollision",position:[0,-50,-100],rotation:[0,2,0]},bodyProps:{keyMesh:"body",position:[-20,-60,-50],rotation:[0,2,0]}}},f=[.3,1,.3],v=.2,O={fogNear:0,fogFar:0,color:4852294,backgroundImgKey:null},y={fogNear:100,fogFar:1500,color:4852294,backgroundImgKey:"skyBox2"},j={fogNear:1500,fogFar:3e3,color:0,backgroundImgKey:"skyBox"},g={canId:"webgl-canvas",rendererCon:{antialias:!0},amb:{color:16777215,strength:1},sceneEnvironment:O,composerAddPass:"Saturate"},_={speed:.8,speedRot:.02,speedDown:-.45,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startPos:[0,-45,50],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e4,pos:[0,2,-.5]},frontObjPos:[0,0,-1],backObjPos:[0,0,1]},C=a(2),w=a(3),M=a(21),S=a(22),T=function(){var e=null,t=null,a=null,o=null,r=null;return function(n,i){return new Promise((function(s){(function(n){return"obj"===n?e=e||new M.a:"glb"===n||"gltf"===n?a=a||new S.a:"img"===n?t=t||new u.TextureLoader:"cubeTextures"===n?o=o||new u.CubeTextureLoader:"soundMp3"===n?r=r||new u.AudioLoader:void 0})(i).load(n,s)}))}},k=function(){function e(){Object(C.a)(this,e),this.resources={},this._load=T()}return Object(w.a)(e,[{key:"loadAssets",value:function(e){var t=this;return new Promise((function(a){var o=t._load,r=t.resources;function s(e){return c.apply(this,arguments)}function c(){return(c=Object(i.a)(n.a.mark((function t(i){var c,l,u,p;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e[i]){t.next=5;break}return c=e[i],l=c.key,u=c.path,p=c.type,t.next=4,o(u,p);case 4:r[l]=t.sent;case 5:if(++i,e[i]){t.next=10;break}a(r),t.next=12;break;case 10:return t.next=12,s(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s(0)}))}}]),e}(),x=function(){function e(){Object(C.a)(this,e),this._storage={}}return Object(w.a)(e,[{key:"emit",value:function(e){var t=this;return function(a){return P(t._storage)(e).forEach((function(e){return e(a)}))}}},{key:"subscribe",value:function(e){var t=this;return function(a){return P(t._storage)(e).push(a),function(){return t._storage[e]=t._storage[e].filter((function(e){return e!==a}))}}}},{key:"showAll",value:function(){var e={};for(var t in this._storage)e[t]=this._storage[t].length;console.log(e)}}]),e}(),P=function(e){return function(t){return e[t]=e[t]||[]}},A=a(4),I=a(46),D=function(){function e(){var t=this;Object(C.a)(this,e),this._subscribers=[];var a={time:0,delta:0,count:0,oldTime:0},o=I.a((function(){return a}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0===e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){for(var a=0;a<t._subscribers.length;++a)t._subscribers[a](Object(A.a)({},e));return e}),(function(e){return e.oldTime=e.time,e}),(function(e){return a=e}));!function e(){requestAnimationFrame(e),o(a)}()}return Object(w.a)(e,[{key:"on",value:function(e){var t=this;return this._subscribers.push(e),function(){t._subscribers=t._subscribers.filter((function(t){return t!==e}))}}}]),e}(),F=a(14),L=a(27),E=a(24),N=a(15),B={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel * texel * texel) * vec4(3.);\n}"},R={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel + texel * 1.5) * vec4(0.5);\n}"},G=a(23),W=function(){function e(t){var a=this;Object(C.a)(this,e),this._root=t;var o=t.assets,r=t.emitter,n=t.CONSTANTS.studioConfig,i=n.canId,s=n.rendererCon,c=(n.clearColor,n.amb);s.canvas=document.getElementById(i),this._renderer=new u.WebGLRenderer(s),this._renderer.setClearColor(0),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(window.innerWidth,window.innerHeight),this._scene=new u.Scene;var l=t.CONSTANTS.studioConfig.sceneEnvironment,p=l.color,h=l.fogNear,m=l.fogFar,b=l.backgroundImgKey;this._scene.background=o[b]||null,this._scene.fog=new u.Fog(p,h,m);c.color,c.strength;this._lightA=new u.AmbientLight(16777215,.2),this._scene.add(this._lightA);var d=new u.DirectionalLight(16777215,.6);d.position.set(1,1,.5),this._scene.add(d);var f=new u.DirectionalLight(16777215,.4);f.position.set(-1,-.1,-.4),this._scene.add(f),this._playerCamera=new u.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera=new u.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera.position.set(0,0,20);var v=new G.a(this._controlsCamera,this._renderer.domElement);v.target.set(0,0,0),v.update(),this._composer=new L.a(this._renderer),this._renderPass=new E.a(this._scene,this._controlsCamera),this._composer.addPass(this._renderPass),this._root.CONSTANTS.studioConfig.composerAddPass&&("Saturate"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new N.a(B)),"Saturate2"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new N.a(R)));var O=new u.Vector3,y=!0;r.subscribe("keyEvent")((function(e){e.o&&(y?(y=!1,a._renderPass.camera=a._controlsCamera,a._playerCamera.getWorldPosition(O),a._controlsCamera.position.x=O.x+100,a._controlsCamera.position.y=O.y+100,a._controlsCamera.position.z=O.z,v.target.set(O.x,O.y,O.z),v.update()):(y=!0,a._renderPass.camera=a._playerCamera))}));var j=function(){var e={width:window.innerWidth,height:window.innerHeight};a._renderer.setSize(e.width,e.height),a._composer.setSize(e.width,e.height),a._controlsCamera&&(a._controlsCamera.aspect=e.width/e.height,a._controlsCamera.updateProjectionMatrix()),a._playerCamera&&(a._playerCamera.aspect=e.width/e.height,a._playerCamera.updateProjectionMatrix())};window.addEventListener("resize",j),j(),this.addToScene=function(e){return a._scene.add(e)},this.removeFromScene=function(e){return a._scene.remove(e)},this.drawFrame=function(){a._composer.render(a._scene,a._controlsCamera)},r.subscribe("changeSceneEnvironment")((function(e){console.log("deprecated!!","studio","changeSceneEnvironment",e)}))}return Object(w.a)(e,[{key:"setCamera",value:function(e){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),this._playerCamera=e,this._renderPass.camera=this._playerCamera}},{key:"changeEnvironment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._changeFog(e,t),this._changeBackground(e,t)}},{key:"_changeFog",value:function(e,t){var a=this,o=e.fogNear,r=e.fogFar,n=e.color;if(this._scene.fog.near!==o||this._scene.fog.far!==r||this._scene.fog.color!==r){var i={color:this._scene.fog.color,near:this._scene.fog.near,far:this._scene.fog.far},s={color:new u.Color(n),near:o,far:r};new F.a(i).to(s,t&&t.time||3e3).onUpdate((function(){a._scene.fog.color=i.color,a._scene.fog.near=i.near,a._scene.fog.far=i.far,a._renderer.setClearColor(i.color)})).start()}}},{key:"_changeBackground",value:function(e){var t=e.backgroundImgKey;t!==this._backgroundImgKey&&(this._backgroundImgKey=t,this._scene.background=this._root.assets[t]||null)}}]),e}(),z=function(){function e(t){Object(C.a)(this,e);var a=t.emitter,o={up:!1,down:!1,left:!1,right:!1,p:!1},r={up:!0,down:!0,left:!0,right:!0};this.keysEnabled=r,this.keys=o;var n=function(e,t){switch(e){case 38:case 87:r.up&&(o.up=t);break;case 40:case 83:r.down&&(o.down=t);break;case 37:case 65:o.left=t;break;case 39:case 68:o.right=t;break;case 79:o.o=t;break;case 80:o.p=t}a.emit("keyEvent")(o)};document.addEventListener("keydown",(function(e){return n(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){return n(e.keyCode,!1)})),a.subscribe("mouseDown")((function(e){"butt-left"===e&&n(37,!0),"butt-right"===e&&n(39,!0),"butt-front"===e&&n(38,!0),"butt-back"===e&&n(40,!0)})),a.subscribe("mouseUp")((function(e){"butt-left"===e&&n(37,!1),"butt-right"===e&&n(39,!1),"butt-front"===e&&n(38,!1),"butt-back"===e&&n(40,!1)}))}return Object(w.a)(e,[{key:"toggleEnableKeys",value:function(e,t){this.keysEnabled[e]=t,!t&&(this.keys[e]=!1)}}]),e}(),U=function(){function e(t){Object(C.a)(this,e);var a=t.studio,o=t.CONSTANTS.playerConfig,r=(o.startPos,o.startRot,o.cameraData),n=(o.frontObjPos,o.backObjPos,o.lightDataOne);this._camera=null,this.isBlocked=!0,this.isFreeze=!0,this.mesh=new u.Object3D,this.mesh.rotation.fromArray([0,0,0]),this.mesh.userData.type="player",this.bottomObj=new u.Object3D,this.bottomObj.position.fromArray([0,-.02,0]),this.mesh.add(this.bottomObj),this.frontObj=new u.Object3D,this.frontObj.position.fromArray([0,0,-.02]),this.mesh.add(this.frontObj),this.backObj=new u.Object3D,this.backObj.position.fromArray([0,0,.02]),this.mesh.add(this.backObj);var i=r.fov,s=r.ratio,c=r.near,l=r.far;r.pos;if(this._camera=new u.PerspectiveCamera(i,s,c,l),this._camera.position.fromArray([0,0,-2]),this.mesh.add(this._camera),n){var p=n.color,h=n.strenth,m=n.pos,b=new u.PointLight(p,h);b.position.fromArray(m),this.mesh.add(b)}a.setCamera(this._camera),a.addToScene(this.mesh)}return Object(w.a)(e,[{key:"toggleFeeze",value:function(e){this.isFeeze=e}},{key:"toggleCanMove",value:function(e,t){}},{key:"getObj",value:function(){return this.mesh}},{key:"getCamera",value:function(){return this._camera}},{key:"setToPos",value:function(e,t,a){this.mesh.position.set(e,t,a)}}]),e}(),V=function(e,t){for(var a in e)e[a].wrapS&&(e[a].wrapS=e[a].wrapT=u.RepeatWrapping);var o=["bumpMap","envMap","map","normalMap","lightMap","aoMap","alphaMap"],r={},n=function(a){r[a]=new u[t[a].mat](Object(A.a)({},t[a].props)),o.map((function(o){return t[a].props[o]&&(r[a][o]=e[t[a].props[o]])}))};for(var i in t)n(i);return r},K=function(e,t){var a={};return e["level-rooms"].traverse((function(e){e.geometry&&(a[e.name]=e,e.material=t.wallVirtual)})),a},q=a.p+"static/media/level.0d2a124d.obj",H=a.p+"static/media/floor_outer_map3.558e9646.jpg",Q=a.p+"static/media/map02.10921dbe.jpg",Y=a.p+"static/media/floor_outer_map.bb8fd979.jpg",Z=a.p+"static/media/txt1.b67888d5.jpg",X=a.p+"static/media/botMap.55359807.png",J=a.p+"static/media/body_sh_map.993a8c14.jpg",$=(a.p,a.p+"static/media/nx.a038c501.jpg"),ee=(a.p,a.p,a.p,a.p,a.p+"static/media/px.96d0b65f.jpg"),te=a.p+"static/media/nx.8cbf039d.jpg",ae=a.p+"static/media/py.659ebc34.jpg",oe=a.p+"static/media/ny.09051a4e.jpg",re=a.p+"static/media/pz.a1539724.jpg",ne=a.p+"static/media/nz.0bc769f7.jpg",ie=a(10),se=function(){function e(){Object(C.a)(this,e),this._arrMeshes=[],this._vecStart=new u.Vector3,this._vecDir=new u.Vector3,this._rayCaster=new u.Raycaster(this._vecStart,this._vecDir)}return Object(w.a)(e,[{key:"setItemToCollision",value:function(e){for(var t=0;t<this._arrMeshes.length;++t)if(this._arrMeshes[t]===e)return;this._arrMeshes.push(e)}},{key:"removeItemFromCollision",value:function(e){this._arrMeshes=this._arrMeshes.filter((function(t){return t!==e}))}},{key:"checkCollisions",value:function(e,t,a){e.getWorldPosition(this._vecStart),t.getWorldPosition(this._vecDir),this._vecDir.sub(this._vecStart);var o=this._rayCaster.intersectObjects(this._arrMeshes);return o[0]&&o[0].distance<a?[!0,o[0]]:[!1,null]}}]),e}(),ce=function(){function e(t){var a=this;Object(C.a)(this,e);var o=t.assets,r=t.emitter,n=t.materials;this._root=t,this._model=o["level-rooms"].children.filter((function(e){return"CAR_102G"===e.name}))[0],this._model.material=n.carNorm;var i=o["level-rooms"].children.filter((function(e){return"CAR_102"===e.name}))[0];i.material=n.testBlack,this._model.add(i),this._phase=0,this._battery=o["level-rooms"].children.filter((function(e){return"battary"===e.name}))[0],this._battery.material=n.carBattery,this._battery.material.opacity=0,this._model.add(this._battery),this._camera=new u.PerspectiveCamera(80,window.innerWidth/window.innerHeight,.5,1e5),this._camera.position.y=15,this._model.add(this._camera),this._collision=o["level-rooms"].children.filter((function(e){return"CAR_104"===e.name}))[0],this._collision.visible=!1,this._model.add(this._collision),this._frontObj=new u.Object3D,this._frontObj.position.set(0,0,-.5),this._model.add(this._frontObj),this._backObj=new u.Object3D,this._backObj.position.set(0,0,.5),this._model.add(this._backObj),this._compass=null,setTimeout((function(){a._compass=function(e){e.assets;var t=e.studio,a=e.system_Assets.items.arrow;a.material=e.materials.carNorm;var o=new u.Object3D;o.position.set(-500,-30,-500),t.addToScene(o);var r=new u.Mesh(new u.BoxGeometry(10,10,10),new u.MeshBasicMaterial({color:16711680}));return r.position.set(0,0,0),t.addToScene(o),new u.Vector3,{addToParent:function(e){e.add(a)},setArrowPosition:function(e,t,o){a.position.set(e,t,o)},setTargetPosition:function(e){o.position.copy(e)},update:function(){r.position.copy(a.parent.position),r.lookAt(o.position),a.parent.position.z<o.position.z?a.rotation.y=-a.parent.rotation.y+r.rotation.y:a.rotation.y=-a.parent.rotation.y-r.rotation.y+Math.PI},changeColor:function(t){"normal"===t&&(a.material=e.materials.carNorm),"green"===t&&(a.material=e.materials.testGreen1)}}}(t),a._compass.addToParent(a._model),a._compass.setArrowPosition(0,4.3,-26),a.setTargetPosition=function(e){a._compass.setTargetPosition(e),a._compass.update()}})),this._collisionsWalls=new se;var s=function(e,t){var o=a._collisionsWalls.checkCollisions(a._model,e,t);return Object(ie.a)(o,1)[0]};this.isFreeze=!0;var c={};this._onChangeStateIsStay=function(){},this._spd=0,this._acc=.1,this._deceleration=.02,this._maxSpdFront=-10,this._maxSpdBack=10,this._spdRot=.03,this._isCarStay=!0;this.update=function(e){if(!a.isFreeze){if(a._spd<0&&(s(a._frontObj,30)?a._spd=0:(a._model.translateZ(a._spd*e.count),a._compass.update())),a._spd>0&&(s(a._backObj,30)?a._spd=0:(a._model.translateZ(a._spd*e.count),a._compass.update())),c.up&&(a._spd-=a._acc),c.down&&(a._spd+=a._acc),Math.abs(a._spd)>.001){a._spd>0&&(a._spd-=a._deceleration,a._spd<0&&(a._spd=0)),a._spd<0&&(a._spd+=a._deceleration,a._spd>0&&(a._spd=0)),a._spd=Math.min(a._maxSpdBack,Math.max(a._maxSpdFront,a._spd));var o=Math.min(1,Math.max(0,Math.abs(a._spd)));c.left&&(a._spd<0&&(a._model.rotation.y+=a._spdRot*o),a._spd>0&&(a._model.rotation.y-=a._spdRot*o)),c.right&&(a._spd<0&&(a._model.rotation.y-=a._spdRot*o),a._spd>0&&(a._model.rotation.y+=a._spdRot*o))}else a._spd=0;a._isCarStay&&0!==a._spd&&(a._isCarStay=!1,t.system_Sound.startCar(),a._onChangeStateIsStay("carStart")),a._isCarStay||0!==a._spd||(console.log("stop"),a._isCarStay=!0,t.system_Sound.stopCar(),a._onChangeStateIsStay("carStop"))}},r.subscribe("keyEvent")((function(e){return c=e}))}return Object(w.a)(e,[{key:"setCollisionForDraw",value:function(e){this._collisionsWalls.setItemToCollision(e)}},{key:"removeCollisionForDraw",value:function(e){this._collisionsWalls.removeItemFromCollision(e)}},{key:"getModel",value:function(){return this._model}},{key:"getCollision",value:function(){return this._collision}},{key:"getCamera",value:function(){return this._camera}},{key:"toggleFreeze",value:function(e){console.log("freeze"),this.isFreeze=e}},{key:"onChangeCarStateMove",value:function(e){this._onChangeStateIsStay=e}},{key:"getPosition",value:function(){return this._model.position}},{key:"getQuaternion",value:function(){return this._model.quaternion}},{key:"subscribeOnMove",value:function(){}},{key:"toggleMat",value:function(e){var t=this._root.materials;"green"===e&&(this._compass.changeColor("green"),this._model.material=t.testGreen1),"red"===e&&(this._compass.changeColor("normal"),this._model.material=t.carNorm)}},{key:"updateBattary",value:function(){this._phase+=.05,this._battery.material.opacity=Math.sin(this._phase)+1}},{key:"batteryLight",value:function(){this._battery.material.opacity=0}}]),e}(),le=function(){function e(t){var a=this;Object(C.a)(this,e);var o=t.emitter,r=t.CONSTANTS,n=t.player;t.assets,t.studio;n.mesh.position.fromArray([0,0,0]);var i=new se,s=r.playerConfig,c=s.speed,l=s.speedDown,u=s.speedRot,p=!0;n.toggleBlocked=function(e){return p=e},this.isCanMove={forward:!0,back:!0},n.toggleCanMove=function(e,t){return a.isCanMove[e]=t},this.isFreeze=!1;var h={};this.update=function(e){a.isFreeze||(h.left&&n.mesh.rotateY(u*e.count),h.right&&n.mesh.rotateY(-u*e.count),p||(!function(e){var t=i.checkCollisions(n.mesh,n.bottomObj,17.2),a=Object(ie.a)(t,2),o=a[0],r=a[1];o&&17>r.distance?n.mesh.translateY(17-r.distance):o||(n.mesh.position.y+=l*e.count)}(e),h.up&&a.isCanMove.forward&&function(e){var t=i.checkCollisions(n.mesh,n.frontObj,17),a=Object(ie.a)(t,2),r=a[0],s=a[1];r?s.object.userData.type&&"alert"===s.object.userData.type&&o.emit("collision")(s.object.userData.event):(n.mesh.translateZ(-c*e.count),o.emit("playerMove")("forward"))}(e),h.down&&a.isCanMove.back&&function(e){var t=i.checkCollisions(n.mesh,n.backObj,17);Object(ie.a)(t,1)[0]||(n.mesh.translateZ(c*e.count),o.emit("playerMove")("back"))}(e),h.p&&console.log("player.mesh.position.fromArray([".concat(n.mesh.position.x,", ").concat(n.mesh.position.y,", ").concat(n.mesh.position.z,"])"))))},o.subscribe("keyEvent")((function(e){return h=e})),this._collisionsWalls=i}return Object(w.a)(e,[{key:"addItemToPlayerCollision",value:function(e){this._collisionsWalls.setItemToCollision(e)}},{key:"removeItemFromPlayerCollision",value:function(e){this._collisionsWalls.removeItemFromCollision(e)}},{key:"toggleFreeze",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isFreeze;this.isFreeze=e}}]),e}(),ue=function(){function e(t){var a=this;Object(C.a)(this,e),this._root=t;var o=t.emitter,r=t.player;this._itemsToCheck=[],o.subscribe("playerMove")((function(){for(var e=0;e<a._itemsToCheck.length;++e){var t=r.mesh.position.distanceTo(a._itemsToCheck[e].position);if(!a._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t<a._itemsToCheck[e].userData.nearPlayerItemNear)return a._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!0,void o.emit("checkNear")({item:a._itemsToCheck[e].userData.nearPlayerItemKey,is:!0});a._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t>a._itemsToCheck[e].userData.nearPlayerItemNear&&(a._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!1,o.emit("checkNear")({item:a._itemsToCheck[e].userData.nearPlayerItemKey,is:!1}))}}))}return Object(w.a)(e,[{key:"setItemToCheck",value:function(e,t,a,o){for(var r=0;r<this._itemsToCheck.length;++r)if(e===this._itemsToCheck[r])return;t&&(e.userData.nearPlayerItemKey=t),a&&(e.userData.nearPlayerItemNear=a),o&&(e.userData.nearPlayerItemFar=o),e.userData.nearPlayerIsNearPlayer=!1,this._itemsToCheck.push(e)}},{key:"removeItemFromCheck",value:function(e){this._itemsToCheck=this._itemsToCheck.filter((function(t){return t!==e}))}}]),e}(),pe=a(0),he=function(e,t){for(var a=[],o=e-1;o<e+2;++o)for(var r=t-1;r<t+2;++r)a.push(o+"_"+r);return a},me=function(e,t){for(var a=[],o=0;o<e.length;++o){for(var r=!1,n=0;n<t.length;++n)e[o]===t[n]&&(r=!0);r||a.push(e[o])}return a},be=Float32Array;function de(e,t,a){return(a=a||new be(3))[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],a}function fe(e,t){t=t||new be(3);var a=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return a>1e-5&&(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a),t}function ve(e,t,a){return(a=a||new be(3))[0]=e[1]*t[2]-e[2]*t[1],a[1]=e[2]*t[0]-e[0]*t[2],a[2]=e[0]*t[1]-e[1]*t[0],a}function Oe(e,t){var a=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return a*a+o*o+r*r}function ye(e,t){t=t||new be(16);var a=e[0],o=e[1],r=e[2],n=e[3],i=e[4],s=e[5],c=e[6],l=e[7],u=e[8],p=e[9],h=e[10],m=e[11],b=e[12],d=e[13],f=e[14],v=e[15],O=h*v,y=f*m,j=c*v,g=f*l,_=c*m,C=h*l,w=r*v,M=f*n,S=r*m,T=h*n,k=r*l,x=c*n,P=u*d,A=b*p,I=i*d,D=b*s,F=i*p,L=u*s,E=a*d,N=b*o,B=a*p,R=u*o,G=a*s,W=i*o,z=O*s+g*p+_*d-(y*s+j*p+C*d),U=y*o+w*p+T*d-(O*o+M*p+S*d),V=j*o+M*s+k*d-(g*o+w*s+x*d),K=C*o+S*s+x*p-(_*o+T*s+k*p),q=1/(a*z+i*U+u*V+b*K);return t[0]=q*z,t[1]=q*U,t[2]=q*V,t[3]=q*K,t[4]=q*(y*i+j*u+C*b-(O*i+g*u+_*b)),t[5]=q*(O*a+M*u+S*b-(y*a+w*u+T*b)),t[6]=q*(g*a+w*i+x*b-(j*a+M*i+k*b)),t[7]=q*(_*a+T*i+k*u-(C*a+S*i+x*u)),t[8]=q*(P*l+D*m+F*v-(A*l+I*m+L*v)),t[9]=q*(A*n+E*m+R*v-(P*n+N*m+B*v)),t[10]=q*(I*n+N*l+G*v-(D*n+E*l+W*v)),t[11]=q*(L*n+B*l+W*m-(F*n+R*l+G*m)),t[12]=q*(I*h+L*f+A*c-(F*f+P*c+D*h)),t[13]=q*(B*f+P*r+N*h-(E*h+R*f+A*r)),t[14]=q*(E*c+W*f+D*r-(G*f+I*r+N*c)),t[15]=q*(G*h+F*r+R*c-(B*c+W*h+L*r)),t}var je={copy:function(e,t){return(t=t||new be(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},lookAt:function(e,t,a,o){o=o||new be(16);var r=fe(de(e,t)),n=fe(ve(a,r)),i=fe(ve(r,n));return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=0,o[4]=i[0],o[5]=i[1],o[6]=i[2],o[7]=0,o[8]=r[0],o[9]=r[1],o[10]=r[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},addVectors:function(e,t,a){return(a=a||new be(3))[0]=e[0]+t[0],a[1]=e[1]+t[1],a[2]=e[2]+t[2],a},subtractVectors:de,scaleVector:function(e,t,a){return(a=a||new be(3))[0]=e[0]*t,a[1]=e[1]*t,a[2]=e[2]*t,a},distance:function(e,t){return Math.sqrt(Oe(e,t))},distanceSq:Oe,normalize:fe,compose:function(e,t,a,o){o=o||new be(16);var r=t[0],n=t[1],i=t[2],s=t[3],c=r+r,l=n+n,u=i+i,p=r*c,h=r*l,m=r*u,b=n*l,d=n*u,f=i*u,v=s*c,O=s*l,y=s*u,j=a[0],g=a[1],_=a[2];return o[0]=(1-(b+f))*j,o[1]=(h+y)*j,o[2]=(m-O)*j,o[3]=0,o[4]=(h-y)*g,o[5]=(1-(p+f))*g,o[6]=(d+v)*g,o[7]=0,o[8]=(m+O)*_,o[9]=(d-v)*_,o[10]=(1-(p+b))*_,o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},cross:ve,decompose:function(e,t,a,o){var r=je.length(e.slice(0,3)),n=je.length(e.slice(4,7)),i=je.length(e.slice(8,11));(function(e){var t=e[0],a=e[1],o=e[2],r=e[3],n=e[4],i=e[5],s=e[6],c=e[7],l=e[8],u=e[9],p=e[10],h=e[11],m=e[12],b=e[13],d=e[14],f=e[15],v=p*f,O=d*h,y=s*f,j=d*c,g=s*h,_=p*c,C=o*f,w=d*r,M=o*h,S=p*r,T=o*c,k=s*r;return 1/(t*(v*i+j*u+g*b-(O*i+y*u+_*b))+n*(O*a+C*u+S*b-(v*a+w*u+M*b))+l*(y*a+w*i+T*b-(j*a+C*i+k*b))+m*(_*a+M*i+k*u-(g*a+S*i+T*u)))})(e)<0&&(r=-r),t[0]=e[12],t[1]=e[13],t[2]=e[14];var s=je.copy(e),c=1/r,l=1/n,u=1/i;s[0]*=c,s[1]*=c,s[2]*=c,s[4]*=l,s[5]*=l,s[6]*=l,s[8]*=u,s[9]*=u,s[10]*=u,function(e,t){var a=e[0],o=e[4],r=e[8],n=e[1],i=e[5],s=e[9],c=e[2],l=e[6],u=e[10],p=a+i+u;if(p>0){var h=.5/Math.sqrt(p+1);t[3]=.25/h,t[0]=(l-s)*h,t[1]=(r-c)*h,t[2]=(n-o)*h}else if(a>i&&a>u){var m=2*Math.sqrt(1+a-i-u);t[3]=(l-s)/m,t[0]=.25*m,t[1]=(o+n)/m,t[2]=(r+c)/m}else if(i>u){var b=2*Math.sqrt(1+i-a-u);t[3]=(r-c)/b,t[0]=(o+n)/b,t[1]=.25*b,t[2]=(s+l)/b}else{var d=2*Math.sqrt(1+u-a-i);t[3]=(n-o)/d,t[0]=(r+c)/d,t[1]=(s+l)/d,t[2]=.25*d}}(s,a),o[0]=r,o[1]=n,o[2]=i},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},identity:function(e){return(e=e||new be(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new be(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},orthographic:function(e,t,a,o,r,n,i){return(i=i||new be(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(o-a),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(r-n),i[11]=0,i[12]=(e+t)/(e-t),i[13]=(a+o)/(a-o),i[14]=(r+n)/(r-n),i[15]=1,i},frustum:function(e,t,a,o,r,n,i){var s=t-e,c=o-a,l=n-r;return(i=i||new be(16))[0]=2*r/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*r/c,i[6]=0,i[7]=0,i[8]=(e+t)/s,i[9]=(o+a)/c,i[10]=-(n+r)/l,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*r*n/l,i[15]=0,i},perspective:function(e,t,a,o,r){r=r||new be(16);var n=Math.tan(.5*Math.PI-.5*e),i=1/(a-o);return r[0]=n/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(a+o)*i,r[11]=-1,r[12]=0,r[13]=0,r[14]=a*o*i*2,r[15]=0,r},translation:function(e,t,a,o){return(o=o||new be(16))[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=e,o[13]=t,o[14]=a,o[15]=1,o},translate:function(e,t,a,o,r){r=r||new be(16);var n=e[0],i=e[1],s=e[2],c=e[3],l=e[4],u=e[5],p=e[6],h=e[7],m=e[8],b=e[9],d=e[10],f=e[11],v=e[12],O=e[13],y=e[14],j=e[15];return e!==r&&(r[0]=n,r[1]=i,r[2]=s,r[3]=c,r[4]=l,r[5]=u,r[6]=p,r[7]=h,r[8]=m,r[9]=b,r[10]=d,r[11]=f),r[12]=n*t+l*a+m*o+v,r[13]=i*t+u*a+b*o+O,r[14]=s*t+p*a+d*o+y,r[15]=c*t+h*a+f*o+j,r},xRotation:function(e,t){t=t||new be(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=o,t[7]=0,t[8]=0,t[9]=-o,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yRotation:function(e,t){t=t||new be(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=a,t[1]=0,t[2]=-o,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=o,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zRotation:function(e,t){t=t||new be(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=a,t[1]=o,t[2]=0,t[3]=0,t[4]=-o,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xRotate:function(e,t,a){a=a||new be(16);var o=e[4],r=e[5],n=e[6],i=e[7],s=e[8],c=e[9],l=e[10],u=e[11],p=Math.cos(t),h=Math.sin(t);return a[4]=p*o+h*s,a[5]=p*r+h*c,a[6]=p*n+h*l,a[7]=p*i+h*u,a[8]=p*s-h*o,a[9]=p*c-h*r,a[10]=p*l-h*n,a[11]=p*u-h*i,e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},yRotate:function(e,t,a){a=a||new be(16);var o=e[0],r=e[1],n=e[2],i=e[3],s=e[8],c=e[9],l=e[10],u=e[11],p=Math.cos(t),h=Math.sin(t);return a[0]=p*o-h*s,a[1]=p*r-h*c,a[2]=p*n-h*l,a[3]=p*i-h*u,a[8]=p*s+h*o,a[9]=p*c+h*r,a[10]=p*l+h*n,a[11]=p*u+h*i,e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},zRotate:function(e,t,a){a=a||new be(16);var o=e[0],r=e[1],n=e[2],i=e[3],s=e[4],c=e[5],l=e[6],u=e[7],p=Math.cos(t),h=Math.sin(t);return a[0]=p*o+h*s,a[1]=p*r+h*c,a[2]=p*n+h*l,a[3]=p*i+h*u,a[4]=p*s-h*o,a[5]=p*c-h*r,a[6]=p*l-h*n,a[7]=p*u-h*i,e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},axisRotation:function(e,t,a){a=a||new be(16);var o=e[0],r=e[1],n=e[2],i=Math.sqrt(o*o+r*r+n*n),s=(o/=i)*o,c=(r/=i)*r,l=(n/=i)*n,u=Math.cos(t),p=Math.sin(t),h=1-u;return a[0]=s+(1-s)*u,a[1]=o*r*h+n*p,a[2]=o*n*h-r*p,a[3]=0,a[4]=o*r*h-n*p,a[5]=c+(1-c)*u,a[6]=r*n*h+o*p,a[7]=0,a[8]=o*n*h+r*p,a[9]=r*n*h-o*p,a[10]=l+(1-l)*u,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},axisRotate:function(e,t,a,o){o=o||new be(16);var r=t[0],n=t[1],i=t[2],s=Math.sqrt(r*r+n*n+i*i),c=(r/=s)*r,l=(n/=s)*n,u=(i/=s)*i,p=Math.cos(a),h=Math.sin(a),m=1-p,b=c+(1-c)*p,d=r*n*m+i*h,f=r*i*m-n*h,v=r*n*m-i*h,O=l+(1-l)*p,y=n*i*m+r*h,j=r*i*m+n*h,g=n*i*m-r*h,_=u+(1-u)*p,C=e[0],w=e[1],M=e[2],S=e[3],T=e[4],k=e[5],x=e[6],P=e[7],A=e[8],I=e[9],D=e[10],F=e[11];return o[0]=b*C+d*T+f*A,o[1]=b*w+d*k+f*I,o[2]=b*M+d*x+f*D,o[3]=b*S+d*P+f*F,o[4]=v*C+O*T+y*A,o[5]=v*w+O*k+y*I,o[6]=v*M+O*x+y*D,o[7]=v*S+O*P+y*F,o[8]=j*C+g*T+_*A,o[9]=j*w+g*k+_*I,o[10]=j*M+g*x+_*D,o[11]=j*S+g*P+_*F,e!==o&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o},scaling:function(e,t,a,o){return(o=o||new be(16))[0]=e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},scale:function(e,t,a,o,r){return(r=r||new be(16))[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=t*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=a*e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=o*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},multiply:function(e,t,a){a=a||new be(16);var o=t[0],r=t[1],n=t[2],i=t[3],s=t[4],c=t[5],l=t[6],u=t[7],p=t[8],h=t[9],m=t[10],b=t[11],d=t[12],f=t[13],v=t[14],O=t[15],y=e[0],j=e[1],g=e[2],_=e[3],C=e[4],w=e[5],M=e[6],S=e[7],T=e[8],k=e[9],x=e[10],P=e[11],A=e[12],I=e[13],D=e[14],F=e[15];return a[0]=o*y+r*C+n*T+i*A,a[1]=o*j+r*w+n*k+i*I,a[2]=o*g+r*M+n*x+i*D,a[3]=o*_+r*S+n*P+i*F,a[4]=s*y+c*C+l*T+u*A,a[5]=s*j+c*w+l*k+u*I,a[6]=s*g+c*M+l*x+u*D,a[7]=s*_+c*S+l*P+u*F,a[8]=p*y+h*C+m*T+b*A,a[9]=p*j+h*w+m*k+b*I,a[10]=p*g+h*M+m*x+b*D,a[11]=p*_+h*S+m*P+b*F,a[12]=d*y+f*C+v*T+O*A,a[13]=d*j+f*w+v*k+O*I,a[14]=d*g+f*M+v*x+O*D,a[15]=d*_+f*S+v*P+O*F,a},inverse:ye,transformVector:function(e,t,a){a=a||new be(4);for(var o=0;o<4;++o){a[o]=0;for(var r=0;r<4;++r)a[o]+=t[r]*e[4*r+o]}return a},transformPoint:function(e,t,a){a=a||new be(3);var o=t[0],r=t[1],n=t[2],i=o*e[3]+r*e[7]+n*e[11]+e[15];return a[0]=(o*e[0]+r*e[4]+n*e[8]+e[12])/i,a[1]=(o*e[1]+r*e[5]+n*e[9]+e[13])/i,a[2]=(o*e[2]+r*e[6]+n*e[10]+e[14])/i,a},transformDirection:function(e,t,a){a=a||new be(3);var o=t[0],r=t[1],n=t[2];return a[0]=o*e[0]+r*e[4]+n*e[8],a[1]=o*e[1]+r*e[5]+n*e[9],a[2]=o*e[2]+r*e[6]+n*e[10],a},transformNormal:function(e,t,a){a=a||new be(3);var o=ye(e),r=t[0],n=t[1],i=t[2];return a[0]=r*o[0]+n*o[1]+i*o[2],a[1]=r*o[4]+n*o[5]+i*o[6],a[2]=r*o[8]+n*o[9]+i*o[10],a},setDefaultType:function(e){var t=be;return be=e,t}},ge=(Math.floor,Math.random),_e=function(e,t){return e+ge()*(t-e)},Ce=function(e,t,a,o){return[].concat(Object(pe.a)(e),Object(pe.a)(t),Object(pe.a)(a),Object(pe.a)(e),Object(pe.a)(a),Object(pe.a)(o))},we=function(e,t,a,o){return[].concat(Object(pe.a)(e),Object(pe.a)(t),Object(pe.a)(a),Object(pe.a)(e),Object(pe.a)(a),Object(pe.a)(o))},Me=function(e){return[].concat(Object(pe.a)(e),Object(pe.a)(e),Object(pe.a)(e),Object(pe.a)(e),Object(pe.a)(e),Object(pe.a)(e))},Se=function(e,t,a,o,r,n){var i=t[0]-e[0],s=a[1]-e[1],c=_e(.3*i,.7*i),l=_e(.3*s,.7*s),u=e[0]+(i-c)/2,p=t[0]-(i-c)/2,h=e[1]+(s-l)/2,m=a[1]-(s-l)/2,b=[u,h,e[2]],d=[p,h,e[2]],f=[p,m,e[2]],v=[u,m,e[2]],O=[];return O.push.apply(O,Object(pe.a)(Ce(b,d,f,v)).concat(Object(pe.a)(Ce(e,t,d,b)),Object(pe.a)(Ce(d,t,a,f)),Object(pe.a)(Ce(v,f,a,o)),Object(pe.a)(Ce(e,b,v,o)))),{vArr:O,cArr:Te(r,n),uArr:[].concat(Object(pe.a)(we([.5,.5],[1,.5],[1,1],[.5,1])),Object(pe.a)(we([0,.5],[.5,.5],[.4,.6],[.1,.6])),Object(pe.a)(we([.4,.6],[.5,.5],[.5,1],[.4,.9])),Object(pe.a)(we([.1,.9],[.4,.9],[.5,1],[0,1])),Object(pe.a)(we([0,.5],[.1,.6],[.1,.9],[0,1])))}},Te=function(e,t){return[].concat(Object(pe.a)(Me(e)),Object(pe.a)(Me(t)),Object(pe.a)(Me(t)),Object(pe.a)(Me(t)),Object(pe.a)(Me(t)))},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=je.yRotation(r);n=je.translate(n,t,a,o);for(var i=0;i<e.length;i+=3){var s=je.transformPoint(n,[e[i+0],e[i+1],e[i+2],1]);e[i+0]=s[0],e[i+1]=s[1],e[i+2]=s[2]}},xe=function(e,t){for(var a=je.yRotation(t),o=0;o<e.length;o+=3){var r=je.transformPoint(a,[e[o+0],e[o+1],e[o+2],1]);e[o+0]=r[0],e[o+1]=r[1],e[o+2]=r[2]}},Pe=function(e,t){for(var a=je.yRotation(t),o=0;o<e.length;o+=3){var r=je.transformPoint(a,[e[o+0],e[o+1],e[o+2],1]);e[o+0]=r[0],e[o+1]=r[1],e[o+2]=r[2]}},Ae=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=je.translation(t,a,o),n=0;n<e.length;n+=3){var i=je.transformPoint(r,[e[n+0],e[n+1],e[n+2],1]);e[n+0]=i[0],e[n+1]=i[1],e[n+2]=i[2]}},Ie=function(e){var t=e.h0,a=e.h1,o=e.color1,r=void 0===o?[.2,.1,.1]:o,n=e.color2,i=void 0===n?[1,1,1]:n,s=e.rBase,c=void 0===s?5:s,l=e.hBase,u=void 0===l?5:l,p=e.hBaseToTrunk,h=void 0===p?1:p,m=e.hCapital,b=void 0===m?2:m,d=e.rCapital,O=void 0===d?6:d,y=e.hTrunkToCapital,j=void 0===y?1:y,g=e.rTrunk,_=void 0===g?3:g,C=t,w=t+u,M=Ce([-c,C,c],[c,C,c],[c,w,c],[-c,w,c]),S=Me(r),T=we([.5,0],[1,0],[1,.5],[.5,.5]),k=Ce([c+v,C-v,c+v],[-c-v,C-v,c+v],[-c-v,w,c+v],[c+v,w,c+v]),x=Me(f),P=we([0,1],[0,1],[0,1],[0,1]);w=(C=w)+h;var A=Object(pe.a)(Ce([-c,C,c],[c,C,c],[_,w,_],[-_,w,_])),I=Object(pe.a)(Me(i)),D=we([0,.5],[.5,.5],[.4,.7],[.1,.7]),F=function(e){for(var t=e.h,a=void 0===t?2:t,o=e.h2,r=void 0===o?30:o,n=e.r,i=void 0===n?10:n,s=e.color1,c=void 0===s?[.2,.1,.1]:s,l=e.color2,u=void 0===l?[1,1,1]:l,p=[],h=r-a,m=a;h>0;){var b=_e(.5,10),d=_e(.5,4),f=_e(.5,4),v=_e(.5,.2),O=b+d+f+v;(h-=O)>5&&p.push({h0:m,h01:m+b,h02:m+b+d,h03:m+b+d+f,h04:m+b+d+f+v,r:_e(1,10)}),m+=O}var y=[],j=[],g=[];if(0===p.length)y.push.apply(y,Object(pe.a)(Ce([-i,a,i],[i,a,i],[i,r,i],[-i,r,i]))),j.push.apply(j,Object(pe.a)(Me(c))),g.push.apply(g,Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])));else{for(var _=0;_<p.length;++_){var C=Se([-i,p[_].h0,i],[i,p[_].h0,i],[i,p[_].h01,i],[-i,p[_].h01,i],u,u),w=C.vArr,M=C.cArr,S=C.uArr;y.push.apply(y,Object(pe.a)(w)),j.push.apply(j,Object(pe.a)(M)),g.push.apply(g,Object(pe.a)(S)),y.push.apply(y,Object(pe.a)(Ce([-i,p[_].h01,i],[i,p[_].h01,i],[p[_].r,p[_].h02,p[_].r],[-p[_].r,p[_].h02,p[_].r]))),j.push.apply(j,Object(pe.a)(Me(u))),g.push.apply(g,Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1]))),y.push.apply(y,Object(pe.a)(Ce([-p[_].r,p[_].h02,p[_].r],[p[_].r,p[_].h02,p[_].r],[p[_].r,p[_].h03,p[_].r],[-p[_].r,p[_].h03,p[_].r]))),j.push.apply(j,Object(pe.a)(Me(c))),g.push.apply(g,Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1]))),y.push.apply(y,Object(pe.a)(Ce([-p[_].r,p[_].h03,p[_].r],[p[_].r,p[_].h03,p[_].r],[i,p[_].h04,i],[-i,p[_].h04,i]))),j.push.apply(j,Object(pe.a)(Me(u))),g.push.apply(g,Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])))}var T=Se([-i,p[p.length-1].h04,i],[i,p[p.length-1].h04,i],[i,r,i],[-i,r,i],u,c),k=T.vArr,x=T.cArr,P=T.uArr;y.push.apply(y,Object(pe.a)(k)),j.push.apply(j,Object(pe.a)(x)),g.push.apply(g,Object(pe.a)(P))}return{vert:y,col:j,uv:g}}({color1:r,color2:i,h:C=w,h2:w=a-b-j,r:_}),L=F.vert,E=F.col,N=F.uv;C=w,w=a-b;var B=Object(pe.a)(Ce([-_,C,_],[_,C,_],[O,w,O],[-O,w,O]));C=w,w=a;var R=Object(pe.a)(Ce([-O,C,O],[O,C,O],[O,w,O],[-O,w,O])),G=we([.5,.5],[1,.5],[1,0],[.5,0]);return{frontVert:[].concat(Object(pe.a)(M),Object(pe.a)(k),Object(pe.a)(A),Object(pe.a)(L),Object(pe.a)(B),Object(pe.a)(R)),frontColors:[].concat(Object(pe.a)(S),Object(pe.a)(x),Object(pe.a)(I),Object(pe.a)(E),Object(pe.a)(I),Object(pe.a)(S)),frontUV:[].concat(Object(pe.a)(T),Object(pe.a)(P),Object(pe.a)(D),Object(pe.a)(N),Object(pe.a)(D),Object(pe.a)(G))}},De=20,Fe=[0,0,0],Le=[0,.7,0],Ee=function(e){var t=e.h0,a=void 0===t?0:t,o=e.h1,r=void 0===o?30:o,n=e.rCapital,i=void 0===n?6:n,s=e.rBase,c=void 0===s?5:s,l=e.capTop,u=void 0!==l&&l,p=e.capBottom,h=void 0!==p&&p,m=Ie({h0:a,h1:r,color1:Fe,color2:Le,rCapital:i,rBase:c}),b=m.frontVert,d=m.frontColors,O=m.frontUV,y=Object(pe.a)(b);ke(y,0,0,0,Math.PI/2);var j=Object(pe.a)(b);ke(j,0,0,0,-Math.PI/2);var g=Object(pe.a)(b);ke(g,0,0,0,Math.PI);var _=[].concat(Object(pe.a)(b),Object(pe.a)(y),Object(pe.a)(j),Object(pe.a)(g)),C=[].concat(Object(pe.a)(d),Object(pe.a)(d),Object(pe.a)(d),Object(pe.a)(d)),w=[].concat(Object(pe.a)(O),Object(pe.a)(O),Object(pe.a)(O),Object(pe.a)(O)),M=.6,S=[].concat(Object(pe.a)(Ce([-c-M,a,c+M],[c+M,a,c+M],[c+M,r,c+M],[-c-M,r,c+M])),Object(pe.a)(Ce([c+M,a,c+M],[c+M,a,-c-M],[c+M,r,-c-M],[c+M,r,c+M])),Object(pe.a)(Ce([c+M,a,-c-M],[-c-M,a,-c-M],[-c-M,r,-c-M],[c+M,r,-c-M])),Object(pe.a)(Ce([-c-M,a,-c-M],[-c-M,a,c+M],[-c-M,r,c+M],[-c-M,r,-c-M]))),T=[].concat(Object(pe.a)(Ce([-20,a,De],[De,a,De],[De,r,De],[-20,r,De])),Object(pe.a)(Ce([De,a,De],[De,a,-20],[De,r,-20],[De,r,De])),Object(pe.a)(Ce([De,a,-20],[-20,a,-20],[-20,r,-20],[De,r,-20])),Object(pe.a)(Ce([-20,a,-20],[-20,a,De],[-20,r,De],[-20,r,-20])));return h&&(_.push.apply(_,Object(pe.a)(Ce([-c-v,a-v,c+v],[c+v,a-v,c+v],[c,a-v,-c-v],[-c,a-v,-c-v]))),C.push.apply(C,Object(pe.a)(Me(f))),w.push.apply(w,Object(pe.a)(we([0,1],[0,1],[0,1],[0,1])))),u&&(_.push.apply(_,Object(pe.a)(Ce([-i,r,i],[i,r,i],[i,r,-i],[-i,r,-i]))),C.push.apply(C,Object(pe.a)(Me(Fe))),w.push.apply(w,Object(pe.a)(we([.5,0],[1,0],[1,.5],[.5,.5])))),{v:_,c:C,u:w,collision:S,collisionCar:T}},Ne=function(e){var t=e.isColumn,a=e.h1,o=e.h2,r=e.color1,n=e.color2;if(!t)return{vertColumn:[],colorsColumn:[],uvColumn:[]};var i=[],s=[],c=[],l=o-5;i.push.apply(i,Object(pe.a)(Ce([-4,a,4],[4,a,4],[4,o,4],[-4,o,4])).concat(Object(pe.a)(Ce([4,a,4],[4,a,-4],[4,o,-4],[4,o,4])),Object(pe.a)(Ce([4,a,-4],[-4,a,-4],[-4,o,-4],[4,o,-4])),Object(pe.a)(Ce([-4,a,-4],[-4,a,4],[-4,o,4],[-4,o,-4])),Object(pe.a)(Ce([-6,l,6],[6,l,6],[6,o,6],[-6,o,6])),Object(pe.a)(Ce([6,l,6],[6,l,-6],[6,o,-6],[6,o,6])),Object(pe.a)(Ce([6,l,-6],[-6,l,-6],[-6,o,-6],[6,o,-6])),Object(pe.a)(Ce([-6,l,-6],[-6,l,6],[-6,o,6],[-6,o,-6])),Object(pe.a)(Ce([-6,l,6],[-6,l,-6],[6,l,-6],[6,l,6])),Object(pe.a)(Ce([-6,o,-6],[-6,o,6],[6,o,6],[6,o,-6])))),s.push.apply(s,Object(pe.a)(Me(n)).concat(Object(pe.a)(Me(n)),Object(pe.a)(Me(n)),Object(pe.a)(Me(n)),Object(pe.a)(Me(r)),Object(pe.a)(Me(r)),Object(pe.a)(Me(r)),Object(pe.a)(Me(r)),Object(pe.a)(Me(r)),Object(pe.a)(Me(r))));var u=we([0,.5],[.5,.5],[.5,1],[0,1]);return c.push.apply(c,Object(pe.a)(u).concat(Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u),Object(pe.a)(u))),{vertColumn:i,colorsColumn:s,uvColumn:c}},Be=Math.PI,Re=Math.cos,Ge=Be/2,We=[0,0,0],ze=Math.sin,Ue=Math.cos,Ve=function(e){var t=e.isTopElem,a=e.color1,o=e.color2,r=e.h2;if(!t)return{vertTopElem:[],colorsTopElem:[],uvTopElem:[]};for(var n=[],i=[],s=[],c=2+12*Math.random(),l=1+4*Math.random(),u=.2+40*Math.random(),p=.1+10*Math.random(),h=.1+10*Math.random(),m=.1+40*Math.random(),b=0;b<6;++b){var d=b+1;d>6&&(d=0);var O=b/6*Math.PI*2,y=d/6*Math.PI*2,j=r,g=j+c,_=6,C=6,w=ze(O),M=Ue(O),S=ze(y),T=Ue(y);n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C]))),g=(j=g)+l,_=C,C=3,n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C]))),g=(j=g)+u,C=_=C,n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C]))),g=(j=g)+p,C=(_=C)+4,n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C]))),g=(j=g)+h,C=_=C,n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C])));var k=v+.5;n.push.apply(n,Object(pe.a)(Ce([S*(_+k),j,T*(_+k)],[w*(_+k),j,M*(_+k)],[w*(C+k),g,M*(C+k)],[S*(C+k),g,T*(C+k)]))),n.push.apply(n,Object(pe.a)(Ce([w*C,g,M*C],[S*C,g,T*C],[2*S,g,2*T],[2*ze(O),g,2*M]))),g=(j=g)+m,_=2,C=7,n.push.apply(n,Object(pe.a)(Ce([w*_,j,M*_],[S*_,j,T*_],[S*C,g,T*C],[w*C,g,M*C])));var x=v;n.push.apply(n,Object(pe.a)(Ce([S*(_+x),j,T*(_+x)],[w*(_+x),j,M*(_+x)],[w*(C+x),g,M*(C+x)],[S*(C+x),g,T*(C+x)]))),j=g,g+=m,n.push(w*C,j,M*C,S*C,j,T*C,0,g,0),n.push(S*(C+.5),j,T*(C+.5),w*(C+.5),j,M*(C+.5),0,g+3,0),i.push.apply(i,Object(pe.a)(Me(a)).concat(Object(pe.a)(Me(o)),Object(pe.a)(Me(o)),Object(pe.a)(Me(o)),Object(pe.a)(Me(a)),Object(pe.a)(Me(f)),Object(pe.a)(Me(a)),Object(pe.a)(Me(a)),Object(pe.a)(Me(f)),Object(pe.a)(a),Object(pe.a)(a),Object(pe.a)(a),Object(pe.a)(f),Object(pe.a)(f),Object(pe.a)(f))),s.push.apply(s,Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])).concat(Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,1],[0,1],[0,1],[0,1])),Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,.5],[.5,.5],[.5,1],[0,1])),Object(pe.a)(we([0,1],[0,1],[0,1],[0,1])),[0,.5],[.5,.5],[.25,1],[0,1],[0,1],[0,1]))}return{vertTopElem:n,colorsTopElem:i,uvTopElem:s}},Ke=[0,0,0],qe=function(e,t,a){var o=e.h,r=e.r,n=e.x,i=e.z,s=e.bridgeL,c=e.bridgeMinusH,l=e.hColumn,u=e.rColumn,p=e.i,h=o-5,m=Math.min(l*(.35*Math.random()+.1),50),b=[],d=[],f=[],v=[],O=[],y=function(e){var t=e.r,a=e.h,o=e.hh,r=e.bridgeMinusH,n=e.bridgeL,i=e.color2,s=e.colorB,c=[],l=[],u=[],p=[],h=we([0,.5],[.5,.5],[.5,1],[0,1]),m=we([0,0],[0,0],[0,0],[0,0]);return c.push.apply(c,Object(pe.a)(Ce([-t,a,t],[t,a,t],[t,a,-t],[-t,a,-t])).concat(Object(pe.a)(Ce([-t,o,t],[t,o,t],[t,a,t],[-t,a,t])),Object(pe.a)(Ce([-t,o,-t],[-t,o,t],[-t,a,t],[-t,a,-t])),Object(pe.a)(Ce([t,o,t],[t,o,-t],[t,a,-t],[t,a,t])),Object(pe.a)(Ce([t,o,-t],[-t,o,-t],[-t,a,-t],[t,a,-t])),Object(pe.a)(Ce([t,o,-t],[t,o,t],[-t,o,t],[-t,o,-t])),Object(pe.a)(Ce([-t,a,-t],[t,a,-t],[t,a-r,-t-n],[-t,a-r,-t-n])),Object(pe.a)(Ce([-t,o-r,-t-n],[-t,o,-t],[-t,a,-t],[-t,a-r,-t-n])),Object(pe.a)(Ce([t,o,-t],[t,o-r,-t-n],[t,a-r,-t-n],[t,a,-t])),Object(pe.a)(Ce([-t,o-r,-t-n],[t,o-r,-t-n],[t,o,-t],[-t,o,-t])))),l.push.apply(l,Object(pe.a)(Me(i)).concat(Object(pe.a)(Me(s)),Object(pe.a)(Me(s)),Object(pe.a)(Me(s)),Object(pe.a)(Me(i)),Object(pe.a)(Me(i)),Object(pe.a)(Me(i)),Object(pe.a)(Me(s)),Object(pe.a)(Me(s)),Object(pe.a)(Me(i)))),u.push.apply(u,Object(pe.a)(h).concat(Object(pe.a)(m),Object(pe.a)(m),Object(pe.a)(m),Object(pe.a)(m),Object(pe.a)(h),Object(pe.a)(h),Object(pe.a)(m),Object(pe.a)(m),Object(pe.a)(h))),p.push.apply(p,Object(pe.a)(Ce([-t,a,t],[t,a,t],[t,a,-t],[-t,a,-t])).concat(Object(pe.a)(Ce([-t,a,-t],[t,a,-t],[t,a-r,-t-n],[-t,a-r,-t-n])))),{v:c,c:l,u:u,collision:p}}({h:o,hh:h,colorB:Ke,color2:a,bridgeL:s,bridgeMinusH:c,r:r});b.push.apply(b,Object(pe.a)(y.v)),d.push.apply(d,Object(pe.a)(y.c)),f.push.apply(f,Object(pe.a)(y.u)),v.push.apply(v,Object(pe.a)(y.collision));var j=Ee({h0:h-l-.1,h1:h-m,capTop:!0,capBottom:!0});Ae(j.v,r,0,r),b.push.apply(b,Object(pe.a)(j.v)),d.push.apply(d,Object(pe.a)(j.c)),f.push.apply(f,Object(pe.a)(j.u)),Ae(j.collision,r,0,r),v.push.apply(v,Object(pe.a)(j.collision)),j.collisionCar&&(Ae(j.collisionCar,r,0,r),O.push.apply(O,Object(pe.a)(j.collisionCar)));var g=Ne({isColumn:!0,h1:h-m,h2:h,color1:[0,0,0],color2:a});Ae(g.vertColumn,r,0,r),b.push.apply(b,Object(pe.a)(g.vertColumn)),d.push.apply(d,Object(pe.a)(g.colorsColumn)),f.push.apply(f,Object(pe.a)(g.uvColumn));var _=function(e){for(var t=e.hArc,a=void 0===t?15:t,o=e.arcL,r=void 0===o?15:o,n=e.color2,i=[],s=[],c=[],l=r/5,u=0;u<5;++u){var p=Re(u/5*Ge),h=Re((u+1)/5*Ge);i.push(u*l,0+p*a,.1,(u+1)*l,0+h*a,.1,r,a,1),i.push(u*l,0+p*a,-2,r,a,-2,(u+1)*l,0+h*a,-2),s.push.apply(s,Object(pe.a)(n).concat(Object(pe.a)(n),Object(pe.a)(n),Object(pe.a)(n),Object(pe.a)(n),Object(pe.a)(n))),c.push(0,0,.3,0,.3,.3,0,0,.3,0,.3,.3),i.push.apply(i,Object(pe.a)(Ce([u*l,0+p*a,.1],[u*l,0+p*a,-2],[(u+1)*l,0+h*a,-2],[(u+1)*l,0+h*a,.1]))),s.push.apply(s,Object(pe.a)(Me(We))),c.push(0,0,0,0,0,0,0,0,0,0,0,0)}return{v:i,c:s,u:c}}({hArc:m,arcL:40,color2:a});if(Ae(_.v,r-u-40,h-m,r),b.push.apply(b,Object(pe.a)(_.v)),d.push.apply(d,Object(pe.a)(_.c)),f.push.apply(f,Object(pe.a)(_.u)),e.isTop){var C=Ve({isTopElem:!0,color1:[0,0,0],color2:a,h2:h});Ae(C.vertTopElem,r,0,r),b.push.apply(b,Object(pe.a)(C.vertTopElem)),d.push.apply(d,Object(pe.a)(C.colorsTopElem)),f.push.apply(f,Object(pe.a)(C.uvTopElem))}return xe(b,Math.PI-Math.PI/2*p),Ae(b,n,0,i),xe(v,Math.PI-Math.PI/2*p),Ae(v,n,0,i),xe(O,Math.PI-Math.PI/2*p),Ae(O,n,0,i),{v:b,c:d,u:f,collision:v,collisionCar:O}},He=[[30,-30],[70,-30],[70,-70],[30,-70]],Qe=[[30,30],[70,30],[70,-30],[30,-30]],Ye=[[-70,70],[-30,70],[-30,30],[-70,30]],Ze=[[-30,70],[30,70],[30,30],[-30,30]],Xe=[[30,70],[70,70],[70,30],[30,30]],Je={N:[Ye],W:[Ye,Ze,Xe],S:[Ye,Ze,Xe,Qe,He],E:[Ye,Ze,Xe,Qe,He,[[-30,-30],[30,-30],[30,-70],[-30,-70]],[[-70,-30],[-30,-30],[-30,-70],[-70,-70]]]},$e=function(e){var t=e.xCenter,a=e.zCenter,o=e.h,r=e.dir,n=e.color2,i=void 0===n?[0,.7,0]:n,s=e.colorB,c=void 0===s?[0,0,0]:s,l=o-3,u=[],p=[],h=[],m=[],b=we([0,.5],[.5,.5],[.5,1],[0,1]),d=we([0,0],[0,0],[0,0],[0,0]);if(Je[r])for(var f=0;f<Je[r].length;++f){var v=Je[r][f];u.push.apply(u,Object(pe.a)(Ce([v[0][0],o,v[0][1]],[v[1][0],o,v[1][1]],[v[2][0],o,v[2][1]],[v[3][0],o,v[3][1]])).concat(Object(pe.a)(Ce([v[3][0],l,v[3][1]],[v[2][0],l,v[2][1]],[v[1][0],l,v[1][1]],[v[0][0],l,v[0][1]])),Object(pe.a)(Ce([v[0][0],l,v[0][1]],[v[1][0],l,v[1][1]],[v[1][0],o,v[1][1]],[v[0][0],o,v[0][1]])),Object(pe.a)(Ce([v[1][0],l,v[1][1]],[v[2][0],l,v[2][1]],[v[2][0],o,v[2][1]],[v[1][0],o,v[1][1]])),Object(pe.a)(Ce([v[2][0],l,v[2][1]],[v[3][0],l,v[3][1]],[v[3][0],o,v[3][1]],[v[2][0],o,v[2][1]])),Object(pe.a)(Ce([v[3][0],l,v[3][1]],[v[0][0],l,v[0][1]],[v[0][0],o,v[0][1]],[v[3][0],o,v[3][1]])))),p.push.apply(p,Object(pe.a)(Me(i)).concat(Object(pe.a)(Me(i)),Object(pe.a)(Me(c)),Object(pe.a)(Me(c)),Object(pe.a)(Me(c)),Object(pe.a)(Me(c)))),h.push.apply(h,Object(pe.a)(b).concat(Object(pe.a)(b),Object(pe.a)(d),Object(pe.a)(d),Object(pe.a)(d),Object(pe.a)(d))),m.push.apply(m,Object(pe.a)(Ce([v[0][0],o,v[0][1]],[v[1][0],o,v[1][1]],[v[2][0],o,v[2][1]],[v[3][0],o,v[3][1]])))}return Ae(u,t,0,a),Ae(m,t,0,a),{v:u,c:p,u:h,collision:m}},et=[0,0,0],tt=[0,.7,0],at={N:0,E:.5*-Math.PI,S:Math.PI,W:.5*Math.PI},ot=function(e){for(var t=e.centerBridgeX,a=e.centerBridgeZ,o=e.h,r=e.dir,n=e.lenBridge,i=o-3,s=we([0,.5],[.5,.5],[.5,1],[0,1]),c=we([0,0],[0,0],[0,0],[0,0]),l=20,u=[],p=[],h=[],m=[],b=[],d=0,f=120*Math.random()+30,v=n/2,O=n/2;f<n-20;){v=n/2-d,O=n/2-f;var y=Ee({h0:-20,h1:o-1,rCapital:9,rBase:5,capTop:!0,capBottom:!1});Ae(y.v,-20,0,O);for(var j=0;j<y.v.length;++j)u.push(y.v[j]);for(var g=0;g<y.c.length;++g)p.push(y.c[g]);for(var _=0;_<y.u.length;++_)h.push(y.u[_]);Ae(y.collision,-20,0,O);for(var C=0;C<y.collision.length;++C)m.push(y.collision[C]);Ae(y.collisionCar,-20,0,O);for(var w=0;w<y.collisionCar.length;++w)b.push(y.collisionCar[w]);var M=Ee({h0:-20,h1:o-1,rCapital:9,rBase:5,capTop:!0,capBottom:!1});Ae(M.v,20,0,O);for(var S=0;S<M.v.length;++S)u.push(M.v[S]);for(var T=0;T<M.c.length;++T)p.push(M.c[T]);for(var k=0;k<M.u.length;++k)h.push(M.u[k]);Ae(M.collision,20,0,O);for(var x=0;x<M.collision.length;++x)m.push(M.collision[x]);Ae(M.collisionCar,20,0,O);for(var P=0;P<M.collisionCar.length;++P)b.push(M.collisionCar[P]);var A=Ve({isTopElem:!0,color1:et,color2:tt,h2:o-1});Ae(A.vertTopElem,-20,0,O),u.push.apply(u,Object(pe.a)(A.vertTopElem)),p.push.apply(p,Object(pe.a)(A.colorsTopElem)),h.push.apply(h,Object(pe.a)(A.uvTopElem));var I=Ve({isTopElem:!0,color1:et,color2:tt,h2:o-1});Ae(I.vertTopElem,20,0,O),u.push.apply(u,Object(pe.a)(I.vertTopElem)),p.push.apply(p,Object(pe.a)(I.colorsTopElem)),h.push.apply(h,Object(pe.a)(I.uvTopElem)),d=f,f+=120*Math.random()+30,u.push.apply(u,Object(pe.a)(Ce([-l,o,v],[l,o,v],[l,o,O],[-l,o,O])).concat(Object(pe.a)(Ce([-l,i,O],[-l,i,v],[-l,o,v],[-l,o,O])),Object(pe.a)(Ce([l,i,v],[l,i,O],[l,o,O],[l,o,v])),Object(pe.a)(Ce([l,i,O],[l,i,v],[-l,i,v],[-l,i,O])))),p.push.apply(p,Object(pe.a)(Me(tt)).concat(Object(pe.a)(Me(et)),Object(pe.a)(Me(et)),Object(pe.a)(Me(tt)))),h.push.apply(h,Object(pe.a)(s).concat(Object(pe.a)(c),Object(pe.a)(c),Object(pe.a)(s))),m.push.apply(m,Object(pe.a)(Ce([-l,o,v],[l,o,v],[l,o,O],[-l,o,O])))}return u.push.apply(u,Object(pe.a)(Ce([-l,o,O],[l,o,O],[l,o,-n/2],[-l,o,-n/2])).concat(Object(pe.a)(Ce([-l,i,-n/2],[-l,i,O],[-l,o,O],[-l,o,-n/2])),Object(pe.a)(Ce([l,i,O],[l,i,-n/2],[l,o,-n/2],[l,o,O])),Object(pe.a)(Ce([l,i,-n/2],[l,i,O],[-l,i,O],[-l,i,-n/2])))),p.push.apply(p,Object(pe.a)(Me(tt)).concat(Object(pe.a)(Me(et)),Object(pe.a)(Me(et)),Object(pe.a)(Me(tt)))),h.push.apply(h,Object(pe.a)(s).concat(Object(pe.a)(c),Object(pe.a)(c),Object(pe.a)(s))),m.push.apply(m,Object(pe.a)(Ce([-l,o,O],[l,o,O],[l,o,-n/2],[-l,o,-n/2]))),Ae(u,-50,0,0),xe(u,at[r]),Ae(u,t,0,a),Ae(m,-50,0,0),xe(m,at[r]),Ae(m,t,0,a),Ae(b,-50,0,0),xe(b,at[r]),Ae(b,t,0,a),{v:u,c:p,u:h,collision:m,collisionCar:b}},rt=function(e){for(var t=e.xCenter,a=e.zCenter,o=e.hStart,r=e.hEnd,n=e.count,i=(r-o)/n,s=50,c=[],l=0;l<n;++l){var u=4*i;l<4&&(u=o+l*i+15);var p=i*l+o,h=p-7+o,m=t,b=a,d=l%4;d<1?(m=t-s,b=a-s):d<2?(m=t+s,b=a-s):d<3?(m=t+s,b=a+s):d<4&&(m=t-s,b=a+s),c.push({type:"stairs",offset:s,h:p,hh:h,r:20,x:m,z:b,bridgeMinusH:i,bridgeL:60,hColumn:u,rColumn:3,i:l,isTop:n-l<5})}return c},nt=["N","E","S","W"],it={N:1,E:2,S:3,W:4},st={N:[0,-1],E:[1,0],S:[0,1],W:[-1,0]},ct=function(e){for(var t=function(){for(var e=[],t=0,a=0,o=0,r="N",n=0;n<5;++n){var i=nt[Math.floor(Math.random()*nt.length)],s=400*Math.random()+30,c=a+st[i][0]*(140+s),l=o+st[i][1]*(140+s),u=it[i]+4*Math.floor(2*Math.random()),p=t+30*u,h=rt({xCenter:a,zCenter:o,hStart:t,hEnd:p,count:u});if(e.push.apply(e,Object(pe.a)(h)),0!==n&&e.push({xCenter:a,zCenter:o,h:t-30,type:"zone",nextDir:i,dir:r}),4!==n){var m=(c-a)/2+a,b=(l-o)/2+o;e.push({centerBridgeX:m,centerBridgeZ:b,h:p-30,dir:i,lenBridge:s,type:"bridge"})}a=c,o=l,t=p,r=i}return e}(),a=[],o=[],r=[],n=[],i=[],s=0;s<t.length;++s){if("stairs"===t[s].type){var c=qe(t[s],0,[0,.7,0]),l=c.v,p=c.c,h=c.u,m=c.collision,b=c.collisionCar;a.push.apply(a,Object(pe.a)(l)),o.push.apply(o,Object(pe.a)(p)),r.push.apply(r,Object(pe.a)(h)),n.push.apply(n,Object(pe.a)(m)),b&&i.push.apply(i,Object(pe.a)(b))}if("zone"===t[s].type){var d=$e(t[s]),f=d.v,v=d.c,O=d.u,y=d.collision;a.push.apply(a,Object(pe.a)(f)),o.push.apply(o,Object(pe.a)(v)),r.push.apply(r,Object(pe.a)(O)),n.push.apply(n,Object(pe.a)(y))}if("bridge"===t[s].type){for(var j=ot(t[s]),g=j.v,_=j.c,C=j.u,w=j.collision,M=j.collisionCar,S=0;S<g.length;++S)a.push(g[S]);for(var T=0;T<_.length;++T)o.push(_[T]);for(var k=0;k<C.length;++k)r.push(C[k]);for(var x=0;x<w.length;++x)n.push(w[x]);if(M)for(var P=0;P<M.length;++P)i.push(M[P])}}n.push(-50,1e3,0,0,1e3,0,0,1e3,-50);var A=new Float32Array(a),I=new Float32Array(o),D=new Float32Array(r),F=new Float32Array(n),L=new u.BufferGeometry;L.setAttribute("position",new u.BufferAttribute(A,3)),L.setAttribute("color",new u.BufferAttribute(I,3)),D&&L.setAttribute("uv",new u.BufferAttribute(D,2)),L.computeVertexNormals();var E=e.materials.wallVirtualColor,N=new u.Mesh(L,E),B=new u.BufferGeometry;B.setAttribute("position",new u.BufferAttribute(F,3));var R=new u.MeshBasicMaterial({color:16711680}),G=new u.Mesh(B,R),W=new Float32Array(i),z=new u.BufferGeometry;z.setAttribute("position",new u.BufferAttribute(W,3));for(var U,V=new u.Mesh(z,R),K=t.length-1;K>-1;--K)if(t[K].type&&"stairs"===t[K].type){U=[t[K].x,t[K].h,t[K].z];var q=Math.floor(t[K].i%4);0===q&&(U[2]-=60),1===q&&(U[0]+=60),2===q&&(U[2]+=60),3===q&&(U[0]-=60);break}var H=new u.Mesh(new u.BoxGeometry(30,30,30),new u.MeshBasicMaterial({color:16711935}));return H.position.set(U[0],U[1],U[2]),{mesh:N,meshCollision:G,meshCollisionCar:V,meshFinish:H,lastXYZ:U}},lt=[0,0,0],ut=[0,.7,0],pt=function(e){var t=e.h0,a=void 0===t?0:t,o=e.h1,r=void 0===o?30:o,n=e.h2,i=void 0===n?60:n,s=e.arc,c=void 0!==s&&s,l=e.isTopElem,u=void 0!==l&&l,p=e.isColumn,h=void 0!==p&&p,m=[],b=[],d=[],f=[],v=[];if(c){var O=function(e){for(var t=e.h1,a=e.h2,o=e.color1,r=void 0===o?[.2,.1,.1]:o,n=e.color2,i=void 0===n?[1,1,1]:n,s=e.r,c=void 0===s?5:s,l=e.rCap,u=void 0===l?7:l,p=e.wCol,h=void 0===p?3:p,m=e.w,b=(void 0===m?40:m)-2*c,d=-c-b,f=t,v=a-Math.min(.1*(a-t),2),O=Object(pe.a)(Ce([-h,f,c],[h,f,c],[h,v,c],[-h,v,c])),y=Object(pe.a)(Me(i)),j=Object(pe.a)(Me(r)),g=we([0,.5],[.5,.5],[.5,1],[0,1]),_=[].concat(Object(pe.a)(Ce([-h,f,-c],[-h,f,c],[-h,v,c],[-h,v,-c])),Object(pe.a)(Ce([h,f,c],[h,f,-c],[h,v,-c],[h,v,c]))),C=Object(pe.a)(Ce([h,f,-c],[-h,f,-c],[-h,v,-c],[h,v,-c])),w=[],M=[],S=[],T=2-h,k=h-2,x=14,P=b/x,A=v-f,I=.15*A,D=0;D<x;++D){var F=(1-Math.sin((D+1)/x*Math.PI))*(A-I)+I,L=(1-Math.sin(D/x*Math.PI))*(A-I)+I,E=-c;D+1>7&&(E=-c-b),w.push(T,v-F,-c-(D+1)*P,T,v-L,-c-D*P,T,v,E),M.push.apply(M,Object(pe.a)(i).concat(Object(pe.a)(i),Object(pe.a)(i))),S.push(0,0,.3,0,.3,.3),w.push(k,v-L,-c-D*P,k,v-F,-c-(D+1)*P,k,v,E),M.push.apply(M,Object(pe.a)(i).concat(Object(pe.a)(i),Object(pe.a)(i))),S.push(0,0,.3,0,.3,.3),w.push.apply(w,Object(pe.a)(Ce([k,v-L,-c-D*P],[T,v-L,-c-D*P],[T,v-F,-c-(D+1)*P],[k,v-F,-c-(D+1)*P]))),M.push.apply(M,Object(pe.a)(j)),S.push.apply(S,Object(pe.a)(we([0,0],[0,0],[0,0],[0,0])))}w.push(T,v-I,-c-P*x/2,T,v,-c,T,v,-c-P*x),M.push.apply(M,Object(pe.a)(i).concat(Object(pe.a)(i),Object(pe.a)(i))),S.push(.5,.25,.25,.3,.25,.2),w.push(k,v-I,-c-P*x/2,k,v,-c-P*x,k,v,-c),M.push.apply(M,Object(pe.a)(i).concat(Object(pe.a)(i),Object(pe.a)(i))),S.push(.5,.25,.25,.3,.25,.2),f=v,v=a;var N=[].concat(Object(pe.a)(Ce([-u,f,-u],[u,f,-u],[u,f,u],[-u,f,u])),Object(pe.a)(Ce([-u,f,u],[u,f,u],[u,v,u],[-u,v,u])),Object(pe.a)(Ce([-u,f,-u],[-u,f,u],[-u,v,u],[-u,v,-u])),Object(pe.a)(Ce([u,f,u],[u,f,-u],[u,v,-u],[u,v,u])),Object(pe.a)(Ce([u,f,-u],[-u,f,-u],[-u,v,-u],[u,v,-u])),Object(pe.a)(Ce([-u,v,u],[u,v,u],[u,v,-u],[-u,v,-u])),Object(pe.a)(Ce([2-u,f,d],[u-2,f,d],[u-2,f,-u],[2-u,f,-u])),Object(pe.a)(Ce([2-u,f,d],[2-u,f,-u],[2-u,v,-u],[2-u,v,d])),Object(pe.a)(Ce([u-2,f,-u],[u-2,f,d],[u-2,v,d],[u-2,v,-u])),Object(pe.a)(Ce([2-u,v,-u],[u-2,v,-u],[u-2,v,d],[2-u,v,d])));return{v:[].concat(Object(pe.a)(O),Object(pe.a)(_),Object(pe.a)(C),w,Object(pe.a)(N)),c:[].concat(Object(pe.a)(y),Object(pe.a)(y),Object(pe.a)(y),Object(pe.a)(y),M,Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j),Object(pe.a)(j)),u:[].concat(Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),S,Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g),Object(pe.a)(g))}}(Object(A.a)({h1:r,h2:i,color1:lt,color2:ut},c));m.push.apply(m,Object(pe.a)(O.v)),b.push.apply(b,Object(pe.a)(O.c)),d.push.apply(d,Object(pe.a)(O.u))}var y=Ee({h0:a,h1:r,color1:lt,color2:ut,rCapital:6,rBase:5,capTop:!0,capBottom:!0});m.push.apply(m,Object(pe.a)(y.v)),b.push.apply(b,Object(pe.a)(y.c)),d.push.apply(d,Object(pe.a)(y.u)),f.push.apply(f,Object(pe.a)(y.collision)),y.collisionCar&&v.push.apply(v,Object(pe.a)(y.collisionCar));var j=Ve({h2:i,color1:lt,color2:ut,isTopElem:u}),g=j.vertTopElem,_=j.colorsTopElem,C=j.uvTopElem;m.push.apply(m,Object(pe.a)(g)),b.push.apply(b,Object(pe.a)(_)),d.push.apply(d,Object(pe.a)(C));var w=Ne({isColumn:h,h1:r,h2:i,color1:lt,color2:ut}),M=w.vertColumn,S=w.colorsColumn,T=w.uvColumn;return m.push.apply(m,Object(pe.a)(M)),b.push.apply(b,Object(pe.a)(S)),d.push.apply(d,Object(pe.a)(T)),{v:m,c:b,u:d,collision:f,collisionCar:v}},ht=function(e){for(var t=[],a=[],o=[],r=[],n=[],i=function(){var e=[],t=function t(a){var o=a.angle,r=a.offsetStart,n=a.h0,i=a.h1,s=a.h2,c=a.numFromCenter,l=120*Math.random()+30,u=Math.random()>.5;e.push({id:Math.floor(1e3*Math.random()),x:Math.sin(o)*(r+l),z:Math.cos(o)*(r+l),angle:o,h0:n,h1:i,h2:s,arc:{w:l},isTopElem:!u,numFromCenter:c}),u&&t({angle:o,offsetStart:r+l,h0:n,h1:i,h2:s,numFromCenter:++c})},a=Math.floor(20*Math.random())+3,o=150*Math.random()+30,r=(.4*Math.random()+.5)*o;e.push({id:Math.floor(1e3*Math.random()),x:0,z:0,angle:0,h0:0,h1:r,h2:o,numFromCenter:0,isTopElem:!1,isColumn:!0});for(var n=0;n<a;++n)Math.random()>.3&&t({angle:n/a*(2*Math.PI),offsetStart:0,h0:0,h1:r,h2:o,numFromCenter:1});for(var i=e.length,s=0;s<3;++s)for(var c=e[e.length-1].h2,l=c+150*Math.random()+30,u=c+(.4*Math.random()+.5)*(l-c),p=0;p<i;++p)e[p].isTopElem||e.push(Object(A.a)(Object(A.a)({},e[p]),{},{h0:c,h1:u,h2:l,isTopElem:2===s}));return e}(),s=0;s<i.length;++s){var c=i[s],l=(c.id,c.x),p=c.z,h=c.angle,m=c.h0,b=c.h1,d=c.h2,f=c.arc,v=c.isTopElem,O=c.isColumn,y=pt({h0:m,h1:b,h2:d,arc:f,isTopElem:v,isColumn:O}),j=y.v,g=y.c,_=y.u,C=y.collision,w=y.collisionCar;xe(j,h),Ae(j,l,0,p,h),C&&(xe(C,h),Ae(C,l,0,p),r.push.apply(r,Object(pe.a)(C))),w&&(xe(w,h),Ae(w,l,0,p),n.push.apply(n,Object(pe.a)(w))),t.push.apply(t,Object(pe.a)(j)),a.push.apply(a,Object(pe.a)(g)),o.push.apply(o,Object(pe.a)(_))}var M=new Float32Array(t),S=new Float32Array(a),T=new Float32Array(o),k=new u.BufferGeometry;k.setAttribute("position",new u.BufferAttribute(M,3)),k.setAttribute("color",new u.BufferAttribute(S,3)),T&&k.setAttribute("uv",new u.BufferAttribute(T,2)),k.computeVertexNormals();var x=e.materials.wallVirtualColor,P=new u.Mesh(k,x),I=new Float32Array(r),D=new u.BufferGeometry;D.setAttribute("position",new u.BufferAttribute(I,3));var F=new u.Mesh(D,e.materials.testRed),L=new Float32Array(n),E=new u.BufferGeometry;return E.setAttribute("position",new u.BufferAttribute(L,3)),{mesh:P,meshCollision:F,meshCollisionCar:new u.Mesh(E,e.materials.testRed)}},mt=function(e){var t=e.studio,a=e.car,o=e.system_PlayerMoveOnLevel,r=e.materials,n=[],i=function(e){for(var t=[],a=0;a<30;++a){var o=ht(e),r="build_"+a;t.push(Object(A.a)(Object(A.a)({},o),{},{id:r,inScene:!1}))}return{getItem:function(){for(var e=0;e<t.length;++e)if(!t[e].inScene)return t[e].inScene=!0,t[e];return null},setFlagAsFree:function(e){for(var a=0;a<t.length;++a)if(t[a].id===e){t[a].inScene=!1;break}}}}(e),s=new u.PlaneGeometry(h,h);r.floorMat.map.wrapS=r.floorMat.map.wrapT=80,r.floorMat.map.repeat.set(50,50);var c=function(e){for(var c=0;c<e.length;++c){var l=e[c].split("_"),p=+l[0]*h,m=+l[1]*h,b=new u.Mesh(s,r.floorMat);b.rotation.x=-Math.PI/2,b.position.set(p,-62,m),t.addToScene(b),n.push({mesh:b,keyLocation:e[c],type:"floor"}),o.addItemToPlayerCollision(b);for(var d=Math.floor(8*Math.random()),f=0;f<d;++f){var v=i.getItem();if(v){var O=v.mesh,y=v.meshCollision,j=v.meshCollisionCar,g=v.id;O.position.set(p+Math.random()*h,-60,m+Math.random()*h),t.addToScene(O),y.visible=!1,y.position.copy(O.position),t.addToScene(y),o.addItemToPlayerCollision(y),j.visible=!1,j.position.copy(O.position),t.addToScene(j),a.setCollisionForDraw(j),n.push({mesh:O,meshCollision:y,meshCollisionCar:j,keyLocation:e[c],type:"build",id:g})}}}};return{updateAreas:function(e,r){!function(e){for(var r=[],s=0;s<e.length;++s)for(var c=0;c<n.length;++c)e[s]===n[c].keyLocation&&r.push(n[c]);n=n.filter((function(t){for(var a=0;a<e.length;++a)if(t.keyLocation===e[a])return!1;return!0}));for(var l=0;l<r.length;++l){var u=r[l],p=u.mesh,h=u.meshCollision,m=u.meshCollisionCar,b=u.type,d=u.id;t.removeFromScene(p),o.removeItemFromPlayerCollision(p),"build"===b&&(o.removeItemFromPlayerCollision(h),t.removeFromScene(h),a.removeCollisionForDraw(m),t.removeFromScene(m),i.setFlagAsFree(d)),"floor"===b&&(r[l].mesh.geometry.dispose(),delete r[l].mesh)}}(e),c(r)},createArea:function(e){c(e)},removeAll:function(){for(var e=0;e<n.length;++e){var r=n[e],i=r.mesh,s=r.meshCollision,c=r.meshCollisionCar;t.removeFromScene(i),o.removeItemFromPlayerCollision(i),n[e].mesh.geometry.dispose(),delete n[e].mesh,s&&(o.removeItemFromPlayerCollision(s),t.removeFromScene(s),n[e].meshCollision.geometry.dispose(),delete n[e].meshCollision),c&&(a.removeCollisionForDraw(c),t.removeFromScene(c),n[e].meshCollisionCar.geometry.dispose(),delete n[e].meshCollisionCar)}}}},bt=function(e){for(var t=[],a=0;a<20;++a)for(var o=3e3*Math.random()-1500,r=400*Math.random()-50,n=3e3*Math.random()-1500,i=0;i<3;++i)t.push(o+3*Math.random(),r+3*Math.random(),n+3*Math.random());var s=new Float32Array(t),c=new u.BufferGeometry;return c.setAttribute("position",new u.BufferAttribute(s,3)),new u.Mesh(c,e.materials.testGreen)},dt=Math.PI,ft=Math.sin,vt=Math.cos,Ot=2*dt,yt=function(e){for(var t=e.hhh||12,a=[],o=[],r=function(e){for(var t=e.count,a=void 0===t?5:t,o=e.hh,r=void 0===o?15:o,n=e.h,i=void 0===n?7:n,s=e.hD,c=void 0===s?-7:s,l=e.hhD,u=void 0===l?-15:l,p=e.r,h=void 0===p?15:p,m=e.cone,b=void 0===m?10:m,d=e.w,f=void 0===d?2:d,v=e.wt,O=void 0===v?3:v,y=e.wtr,j=void 0===y?5:y,g=e.htr,_=void 0===g?5:g,C=e.rInner,w=void 0===C?-5:C,M={tt:[],top:[],bot:[],bb:[]},S=0;S<a;++S){var T=S/a*Ot,k=[0,-f,0,f,0,0,f,f,0,-f,f,0,-f,0,0,0,5,b,-j,1.7*-i,w,j,1.7*-i,w,0,-i+_,w,-j,2*-i,1.5*w,0,2.3*-i,2*w,j,2*-i,1.5*w];Pe(k,T),Ae(k,ft(T)*h,i,vt(T)*h),M.top.push(k);var x=(S+.5)/a*Ot,P=[0,f,0,-f,0,0,-f,-f,0,f,-f,0,f,0,0,0,-5,b,-j,1.7*i,w,0,i-_,w,j,1.7*i,w,-j,2*i,1.5*w,j,2*i,1.5*w,0,2.3*i,2*w];Pe(P,x),Ae(P,ft(x)*h,c,vt(x)*h),M.bot.push(P);var A=(S-.5)/a*Ot;M.tt.push(ft(A)*O,r,vt(A)*O),M.bb.push(ft(T)*O,u,vt(T)*O)}return M}(e),n=[1,1,1],i=[].concat(n,n,n),s=([].concat(Object(pe.a)(i),Object(pe.a)(i)),[.5,1,.5]),c=[].concat(s,s,s),l=[].concat(Object(pe.a)(c),Object(pe.a)(c)),u=[0,0,0],p=[].concat(u,u,u),h=([].concat(Object(pe.a)(p),Object(pe.a)(p)),[0,0,0]),m=[].concat(h,h,h),b=[].concat(Object(pe.a)(m),Object(pe.a)(m)),d=[0,0,0],f=[].concat(d,d,d),v=([].concat(Object(pe.a)(f),Object(pe.a)(f)),[0,0,0]),O=[].concat(v,v,v),y=([].concat(Object(pe.a)(O),Object(pe.a)(O)),function(e,n){var i=r.bot[e],s=r.bot[n],u=r.top[e],p=r.top[n];a.push(r.tt[3*e],r.tt[3*e+1],r.tt[3*e+2],r.tt[3*n],r.tt[3*n+1],r.tt[3*n+2],0,r.tt[3*e+1]+t,0),o.push.apply(o,Object(pe.a)(c)),a.push(r.bb[3*n],r.bb[3*n+1],r.bb[3*n+2],r.bb[3*e],r.bb[3*e+1],r.bb[3*e+2],0,r.bb[3*e+1]-t,0),o.push.apply(o,Object(pe.a)(c)),a.push.apply(a,Object(pe.a)(Ce([u[9],u[10],u[11]],[u[6],u[7],u[8]],[r.tt[3*n],r.tt[3*n+1],r.tt[3*n+2]],[r.tt[3*e],r.tt[3*e+1],r.tt[3*e+2]]))),o.push.apply(o,Object(pe.a)(b)),a.push.apply(a,Object(pe.a)(Ce([r.bb[3*e],r.bb[3*e+1],r.bb[3*e+2]],[r.bb[3*n],r.bb[3*n+1],r.bb[3*n+2]],[i[9],i[10],i[11]],[i[6],i[7],i[8]]))),o.push.apply(o,Object(pe.a)(b)),a.push.apply(a,Object(pe.a)(Ce([u[3],u[4],u[5]],[p[12],p[13],p[14]],[p[9],p[10],p[11]],[u[6],u[7],u[8]]))),o.push.apply(o,Object(pe.a)(b)),a.push.apply(a,Object(pe.a)(Ce([i[9],i[10],i[11]],[s[6],s[7],s[8]],[s[3],s[4],s[5]],[i[12],i[13],i[14]]))),o.push.apply(o,Object(pe.a)(b)),a.push.apply(a,Object(pe.a)(Ce([i[3],i[4],i[5]],[i[0],i[1],i[2]],[u[3],u[4],u[5]],[u[0],u[1],u[2]]))),o.push.apply(o,Object(pe.a)(b)),a.push.apply(a,Object(pe.a)(Ce([i[0],i[1],i[2]],[i[12],i[13],i[14]],[p[0],p[1],p[2]],[p[12],p[13],p[14]]))),o.push.apply(o,Object(pe.a)(b));for(var h=0;h<15;h+=3)a.push(u[h],u[h+1],u[h+2],u[h+3],u[h+4],u[h+5],u[15],u[16],u[17]),o.push.apply(o,Object(pe.a)(c)),a.push(i[h],i[h+1],i[h+2],i[h+3],i[h+4],i[h+5],i[15],i[16],i[17]),o.push.apply(o,Object(pe.a)(c));a.push(i[12],i[13],i[14],i[0],i[1],i[2],i[15],i[16],i[17]),o.push.apply(o,Object(pe.a)(c)),a.push(u[12],u[13],u[14],u[0],u[1],u[2],u[15],u[16],u[17]),o.push.apply(o,Object(pe.a)(c)),a.push.apply(a,Object(pe.a)(Ce([u[21],u[22],u[23]],[i[3],i[4],i[5]],[u[0],u[1],u[2]],[u[24],u[25],u[26]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[12],i[13],i[14]],[p[18],p[19],p[20]],[p[24],p[25],p[26]],[p[0],p[1],p[2]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[12],i[13],i[14]],[s[3],s[4],s[5]],[p[21],p[22],p[23]],[p[18],p[19],p[20]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([u[30],u[31],u[32]],[r.bb[3*e],r.bb[3*e+1],r.bb[3*e+2]],[i[6],i[7],i[8]],[u[33],u[34],u[35]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([r.bb[3*n],r.bb[3*n+1],r.bb[3*n+2]],[p[30],p[31],p[32]],[p[27],p[28],p[29]],[i[9],i[10],i[11]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([p[27],p[28],p[29]],[p[33],p[34],p[35]],[s[6],s[7],s[8]],[i[9],i[10],i[11]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[0],i[1],i[2]],[i[21],i[22],i[23]],[i[18],i[19],i[20]],[u[3],u[4],u[5]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[0],i[1],i[2]],[p[12],p[13],p[14]],[i[24],i[25],i[26]],[i[21],i[22],i[23]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[18],i[19],i[20]],[i[24],i[25],i[26]],[p[12],p[13],p[14]],[u[3],u[4],u[5]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([u[6],u[7],u[8]],[p[9],p[10],p[11]],[i[30],i[31],i[32]],[i[27],i[28],i[29]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([i[30],i[31],i[32]],[p[9],p[10],p[11]],[r.tt[3*n],r.tt[3*n+1],r.tt[3*n+2]],[i[33],i[34],i[35]]))),o.push.apply(o,Object(pe.a)(l)),a.push.apply(a,Object(pe.a)(Ce([u[6],u[7],u[8]],[i[27],i[28],i[29]],[i[33],i[34],i[35]],[r.tt[3*n],r.tt[3*n+1],r.tt[3*n+2]]))),o.push.apply(o,Object(pe.a)(l))}),j=0;j<r.top.length;++j)r.top[j+1]?y(j,j+1):y(j,0);return{v:a,c:o}},jt=function(e,t){for(var a=t.r,o=void 0===a?15:a,r=t.s,n=void 0===r?.5:r,i=t.mKey,s=void 0===i?"testGreen":i,c=[],l=o/2,p=0;p<100;++p)for(var h=Math.random()*o-l,m=Math.random()*o-l,b=Math.random()*o-l,d=0;d<3;++d)c.push(h+Math.random()*n,m+Math.random()*n,b+Math.random()*n);var f=new Float32Array(c),v=new u.BufferGeometry;return v.setAttribute("position",new u.BufferAttribute(f,3)),new u.Mesh(v,e.materials[s])},gt=function(e,t,a){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.floor(t/e),r=Math.floor(a/e),n=o+"_"+r,i=he(o,r);return{checkChanged:function(t,a){var o=Math.floor(t/e),r=Math.floor(a/e),s=o+"_"+r;if(s===n)return!1;var c=n;n=s;var l=i;i=he(o,r);var u=me(i,l),p=me(l,i);return{oldKey:c,newKey:s,newEnv:i,removedQs:p,addedQs:u}},getCurrent:function(){return{loc:n,currentEnv:i}}}}(h,t,a),r=function(e){var t=e.studio,a=e.car,o=(e.system_Level,e.system_PlayerMoveOnLevel),r=e.system_PlayerNearLevelItems,n=function(){var t=ct(e);return t.meshCollision.visible=!1,t.meshCollisionCar.visible=!1,t.meshFinish.position.copy(t.mesh.position),t},i={location01:n(),location02:n(),location03:n()},s=function(e){var n=i[e],s=n.mesh,c=n.meshCollision,l=n.meshCollisionCar,u=n.meshFinish;t.removeFromScene(s),o.removeItemFromPlayerCollision(c),t.removeFromScene(c),t.removeFromScene(l),a.removeCollisionForDraw(l),t.removeFromScene(u),r.removeItemFromCheck(u)};return{removeLocationFromScene:s,addLocationToScene:function(n,s,c){var l=i[n],u=l.mesh,p=l.meshCollision,h=l.meshCollisionCar,m=l.meshFinish,b=l.lastXYZ,d=-42;u.position.set(s,d,c),t.addToScene(u),o.addItemToPlayerCollision(p),p.position.set(s,d,c),t.addToScene(p),a.setCollisionForDraw(h),h.visible=!1,h.position.set(s,d,c),t.addToScene(h),m.position.set(s,d,c),m.position.x+=b[0],m.position.y+=b[1],m.position.z+=b[2],t.addToScene(e.unit.mesh),e.unit.mesh.position.copy(m.position),e.unit.mesh.position.y+=20,r.setItemToCheck(m,"nearPerson_"+n,80)},removeAll:function(){for(var e in i)s(e)}}}(e),n=mt(e),i=function(e){var t=e.car.getModel(),a=new u.Object3D;a.position.set(0,0,-3e3),t.add(a);for(var o=new u.Vector3,r=[],n=0;n<50;++n){var i=bt(e);i.position.set(3e3*Math.random()-1500,0,3e3*Math.random()-1500),r.push(i)}return{update:function(){a.getWorldPosition(o);for(var e=0;e<r.length;++e)r[e].position.distanceTo(o)>4e3&&r[e].position.copy(o)},addToScene:function(){for(var t=0;t<r.length;++t)e.studio.addToScene(r[t])},removeAll:function(){for(var t=0;t<r.length;++t)e.studio.removeFromScene(r[t])}}}(e),s=function(e){var t=yt({r:15,cone:12,w:2,wt:3,wtr:5,htr:5,rInner:-5,hhh:8}),a=yt({cone:20,r:13,w:.5,wt:.7,wtr:2,htr:0,rInner:-5,hhh:12,hh:16,hhD:-12}),o=yt({r:16,cone:9,w:1,wt:5,wtr:6,htr:6,rInner:-3,hhh:8}),r=yt({r:16,cone:15,w:1.5,wt:8,wtr:6,htr:6,rInner:-3,hhh:8}),n=new Float32Array(t.v),i=new Float32Array(a.c),s=new u.BufferGeometry;s.setAttribute("position",new u.BufferAttribute(n,3)),s.setAttribute("color",new u.BufferAttribute(i,3)),s.computeVertexNormals();var c=e.materials.unit,l=new u.Object3D,p=new u.Mesh(s,c);l.add(p);var h=jt(e,{mKey:"testWhite"});l.add(h);var m=jt(e,{mKey:"testWhite"});l.add(m);var b=jt(e,{mKey:"testWhite"});l.add(b);var d=jt(e,{r:50,s:.5});l.add(d);var f=0,v=0,O="idle",y=0,j=new u.Quaternion,g=(new u.Quaternion,new u.Quaternion),_=t.v,C=a.v,w=!0;return{mesh:l,update:function(){if(v+=.05,h.rotation.y=2*-v,m.rotation.x=2*-v,b.rotation.z=2*-v,d.rotation.y=v/4,l.rotation.y=v/5,"idle"===O){var e=Math.sin(f);f+=.05,w&&(p.rotation.y=f/2,p.rotation.x=f/1.33,p.rotation.z=f/1.88);for(var n=0;n<t.v.length;++n)s.attributes.position.array[n]=_[n]*(1-e)+C[n]*e;p.geometry.attributes.position.needsUpdate=!0}if("toDialog"===O){(y+=.05)>1&&(y=1),p.quaternion.slerpQuaternions(j,g,y);for(var i=0;i<t.v.length;++i)s.attributes.position.array[i]=_[i]*(1-y)+C[i]*y;p.geometry.attributes.position.needsUpdate=!0,1===y&&(w=!1,O="idle",f=0,_=o.v,C=r.v)}if("fromDialog"===O){(y+=.05)>1&&(y=1);for(var c=0;c<t.v.length;++c)s.attributes.position.array[c]=_[c]*(1-y)+C[c]*y;p.geometry.attributes.position.needsUpdate=!0,1===y&&(O="idle",f=0,_=t.v,C=a.v,w=!0)}},prepareDialog:function(){},exitDialog:function(){}}}(e);e.unit=s;var c=!1;return{addWorld:function(){var e=o.getCurrent();n.createArea(e.currentEnv),i.addToScene(),c=!0},removeWorld:function(){c=!1,i.removeAll(),r.removeAll(),n.removeAll()},update:function(e,t){if(c){s.update(),i.update();var a=o.checkChanged(e,t);if(a&&(n.updateAreas(a.removedQs,a.addedQs),m[a.oldKey]&&r.removeLocationFromScene(m[a.oldKey]),m[a.newKey])){var l=a.newKey.split("_"),u=+l[0]*h+h/2,p=+l[1]*h+h/2;r.addLocationToScene(m[a.newKey],u,p)}}}}},_t=function(){function e(t){var a=this;Object(C.a)(this,e),this._root=t,this._isInRealWord=!0,this._isExitFromVirt=!1,this._nextLocation=null,this._finalCountDown=3e3;var o=this._root,r=o.emitter,n=o.car,i=o.dispatcher,s=o.frameUpdater,c=o.studio,l=o.system_PlayerMoveOnLevel;i.dispatch({type:"CHANGE_INFO_CHAPTER",currentChapterIndex:4}),i.dispatch({type:"ENABLE_CONTROL_SOUND"}),n.onChangeCarStateMove((function(e){"carStart"===e&&t.dispatcher.dispatch({type:"TOGGLE_BUTTON_DRAW_CAR",is:!1}),"carStop"===e&&t.dispatcher.dispatch({type:"TOGGLE_BUTTON_DRAW_CAR",is:!0})})),r.subscribe("checkNear")((function(e){a._isExitFromVirt||("nearStarterDrawCar"===e.item&&t.dispatcher.dispatch({type:"TOGGLE_BUTTON_DRAW_CAR",is:e.is}),e.item.includes("nearPerson")&&(e.is?t.unit.prepareDialog():t.unit.exitDialog(),setTimeout((function(){t.dispatcher.dispatch({type:"TOGGLE_BUTTON_DIALOG",is:e.is,keyPerson:e.item})}))))})),this._worldReal=function(e){e.assets;var t=e.materials,a=e.studio,o=e.system_Assets,r=e.system_PlayerMoveOnLevel,n=new u.Mesh(new u.PlaneGeometry(5e3,5e3),t.floorMat1);t.floorMat1.map.repeat.set(180,180),n.rotation.x=-Math.PI/2,n.position.y=-62;var i=o.items.body;i.position.fromArray([-20,-60,-50]),i.rotation.fromArray([0,2,0]),i.material=t.body;var s=o.items.body_shadow;return s.material=t.body_sh,i.add(s),{addWorld:function(){r.addItemToPlayerCollision(n),a.addToScene(n),a.addToScene(i)},removeWorld:function(){r.removeItemFromPlayerCollision(n),a.removeFromScene(n),a.removeFromScene(i)}}}(t),this._worldReal.addWorld(),this._worldVirtual=gt(t,n._model.position.x,n._model.position.z),s.on((function(e){F.b(),a._worldVirtual.update(n._model.position.x,n._model.position.z),n.isFreeze?l.update(e):(n.update(e),a._checkEndPlay()),c.drawFrame()})),this._startPlay()}return Object(w.a)(e,[{key:"clickMachineDraw",value:function(){var e=this._root,t=e.studio,a=e.system_PlayerMoveOnLevel,o=e.car;a.toggleFreeze(!0),o.toggleFreeze(!1),t.setCamera(o.getCamera()),this._isInRealWord&&(this._isInRealWord=!1,o.toggleMat("green"),t.changeEnvironment(j,{updateAmb:!1,time:50}),this._worldVirtual.addWorld(),this._worldReal.removeWorld())}},{key:"clickMachineExit",value:function(){var e=this._root,t=e.system_PlayerMoveOnLevel,a=e.player,o=e.studio,r=e.car,n=(e.CONSTANTS,r.getPosition()),i=r.getQuaternion();o.setCamera(a.getCamera()),r.toggleFreeze(!0),t.toggleFreeze(!1),a.setToPos(n.x,a.mesh.position.y,n.z),a.mesh.setRotationFromQuaternion(i)}},{key:"changeTargetLocation",value:function(e){var t=e.key;this._nextLocation=t,console.log("nextLocation",this._nextLocation);var a=null;for(var o in m)m[o]===t&&(a=o);if(a){var r=a.split("_"),n=+r[0]*h+h/2,i=+r[1]*h+h/2;this._root.car.setTargetPosition(new u.Vector3(n,0,i))}}},{key:"_startPlay",value:function(){var e=this,t=this._root,a=t.player,o=t.ui,r=t.studio,n=t.car,i=t.system_PlayerMoveOnLevel,s=t.system_PlayerNearLevelItems,c=t.CONSTANTS;a.setToPos.apply(a,Object(pe.a)(c.playerConfig.startPos));var l=c.CONFIG_FOR_INIT.currentSceneConfig.carProps,p=l.position,b=l.rotation,d=n.getModel();d.position.fromArray(p),d.rotation.fromArray(b),d.position.y=-49,s.setItemToCheck(d,"nearStarterDrawCar",28),r.addToScene(d),i.addItemToPlayerCollision(n.getCollision()),setTimeout((function(){var e=0,t=null;for(var a in m)0===e&&(t=a),++e;var o=t.split("_"),r=+o[0]*h+h/2,i=+o[1]*h+h/2;n.setTargetPosition(new u.Vector3(r,0,i))}),500),o.showStartButton((function(){r.changeEnvironment(y,{updateAmb:!1,time:1e3}),a.toggleBlocked(!1),e._root.system_Sound.playAmbient()}))}},{key:"_checkEndPlay",value:function(){"locationToFinish"===this._nextLocation&&(--this._finalCountDown,this._finalCountDown<1e3&&this._root.car.updateBattary(),this._finalCountDown<0&&this._endPlay())}},{key:"_endPlay",value:function(){var e=this;this._nextLocation="----",this._isInRealWord=!0,this._isExitFromVirt=!0;var t=this._root,a=t.CONSTANTS,o=t.dispatcher,r=t.car,n=t.studio,i=t.player,s=t.system_PlayerMoveOnLevel;this._root.car.batteryLight(),setTimeout((function(){return o.dispatch({type:"TOGGLE_BUTTON_DRAW_CAR",is:!1})}));var c=a.CONFIG_FOR_INIT.currentSceneConfig.carProps,l=c.position,u=c.rotation,p=r.getModel();r.toggleMat("red"),p.position.fromArray(l),p.rotation.fromArray(u),p.position.y=-49;var h=r.getPosition(),m=r.getQuaternion();n.setCamera(i.getCamera()),r.toggleFreeze(!0),s.toggleFreeze(!1),i.setToPos(h.x,i.mesh.position.y,h.z),i.mesh.setRotationFromQuaternion(m),this._worldReal.addWorld(),this._worldVirtual.removeWorld(),n.changeEnvironment(y,{updateAmb:!1,time:50}),setTimeout((function(){n.changeEnvironment(O,{updateAmb:!1,time:500}),setTimeout((function(){e._root.dispatcher.dispatch({type:"SHOW_FINAL_MESSAGE"})}),1e3)}),35e3)}}]),e}(),Ct=a(6),wt=a(18),Mt=a.n(wt),St=a(8),Tt=(a(40),"en"),kt=function(e){return function(t){return e[Tt]&&e[Tt][t]||t}},xt=a(5),Pt=kt({ru:{"Discovery of small android":"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0434\u0440\u043e\u0438\u0434\u0430",Factory:"\u0424\u0430\u0431\u0440\u0438\u043a\u0430",Brige:"\u041c\u043e\u0441\u0442",Cube:"\u041a\u0443\u0431",Endways:"\u041d\u0430\u043f\u0440\u044f\u043c\u0438\u043a",Machine:"\u041c\u0430\u0448\u0438\u043d\u0430","in production":"\u0441\u043a\u043e\u0440\u043e.."," (current)":" (\u0442\u0443\u0442)","Author: ":"\u043e\u0442: ","Github: ":"\u0413\u0438\u0442\u0445\u0430\u0431: "}}),At=Object(St.b)((function(e){return Object(A.a)({},e.controls.infoPanelData)}))((function(e){return Object(xt.jsxs)("div",{className:"info",children:[Object(xt.jsx)("button",{className:"control-small butt-infoClose",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),Object(xt.jsxs)("div",{className:"info-inner",children:[Object(xt.jsx)("p",{children:Pt(e.title)}),Object(xt.jsx)("p",{children:Pt(e.topText)}),Object(xt.jsx)("ul",{children:e.chapters.map((function(t,a){return Object(xt.jsxs)("li",{children:[a+1,".\xa0",t.href?Object(xt.jsx)("span",{children:Object(xt.jsx)("a",{href:t.href,target:"blank",children:Pt(t.text)})}):Object(xt.jsx)("span",{children:Pt(t.text)}),a===e.currentChapterIndex&&Pt(" (current)")]},a)}))}),Object(xt.jsx)("p",{children:e.bottomText}),Object(xt.jsx)("ul",{children:e.afterWords.map((function(e,t){return Object(xt.jsxs)("li",{children:[Pt(e.text),Object(xt.jsx)("a",{href:e.href,target:"blank",children:Pt(e.aText)})]},t)}))})]})]})})),It=(a(42),Object(St.b)((function(e){return{isInfo:e.controls.isInfo,isShowControls:e.controls.isShowControls,isShowControlSound:e.controls.isShowControlSound,isMute:e.controls.isMute}}))((function(e){var t=Object(Ct.useState)(!0),a=Object(ie.a)(t,2),o=a[0],r=a[1];return Object(Ct.useEffect)((function(){return e.gameContext.emitter.subscribe("screenMode")((function(e){"exitFullScreen"===e&&r(!0)}))})),Object(xt.jsxs)("div",{className:"ui-controls",children:[e.isShowControls&&e.isShowControlSound&&Object(xt.jsx)("button",{className:"".concat(e.isMute?"butt-sound-n":"butt-sound"," control-small"),onMouseUp:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})},onTouchEnd:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})}}),e.isShowControls&&Object(xt.jsx)("button",{className:"butt-left control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")}}),e.isShowControls&&Object(xt.jsx)("button",{className:"butt-right control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")}}),e.isShowControls&&Object(xt.jsx)("button",{className:"butt-front control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")}}),e.isShowControls&&Object(xt.jsx)("button",{className:"butt-back control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")}}),e.isShowControls&&o&&Object(xt.jsx)("button",{className:"butt-fullscreen control-small",onClick:function(){e.gameContext.emitter.emit("mouseDown")("butt-fullscreen"),r(!1)}}),!e.isInfo&&Object(xt.jsx)("button",{className:"butt-info control-small",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),e.isInfo&&Object(xt.jsx)(At,{})]})})));var Dt={dispatch:null},Ft=Object(St.b)((function(e){return{isShowControls:e.controls.isShowControls,isInfo:e.controls.isInfo}}))((function(e){return!Dt.dispatch&&(Dt.dispatch=e.dispatch),Object(xt.jsxs)("div",{className:"ui",children:[!e.isInfo&&e.gameContext.CustomReactComponent&&Object(xt.jsx)(e.gameContext.CustomReactComponent,{gameContext:e.gameContext}),Object(xt.jsx)(It,{gameContext:e.gameContext})]})})),Lt=a(16),Et=a(26),Nt={isShowControls:!0,isShowControlSound:!1,isMute:!1,isInfo:!1,infoPanelData:{title:"Discovery of small android",topText:"",chapters:[{text:"Factory",href:"./../chapter01"},{text:"Brige",href:"./../chapter02"},{text:"Cube",href:"./../chapter03"},{text:"Endways",href:"./../chapter04"},{text:"Machine",href:"./../chapter05"},{text:"in production"}],currentChapterIndex:null,bottomText:"",afterWords:[{text:"Author: ",aText:"www.otrisovano.ru",href:"http://otrisovano.ru"},{text:"Github: ",aText:"https://github.com/fire888/dark_boss",href:"https://github.com/fire888/dark_boss"}]}};var Bt=document.querySelector(".progress"),Rt=-100,Gt=!0;!function e(){Gt&&setTimeout((function(){0===++Rt&&(Rt-=100),Bt.style.marginLeft=Rt+"%",e()}),30)}();var Wt=function(){function e(t){Object(C.a)(this,e),t.dispatcher=Dt,this._root=t;var a=function(e){e.customStore||(e.customStore={});var t=Object(Lt.b)(Object(A.a)({controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_INFO"===t.type?Object(A.a)(Object(A.a)({},e),{},{isShowControls:!!e.isInfo,isInfo:!e.isInfo}):"CHANGE_INFO_CHAPTER"===t.type?Object(A.a)(Object(A.a)({},e),{},{infoPanelData:Object(A.a)(Object(A.a)({},e.infoPanelData),{},{currentChapterIndex:t.currentChapterIndex})}):"TOGGLE_CONTROLS"===t.type?Object(A.a)(Object(A.a)({},e),{},{isShowControls:t.is}):"ENABLE_CONTROL_SOUND"===t.type?Object(A.a)(Object(A.a)({},e),{},{isShowControlSound:!0}):"TOGGLE_MUTE"===t.type?Object(A.a)(Object(A.a)({},e),{},{isMute:t.is}):Object(A.a)({},e)}},e.customStore)),a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Lt.c;return Object(Lt.d)(t,a(Object(Lt.a)(Et.a)))}(t);a&&Mt.a.render(Object(xt.jsx)(St.a,{store:a,children:Object(xt.jsx)(Ft,{gameContext:t})}),document.getElementById("root"))}return Object(w.a)(e,[{key:"showStartButton",value:function(e){var t=document.querySelector(".startbuttons-wrapper"),a=document.querySelector(".progress-wrapper"),o=function(e){var t;e.target.dataset&&e.target.dataset.lang&&(t=e.target.dataset.lang,Tt=t),document.querySelector(".start-screen").style.display="none"};Gt=!1,t.style.display="flex",t.addEventListener("click",(function(t){e(),o(t)})),a.style.display="none"}}]),e}(),zt=(a(43),{ru:{"What's happening?":"\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442?","I'm generating the Great Recursion. I need a component. Deliver it to me.":"\u042f \u0433\u0435\u043d\u0435\u0440\u044e \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u044e. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430. \u0414\u043e\u0441\u0442\u0430\u0432\u044c \u043c\u043d\u0435 \u0435\u0435.","Alright. Where can I find this component?":"\u0425\u043e\u0440\u043e\u0448\u043e. \u0413\u0434\u0435 \u043c\u043d\u0435 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443?","I updated the location mark in your car, follow it.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435, \u0441\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","I'll be back.":"\u042f \u0432\u0435\u0440\u043d\u0443\u0441\u044c.","For the glory of Recursion.":"\u0412\u043e \u0441\u043b\u0430\u0432\u0443 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","Do you have a Great Recursion Component?":"\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438?","I will generate you a Great Component for the Great Recursion. I need a Component.":"\u042f \u0441\u0433\u0435\u043d\u0435\u0440\u044e \u0442\u0435\u0431\u0435 \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430.","Where can I find it?":"\u0413\u0434\u0435 \u043c\u043d\u0435 \u0435\u0435 \u043d\u0430\u0439\u0442\u0438?","I updated the location mark in the car.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u043c\u0430\u0448\u0438\u043d\u0435.","..Component.. ?":"..\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430..?","Yes. I have finished generating the Component for the Great Component of the Great Recursion.":"\u0414\u0430. \u042f \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","I need to deliver it to generate the Great Component.":"\u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0435 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","The location mark in your car has been updated. It will point to the Component of the Great Component.":"\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d. \u041e\u043d \u0443\u043a\u0430\u0436\u0435\u0442 \u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","Is my car the key to Components?":"\u041c\u043e\u044f \u043c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u043a\u043b\u044e\u0447 \u043a \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c?","Your Car is the main Iterator. Follow it.":"\u0422\u0432\u043e\u044f \u041c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0418\u0442\u0435\u0440\u0430\u0442\u043e\u0440. \u0421\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","open dialog":"\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433","close dialog":"\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",drive:"\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",exit:"\u0432\u044b\u0439\u0442\u0438","To be continued":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442",chapter:"\u0433\u043b\u0430\u0432\u0430",open:"\u043f\u0443\u0441\u043a","Author: ":"\u0410\u0432\u0442\u043e\u0440: ",link:"\u0441\u0441\u044b\u043b\u043a\u0430"}}),Ut=kt(zt),Vt=Object(St.b)((function(e){return{userReplicies:e.ui.userReplicies}}))((function(e){return Object(xt.jsx)("div",{className:"replicies",children:e.userReplicies.map((function(t){return Object(xt.jsx)("button",{onClick:function(){e.dispatch({type:"CLICK_PHRASE",phrase:t}),setTimeout((function(){e.dispatch({type:"PHRASE_EVENT",phrase:t})}),1e3)},children:Ut(t.q)},Math.floor(1e5*Math.random()))}))})})),Kt=kt(zt),qt=Object(St.b)((function(e){return{botAnswers:e.ui.botAnswers}}))((function(e){return Object(xt.jsx)("div",{className:"messages",children:e.botAnswers.map((function(e){return Object(xt.jsxs)("div",{children:[Object(xt.jsx)("div",{className:"q",children:Kt(e.q)}),Object(xt.jsx)("div",{className:"a",children:Kt(e.a)})]},Math.floor(1e5*Math.random()))}))})})),Ht=kt(zt);var Qt=Object(St.b)((function(e){return{isButtonDialog:e.ui.isButtonDialog,isShowFinalMessage:e.ui.isShowFinalMessage,isShowPalleteDialog:e.ui.isShowPalleteDialog,isShowButtonDrawCar:e.ui.isShowButtonDrawCar,valButtonDrawCar:e.ui.valButtonDrawCar,isShowButtonToggleOpenLocationsList:!0,isLocationListOpened:e.ui.isLocationListOpened,currentLocationOfList:e.ui.currentLocationOfList,locationsList:e.ui.locationsList}}))((function(e){return Object(xt.jsxs)(xt.Fragment,{children:[!e.isShowFinalMessage&&e.isButtonDialog&&!e.isShowPalleteDialog&&Object(xt.jsx)("button",{className:"control control-enter",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!0})}}),e.isShowPalleteDialog&&Object(xt.jsx)("div",{className:"dialog-wrapper",children:Object(xt.jsxs)("div",{className:"dialog-content",children:[e.isShowPalleteDialog&&Object(xt.jsxs)("div",{className:"messages-wrapper",children:[Object(xt.jsx)(qt,{}),Object(xt.jsx)(Vt,{})]}),e.isButtonDialog&&Object(xt.jsx)("button",{className:"dialog-button-toggle",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!e.isShowPalleteDialog})},children:e.isShowPalleteDialog?Ht("close dialog"):Ht("open dialog")})]})}),e.isShowButtonDrawCar&&Object(xt.jsx)("button",{className:"control ".concat("exit"===e.valButtonDrawCar?"control-exit":"control-enter"),onClick:function(){return e.dispatch({type:"CLICK_DRAW"})}}),e.isShowFinalMessage&&Object(xt.jsx)("div",{className:"final-mess",children:Ht("To be continued")})]})})),Yt=a(7),Zt={location01:"location02",location02:"location03",location03:"locationToFinish"},Xt={botAnswers:[],userReplicies:[],isShowControls:!0,isButtonDialog:!1,isShowPalleteDialog:!1,isShowFinalMessage:!1,isShowButtonDrawCar:!1,valButtonDrawCar:"drive",currentLocation:null,phrasesData:{location01:{isComplete:!1,phraseIndex:0,phrases:[{q:"What's happening?",a:"I'm generating the Great Recursion. I need a component. Deliver it to me.",event:"nextReply"},{q:"Alright. Where can I find this component?",a:"I updated the location mark in your car, follow it.",event:"nextReply"},{q:"I'll be back.",a:"For the glory of Recursion.",event:"close"}]},location02:{isComplete:!1,phraseIndex:0,phrases:[{q:"Do you have a Great Recursion Component?",a:"I will generate you a Great Component for the Great Recursion. I need a Component.",event:"nextReply"},{q:"Where can I find it?",a:"I updated the location mark in the car.",event:"close"}]},location03:{isComplete:!1,phraseIndex:0,phrases:[{q:"..Component.. ?",a:"Yes. I have finished generating the Component for the Great Component of the Great Recursion.",event:"nextReply"},{q:"I need to deliver it to generate the Great Component.",a:"The location mark in your car has been updated. It will point to the Component of the Great Component.",event:"nextReply"},{q:"Is my car the key to Components?",a:"Your Car is the main Iterator. Follow it.",event:"close"}]}},isShowButtonToggleOpenLocationsList:!1,isLocationListOpened:!1,currentLocationOfList:"location01",locationsList:["location01","location02","location03"]},Jt=[{key:"emitter",constr:x,initStateKey:"pageLoaded"},{key:"deviceResizer",constr:function e(t){Object(C.a)(this,e);var a=t.emitter,o=t.appWrapper;!o&&(o=document.querySelector(".app-wrapper")),a.subscribe("mouseDown")((function(e){"butt-fullscreen"===e&&r()}));var r=function(){o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen()},n=function(e){o.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px",o.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",document.fullscreenElement||a.emit("screenMode")("exitFullScreen")};window.addEventListener("resize",n),n()},initStateKey:"pageLoaded"},{key:"loaderAssets",constr:k,initStateKey:"pageLoaded"},{key:"frameUpdater",constr:D,initStateKey:"beforeStartPlay"},{key:"tweenUpdater",constr:function e(t){Object(C.a)(this,e),t.emitter.subscribe("frameUpdate")((function(){return F.b()}))},initStateKey:"beforeStartPlay"},{key:"studio",constr:W,initStateKey:"beforeStartPlay"},{key:"keyBoard",constr:z,initStateKey:"beforeStartPlay"},{key:"player",constr:U,initStateKey:"beforeStartPlay"},{key:"system_PlayerNearLevelItems",constr:ue,initStateKey:"beforeStartPlay"},{key:"materialsLib",constr:function e(t){Object(C.a)(this,e);var a=t.assets,o=t.CONSTANTS;t.materials=V(a,o.MATERIALS_CONFIG)},initStateKey:"beforeStartPlay"},{key:"system_Assets",constr:function e(t){Object(C.a)(this,e),this._root=t;var a=t.assets,o=t.materials;this.items=K(a,o),console.log(this.items)},initStateKey:"beforeStartPlay",assetsToLoad:[{type:"obj",path:q,key:"level-rooms"},{type:"cubeTextures",path:[$,$,$,$,$,$],key:"skyBox"},{type:"cubeTextures",path:[ee,te,ae,oe,re,ne],key:"skyBox2"},{type:"img",path:H,key:"mapFloorOuter",wrap:!0},{type:"img",path:Y,key:"mapTop",wrap:!0},{type:"img",path:Q,key:"mapVirtual2",wrap:!0},{type:"img",path:Z,key:"mapParams"},{type:"img",path:X,key:"mapBody"},{type:"img",path:J,key:"mapBodySh"}]},{key:"car",constr:ce,initStateKey:"beforeStartPlay"},{key:"system_PlayerMoveOnLevel",constr:le,initStateKey:"beforeStartPlay"},{key:"system_Sound",constr:function(){function e(t){var a=this;Object(C.a)(this,e);var o=new u.AudioListener;t.player.getCamera().add(o),this._sound=new u.Audio(o),this._sound.setBuffer(t.assets.soundAmbient),this._sound.setLoop(!0),this._sound.setVolume(.35),this._soundCarStart=new u.Audio(o),this._soundCarStart.setBuffer(t.assets.carStart),this._soundCarStart.setLoop(!1),this._soundCarStart.setVolume(.09),this._soundCar=new u.Audio(o),this._soundCar.setBuffer(t.assets.carLoop),this._soundCar.setLoop(!0),this._soundCar.setVolume(.09),this._isMuted=!1,t.emitter.subscribe("toggleSound")((function(e){a._isMuted=e,e?(a._sound.isPlaying&&a._sound.stop(),a._soundCarStart.isPlaying&&a._soundCarStart.stop(),a._soundCar.isPlaying&&a._soundCar.stop()):a._sound.play()})),this._timer=null}return Object(w.a)(e,[{key:"playAmbient",value:function(){this._sound.play()}},{key:"startCar",value:function(){var e=this;this._isMuted||(this._soundCarStart.play(),this._timer=setTimeout((function(){e._soundCar.play()}),4e3))}},{key:"stopCar",value:function(){this._isMuted||(this._soundCarStart.isPlaying&&this._soundCarStart.stop(),this._soundCar.isPlaying&&this._soundCar.stop(),clearTimeout(this._timer))}}]),e}(),initStateKey:"beforeStartPlay",assetsToLoad:[{type:"soundMp3",path:a.p+"static/media/ambient.c90940e8.mp3",key:"soundAmbient"},{type:"soundMp3",path:a.p+"static/media/ambient_intro.4a7e68a9.mp3",key:"carStart"},{type:"soundMp3",path:a.p+"static/media/ambient_loop.9be52f42.mp3",key:"carLoop"}]},{key:"customUi",constr:function e(t){Object(C.a)(this,e),t.appWrapper=document.querySelector(".app-wrapper"),t.CustomReactComponent=Qt,t.customStore=function(e){return{ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,a=arguments.length>1?arguments[1]:void 0;if("TOGGLE_BUTTON_DIALOG"===a.type){var o=a.keyPerson.split("_")[1],r=[];if(t.phrasesData[o])for(var n=t.phrasesData[o],i=n.phraseIndex,s=n.phrases,c=0;c<i;++c)r.push(s[c]);return Object(A.a)(Object(A.a)({},t),{},{isButtonDialog:a.is,currentLocation:o,userReplicies:[],botAnswers:r})}if("TOGGLE_DIALOG"===a.type){var l=[];if(e.player.toggleBlocked(a.isShowPalleteDialog),a.isShowPalleteDialog){var u=t.phrasesData[t.currentLocation],p=u.isComplete,h=u.phraseIndex,m=u.phrases;l=p?[]:[m[h]]}return setTimeout((function(){return e.dispatcher.dispatch({type:"TOGGLE_CONTROLS",is:!a.isShowPalleteDialog})})),Object(A.a)(Object(A.a)({},t),{},{isShowPalleteDialog:a.isShowPalleteDialog,userReplicies:l})}if("CLICK_PHRASE"===a.type)return Object(A.a)(Object(A.a)({},t),{},{botAnswers:[].concat(Object(pe.a)(t.botAnswers),[a.phrase]),userReplicies:[]});if("PHRASE_EVENT"===a.type){var b=a.phrase.event;if("nextReply"===b){var d=t.phrasesData[t.currentLocation],f=(d.isComplete,d.phraseIndex)+1,v=[d.phrases[f]];return Object(A.a)(Object(A.a)({},t),{},{phrasesData:Object(A.a)(Object(A.a)({},t.phrasesData),{},Object(Yt.a)({},t.currentLocation,Object(A.a)(Object(A.a)({},t.phrasesData[t.currentLocation]),{},{phraseIndex:f}))),userReplicies:v})}if("close"===b){var O=t.phrasesData[t.currentLocation].phraseIndex+1;return setTimeout((function(){e.dispatcher.dispatch({type:"SELECT_LOCATION",location:Zt[t.currentLocation]})}),50),Object(A.a)(Object(A.a)({},t),{},{userReplicies:[],phrasesData:Object(A.a)(Object(A.a)({},t.phrasesData),{},Object(Yt.a)({},t.currentLocation,Object(A.a)(Object(A.a)({},t.phrasesData[t.currentLocation]),{},{isComplete:!0,phraseIndex:O}))),isButtonDialog:!0})}}return"TOGGLE_BUTTON_DRAW_CAR"===a.type?Object(A.a)(Object(A.a)({},t),{},{isShowButtonDrawCar:a.is}):"CLICK_DRAW"===a.type?"drive"===t.valButtonDrawCar?(e.actions.clickMachineDraw(),Object(A.a)(Object(A.a)({},t),{},{valButtonDrawCar:"exit"})):(e.actions.clickMachineExit(),Object(A.a)(Object(A.a)({},t),{},{valButtonDrawCar:"drive"})):"OPEN_LOCATIONS_LIST"===a.type?Object(A.a)(Object(A.a)({},t),{},{isLocationListOpened:!0}):"SELECT_LOCATION"===a.type?(e.actions.changeTargetLocation({key:a.location}),Object(A.a)(Object(A.a)({},t),{},{isLocationListOpened:!1,currentLocationOfList:a.location})):"SHOW_FINAL_MESSAGE"===a.type?Object(A.a)(Object(A.a)({},t),{},{isShowFinalMessage:!0}):t}}}(t);var a=new Wt(t);t.ui=a},initStateKey:"pageLoaded"},{key:"actions",constr:_t,initStateKey:"beforeStartPlay"}];window.addEventListener("load",(function(){return function(e,t){return s.apply(this,arguments)}(Jt,o)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.3c499bf3.chunk.js.map