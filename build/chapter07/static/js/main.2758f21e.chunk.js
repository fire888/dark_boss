(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"SIZE_QUADRANT",(function(){return m})),n.d(o,"LOCATIONS_QUADRANTS",(function(){return f})),n.d(o,"MATERIALS_CONFIG",(function(){return b})),n.d(o,"CONFIG_FOR_INIT",(function(){return g})),n.d(o,"lCol",(function(){return v})),n.d(o,"lW",(function(){return y})),n.d(o,"ENV_START",(function(){return w})),n.d(o,"ENV_NORMAL",(function(){return C})),n.d(o,"ENV_RED",(function(){return _})),n.d(o,"ENV_RED_NEAR",(function(){return O})),n.d(o,"ENV_END",(function(){return j})),n.d(o,"START_ENV_CONFIG",(function(){return M})),n.d(o,"ENV_CONFIG_WORD_1",(function(){return x})),n.d(o,"ENV_CONFIG_WORD_2",(function(){return S})),n.d(o,"studioConfig",(function(){return k})),n.d(o,"playerConfig",(function(){return E}));var r=n(10),a=n.n(r),i=n(12);function s(){return(s=Object(i.a)(a.a.mark((function e(t,n){var o,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("pageLoaded",t,o={CONSTANTS:n}),r=o.loaderAssets,i=u(t),e.next=6,r.loadAssets(i);case 6:o.assets=e.sent,c("beforeStartPlay",t,o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e,t,n){for(var o=0;o<t.length;++o){var r=t[o],a=r.key,i=r.constr;r.initStateKey===e&&(n[a]=new i(n))}},u=function(e){for(var t=[],n=0;n<e.length;++n)if(e[n].assetsToLoad&&e[n].assetsToLoad.length)for(var o=0;o<e[n].assetsToLoad.length;++o)t.push(e[n].assetsToLoad[o]);return t},l=n(0),h=[1,1,1],p=([].concat(h,h,h,h,h,h),[.5,1,0]),A=([].concat(p,p,p,p,p,p),[1,1,0]),d=([].concat(A,A,A,A,A,A),{iron:{mat:"MeshPhongMaterial",props:{color:3355443,lightMap:"ironAO",lightMapIntensity:.35,normalMap:"ironNormal",normalScale:new l.Vector2(.1,.1),envMap:"skyBox3",reflectivity:.02,shininess:10,specular:16777215}},iron2:{mat:"MeshPhongMaterial",props:{color:13421772,lightMap:"ironAO",lightMapIntensity:.35,normalMap:"ironNormal",normalScale:new l.Vector2(1,1),envMap:"skyBox3",reflectivity:.02,shininess:100,specular:131585}},floorMat1:{mat:"MeshPhongMaterial",props:{color:16777215,map:"mapTop",bumpMap:"mapTop",bumpScale:2,reflectivity:.1,shininess:.01,specular:16777215,emissive:5592405}},body:{mat:"MeshPhongMaterial",props:{color:16777215,envMap:"skyBox3",reflectivity:3,specular:16777215}},bodyRed:{mat:"MeshPhongMaterial",props:{color:11141120,envMap:"skyBox3",emissive:7798784,reflectivity:.01,specular:16711680}},bodyShadow:{mat:"MeshBasicMaterial",props:{color:2236976,transparent:!0,alphaMap:"bodyDropShadow",opacity:1}},whiteBasic:{mat:"MeshBasicMaterial",props:{color:16777215}},greenBasic:{mat:"MeshBasicMaterial",props:{color:3407701}},whiteBasic2:{mat:"MeshBasicMaterial",props:{color:11184810}}}),m=5e3,f={"3_-3":"location01","-3_-3":"location02","3_3":"location03","100_1000":"locationToFinish"},b=d,g={isInCar:!1,currentSceneConfig:{isInVirtual:!1,isPlayerInCar:!1,carProps:{keyMesh:"car",keyCollide:"carCollision",position:[0,-50,-100],rotation:[0,2,0]},bodyProps:{keyMesh:"body",position:[-20,-60,-50],rotation:[0,2,0]}}},v=[.3,1,.3],y=.2,w={fogNear:0,fogFar:0,colorFog:4544609,colorBack:4544609,backgroundImgKey:null},C={fogNear:0,fogFar:1e3,colorFog:4544609,colorBack:4544609,backgroundImgKey:null},_={fogNear:0,fogFar:1e3,colorFog:8912896,colorBack:65793,backgroundImgKey:null},O={fogNear:0,fogFar:40,colorFog:8912896,colorBack:65793,backgroundImgKey:null},j={fogNear:0,fogFar:0,colorFog:65793,colorBack:65793,backgroundImgKey:null},M={fogNear:0,fogFar:0,color:4852294,backgroundImgKey:null},x={fogNear:0,fogFar:1e3,color:4544609,backgroundImgKey:null},S={fogNear:1500,fogFar:3e3,color:0,backgroundImgKey:"skyBox"},k={canId:"webgl-canvas",rendererCon:{antialias:!0},amb:{color:16777215,strength:.1},sceneEnvironment:M,composerAddPass:"Saturate"},E={speed:.8,speedRot:.02,speedDown:-.45,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startPos:[0,-45,150],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e4,pos:[0,2,-.5]},frontObjPos:[0,0,-1],backObjPos:[0,0,1],lightDataOne:{color:5592405,strength:1,dist:0,decay:.001,pos:[0,10,0]}},T=n(1),D=n(2),R=n(21),I=n(22),N=function(){var e=null,t=null,n=null,o=null,r=null;return function(a,i){return new Promise((function(s){(function(a){return"obj"===a?e=e||new R.a:"glb"===a||"gltf"===a?n=n||new I.a:"img"===a?t=t||new l.TextureLoader:"cubeTextures"===a?o=o||new l.CubeTextureLoader:"soundMp3"===a?r=r||new l.AudioLoader:void 0})(i).load(a,s)}))}},P=function(){function e(){Object(T.a)(this,e),this.resources={},this._load=N()}return Object(D.a)(e,[{key:"loadAssets",value:function(e){var t=this;return new Promise((function(n){var o=t._load,r=t.resources;function s(e){return c.apply(this,arguments)}function c(){return(c=Object(i.a)(a.a.mark((function t(i){var c,u,l,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e[i]){t.next=5;break}return c=e[i],u=c.key,l=c.path,h=c.type,t.next=4,o(l,h);case 4:r[u]=t.sent;case 5:if(++i,e[i]){t.next=10;break}n(r),t.next=12;break;case 10:return t.next=12,s(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s(0)}))}}]),e}(),L=function(){function e(){Object(T.a)(this,e),this._storage={}}return Object(D.a)(e,[{key:"emit",value:function(e){var t=this;return function(n){return F(t._storage)(e).forEach((function(e){return e(n)}))}}},{key:"subscribe",value:function(e){var t=this;return function(n){return F(t._storage)(e).push(n),function(){return t._storage[e]=t._storage[e].filter((function(e){return e!==n}))}}}},{key:"showAll",value:function(){var e={};for(var t in this._storage)e[t]=this._storage[t].length;console.log(e)}}]),e}(),F=function(e){return function(t){return e[t]=e[t]||[]}},B=n(4),G=n(46),W=function(){function e(){var t=this;Object(T.a)(this,e),this._subscribers=[];var n={time:0,delta:0,count:0,oldTime:0},o=G.a((function(){return n}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0===e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){for(var n=0;n<t._subscribers.length;++n)t._subscribers[n](Object(B.a)({},e));return e}),(function(e){return e.oldTime=e.time,e}),(function(e){return n=e}));!function e(){requestAnimationFrame(e),o(n)}()}return Object(D.a)(e,[{key:"on",value:function(e){var t=this;return this._subscribers.push(e),function(){t._subscribers=t._subscribers.filter((function(t){return t!==e}))}}}]),e}(),U=n(16),q=n(27),K=n(24),Q=n(14),V={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel * texel * texel) * vec4(3.);\n}"},z={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel + texel * 1.5) * vec4(0.5);\n}"},Y=n(23),H=function(){function e(t){var n=this;Object(T.a)(this,e),this._root=t;t.assets;var o=t.emitter,r=t.CONSTANTS.studioConfig,a=r.canId,i=r.rendererCon;i.canvas=document.getElementById(a),this._renderer=new l.WebGLRenderer(i),this._renderer.setClearColor(85),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(window.innerWidth,window.innerHeight),this._scene=new l.Scene,this._lightA=new l.AmbientLight(4544609,.4),this._scene.add(this._lightA),this._playerCamera=new l.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera=new l.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera.position.set(0,0,20);var s=new Y.a(this._controlsCamera,this._renderer.domElement);s.target.set(0,0,0),s.update(),this._composer=new q.a(this._renderer),this._renderPass=new K.a(this._scene,this._controlsCamera),this._composer.addPass(this._renderPass),this._root.CONSTANTS.studioConfig.composerAddPass&&("Saturate"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new Q.a(V)),"Saturate2"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new Q.a(z)));var c=new l.Vector3,u=!0;o.subscribe("keyEvent")((function(e){e.o&&(u?(u=!1,n._renderPass.camera=n._controlsCamera,n._playerCamera.getWorldPosition(c),n._controlsCamera.position.x=c.x+100,n._controlsCamera.position.y=c.y+100,n._controlsCamera.position.z=c.z,s.target.set(c.x,c.y,c.z),s.update()):(u=!0,n._renderPass.camera=n._playerCamera))}));var h=function(){var e={width:window.innerWidth,height:window.innerHeight};n._renderer.setSize(e.width,e.height),n._composer.setSize(e.width,e.height),n._controlsCamera&&(n._controlsCamera.aspect=e.width/e.height,n._controlsCamera.updateProjectionMatrix()),n._playerCamera&&(n._playerCamera.aspect=e.width/e.height,n._playerCamera.updateProjectionMatrix())};window.addEventListener("resize",h),h(),this.addToScene=function(e){return n._scene.add(e)},this.removeFromScene=function(e){return n._scene.remove(e)},this.drawFrame=function(){n._composer.render(n._scene,n._controlsCamera)},o.subscribe("changeSceneEnvironment")((function(e){console.log("deprecated!!","studio","changeSceneEnvironment",e)}))}return Object(D.a)(e,[{key:"setCamera",value:function(e){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),this._playerCamera=e,this._renderPass.camera=this._playerCamera}},{key:"changeEnvironment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._changeFog(e,t),this._changeBackground(e,t)}},{key:"_changeFog",value:function(e,t){}},{key:"_changeBackground",value:function(e){}}]),e}(),J=function(){function e(t){Object(T.a)(this,e);var n=t.emitter,o={up:!1,down:!1,left:!1,right:!1,p:!1},r={up:!0,down:!0,left:!0,right:!0};this.keysEnabled=r,this.keys=o;var a=function(e,t){switch(e){case 38:case 87:r.up&&(o.up=t);break;case 40:case 83:r.down&&(o.down=t);break;case 37:case 65:o.left=t;break;case 39:case 68:o.right=t;break;case 79:o.o=t;break;case 80:o.p=t}n.emit("keyEvent")(o)};document.addEventListener("keydown",(function(e){return a(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){return a(e.keyCode,!1)})),n.subscribe("mouseDown")((function(e){"butt-left"===e&&a(37,!0),"butt-right"===e&&a(39,!0),"butt-front"===e&&a(38,!0),"butt-back"===e&&a(40,!0)})),n.subscribe("mouseUp")((function(e){"butt-left"===e&&a(37,!1),"butt-right"===e&&a(39,!1),"butt-front"===e&&a(38,!1),"butt-back"===e&&a(40,!1)}))}return Object(D.a)(e,[{key:"toggleEnableKeys",value:function(e,t){this.keysEnabled[e]=t,!t&&(this.keys[e]=!1)}}]),e}(),Z=function(){function e(t){Object(T.a)(this,e);var n=t.studio,o=t.CONSTANTS.playerConfig,r=o.cameraData,a=o.lightDataOne;this._camera=null,this.isBlocked=!0,this.isFreeze=!0,this.mesh=new l.Object3D,this.mesh.rotation.fromArray([0,0,0]),this.mesh.userData.type="player",this.bottomObj=new l.Object3D,this.bottomObj.position.fromArray([0,-.02,0]),this.mesh.add(this.bottomObj),this.frontObj=new l.Object3D,this.frontObj.position.fromArray([0,0,-.02]),this.mesh.add(this.frontObj),this.backObj=new l.Object3D,this.backObj.position.fromArray([0,0,.02]),this.mesh.add(this.backObj);var i=r.fov,s=r.ratio,c=r.near,u=r.far;if(this._camera=new l.PerspectiveCamera(i,s,c,u),this._camera.position.fromArray([0,0,-2]),this.mesh.add(this._camera),a){var h=a.color,p=a.strenth,A=a.pos,d=new l.PointLight(h,p);d.position.fromArray(A),this.mesh.add(d)}n.setCamera(this._camera),n.addToScene(this.mesh)}return Object(D.a)(e,[{key:"toggleFeeze",value:function(e){this.isFeeze=e}},{key:"toggleCanMove",value:function(e,t){}},{key:"getObj",value:function(){return this.mesh}},{key:"getCamera",value:function(){return this._camera}},{key:"setToPos",value:function(e,t,n){this.mesh.position.set(e,t,n)}}]),e}(),X=function(e,t){for(var n in e)e[n].wrapS&&(e[n].wrapS=e[n].wrapT=l.RepeatWrapping);var o=["bumpMap","envMap","map","normalMap","lightMap","aoMap","alphaMap"],r={},a=function(n){r[n]=new l[t[n].mat](Object(B.a)({},t[n].props)),o.map((function(o){return t[n].props[o]&&(r[n][o]=e[t[n].props[o]])}))};for(var i in t)a(i);return r},$=n.p+"static/media/mapGround.8bd68b3e.jpg",ee=n.p+"static/media/posx.be2d83a2.jpg",te=n.p+"static/media/negx.d016c8e7.jpg",ne=n.p+"static/media/posy.01cfd221.jpg",oe=n.p+"static/media/negy.f01f8356.jpg",re=n.p+"static/media/posz.ef37b8e1.jpg",ae=n.p+"static/media/negz.f346a80a.jpg",ie=n(11),se=function(){function e(){Object(T.a)(this,e),this._arrMeshes=[],this._vecStart=new l.Vector3,this._vecDir=new l.Vector3,this._rayCaster=new l.Raycaster(this._vecStart,this._vecDir)}return Object(D.a)(e,[{key:"setItemToCollision",value:function(e){for(var t=0;t<this._arrMeshes.length;++t)if(this._arrMeshes[t]===e)return;this._arrMeshes.push(e)}},{key:"removeItemFromCollision",value:function(e){this._arrMeshes=this._arrMeshes.filter((function(t){return t!==e}))}},{key:"checkCollisions",value:function(e,t,n){e.getWorldPosition(this._vecStart),t.getWorldPosition(this._vecDir),this._vecDir.sub(this._vecStart);var o=this._rayCaster.intersectObjects(this._arrMeshes);return o[0]&&o[0].distance<n?[!0,o[0]]:[!1,null]}}]),e}(),ce=function(){function e(t){var n=this;Object(T.a)(this,e);var o=t.emitter,r=t.CONSTANTS,a=t.player,i=new se,s=r.playerConfig,c=s.speed,u=s.speedRot,l=!0;a.toggleBlocked=function(e){return l=e},this.isCanMove={forward:!0,back:!0},a.toggleCanMove=function(e,t){return n.isCanMove[e]=t},this.isFreeze=!1;var h={};this.update=function(e){n.isFreeze||(h.left&&a.mesh.rotateY(u*e.count),h.right&&a.mesh.rotateY(-u*e.count),l||(h.up&&n.isCanMove.forward&&function(e){var t=i.checkCollisions(a.mesh,a.frontObj,17),n=Object(ie.a)(t,2),r=n[0],s=n[1];r?s.object.userData.type&&"alert"===s.object.userData.type&&o.emit("collision")(s.object.userData.event):(a.mesh.translateZ(-c*e.count),o.emit("playerMove")("forward"))}(e),h.down&&n.isCanMove.back&&function(e){var t=i.checkCollisions(a.mesh,a.backObj,17);Object(ie.a)(t,1)[0]||(a.mesh.translateZ(c*e.count),o.emit("playerMove")("back"))}(e),h.p&&console.log("player.mesh.position.fromArray([".concat(a.mesh.position.x,", ").concat(a.mesh.position.y,", ").concat(a.mesh.position.z,"])"))))},o.subscribe("keyEvent")((function(e){h=e})),this._collisionsWalls=i}return Object(D.a)(e,[{key:"addItemToPlayerCollision",value:function(e){this._collisionsWalls.setItemToCollision(e)}},{key:"removeItemFromPlayerCollision",value:function(e){this._collisionsWalls.removeItemFromCollision(e)}},{key:"toggleFreeze",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isFreeze;this.isFreeze=e}}]),e}(),ue=function(){function e(t){var n=this;Object(T.a)(this,e),this._root=t;var o=t.emitter,r=t.player;this._itemsToCheck=[],o.subscribe("playerMove")((function(){for(var e=0;e<n._itemsToCheck.length;++e){var t=r.mesh.position.distanceTo(n._itemsToCheck[e].position);if(!n._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t<n._itemsToCheck[e].userData.nearPlayerItemNear)return n._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!0,void o.emit("checkNear")({item:n._itemsToCheck[e].userData.nearPlayerItemKey,is:!0});n._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t>n._itemsToCheck[e].userData.nearPlayerItemNear&&(n._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!1,o.emit("checkNear")({item:n._itemsToCheck[e].userData.nearPlayerItemKey,is:!1}))}}))}return Object(D.a)(e,[{key:"setItemToCheck",value:function(e,t,n,o){for(var r=0;r<this._itemsToCheck.length;++r)if(e===this._itemsToCheck[r])return;t&&(e.userData.nearPlayerItemKey=t),n&&(e.userData.nearPlayerItemNear=n),o&&(e.userData.nearPlayerItemFar=o),e.userData.nearPlayerIsNearPlayer=!1,this._itemsToCheck.push(e)}},{key:"removeItemFromCheck",value:function(e){this._itemsToCheck=this._itemsToCheck.filter((function(t){return t!==e}))}}]),e}(),le=n(6),he=Float32Array;function pe(e,t,n){return(n=n||new he(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Ae(e,t){t=t||new he(3);var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return n>1e-5&&(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n),t}function de(e,t,n){return(n=n||new he(3))[0]=e[1]*t[2]-e[2]*t[1],n[1]=e[2]*t[0]-e[0]*t[2],n[2]=e[0]*t[1]-e[1]*t[0],n}function me(e,t){var n=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return n*n+o*o+r*r}function fe(e,t){t=t||new he(16);var n=e[0],o=e[1],r=e[2],a=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],h=e[9],p=e[10],A=e[11],d=e[12],m=e[13],f=e[14],b=e[15],g=p*b,v=f*A,y=c*b,w=f*u,C=c*A,_=p*u,O=r*b,j=f*a,M=r*A,x=p*a,S=r*u,k=c*a,E=l*m,T=d*h,D=i*m,R=d*s,I=i*h,N=l*s,P=n*m,L=d*o,F=n*h,B=l*o,G=n*s,W=i*o,U=g*s+w*h+C*m-(v*s+y*h+_*m),q=v*o+O*h+x*m-(g*o+j*h+M*m),K=y*o+j*s+S*m-(w*o+O*s+k*m),Q=_*o+M*s+k*h-(C*o+x*s+S*h),V=1/(n*U+i*q+l*K+d*Q);return t[0]=V*U,t[1]=V*q,t[2]=V*K,t[3]=V*Q,t[4]=V*(v*i+y*l+_*d-(g*i+w*l+C*d)),t[5]=V*(g*n+j*l+M*d-(v*n+O*l+x*d)),t[6]=V*(w*n+O*i+k*d-(y*n+j*i+S*d)),t[7]=V*(C*n+x*i+S*l-(_*n+M*i+k*l)),t[8]=V*(E*u+R*A+I*b-(T*u+D*A+N*b)),t[9]=V*(T*a+P*A+B*b-(E*a+L*A+F*b)),t[10]=V*(D*a+L*u+G*b-(R*a+P*u+W*b)),t[11]=V*(N*a+F*u+W*A-(I*a+B*u+G*A)),t[12]=V*(D*p+N*f+T*c-(I*f+E*c+R*p)),t[13]=V*(F*f+E*r+L*p-(P*p+B*f+T*r)),t[14]=V*(P*c+W*f+R*r-(G*f+D*r+L*c)),t[15]=V*(G*p+I*r+B*c-(F*c+W*p+N*r)),t}var be={copy:function(e,t){return(t=t||new he(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},lookAt:function(e,t,n,o){o=o||new he(16);var r=Ae(pe(e,t)),a=Ae(de(n,r)),i=Ae(de(r,a));return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=0,o[4]=i[0],o[5]=i[1],o[6]=i[2],o[7]=0,o[8]=r[0],o[9]=r[1],o[10]=r[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},addVectors:function(e,t,n){return(n=n||new he(3))[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n},subtractVectors:pe,scaleVector:function(e,t,n){return(n=n||new he(3))[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n},distance:function(e,t){return Math.sqrt(me(e,t))},distanceSq:me,normalize:Ae,compose:function(e,t,n,o){o=o||new he(16);var r=t[0],a=t[1],i=t[2],s=t[3],c=r+r,u=a+a,l=i+i,h=r*c,p=r*u,A=r*l,d=a*u,m=a*l,f=i*l,b=s*c,g=s*u,v=s*l,y=n[0],w=n[1],C=n[2];return o[0]=(1-(d+f))*y,o[1]=(p+v)*y,o[2]=(A-g)*y,o[3]=0,o[4]=(p-v)*w,o[5]=(1-(h+f))*w,o[6]=(m+b)*w,o[7]=0,o[8]=(A+g)*C,o[9]=(m-b)*C,o[10]=(1-(h+d))*C,o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},cross:de,decompose:function(e,t,n,o){var r=be.length(e.slice(0,3)),a=be.length(e.slice(4,7)),i=be.length(e.slice(8,11));(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],a=e[4],i=e[5],s=e[6],c=e[7],u=e[8],l=e[9],h=e[10],p=e[11],A=e[12],d=e[13],m=e[14],f=e[15],b=h*f,g=m*p,v=s*f,y=m*c,w=s*p,C=h*c,_=o*f,O=m*r,j=o*p,M=h*r,x=o*c,S=s*r;return 1/(t*(b*i+y*l+w*d-(g*i+v*l+C*d))+a*(g*n+_*l+M*d-(b*n+O*l+j*d))+u*(v*n+O*i+x*d-(y*n+_*i+S*d))+A*(C*n+j*i+S*l-(w*n+M*i+x*l)))})(e)<0&&(r=-r),t[0]=e[12],t[1]=e[13],t[2]=e[14];var s=be.copy(e),c=1/r,u=1/a,l=1/i;s[0]*=c,s[1]*=c,s[2]*=c,s[4]*=u,s[5]*=u,s[6]*=u,s[8]*=l,s[9]*=l,s[10]*=l,function(e,t){var n=e[0],o=e[4],r=e[8],a=e[1],i=e[5],s=e[9],c=e[2],u=e[6],l=e[10],h=n+i+l;if(h>0){var p=.5/Math.sqrt(h+1);t[3]=.25/p,t[0]=(u-s)*p,t[1]=(r-c)*p,t[2]=(a-o)*p}else if(n>i&&n>l){var A=2*Math.sqrt(1+n-i-l);t[3]=(u-s)/A,t[0]=.25*A,t[1]=(o+a)/A,t[2]=(r+c)/A}else if(i>l){var d=2*Math.sqrt(1+i-n-l);t[3]=(r-c)/d,t[0]=(o+a)/d,t[1]=.25*d,t[2]=(s+u)/d}else{var m=2*Math.sqrt(1+l-n-i);t[3]=(a-o)/m,t[0]=(r+c)/m,t[1]=(s+u)/m,t[2]=.25*m}}(s,n),o[0]=r,o[1]=a,o[2]=i},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},identity:function(e){return(e=e||new he(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new he(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},orthographic:function(e,t,n,o,r,a,i){return(i=i||new he(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(o-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(r-a),i[11]=0,i[12]=(e+t)/(e-t),i[13]=(n+o)/(n-o),i[14]=(r+a)/(r-a),i[15]=1,i},frustum:function(e,t,n,o,r,a,i){var s=t-e,c=o-n,u=a-r;return(i=i||new he(16))[0]=2*r/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*r/c,i[6]=0,i[7]=0,i[8]=(e+t)/s,i[9]=(o+n)/c,i[10]=-(a+r)/u,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*r*a/u,i[15]=0,i},perspective:function(e,t,n,o,r){r=r||new he(16);var a=Math.tan(.5*Math.PI-.5*e),i=1/(n-o);return r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(n+o)*i,r[11]=-1,r[12]=0,r[13]=0,r[14]=n*o*i*2,r[15]=0,r},translation:function(e,t,n,o){return(o=o||new he(16))[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=e,o[13]=t,o[14]=n,o[15]=1,o},translate:function(e,t,n,o,r){r=r||new he(16);var a=e[0],i=e[1],s=e[2],c=e[3],u=e[4],l=e[5],h=e[6],p=e[7],A=e[8],d=e[9],m=e[10],f=e[11],b=e[12],g=e[13],v=e[14],y=e[15];return e!==r&&(r[0]=a,r[1]=i,r[2]=s,r[3]=c,r[4]=u,r[5]=l,r[6]=h,r[7]=p,r[8]=A,r[9]=d,r[10]=m,r[11]=f),r[12]=a*t+u*n+A*o+b,r[13]=i*t+l*n+d*o+g,r[14]=s*t+h*n+m*o+v,r[15]=c*t+p*n+f*o+y,r},xRotation:function(e,t){t=t||new he(16);var n=Math.cos(e),o=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=o,t[7]=0,t[8]=0,t[9]=-o,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yRotation:function(e,t){t=t||new he(16);var n=Math.cos(e),o=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-o,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=o,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zRotation:function(e,t){t=t||new he(16);var n=Math.cos(e),o=Math.sin(e);return t[0]=n,t[1]=o,t[2]=0,t[3]=0,t[4]=-o,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xRotate:function(e,t,n){n=n||new he(16);var o=e[4],r=e[5],a=e[6],i=e[7],s=e[8],c=e[9],u=e[10],l=e[11],h=Math.cos(t),p=Math.sin(t);return n[4]=h*o+p*s,n[5]=h*r+p*c,n[6]=h*a+p*u,n[7]=h*i+p*l,n[8]=h*s-p*o,n[9]=h*c-p*r,n[10]=h*u-p*a,n[11]=h*l-p*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},yRotate:function(e,t,n){n=n||new he(16);var o=e[0],r=e[1],a=e[2],i=e[3],s=e[8],c=e[9],u=e[10],l=e[11],h=Math.cos(t),p=Math.sin(t);return n[0]=h*o-p*s,n[1]=h*r-p*c,n[2]=h*a-p*u,n[3]=h*i-p*l,n[8]=h*s+p*o,n[9]=h*c+p*r,n[10]=h*u+p*a,n[11]=h*l+p*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},zRotate:function(e,t,n){n=n||new he(16);var o=e[0],r=e[1],a=e[2],i=e[3],s=e[4],c=e[5],u=e[6],l=e[7],h=Math.cos(t),p=Math.sin(t);return n[0]=h*o+p*s,n[1]=h*r+p*c,n[2]=h*a+p*u,n[3]=h*i+p*l,n[4]=h*s-p*o,n[5]=h*c-p*r,n[6]=h*u-p*a,n[7]=h*l-p*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},axisRotation:function(e,t,n){n=n||new he(16);var o=e[0],r=e[1],a=e[2],i=Math.sqrt(o*o+r*r+a*a),s=(o/=i)*o,c=(r/=i)*r,u=(a/=i)*a,l=Math.cos(t),h=Math.sin(t),p=1-l;return n[0]=s+(1-s)*l,n[1]=o*r*p+a*h,n[2]=o*a*p-r*h,n[3]=0,n[4]=o*r*p-a*h,n[5]=c+(1-c)*l,n[6]=r*a*p+o*h,n[7]=0,n[8]=o*a*p+r*h,n[9]=r*a*p-o*h,n[10]=u+(1-u)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},axisRotate:function(e,t,n,o){o=o||new he(16);var r=t[0],a=t[1],i=t[2],s=Math.sqrt(r*r+a*a+i*i),c=(r/=s)*r,u=(a/=s)*a,l=(i/=s)*i,h=Math.cos(n),p=Math.sin(n),A=1-h,d=c+(1-c)*h,m=r*a*A+i*p,f=r*i*A-a*p,b=r*a*A-i*p,g=u+(1-u)*h,v=a*i*A+r*p,y=r*i*A+a*p,w=a*i*A-r*p,C=l+(1-l)*h,_=e[0],O=e[1],j=e[2],M=e[3],x=e[4],S=e[5],k=e[6],E=e[7],T=e[8],D=e[9],R=e[10],I=e[11];return o[0]=d*_+m*x+f*T,o[1]=d*O+m*S+f*D,o[2]=d*j+m*k+f*R,o[3]=d*M+m*E+f*I,o[4]=b*_+g*x+v*T,o[5]=b*O+g*S+v*D,o[6]=b*j+g*k+v*R,o[7]=b*M+g*E+v*I,o[8]=y*_+w*x+C*T,o[9]=y*O+w*S+C*D,o[10]=y*j+w*k+C*R,o[11]=y*M+w*E+C*I,e!==o&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o},scaling:function(e,t,n,o){return(o=o||new he(16))[0]=e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},scale:function(e,t,n,o,r){return(r=r||new he(16))[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=t*e[3],r[4]=n*e[4],r[5]=n*e[5],r[6]=n*e[6],r[7]=n*e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=o*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},multiply:function(e,t,n){n=n||new he(16);var o=t[0],r=t[1],a=t[2],i=t[3],s=t[4],c=t[5],u=t[6],l=t[7],h=t[8],p=t[9],A=t[10],d=t[11],m=t[12],f=t[13],b=t[14],g=t[15],v=e[0],y=e[1],w=e[2],C=e[3],_=e[4],O=e[5],j=e[6],M=e[7],x=e[8],S=e[9],k=e[10],E=e[11],T=e[12],D=e[13],R=e[14],I=e[15];return n[0]=o*v+r*_+a*x+i*T,n[1]=o*y+r*O+a*S+i*D,n[2]=o*w+r*j+a*k+i*R,n[3]=o*C+r*M+a*E+i*I,n[4]=s*v+c*_+u*x+l*T,n[5]=s*y+c*O+u*S+l*D,n[6]=s*w+c*j+u*k+l*R,n[7]=s*C+c*M+u*E+l*I,n[8]=h*v+p*_+A*x+d*T,n[9]=h*y+p*O+A*S+d*D,n[10]=h*w+p*j+A*k+d*R,n[11]=h*C+p*M+A*E+d*I,n[12]=m*v+f*_+b*x+g*T,n[13]=m*y+f*O+b*S+g*D,n[14]=m*w+f*j+b*k+g*R,n[15]=m*C+f*M+b*E+g*I,n},inverse:fe,transformVector:function(e,t,n){n=n||new he(4);for(var o=0;o<4;++o){n[o]=0;for(var r=0;r<4;++r)n[o]+=t[r]*e[4*r+o]}return n},transformPoint:function(e,t,n){n=n||new he(3);var o=t[0],r=t[1],a=t[2],i=o*e[3]+r*e[7]+a*e[11]+e[15];return n[0]=(o*e[0]+r*e[4]+a*e[8]+e[12])/i,n[1]=(o*e[1]+r*e[5]+a*e[9]+e[13])/i,n[2]=(o*e[2]+r*e[6]+a*e[10]+e[14])/i,n},transformDirection:function(e,t,n){n=n||new he(3);var o=t[0],r=t[1],a=t[2];return n[0]=o*e[0]+r*e[4]+a*e[8],n[1]=o*e[1]+r*e[5]+a*e[9],n[2]=o*e[2]+r*e[6]+a*e[10],n},transformNormal:function(e,t,n){n=n||new he(3);var o=fe(e),r=t[0],a=t[1],i=t[2];return n[0]=r*o[0]+a*o[1]+i*o[2],n[1]=r*o[4]+a*o[5]+i*o[6],n[2]=r*o[8]+a*o[9]+i*o[10],n},setDefaultType:function(e){var t=he;return he=e,t}},ge=(Math.random,function(e,t){var n=Math.atan(t/e);return e<0&&t>0&&(n=Math.PI-Math.abs(n)),e<0&&t<=0&&(n=Math.PI+Math.abs(n)),n}),ve=function(e,t){for(var n=be.yRotation(t),o=0;o<e.length;o+=3){var r=be.transformPoint(n,[e[o+0],e[o+1],e[o+2],1]);e[o+0]=r[0],e[o+1]=r[1],e[o+2]=r[2]}},ye=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=be.translation(t,n,o),a=0;a<e.length;a+=3){var i=be.transformPoint(r,[e[a+0],e[a+1],e[a+2],1]);e[a+0]=i[0],e[a+1]=i[1],e[a+2]=i[2]}},we=function(e){var t=e.p0,n=e.p1,o=e.h0,r=e.h1,a=e.isCapTop,i=o+.3*(r-o),s=r-.3*(r-o),c=[],u=[],l=[],h=[],p=[],A=[],d=n[0]-t[0],m=n[1]-t[1],f=Math.sqrt(d*d+m*m),b=ge(d,m);c.push(0,o,5,f,o,5,f,i-4,5,0,i-4,5),h.push(0,1,2,0,2,3),c.push(0,i-4,5,f,i-4,5,f,i-3,4,0,i-3,4),h.push(4,5,6,4,6,7),c.push(0,i-3,4,f,i-3,4,f,i,4,0,i,4),h.push(8,9,10,8,10,11),c.push(0,i,4,f,i,4,f,i,0,0,i,0),h.push(12,13,14,12,14,15),c.push(0,s,0,f,s,0,f,s,5,0,s,5),h.push(16,17,18,16,18,19),c.push(0,s,5,f,s,5,f,r,5,0,r,5),h.push(20,21,22,20,22,23),a&&(c.push(0,r,5,f,r,5,f,r,0,0,r,0),h.push(24,25,26,24,26,27));for(var g=Math.floor(f/5),v=f/g,y=0;y<g;++y){var w=3.5*Math.random();u.push(y*v,i,w,y*v+v,i,w,y*v+v,s,w,y*v,s,w);var C=p[p.length-1]+1||0;p.push(C+0,C+1,C+2,C+0,C+2,C+3)}for(var _=1;_<g;++_){var O=u[4*_*3-1],j=u[4*(_+1)*3-1];l.push(_*v,i,O,_*v,i,j,_*v,s,j,_*v,s,O);var M=A[A.length-1]+1||0;A.push(M+0,M+1,M+2,M+0,M+2,M+3)}return ve(c,-b),ve(u,-b),ve(l,-b),ye(c,t[0],-45,t[1]),ye(u,t[0],-45,t[1]),ye(l,t[0],-45,t[1]),{vM00:c,ind00:h,vM01:u,ind01:p,vM02:l,ind02:A,cM00:[],cM01:[],cM02:[],uM00:[],uM01:[],uM02:[]}},Ce=!0,_e=function(e){Ce&&(console.log(e),Ce=!1);var t=e.p0,n=e.p1,o=e.p2,r=e.h0,a=e.h1,i=e.isCapTop;i&&(a+=.5);var s=[],c=[],u=t[0]-n[0],l=t[1]-n[1],h=ge(u,l),p=[0,r,6,5,r,6,5,a,6,0,a,6,5,r,6,5,r,0,5,a,0,5,a,6];c.push(0,1,2,0,2,3,4,5,6,4,6,7),ve(p,-h),s.push.apply(s,p);var A=n[0]-o[0],d=n[1]-o[1],m=ge(A,d),f=[-5,r,6,-0,r,6,-0,a,6,-5,a,6,-5,r,6,-5,r,0,-5,a,0,-5,a,6];return c.push(8,9,10,8,10,11,13,12,15,13,15,14),ve(f,-m),s.push.apply(s,f),s.push(s[27],s[28],s[29],s[0],s[1],s[2],s[9],s[10],s[11],s[30],s[31],s[32]),c.push(16,17,18,16,18,19),i&&(s.push(s[6],s[7],s[8],s[45],s[46],s[47],s[30],s[31],s[32],s[9],s[10],s[11],s[18],s[19],s[20],s[42],s[43],s[44],s[33],s[34],s[35],s[21],s[22],s[23]),c.push(20,21,22,20,22,23,24,25,26,24,26,27)),ye(s,n[0],-45,n[1]),{vM00:[],ind00:[],vM01:s,ind01:c,vM02:[],ind02:[],cM00:[],cM01:[],cM02:[],uM00:[],uM01:[],uM02:[]}},Oe=!0,je=-15,Me=function(e){Oe&&(Oe=!1);var t=e.p0,n=e.p1,o=e.h0,r=e.h1,a=[],i=[],s=t[0]-n[0],c=t[1]-n[1],u=Math.sqrt(s*s+c*c),l=ge(s,c);return a.push(-3,o,7,3,o,7,3,r-7,7,-3,r,7,u+3-6,o,7,u+3,o,7,u+3,r,7,u+3-6,r-7,7,-3,o,je,3,o,je,3,r-7,je,-3,r,je,u+3-6,o,je,u+3,o,je,u+3,r,je,u+3-6,r-6,je),i.push(0,1,2,0,2,3,4,5,6,4,6,7,3,2,7,3,7,6,8,0,3,8,3,11,1,9,10,1,10,2,12,4,7,12,7,15,5,13,14,5,14,6,7,2,10,7,10,15,3,6,14,3,14,11,9,8,11,9,11,10,13,12,15,13,15,14,15,10,11,15,11,14),ve(a,-l),ye(a,n[0],-45,n[1]),{vM00:[],ind00:[],vM01:[],ind01:[],vM02:a,ind02:i,cM00:[],cM01:[],cM02:[],uM00:[],uM01:[],uM02:[]}},xe=!0,Se=function(e){xe&&(console.log(e),xe=!1);var t=e.p0,n=e.p1,o=e.p2,r=e.p3,a=e.h0;a-=45;var i=[],s=[];return i.push(t[0],a,t[1],n[0],a,n[1],o[0],a,o[1],r[0],a,r[1]),s.push(0,1,2,0,2,3),{vM00:[],ind00:[],vM01:[],ind01:[],vM02:i,ind02:s,cM00:[],cM01:[],cM02:[],uM00:[],uM01:[],uM02:[]}},ke="\n#define lPos vec3(1., 1., -1.)\n varying float l;\n void main() {    \n     l = min(max(dot(lPos, normal), 0.5), 0.75);\n     gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Ee=function(e){for(var t=0,n=0;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Te=function(e){for(var t=function(){for(var e=[],t=function(e){for(var t=[e[0]-150*Math.random()+40,e[1]+150*Math.random()+40],n=[e[0]+150*Math.random()+40,e[1]+150*Math.random()+40],o=[e[0]-150*Math.random()+40,e[1]-150*Math.random()+40],r=[e[0]+150*Math.random()+40,e[1]-150*Math.random()+40],a=[],i=Math.floor(10*Math.random()),s=30*Math.random()+50,c=0;c<i;++c){var u=c*s,l=c*s+s,h=[],p=[];if(c===i-1&&a.push({type:"ceiling_00_easy",p0:[].concat(r),p1:[].concat(o),p2:[].concat(t),p3:[].concat(n),h0:l}),0===c&&a.push({type:"ceiling_00_easy",p0:[].concat(o),p1:[].concat(r),p2:[].concat(n),p3:[].concat(t),h0:l}),0===c){var A=[o[0]+.4*(r[0]-o[0]),o[1]+.4*(r[1]-o[1])],d=[o[0]+.6*(r[0]-o[0]),o[1]+.6*(r[1]-o[1])];a.push({type:"door_00_easy",h0:u,h1:l,p0:A,p1:d}),h.push({p0:[].concat(r),p1:[].concat(d),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(A),p1:[].concat(o),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1});var m=[o[0]+.4*(r[0]-o[0]),o[1]+.4*(r[1]+6-o[1]+6)],f=[o[0]+.6*(r[0]-o[0]),o[1]+.6*(r[1]+6-o[1]+6)];p.push({p0:[o[0]+6,o[1]+6],p1:[].concat(m),type:"wall_00_easy",h0:u,h1:l},{p0:[].concat(f),p1:[r[0]-6,r[1]+6],type:"wall_00_easy",h0:u,h1:l}),p.push({p0:[r[0]-6,r[1]+6],p1:[n[0]-6,n[1]-6],type:"wall_00_easy",h0:u,h1:l},{p0:[n[0]-6,n[1]-6],p1:[t[0]+6,t[1]-6],type:"wall_00_easy",h0:u,h1:l},{p0:[t[0]+6,t[1]-6],p1:[o[0]+6,o[1]+6],type:"wall_00_easy",h0:u,h1:l})}0!==c&&h.push({p0:[].concat(r),p1:[].concat(o),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1}),h.push({p0:[].concat(n),p1:[].concat(r),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(t),p1:[].concat(n),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(o),p1:[].concat(t),type:"wall_00_easy",h0:u,h1:l,isCapTop:c===i-1});var b=[{p0:[].concat(t),p1:[].concat(o),p2:[].concat(r),type:"corner_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(o),p1:[].concat(r),p2:[].concat(n),type:"corner_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(r),p1:[].concat(n),p2:[].concat(t),type:"corner_00_easy",h0:u,h1:l,isCapTop:c===i-1},{p0:[].concat(n),p1:[].concat(t),p2:[].concat(o),type:"corner_00_easy",h0:u,h1:l,isCapTop:c===i-1}];a.push.apply(a,h.concat(b)),a.push.apply(a,p)}return a},n=0;n<10;++n)for(var o=0;o<10;++o){var r=t([300*n-300,300*o-300]);e.push.apply(e,Object(le.a)(r))}return{walls:e}}().walls,n=function(e){var t=new l.ShaderMaterial({vertexShader:ke,fragmentShader:"\nvarying float l;\nvoid main() {\n    vec3 c = vec3(l * 0.8, l * .25, l * .8);\n    gl_FragColor = vec4(c, 1.);\n}\n"});t.flatShading=!0,t.needsUpdate=!0;var n=new l.ShaderMaterial({vertexShader:ke,fragmentShader:"\nvarying float l;\nvoid main() {\n    vec3 c = vec3(l * 0., l * .5, l * .25);\n    gl_FragColor = vec4(c, 1.);\n}\n"});return n.flatShading=!0,n.needsUpdate=!0,{shaderMaterialGray:t,shaderMaterialBlack:n}}(),o=[n.shaderMaterialGray,n.shaderMaterialBlack,e.materials.greenBasic],r=[],a=[],i=[],s=[],c=[],u=[],h=function(e){r.push.apply(r,Object(le.a)(e.vM00));for(var t=a.length?Ee(a)+1:0,n=0;n<e.ind00.length;++n)a.push(t+e.ind00[n]);i.push.apply(i,Object(le.a)(e.vM01));for(var o=s.length?Ee(s)+1:0,l=0;l<e.ind01.length;++l)s.push(o+e.ind01[l]);c.push.apply(c,Object(le.a)(e.vM02));for(var h=u.length?Ee(u)+1:0,p=0;p<e.ind02.length;++p)u.push(h+e.ind02[p])},p=0;p<t.length;++p){if("wall_00_easy"===t[p].type)h(we(t[p]));if("corner_00_easy"===t[p].type)h(_e(t[p]));if("door_00_easy"===t[p].type)h(Me(t[p]));if("ceiling_00_easy"===t[p].type)h(Se(t[p]))}for(var A=[].concat(a),d=A[A.length-1]+1,m=0;m<s.length;++m)A.push(d+s[m]);for(var f=A[A.length-1]+1,b=0;b<u.length;++b)A.push(f+u[b]);var g=a.length,v=s.length,y=u.length,w=[].concat(r,i,c),C=new Float32Array(w),_=new l.BufferGeometry;_.setAttribute("position",new l.BufferAttribute(C,3)),_.setIndex(A),_.computeVertexNormals(),_.addGroup(0,g,0),_.addGroup(g,v,1),_.addGroup(g+v,y,2);var O=new l.Mesh(_,o);return O.position.set(0,-20,-200),e.studio.addToScene(O),console.log(O),{mesh:O}},De=n(5),Re=n(18),Ie=n.n(Re),Ne=n(8),Pe=(n(40),"en"),Le=function(e){return function(t){return e[Pe]&&e[Pe][t]||t}},Fe=n(3),Be=Le({ru:{"Discovery of small android":"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0434\u0440\u043e\u0438\u0434\u0430",Factory:"\u0424\u0430\u0431\u0440\u0438\u043a\u0430",Brige:"\u041c\u043e\u0441\u0442",Cube:"\u041a\u0443\u0431",Endways:"\u041d\u0430\u043f\u0440\u044f\u043c\u0438\u043a",Machine:"\u041c\u0430\u0448\u0438\u043d\u0430",Rooms:"\u041a\u043e\u043c\u043d\u0430\u0442\u044b","in production":"\u0441\u043a\u043e\u0440\u043e.."," (current)":" (\u0442\u0443\u0442)","Author: ":"\u043e\u0442: ","Github: ":"\u0413\u0438\u0442\u0445\u0430\u0431: "}}),Ge=Object(Ne.b)((function(e){return Object(B.a)({},e.controls.infoPanelData)}))((function(e){return Object(Fe.jsxs)("div",{className:"info",children:[Object(Fe.jsx)("button",{className:"control-small butt-infoClose",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),Object(Fe.jsxs)("div",{className:"info-inner",children:[Object(Fe.jsx)("p",{children:Be(e.title)}),Object(Fe.jsx)("p",{children:Be(e.topText)}),Object(Fe.jsx)("ul",{children:e.chapters.map((function(t,n){return Object(Fe.jsxs)("li",{children:[n+1,".\xa0",t.href?Object(Fe.jsx)("span",{children:Object(Fe.jsx)("a",{href:t.href,target:"blank",children:Be(t.text)})}):Object(Fe.jsx)("span",{children:Be(t.text)}),n===e.currentChapterIndex&&Be(" (current)")]},n)}))}),Object(Fe.jsx)("p",{children:e.bottomText}),Object(Fe.jsx)("ul",{children:e.afterWords.map((function(e,t){return Object(Fe.jsxs)("li",{children:[Be(e.text),Object(Fe.jsx)("a",{href:e.href,target:"blank",children:Be(e.aText)})]},t)}))})]})]})})),We=(n(42),Object(Ne.b)((function(e){return{isInfo:e.controls.isInfo,isShowControls:e.controls.isShowControls,isShowControlSound:e.controls.isShowControlSound,isMute:e.controls.isMute}}))((function(e){var t=Object(De.useState)(!0),n=Object(ie.a)(t,2),o=n[0],r=n[1];return Object(De.useEffect)((function(){return e.gameContext.emitter.subscribe("screenMode")((function(e){"exitFullScreen"===e&&r(!0)}))})),Object(Fe.jsxs)("div",{className:"ui-controls",children:[e.isShowControls&&e.isShowControlSound&&Object(Fe.jsx)("button",{className:"".concat(e.isMute?"butt-sound-n":"butt-sound"," control-small"),onMouseUp:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})},onTouchEnd:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})}}),e.isShowControls&&Object(Fe.jsx)("button",{className:"butt-left control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")}}),e.isShowControls&&Object(Fe.jsx)("button",{className:"butt-right control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")}}),e.isShowControls&&Object(Fe.jsx)("button",{className:"butt-front control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")}}),e.isShowControls&&Object(Fe.jsx)("button",{className:"butt-back control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")}}),e.isShowControls&&o&&Object(Fe.jsx)("button",{className:"butt-fullscreen control-small",onClick:function(){e.gameContext.emitter.emit("mouseDown")("butt-fullscreen"),r(!1)}}),!e.isInfo&&Object(Fe.jsx)("button",{className:"butt-info control-small",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),e.isInfo&&Object(Fe.jsx)(Ge,{})]})})));var Ue={dispatch:null},qe=Object(Ne.b)((function(e){return{isShowControls:e.controls.isShowControls,isInfo:e.controls.isInfo}}))((function(e){return!Ue.dispatch&&(Ue.dispatch=e.dispatch),Object(Fe.jsxs)("div",{className:"ui",children:[!e.isInfo&&e.gameContext.CustomReactComponent&&Object(Fe.jsx)(e.gameContext.CustomReactComponent,{gameContext:e.gameContext}),Object(Fe.jsx)(We,{gameContext:e.gameContext})]})})),Ke=n(15),Qe=n(26),Ve={isShowControls:!0,isShowControlSound:!1,isMute:!1,isInfo:!1,infoPanelData:{title:"Discovery of small android",topText:"",chapters:[{text:"Factory",href:"./../chapter01"},{text:"Brige",href:"./../chapter02"},{text:"Cube",href:"./../chapter03"},{text:"Endways",href:"./../chapter04"},{text:"Machine",href:"./../chapter05"},{text:"Rooms",href:"./../chapter06"},{text:"in production"}],currentChapterIndex:null,bottomText:"",afterWords:[{text:"Author: ",aText:"www.otrisovano.ru",href:"http://otrisovano.ru"},{text:"Github: ",aText:"https://github.com/fire888/dark_boss",href:"https://github.com/fire888/dark_boss"}]}};var ze=document.querySelector(".progress"),Ye=-100,He=!0;!function e(){He&&setTimeout((function(){0===++Ye&&(Ye-=100),ze.style.marginLeft=Ye+"%",e()}),30)}();var Je=function(){function e(t){Object(T.a)(this,e),t.dispatcher=Ue,this._root=t;var n=function(e){e.customStore||(e.customStore={});var t=Object(Ke.b)(Object(B.a)({controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_INFO"===t.type?Object(B.a)(Object(B.a)({},e),{},{isShowControls:!!e.isInfo,isInfo:!e.isInfo}):"CHANGE_INFO_CHAPTER"===t.type?Object(B.a)(Object(B.a)({},e),{},{infoPanelData:Object(B.a)(Object(B.a)({},e.infoPanelData),{},{currentChapterIndex:t.currentChapterIndex})}):"TOGGLE_CONTROLS"===t.type?Object(B.a)(Object(B.a)({},e),{},{isShowControls:t.is}):"ENABLE_CONTROL_SOUND"===t.type?Object(B.a)(Object(B.a)({},e),{},{isShowControlSound:!0}):"TOGGLE_MUTE"===t.type?Object(B.a)(Object(B.a)({},e),{},{isMute:t.is}):Object(B.a)({},e)}},e.customStore)),n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ke.c;return Object(Ke.d)(t,n(Object(Ke.a)(Qe.a)))}(t);n&&Ie.a.render(Object(Fe.jsx)(Ne.a,{store:n,children:Object(Fe.jsx)(qe,{gameContext:t})}),document.getElementById("root"))}return Object(D.a)(e,[{key:"showStartButton",value:function(e){var t=document.querySelector(".startbuttons-wrapper"),n=document.querySelector(".progress-wrapper"),o=function(e){var t;e.target.dataset&&e.target.dataset.lang&&(t=e.target.dataset.lang,Pe=t),document.querySelector(".start-screen").style.display="none"};He=!1,t.style.display="flex",t.addEventListener("click",(function(t){e(),o(t)})),n.style.display="none"}}]),e}(),Ze=(n(43),{ru:{"What's happening?":"\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442?","I'm generating the Great Recursion. I need a component. Deliver it to me.":"\u042f \u0433\u0435\u043d\u0435\u0440\u044e \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u044e. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430. \u0414\u043e\u0441\u0442\u0430\u0432\u044c \u043c\u043d\u0435 \u0435\u0435.","Alright. Where can I find this component?":"\u0425\u043e\u0440\u043e\u0448\u043e. \u0413\u0434\u0435 \u043c\u043d\u0435 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443?","I updated the location mark in your car, follow it.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435, \u0441\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","I'll be back.":"\u042f \u0432\u0435\u0440\u043d\u0443\u0441\u044c.","For the glory of Recursion.":"\u0412\u043e \u0441\u043b\u0430\u0432\u0443 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","Do you have a Great Recursion Component?":"\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438?","I will generate you a Great Component for the Great Recursion. I need a Component.":"\u042f \u0441\u0433\u0435\u043d\u0435\u0440\u044e \u0442\u0435\u0431\u0435 \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430.","Where can I find it?":"\u0413\u0434\u0435 \u043c\u043d\u0435 \u0435\u0435 \u043d\u0430\u0439\u0442\u0438?","I updated the location mark in the car.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u043c\u0430\u0448\u0438\u043d\u0435.","..Component.. ?":"..\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430..?","Yes. I have finished generating the Component for the Great Component of the Great Recursion.":"\u0414\u0430. \u042f \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","I need to deliver it to generate the Great Component.":"\u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0435 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","The location mark in your car has been updated. It will point to the Component of the Great Component.":"\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d. \u041e\u043d \u0443\u043a\u0430\u0436\u0435\u0442 \u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","Is my car the key to Components?":"\u041c\u043e\u044f \u043c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u043a\u043b\u044e\u0447 \u043a \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c?","Your Car is the main Iterator. Follow it.":"\u0422\u0432\u043e\u044f \u041c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0418\u0442\u0435\u0440\u0430\u0442\u043e\u0440. \u0421\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","open dialog":"\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433","close dialog":"\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",drive:"\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",exit:"\u0432\u044b\u0439\u0442\u0438","To be continued":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442",chapter:"\u0433\u043b\u0430\u0432\u0430",open:"\u043f\u0443\u0441\u043a","Author: ":"\u0410\u0432\u0442\u043e\u0440: ",link:"\u0441\u0441\u044b\u043b\u043a\u0430"}}),Xe=Le(Ze),$e=Object(Ne.b)((function(e){return{userReplicies:e.ui.userReplicies}}))((function(e){return Object(Fe.jsx)("div",{className:"replicies",children:e.userReplicies.map((function(t){return Object(Fe.jsx)("button",{onClick:function(){e.dispatch({type:"CLICK_PHRASE",phrase:t}),setTimeout((function(){e.dispatch({type:"PHRASE_EVENT",phrase:t})}),1e3)},children:Xe(t.q)},Math.floor(1e5*Math.random()))}))})})),et=Le(Ze),tt=Object(Ne.b)((function(e){return{botAnswers:e.ui.botAnswers}}))((function(e){return Object(Fe.jsx)("div",{className:"messages",children:e.botAnswers.map((function(e){return Object(Fe.jsxs)("div",{children:[Object(Fe.jsx)("div",{className:"q",children:et(e.q)}),Object(Fe.jsx)("div",{className:"a",children:et(e.a)})]},Math.floor(1e5*Math.random()))}))})})),nt=Le(Ze);var ot=Object(Ne.b)((function(e){return{isButtonDialog:e.ui.isButtonDialog,isShowFinalMessage:e.ui.isShowFinalMessage,isShowPalleteDialog:e.ui.isShowPalleteDialog,isShowButtonDrawCar:e.ui.isShowButtonDrawCar,valButtonDrawCar:e.ui.valButtonDrawCar,isShowButtonToggleOpenLocationsList:!0,isLocationListOpened:e.ui.isLocationListOpened,currentLocationOfList:e.ui.currentLocationOfList,locationsList:e.ui.locationsList}}))((function(e){return Object(Fe.jsxs)(Fe.Fragment,{children:[!e.isShowFinalMessage&&e.isButtonDialog&&!e.isShowPalleteDialog&&Object(Fe.jsx)("button",{className:"control control-enter",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!0})}}),e.isShowPalleteDialog&&Object(Fe.jsx)("div",{className:"dialog-wrapper",children:Object(Fe.jsxs)("div",{className:"dialog-content",children:[e.isShowPalleteDialog&&Object(Fe.jsxs)("div",{className:"messages-wrapper",children:[Object(Fe.jsx)(tt,{}),Object(Fe.jsx)($e,{})]}),e.isButtonDialog&&Object(Fe.jsx)("button",{className:"dialog-button-toggle",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!e.isShowPalleteDialog})},children:e.isShowPalleteDialog?nt("close dialog"):nt("open dialog")})]})}),e.isShowButtonDrawCar&&Object(Fe.jsx)("button",{className:"control ".concat("exit"===e.valButtonDrawCar?"control-exit":"control-enter"),onClick:function(){return e.dispatch({type:"CLICK_DRAW"})}}),e.isShowFinalMessage&&Object(Fe.jsx)("div",{className:"final-mess",children:nt("To be continued")})]})})),rt=n(7),at={location01:"location02",location02:"location03",location03:"locationToFinish"},it={botAnswers:[],userReplicies:[],isShowControls:!0,isButtonDialog:!1,isShowPalleteDialog:!1,isShowFinalMessage:!1,isShowButtonDrawCar:!1,valButtonDrawCar:"drive",currentLocation:null,phrasesData:{location01:{isComplete:!1,phraseIndex:0,phrases:[{q:"What's happening?",a:"I'm generating the Great Recursion. I need a component. Deliver it to me.",event:"nextReply"},{q:"Alright. Where can I find this component?",a:"I updated the location mark in your car, follow it.",event:"nextReply"},{q:"I'll be back.",a:"For the glory of Recursion.",event:"close"}]},location02:{isComplete:!1,phraseIndex:0,phrases:[{q:"Do you have a Great Recursion Component?",a:"I will generate you a Great Component for the Great Recursion. I need a Component.",event:"nextReply"},{q:"Where can I find it?",a:"I updated the location mark in the car.",event:"close"}]},location03:{isComplete:!1,phraseIndex:0,phrases:[{q:"..Component.. ?",a:"Yes. I have finished generating the Component for the Great Component of the Great Recursion.",event:"nextReply"},{q:"I need to deliver it to generate the Great Component.",a:"The location mark in your car has been updated. It will point to the Component of the Great Component.",event:"nextReply"},{q:"Is my car the key to Components?",a:"Your Car is the main Iterator. Follow it.",event:"close"}]}},isShowButtonToggleOpenLocationsList:!1,isLocationListOpened:!1},st=n.p+"static/media/broken_down_concrete2_Normal-dx.4c6af83f.jpg",ct=n.p+"static/media/broken_down_concrete2_ao.dc08dd3d.jpg",ut=[{key:"emitter",constr:L,initStateKey:"pageLoaded"},{key:"deviceResizer",constr:function e(t){Object(T.a)(this,e);var n=t.emitter,o=t.appWrapper;!o&&(o=document.querySelector(".app-wrapper")),n.subscribe("mouseDown")((function(e){"butt-fullscreen"===e&&r()}));var r=function(){o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen()},a=function(e){o.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px",o.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",document.fullscreenElement||n.emit("screenMode")("exitFullScreen")};window.addEventListener("resize",a),a()},initStateKey:"pageLoaded"},{key:"loaderAssets",constr:P,initStateKey:"pageLoaded"},{key:"frameUpdater",constr:W,initStateKey:"beforeStartPlay"},{key:"tweenUpdater",constr:function e(t){Object(T.a)(this,e),t.emitter.subscribe("frameUpdate")((function(){return U.a()}))},initStateKey:"beforeStartPlay"},{key:"studio",constr:H,initStateKey:"beforeStartPlay"},{key:"keyBoard",constr:J,initStateKey:"beforeStartPlay"},{key:"player",constr:Z,initStateKey:"beforeStartPlay"},{key:"system_PlayerNearLevelItems",constr:ue,initStateKey:"beforeStartPlay"},{key:"materialsLib",constr:function e(t){Object(T.a)(this,e);var n=t.assets,o=t.CONSTANTS;t.materials=X(n,o.MATERIALS_CONFIG)},initStateKey:"beforeStartPlay"},{key:"system_PlayerMoveOnLevel",constr:ce,initStateKey:"beforeStartPlay"},{key:"customUi",constr:function e(t){Object(T.a)(this,e),t.appWrapper=document.querySelector(".app-wrapper"),t.CustomReactComponent=ot,t.customStore=function(e){return{ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,n=arguments.length>1?arguments[1]:void 0;if("TOGGLE_BUTTON_DIALOG"===n.type){var o=n.keyPerson.split("_")[1],r=[];if(t.phrasesData[o])for(var a=t.phrasesData[o],i=a.phraseIndex,s=a.phrases,c=0;c<i;++c)r.push(s[c]);return Object(B.a)(Object(B.a)({},t),{},{isButtonDialog:n.is,currentLocation:o,userReplicies:[],botAnswers:r})}if("TOGGLE_DIALOG"===n.type){var u=[];if(e.player.toggleBlocked(n.isShowPalleteDialog),n.isShowPalleteDialog){var l=t.phrasesData[t.currentLocation],h=l.isComplete,p=l.phraseIndex,A=l.phrases;u=h?[]:[A[p]]}return setTimeout((function(){return e.dispatcher.dispatch({type:"TOGGLE_CONTROLS",is:!n.isShowPalleteDialog})})),Object(B.a)(Object(B.a)({},t),{},{isShowPalleteDialog:n.isShowPalleteDialog,userReplicies:u})}if("CLICK_PHRASE"===n.type)return Object(B.a)(Object(B.a)({},t),{},{botAnswers:[].concat(Object(le.a)(t.botAnswers),[n.phrase]),userReplicies:[]});if("PHRASE_EVENT"===n.type){var d=n.phrase.event;if("nextReply"===d){var m=t.phrasesData[t.currentLocation],f=m.phraseIndex+1,b=[m.phrases[f]];return Object(B.a)(Object(B.a)({},t),{},{phrasesData:Object(B.a)(Object(B.a)({},t.phrasesData),{},Object(rt.a)({},t.currentLocation,Object(B.a)(Object(B.a)({},t.phrasesData[t.currentLocation]),{},{phraseIndex:f}))),userReplicies:b})}if("close"===d){var g=t.phrasesData[t.currentLocation].phraseIndex+1;return setTimeout((function(){e.dispatcher.dispatch({type:"SELECT_LOCATION",location:at[t.currentLocation]})}),50),Object(B.a)(Object(B.a)({},t),{},{userReplicies:[],phrasesData:Object(B.a)(Object(B.a)({},t.phrasesData),{},Object(rt.a)({},t.currentLocation,Object(B.a)(Object(B.a)({},t.phrasesData[t.currentLocation]),{},{isComplete:!0,phraseIndex:g}))),isButtonDialog:!0})}}return"TOGGLE_BUTTON_DRAW_CAR"===n.type?Object(B.a)(Object(B.a)({},t),{},{isShowButtonDrawCar:n.is}):"CLICK_DRAW"===n.type?"drive"===t.valButtonDrawCar?(e.actions.clickMachineDraw(),Object(B.a)(Object(B.a)({},t),{},{valButtonDrawCar:"exit"})):(e.actions.clickMachineExit(),Object(B.a)(Object(B.a)({},t),{},{valButtonDrawCar:"drive"})):"OPEN_LOCATIONS_LIST"===n.type?Object(B.a)(Object(B.a)({},t),{},{isLocationListOpened:!0}):"SELECT_LOCATION"===n.type?(e.actions.changeTargetLocation({key:n.location}),Object(B.a)(Object(B.a)({},t),{},{isLocationListOpened:!1,currentLocationOfList:n.location})):"SHOW_FINAL_MESSAGE"===n.type?Object(B.a)(Object(B.a)({},t),{},{isShowFinalMessage:!0}):t}}}(t);var n=new Je(t);t.ui=n},initStateKey:"pageLoaded"},{key:"actions",constr:function e(t){Object(T.a)(this,e),this._root=t;var n=this._root,o=n.dispatcher,r=n.frameUpdater,a=n.studio,i=n.system_PlayerMoveOnLevel,s=n.ui,c=n.player;o.dispatch({type:"CHANGE_INFO_CHAPTER",currentChapterIndex:6}),o.dispatch({type:"ENABLE_CONTROL_SOUND"}),this._worldReal=function(e){e.materials,e.studio,e.system_PlayerMoveOnLevel;var t=Te(e);return{addWorld:function(){},removeWorld:function(){},roomsArr:t.roomsArr,toNormal:function(){t.toNormal()},toNotWalls:function(){t.toNotWalls()},setEndWayPos:function(e,t,n){},getCoordsForFinalBox:t.getCoordsForFinalBox}}(t),this._worldReal.addWorld(),t.worldReal=this._worldReal,c.mesh.position.set(0,-40,0),c.mesh.position.set(0,-40,-120),a.changeEnvironment(C,{time:1}),c.toggleBlocked(!1),r.on((function(e){U.a(),i.update(e),a.drawFrame()})),s.showStartButton((function(){}))},initStateKey:"beforeStartPlay",assetsToLoad:[{type:"cubeTextures",path:[ee,te,ne,oe,re,ae],key:"skyBox3"},{type:"img",path:$,key:"mapTop",wrap:!0},{type:"img",path:st,key:"ironNormal",wrap:!0},{type:"img",path:n.p+"static/media/broken_down_concrete2_albedo.7ac3a0c4.jpg",key:"ironAlbedo",wrap:!0},{type:"img",path:ct,key:"ironAO",wrap:!0},{type:"obj",path:n.p+"static/media/body.6c7c86fe.obj",key:"bodyModel"},{type:"img",path:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAKAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAUEBAZEhknFxcnMiYfJjIuJiYmJi4+NTU1NTU+REFBQUFBQUREREREREREREREREREREREREREREREREREREREARUZGSAcICYYGCY2JiAmNkQ2Kys2REREQjVCRERERERERERERERERERERERERERERERERERERERERERERERERET/wAARCAEAAP8DASIAAhEBAxEB/8QAUAABAQEBAQAAAAAAAAAAAAAAAAECAwYBAQAAAAAAAAAAAAAAAAAAAAAQAQEBAAAAAAAAAAAAAAAAAAABEREBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A8YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgigALhgILhgIjSAgqAAAAAAAAAAAAAAAAAAAKACi4CYuLi4CYY1i4DGGN4mAxhjeM4DKNYgIigIAAAAAAAAAAAAAAqKAosAkakJGpAJFxZGsBnFxrFwGMTHTEwHPEsdMSwHKxLHSxmwHNG6yCIqAAAAAAAAAAAAAoKCxqMxuAsjUhI1ICyLhI0CYuKAmJjQDOM2NpYDnYzY6WMWA52M1us0GUWoCAAAAAAAAAAAAqxFgNRuMxuA1G4zGoDUVIoCgAACJVKDFYrpWKDFYrdYoMVGqyCAAAAAAAAAAAArUZWA3G4xG4DcbjEagNRUigoAAACCUErFbrFBisVusUGay1WQQAAAAAAAAAAAFWIoNRuOcbgOkajnK3KDcaYlaBVQBUABKJaCVitWsWgzWatZoM1FqAgAAAAAAAAAAACooNRYysB0lalc5WpQdJWtc5WpQb1dY00G9TWdNBdS1NZtBbWLS1m0C1mlQEBAAAAAAAAAAAAAAAVUAalalYXQbla1z1dB001jTQb01jTQa1LWdTQW1NTUAQAEAAAAAAAAAAAAAAABUAVWVBdXWQGtXWQGtTUAXU1AFQQFQAAAAAAAAAAAAAAAAAAAAAAAUQBRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/9k=",key:"bodyDropShadow"},{type:"obj",path:n.p+"static/media/endWay.020a585a.obj",key:"endWayModel"}]}];window.addEventListener("load",(function(){return function(e,t){return s.apply(this,arguments)}(ut,o)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.2758f21e.chunk.js.map