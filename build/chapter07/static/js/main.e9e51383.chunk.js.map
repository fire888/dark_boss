{"version":3,"sources":["_CORE/pipeLines/initPipeLine.js","chapter07/src/constants/constants_materials.js","chapter07/src/constants/constants_elements.js","_CORE/helpers/helper_LoadAssets.js","_CORE/helpers/helper_Emitter.js","_CORE/helpers/helper_FrameUpdater_02.js","_CORE/shaders/saturate.js","_CORE/shaders/saturate2.js","chapter07/src/Entities/Studio.js","_CORE/helpers/helper_KeyBoard.js","_CORE/entities/createPlayer_v02.js","_CORE/helpers/helper_MaterialsLib.js","assets/chapter06/mapGround.jpg","assets/matIronBox/posx.jpg","assets/matIronBox/negx.jpg","assets/matIronBox/posy.jpg","assets/matIronBox/negy.jpg","assets/matIronBox/posz.jpg","assets/matIronBox/negz.jpg","_CORE/helpers/helper_CollisionsItems_v02.js","chapter07/src/systems/system_PlayerMoveOnLevel.js","chapter07/src/systems/system_PlayerNearLevelItems.js","chapter07/src/helpers/m4.js","chapter07/src/helpers/geomHelpers.js","chapter07/src/Entities/town3/geom/wall_00_easy.js","chapter07/src/Entities/town3/geom/corner_00_easy.js","chapter07/src/Entities/town3/geom/door_00_easy.js","chapter07/src/Entities/town3/geom/ceiling_00_easy.js","chapter07/src/Entities/town3/materials.js","chapter07/src/Entities/town3/town3.js","chapter07/src/Entities/town3/town3Sheme.js","_CORE/helpers/helper_translate.js","_CORE/ui/containersReact/Info.js","_CORE/constants/default_voc.js","_CORE/ui/containersReact/PlayerControls.js","_CORE/ui/containersReact/App.js","_CORE/ui/store/defaultUiData.js","_CORE/ui/UI.js","_CORE/ui/store/createStore.js","chapter07/src/constants/constants_replicies.js","chapter07/src/ui/UserReplicies.js","chapter07/src/ui/BotAnswers.js","chapter07/src/ui/CustomReactComponent.js","chapter07/src/constants/const_dialogs.js","chapter07/src/ui/store.js","assets/chapter06/concrete/broken_down_concrete2_Normal-dx.jpg","assets/chapter06/concrete/broken_down_concrete2_ao.jpg","chapter07/src/constants/constants_modules.js","_CORE/helpers/helper_DeviceResizer.js","_CORE/helpers/helper_TweenUpdater.js","chapter07/src/ui/Ui.js","chapter07/src/actions/actions.js","chapter07/src/systems/system_worldReal.js","assets/chapter06/concrete/broken_down_concrete2_albedo.jpg","assets/chapter06/body.obj","assets/chapter06/mapShadowBody.jpg","assets/chapter06/endWay.obj","chapter07/src/index.js"],"names":["gameModules","CONSTANTS","a","initModulesByState","root","loaderAssets","dataToLoad","getAssetsFromModulesData","loadAssets","assets","state","modulesData","i","length","key","constr","initStateKey","arr","assetsToLoad","j","push","COLOR1_1","COLOR2_1","COLOR3_1","MATERIALS_CONF","mat","props","color","lightMap","lightMapIntensity","normalMap","normalScale","THREE","envMap","reflectivity","shininess","specular","map","bumpMap","bumpScale","emissive","transparent","alphaMap","opacity","SIZE_QUADRANT","LOCATIONS_QUADRANTS","MATERIALS_CONFIG","CONFIG_FOR_INIT","isInCar","currentSceneConfig","isInVirtual","isPlayerInCar","carProps","keyMesh","keyCollide","position","rotation","bodyProps","lCol","lW","ENV_START","fogNear","fogFar","colorFog","colorBack","backgroundImgKey","ENV_NORMAL","ENV_RED","ENV_RED_NEAR","ENV_END","START_ENV_CONFIG","ENV_CONFIG_WORD_1","ENV_CONFIG_WORD_2","studioConfig","canId","rendererCon","antialias","amb","strength","sceneEnvironment","composerAddPass","playerConfig","speed","speedRot","speedDown","offsetFromFloor","offsetFromFloorFactor","offsetWallCollision","level","startPos","cameraData","fov","ratio","window","innerWidth","innerHeight","near","far","pos","frontObjPos","backObjPos","lightDataOne","dist","decay","createLoaders","objLoader","textureLoader","gltfLoader","cubeTextureLoader","soundLoader","path","type","Promise","resolve","OBJLoader","GLTFLoader","getterLoader","load","LoaderAssets","this","resources","_load","data","iterate","index","EventEmitter","_storage","id","getOrCreateArrFromObj","forEach","action","callback","filter","item","s","console","log","obj","FrameUpdater","_subscribers","time","delta","count","oldTime","update","R","Date","now","isNaN","dataFromChine","animate","requestAnimationFrame","fn","Saturate","uniforms","value","vertexShader","fragmentShader","Saturate2","Studio","_root","emitter","canvas","document","getElementById","_renderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","_scene","_lightA","add","_playerCamera","_controlsCamera","set","controls","OrbitControls","domElement","target","_composer","EffectComposer","_renderPass","RenderPass","addPass","ShaderPass","vec3","isPlayerView","subscribe","camera","getWorldPosition","x","y","z","resize","size","width","height","aspect","updateProjectionMatrix","addEventListener","addToScene","mesh","removeFromScene","remove","drawFrame","render","cam","conf","_changeFog","_changeBackground","KeyBoard","gameContext","keys","keysEnabled","keyUpdate","keyCode","isDown","emit","event","is","Player","studio","_camera","isBlocked","isFreeze","fromArray","userData","bottomObj","frontObj","backObj","strenth","light","setCamera","val","isFeeze","createMaterials","wrapS","wrapT","mapsKeys","materials","keyMap","helper_CollisionsItems_v02","_arrMeshes","_vecStart","_vecDir","_rayCaster","objFrom","objTo","sub","intersects","intersectObjects","distance","system_PlayerMoveOnLevel","player","collisionsWalls","toggleBlocked","isCanMove","toggleCanMove","dir","rotateY","checkCollisions","isCollision","collision","object","translateZ","checkAndMoveFront","checkAndMoveBack","_collisionsWalls","setItemToCollision","removeItemFromCollision","system_PlayerNearLevelItems","_itemsToCheck","distanceTo","nearPlayerIsNearPlayer","nearPlayerItemNear","nearPlayerItemKey","itemKey","nearPlayerItemFar","itemIn","MatType","Float32Array","subtractVectors","b","dst","normalize","v","Math","sqrt","cross","distanceSq","dx","dy","dz","inverse","m","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","d","m4","copy","src","lookAt","cameraPosition","up","zAxis","xAxis","yAxis","addVectors","scaleVector","compose","translation","quaternion","scale","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","slice","determinate","matrix","invSX","invSY","invSZ","trace","quatFromRotationMatrix","dot","identity","transpose","lengthSq","orthographic","left","right","bottom","top","frustum","perspective","fieldOfViewInRadians","f","tan","PI","rangeInv","tx","ty","tz","translate","xRotation","angleInRadians","c","cos","sin","yRotation","zRotation","xRotate","yRotate","zRotate","axisRotation","axis","n","oneMinusCosine","axisRotate","r00","r01","r02","r10","r11","r12","r20","r21","r22","scaling","multiply","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","transformVector","transformPoint","v0","v1","v2","transformDirection","transformNormal","mi","setDefaultType","Ctor","OldType","angleFromCoords","random","rad","atan","abs","rotateArrY","angle","vector","translateArr","wall_00_easy","p0","p1","h0","h1","isCapTop","h0_0","h0_1","vM00","vM01","vM02","ind00","ind01","ind02","dX","dZ","l","countN","floor","segmentL","startInd","z1","cM00","cM01","cM02","uM00","uM01","uM02","isFirst","corner_00_easy","p2","DEP_2","door_00_easy","ceiling_00_easy","p3","vSh","getMaxIndex","createTown3","walls","createHouse","center","pNW","pNE","pSW","pSE","floorsNum","outerWalls","innerWalls","doorLeftP","doorRightP","doorLeftP_","doorRightP_","cornersOuter","r","createTown3Scheme","shaderMaterialGray","flatShading","needsUpdate","shaderMaterialBlack","greenBasic","fillArraysByData","start0","start1","start2","ind","l0","l1","l2","vertices","g","setAttribute","setIndex","computeVertexNormals","addGroup","lang","createTranslater","vocab","word","t","connect","infoPanelData","className","onClick","dispatch","title","topText","chapters","href","text","currentChapterIndex","bottomText","afterWords","aText","isInfo","isShowControls","isShowControlSound","isMute","useState","isShowFullScreenButt","changeShowFullScreenButt","useEffect","onMouseUp","onTouchEnd","onMouseDown","onTouchStart","dispatcher","CustomReactComponent","startDefaultStoreData","loader","querySelector","offsetLoader","isAnimateLoader","loaderTimeOut","setTimeout","style","marginLeft","UI","store","customStore","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","applyMiddleware","thunk","prepareStore","ReactDOM","startButtons","progressWrapper","hideStartScreen","e","dataset","display","TRANSLATE_WORLDS","CORE","UserReplicies","userReplicies","ui","phrase","q","BotAnswers","botAnswers","isButtonDialog","isShowFinalMessage","isShowPalleteDialog","isShowButtonDrawCar","valButtonDrawCar","isShowButtonToggleOpenLocationsList","isLocationListOpened","currentLocationOfList","locationsList","RESULT_DIALOGS","uiState","currentLocation","phrasesData","location01","isComplete","phraseIndex","phrases","location02","location03","GAME_MODULES","appWrapper","openAppFullScreenIfMobile","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fontSize","max","min","fullscreenElement","TWEEN","newLocation","keyPerson","split","nextPhraseIndex","location","actions","clickMachineDraw","clickMachineExit","changeTargetLocation","createCustomStore","frameUpdater","_worldReal","addWorld","removeWorld","roomsArr","toNormal","toNotWalls","setEndWayPos","getCoordsForFinalBox","createWorldReal","worldReal","changeEnvironment","on","showStartButton","pxjpg2","nxjpg2","pyjpg2","nyjpg2","pzjpg2","nzjpg2","mapTop","wrap","ironNormal","ironAO","pipeLineForInit"],"mappings":"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","file":"static/js/main.e9e51383.chunk.js","sourcesContent":["export async function pipeLineForInit (gameModules, CONSTANTS) {\r\n    const root = { CONSTANTS }\r\n\r\n    initModulesByState('pageLoaded', gameModules, root)\r\n\r\n    const { loaderAssets } = root\r\n\r\n    const dataToLoad = getAssetsFromModulesData(gameModules)\r\n    root.assets = await loaderAssets.loadAssets(dataToLoad)\r\n\r\n    initModulesByState('beforeStartPlay', gameModules, root)\r\n}\r\n\r\n\r\nconst initModulesByState = (state, modulesData, root) => {\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        const {  key, constr, initStateKey } = modulesData[i]\r\n        initStateKey === state && (root[key] = new constr(root))\r\n    }\r\n}\r\n\r\nconst getAssetsFromModulesData = modulesData => {\r\n    const arr = []\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        if (modulesData[i].assetsToLoad && modulesData[i].assetsToLoad.length) {\r\n            for (let j = 0; j < modulesData[i].assetsToLoad.length; ++j) {\r\n                arr.push(modulesData[i].assetsToLoad[j])\r\n            }\r\n        }\r\n    }\r\n    return arr\r\n}","import * as THREE from \"three\";\r\n\r\n\r\n\r\nexport const COLOR1_1 = [1, 1, 1]\r\nexport const COLOR1_6 = [...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1]   \r\nexport const COLOR2_1 = [.5, 1, 0]\r\nexport const COLOR2_6 = [...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1]\r\nexport const COLOR3_1 = [1, 1, 0]\r\nexport const COLOR3_6 = [...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1]\r\n\r\n\r\n\r\nexport const MATERIALS_CONF = {\r\n    'iron': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0x333333,\r\n            lightMap: 'ironAO',\r\n            lightMapIntensity: .35,\r\n            normalMap: 'ironNormal',\r\n            normalScale: new THREE.Vector2(.1, .1),\r\n            envMap: 'skyBox3',\r\n            reflectivity: .02,\r\n            shininess: 10,\r\n            specular: 0xffffff,\r\n            //vertexColors: true,\r\n        },\r\n    },\r\n    'iron2': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xcccccc,\r\n            lightMap: 'ironAO',\r\n            lightMapIntensity: .35,\r\n            normalMap: 'ironNormal',\r\n            normalScale: new THREE.Vector2(1, 1),\r\n            envMap: 'skyBox3',\r\n            reflectivity: .02,\r\n            shininess: 100,\r\n            specular: 0x020201,\r\n            //vertexColors: true,\r\n        },\r\n    },\r\n    'floorMat1': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            map: 'mapTop',\r\n            bumpMap: 'mapTop',\r\n            bumpScale: 2,\r\n            reflectivity: 0.1,\r\n            shininess: .01,\r\n            specular: 0xffffff,\r\n            emissive: 0x555555,\r\n        },\r\n    },\r\n    'body': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            envMap: 'skyBox3',\r\n            reflectivity: 3,\r\n            specular: 0xffffff,\r\n        },\r\n    },\r\n    'bodyRed': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xaa0000,\r\n            envMap: 'skyBox3',\r\n            emissive: 0x770000,\r\n            reflectivity: .01,\r\n            specular: 0xff0000,\r\n        },\r\n    },\r\n    'bodyShadow': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0x222230,\r\n            transparent: true,\r\n            alphaMap: 'bodyDropShadow',\r\n            opacity: 1,\r\n        },\r\n    },\r\n    'whiteBasic': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            //vertexColors: true,\r\n        }\r\n    },\r\n    'greenBasic': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0x33ff55,\r\n            //vertexColors: true,\r\n        }\r\n    },\r\n    'whiteBasic2': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0xaaaaaa,\r\n        }\r\n    },\r\n}","import { MATERIALS_CONF } from \"./constants_materials\";\r\n\r\nexport const SIZE_QUADRANT = 5000\r\nexport const LOCATIONS_QUADRANTS = {\r\n    //'-4_-1': 'location01',\r\n    '3_-3': 'location01',\r\n    '-3_-3': 'location02',\r\n    '3_3': 'location03',\r\n    '100_1000': 'locationToFinish',\r\n}\r\n\r\n\r\n\r\n\r\nexport const MATERIALS_CONFIG = MATERIALS_CONF\r\n\r\n\r\n\r\nexport const CONFIG_FOR_INIT = {\r\n    isInCar: false,\r\n    currentSceneConfig: {\r\n        isInVirtual: false,\r\n        isPlayerInCar: false,\r\n        carProps: {\r\n            keyMesh: 'car',\r\n            keyCollide: 'carCollision',\r\n            position: [0, -50, -100],\r\n            rotation: [0, 2, 0],\r\n        },\r\n        bodyProps: {\r\n            keyMesh: 'body',\r\n            position: [-20, -60, -50],\r\n            rotation: [0, 2, 0],\r\n        },\r\n    },\r\n}\r\n\r\n\r\n/** geometry column */\r\nexport const lCol = [.3, 1, .3]\r\nexport const lW = .2\r\n\r\nexport const ENV_START =  { fogNear: 0, fogFar: 0, colorFog: 0x455861, colorBack: 0x455861, backgroundImgKey: null }\r\nexport const ENV_NORMAL =  { fogNear: 0, fogFar: 1000, colorFog: 0x455861, colorBack: 0x455861, backgroundImgKey: null }\r\nexport const ENV_RED = { fogNear: 0, fogFar: 1000, colorFog: 0x880000, colorBack: 0x010101, backgroundImgKey: null }\r\nexport const ENV_RED_NEAR = { fogNear: 0, fogFar: 40, colorFog: 0x880000, colorBack: 0x010101, backgroundImgKey: null }\r\nexport const ENV_END =  { fogNear: 0, fogFar: 0, colorFog: 0x010101, colorBack: 0x010101, backgroundImgKey: null }\r\n\r\n\r\nexport const START_ENV_CONFIG = { fogNear: 0, fogFar: 0, color: 0x4a0a46, backgroundImgKey: null }\r\n//export const ENV_CONFIG_WORD_1 = { fogNear: 100, fogFar: 500, color: 0x455861, backgroundImgKey: 'skyBox2' }\r\nexport const ENV_CONFIG_WORD_1 = { fogNear: 0, fogFar: 1000, color: 0x455861, backgroundImgKey: null }\r\nexport const ENV_CONFIG_WORD_2 = { fogNear: 1500, fogFar: 3000, color: 0x000000, backgroundImgKey: 'skyBox' }\r\n\r\n\r\nexport const studioConfig = {\r\n    canId: 'webgl-canvas',\r\n    rendererCon: {\r\n        antialias: true\r\n    },\r\n    amb: {\r\n        color: 0xffffff,\r\n        strength: 0.1,\r\n    },\r\n    sceneEnvironment: START_ENV_CONFIG,\r\n    composerAddPass: 'Saturate',\r\n    //composerAddPass: 'Saturate2',\r\n}\r\n\r\n\r\n\r\n\r\nexport const playerConfig = {\r\n    speed: 0.8,\r\n    speedRot: 0.02,\r\n    speedDown: -0.45,\r\n    offsetFromFloor: 10.0,\r\n    offsetFromFloorFactor: 0.5,\r\n    offsetWallCollision: 3.5,\r\n    level: -13,\r\n    //startPos: [0, -45, 400],\r\n    startPos: [0, -45, 150],\r\n    cameraData: {\r\n        fov: 90,\r\n        ratio: window.innerWidth / window.innerHeight,\r\n        near: 0.1,\r\n        far: 10000,\r\n        pos: [0, 2, -0.5],\r\n    },\r\n    frontObjPos: [0, 0, -1],\r\n    backObjPos: [0, 0, 1],\r\n   lightDataOne: {\r\n        // color: 0x888888,\r\n        // strength: 1,\r\n        // dist: 0,\r\n        // decay: .001,\r\n        // pos: [0, 10, 0],\r\n        color: 0x555555,\r\n        strength: 1,\r\n        dist: 0,\r\n        decay: .001,\r\n        pos: [0, 10, 0],\r\n    },\r\n}\r\n","import * as THREE from 'three'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { GLTFLoader } from  'three/examples/jsm/loaders/GLTFLoader'\r\n\r\n\r\n\r\n\r\nconst createLoaders = () => {\r\n    let objLoader = null,\r\n        textureLoader = null,\r\n        gltfLoader = null,\r\n        cubeTextureLoader = null,\r\n        soundLoader = null\r\n\r\n\r\n    const getterLoader = type => {\r\n        if (type === 'obj')\r\n            return objLoader = (objLoader || new OBJLoader())\r\n        if (type === 'glb' || type === 'gltf')\r\n            return gltfLoader = (gltfLoader || new GLTFLoader())\r\n        if (type === 'img')\r\n            return textureLoader = (textureLoader || new THREE.TextureLoader())\r\n        if (type === 'cubeTextures') {\r\n            return cubeTextureLoader = (cubeTextureLoader || new THREE.CubeTextureLoader())\r\n        }\r\n        if (type === 'soundMp3') {\r\n            return soundLoader = (soundLoader || new THREE.AudioLoader())\r\n        }\r\n\r\n    }\r\n\r\n    return (path, type) => new Promise(resolve => {\r\n        getterLoader(type).load(path, resolve)\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport class LoaderAssets {\r\n\r\n    constructor () {\r\n        this.resources = {}\r\n        this._load = createLoaders()\r\n    }\r\n\r\n    loadAssets (data) {\r\n        return new Promise(resolve => {\r\n\r\n            const load = this._load\r\n            const resources = this.resources\r\n\r\n            async function iterate (index) {\r\n                if (data[index]) {\r\n                    const { key, path, type } = data[index]\r\n                    resources[key] = await load(path, type)\r\n                }\r\n\r\n                ++index\r\n                !data[index]\r\n                    ? resolve(resources)\r\n                    : await iterate(index)\r\n            }\r\n\r\n           void iterate(0)\r\n        })\r\n    }\r\n}\r\n","export class EventEmitter {\r\n    constructor() {\r\n        this._storage = {}\r\n    }\r\n\r\n    emit (id) {\r\n        return data => getOrCreateArrFromObj(this._storage)(id).forEach(action => action(data))\r\n    }\r\n\r\n    subscribe (id) {\r\n        return callback => {\r\n            getOrCreateArrFromObj(this._storage)(id).push(callback)\r\n            return () => this._storage[id] = this._storage[id].filter(item => item !== callback)\r\n        }\r\n    }\r\n\r\n    showAll () {\r\n        const s = {}\r\n        for (let key in this._storage) {\r\n            s[key] = this._storage[key].length\r\n        }\r\n        console.log(s)\r\n    }\r\n}\r\n\r\n\r\nconst getOrCreateArrFromObj = obj => key => obj[key] = obj[key] || []\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as R from 'ramda'\r\n\r\n\r\nexport class FrameUpdater {\r\n    constructor () {\r\n        this._subscribers = []\r\n\r\n\r\n        let data = {\r\n            time: 0,\r\n            delta: 0,\r\n            count: 0,\r\n            oldTime: 0\r\n        }\r\n\r\n        const getDataFromGlobalVar = () => data\r\n\r\n        const updateTime = data => {\r\n            data.time = Date.now()\r\n            return data\r\n        }\r\n\r\n        const updateDelta = data => {\r\n            data.delta = (data.time - data.oldTime) * 0.001\r\n            if (isNaN(data.delta) || data.delta > 1000 || data.delta === 0 ) {\r\n                data.delta = 1000 / 60 * 0.001\r\n            }\r\n            return data\r\n        }\r\n\r\n        const updateCount = data => {\r\n            data.count = data.delta / (1/60)\r\n            return data\r\n        }\r\n\r\n        // const emit = data => {\r\n        //     emitFrameUpdate(data)\r\n        //     return data\r\n        // }\r\n\r\n        const updateOldTime = data => {\r\n            data.oldTime = data.time\r\n            return data\r\n        }\r\n\r\n        const saveDataInGlobalVar = dataFromChine => {\r\n            data = dataFromChine\r\n            return data\r\n        }\r\n\r\n        const updateSubscribers = data => {\r\n            for (let i = 0; i < this._subscribers.length; ++i) {\r\n                this._subscribers[i]({...data })\r\n            }\r\n            return data;\r\n        }\r\n\r\n        const update = R.pipe(\r\n            getDataFromGlobalVar,\r\n            updateTime,\r\n            updateDelta,\r\n            updateCount,\r\n            updateSubscribers,\r\n            updateOldTime,\r\n            saveDataInGlobalVar\r\n        )\r\n\r\n        const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            update(data)\r\n        }\r\n        animate()\r\n    }\r\n\r\n    on (fn) {\r\n        this._subscribers.push(fn)\r\n        return () => {\r\n            this._subscribers = this._subscribers.filter(item => item !== fn)\r\n        }\r\n    }\r\n}","export const Saturate = {\r\nuniforms: {\r\n\"tDiffuse\": { value: null },\r\n},\r\n\r\n\r\nvertexShader: `\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\r\n}`,\r\n\r\n\r\nfragmentShader: `\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vec4 texel = texture2D( tDiffuse, vUv );\r\n  gl_FragColor = (texel * texel * texel) * vec4(3.);\r\n}`,\r\n}\r\n","export const Saturate2 = {\r\n    uniforms: {\r\n        \"tDiffuse\": { value: null },\r\n    },\r\n\r\n\r\n    vertexShader: `\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\r\n}`,\r\n\r\n\r\n    fragmentShader: `\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vec4 texel = texture2D( tDiffuse, vUv );\r\n  gl_FragColor = (texel + texel * 1.5) * vec4(0.5);\r\n}`,\r\n}\r\n","import * as THREE from 'three'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport { Saturate } from '../../../_CORE/shaders/saturate'\r\nimport { Saturate2 } from '../../../_CORE/shaders/saturate2'\r\n\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\n\r\n\r\nexport class Studio {\r\n    constructor(root) {\r\n        this._root = root\r\n        const { assets, emitter, } = root\r\n        const { canId, rendererCon } = root.CONSTANTS.studioConfig\r\n\r\n        rendererCon.canvas = document.getElementById(canId)\r\n\r\n        this._renderer = new THREE.WebGLRenderer(rendererCon)\r\n        //this._renderer.outputEncoding = THREE.sRGBEncoding;\r\n        //this._renderer.setClearColor(clearColor)\r\n        this._renderer.setClearColor(0x000055)\r\n        this._renderer.setPixelRatio(window.devicePixelRatio)\r\n        this._renderer.setSize(window.innerWidth, window.innerHeight)\r\n\r\n        this._scene = new THREE.Scene()\r\n\r\n        // {\r\n        //     const { color, fogNear, fogFar, backgroundImgKey } = root.CONSTANTS.studioConfig.sceneEnvironment\r\n        //     this._scene.background = assets[backgroundImgKey] || null\r\n        //     this._scene.fog = new THREE.Fog(color, fogNear, fogFar)\r\n        // }\r\n\r\n        this._lightA = new THREE.AmbientLight(0x455861, .4)\r\n        this._scene.add( this._lightA )\r\n\r\n        this._playerCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera.position.set(0, 0, 20)\r\n        const controls = new OrbitControls(this._controlsCamera, this._renderer.domElement)\r\n        controls.target.set(0, 0, 0)\r\n        controls.update();\r\n\r\n\r\n        this._composer = new EffectComposer(this._renderer)\r\n        this._renderPass = new RenderPass(this._scene, this._controlsCamera)\r\n        this._composer.addPass(this._renderPass)\r\n        if (this._root.CONSTANTS.studioConfig.composerAddPass) {\r\n            if (this._root.CONSTANTS.studioConfig.composerAddPass === 'Saturate') {\r\n                this._composer.addPass(new ShaderPass(Saturate))\r\n            }\r\n            if (this._root.CONSTANTS.studioConfig.composerAddPass === 'Saturate2') {\r\n                this._composer.addPass(new ShaderPass(Saturate2))\r\n            }\r\n        }\r\n\r\n\r\n\r\n        /** toggle view camera to debug by orbitControls */\r\n        const vec3 = new THREE.Vector3()\r\n        let isPlayerView = true\r\n        let saveFogData = null\r\n        emitter.subscribe('keyEvent')(data => {\r\n            if (!data['o']) {\r\n                return;\r\n            }\r\n\r\n            if (isPlayerView) {\r\n                //saveFogData = { ...this._scene.fog }\r\n                //this._scene.fog.near = 10000\r\n                //this._scene.fog.far = 20000\r\n                isPlayerView = false\r\n\r\n                this._renderPass.camera = this._controlsCamera\r\n                this._playerCamera.getWorldPosition(vec3)\r\n                this._controlsCamera.position.x = vec3.x + 100\r\n                this._controlsCamera.position.y = vec3.y + 100\r\n                this._controlsCamera.position.z = vec3.z\r\n                controls.target.set(vec3.x, vec3.y, vec3.z)\r\n                controls.update()\r\n\r\n                // this._scene.fog.near = saveFogData.near\r\n                // this._scene.fog.far = saveFogData.far\r\n\r\n            } else {\r\n                //this._scene.fog.near = saveFogData.near\r\n                //this._scene.fog.far = saveFogData.far\r\n                isPlayerView = true\r\n                this._renderPass.camera = this._playerCamera\r\n            }\r\n        })\r\n\r\n\r\n\r\n        const resize = () => {\r\n            const size = { width: window.innerWidth, height: window.innerHeight }\r\n            this._renderer.setSize(size.width, size.height)\r\n            this._composer.setSize(size.width, size.height)\r\n            if (this._controlsCamera) {\r\n                this._controlsCamera.aspect = size.width / size.height\r\n                this._controlsCamera.updateProjectionMatrix()\r\n            }\r\n            if (this._playerCamera) {\r\n                this._playerCamera.aspect = size.width/size.height\r\n                this._playerCamera.updateProjectionMatrix()\r\n            }\r\n        }\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n\r\n\r\n\r\n\r\n        this.addToScene = mesh => this._scene.add(mesh)\r\n        this.removeFromScene = mesh => this._scene.remove(mesh)\r\n\r\n\r\n\r\n        this.drawFrame = () => {\r\n            this._composer.render(this._scene, this._controlsCamera)\r\n        }\r\n\r\n\r\n        //this._backgroundImgKey = root.CONSTANTS.studioConfig.sceneEnvironment.backgroundImgKey\r\n        emitter.subscribe('changeSceneEnvironment')(sceneEnvironment => {\r\n            console.log('deprecated!!', 'studio', 'changeSceneEnvironment', sceneEnvironment)\r\n        })\r\n    }\r\n\r\n\r\n    /** PUBLIC ****************************************/\r\n\r\n    setCamera (cam) {\r\n        cam.aspect = window.innerWidth / window.innerHeight\r\n        cam.updateProjectionMatrix()\r\n        this._playerCamera = cam\r\n        this._renderPass.camera = this._playerCamera\r\n    }\r\n\r\n\r\n    changeEnvironment (sceneEnvironment, conf = null) {\r\n        this._changeFog(sceneEnvironment, conf)\r\n        this._changeBackground(sceneEnvironment, conf)\r\n    }\r\n\r\n\r\n    /** INTERNAL ****************************************/\r\n\r\n    _changeFog (sceneEnvironment, conf) {\r\n        // const { fogNear, fogFar, colorFog } = sceneEnvironment\r\n        // if (\r\n        //     this._scene.fog.near !== fogNear ||\r\n        //     this._scene.fog.far !== fogFar ||\r\n        //     this._scene.fog.color !== fogFar\r\n        // ) {\r\n        //     const startData = {\r\n        //         colorFog: this._scene.fog.color,\r\n        //         near: this._scene.fog.near,\r\n        //         far: this._scene.fog.far,\r\n        //     }\r\n        //     const endData = {\r\n        //         colorFog: new THREE.Color(colorFog),\r\n        //         near: fogNear,\r\n        //         far: fogFar,\r\n        //     }\r\n        //\r\n        //     new TWEEN.Tween(startData)\r\n        //         .to(endData, (conf && conf.time) || 3000)\r\n        //         .onUpdate(() => {\r\n        //             this._scene.fog.color = startData.colorFog\r\n        //             this._scene.fog.near = startData.near\r\n        //             this._scene.fog.far = startData.far\r\n        //             if (conf) {\r\n        //                 //                 if (conf.updateAmb) this._lightA.color = startData.color\r\n        //             } else {\r\n        //                 //                 this._lightA.color = startData.color\r\n        //             }\r\n        //             //this._renderer.setClearColor(startData.color)\r\n        //         })\r\n        //         .onComplete(() => {\r\n        //             this._renderer.setClearColor(sceneEnvironment.colorBack)\r\n        //         })\r\n        //         .start()\r\n        // }\r\n\r\n    }\r\n\r\n\r\n    _changeBackground (sceneEnvironment) {\r\n        // const { backgroundImgKey } = sceneEnvironment\r\n        //\r\n        // if (backgroundImgKey !== this._backgroundImgKey) {\r\n        //     this._backgroundImgKey = backgroundImgKey\r\n        //     this._scene.background = this._root.assets[backgroundImgKey] || null\r\n        // }\r\n    }\r\n}\r\n\r\n","\r\nexport class KeyBoard {\r\n    constructor (gameContext) {\r\n        const { emitter } = gameContext\r\n\r\n        const keys = {\r\n            'up': false,\r\n            'down': false,\r\n            'left': false,\r\n            'right': false,\r\n            'p': false,\r\n        }\r\n\r\n        const keysEnabled = {\r\n            'up': true,\r\n            'down': true,\r\n            'left': true,\r\n            'right': true,\r\n        }\r\n\r\n        this.keysEnabled = keysEnabled\r\n        this.keys = keys\r\n\r\n\r\n        const keyUpdate = function ( keyCode, isDown ) {\r\n            switch( keyCode ) {\r\n                case 38:\r\n                case 87:\r\n                    keysEnabled['up'] && (keys['up'] = isDown)\r\n                    break;\r\n                case 40:\r\n                case 83:\r\n                    keysEnabled['down'] && (keys['down'] = isDown)\r\n                    break;\r\n                case 37:\r\n                case 65:\r\n                    keys['left'] = isDown\r\n                    break;\r\n                case 39:\r\n                case 68:\r\n                    keys['right'] = isDown\r\n                    break;\r\n                case 79: \r\n                    keys['o'] = isDown\r\n                    break;                \r\n                case 80: \r\n                    keys['p'] = isDown\r\n                    break;\r\n                default:\r\n            }\r\n            emitter.emit('keyEvent')(keys)\r\n        }\r\n\r\n\r\n\r\n        document.addEventListener('keydown', event => keyUpdate(event.keyCode, true))\r\n        document.addEventListener('keyup', event => keyUpdate(event.keyCode, false))\r\n\r\n\r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, true)\r\n            if (key === 'butt-right') keyUpdate(39, true)\r\n            if (key === 'butt-front') keyUpdate(38, true)\r\n            if (key === 'butt-back') keyUpdate(40, true)\r\n        })\r\n        emitter.subscribe('mouseUp')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, false)\r\n            if (key === 'butt-right') keyUpdate(39, false)\r\n            if (key === 'butt-front') keyUpdate(38, false)\r\n            if (key === 'butt-back') keyUpdate(40, false)\r\n        })\r\n    }\r\n\r\n    toggleEnableKeys (key, is) {\r\n        this.keysEnabled[key] = is\r\n        !is && (this.keys[key] = false)\r\n    }\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\n\r\nexport class Player {\r\n    constructor (root) {\r\n        const { studio, CONSTANTS } = root\r\n\r\n        const {\r\n            //startPos,\r\n            //startRot,\r\n            cameraData,\r\n            //frontObjPos,\r\n            //backObjPos,\r\n            lightDataOne,\r\n        } = CONSTANTS.playerConfig\r\n\r\n\r\n        this._camera = null\r\n        this.isBlocked = true\r\n        this.isFreeze = true\r\n        \r\n        this.mesh = new THREE.Object3D()\r\n        this.mesh.rotation.fromArray([0, 0, 0])\r\n        this.mesh.userData.type = 'player'\r\n\r\n\r\n        this.bottomObj = new THREE.Object3D()\r\n        this.bottomObj.position.fromArray([0, -.02, 0])\r\n        this.mesh.add(this.bottomObj)\r\n\r\n        this.frontObj = new THREE.Object3D()\r\n        this.frontObj.position.fromArray([0, 0, -.02])\r\n        this.mesh.add(this.frontObj)\r\n\r\n        this.backObj = new THREE.Object3D()\r\n        this.backObj.position.fromArray([0, 0, 0.02])\r\n        this.mesh.add(this.backObj)\r\n\r\n\r\n        {\r\n            const { fov, ratio, near, far } = cameraData\r\n            this._camera = new THREE.PerspectiveCamera(fov, ratio, near, far)\r\n            this._camera.position.fromArray([0, 0, -2])\r\n            this.mesh.add(this._camera)\r\n        }\r\n\r\n        if (lightDataOne) {\r\n            const { color, strenth, pos } = lightDataOne\r\n            const light = new THREE.PointLight(color, strenth)\r\n            light.position.fromArray(pos)\r\n            this.mesh.add(light)\r\n        }\r\n\r\n        ///////////// TEST /////////////\r\n\r\n        studio.setCamera(this._camera)\r\n        studio.addToScene(this.mesh)\r\n    }\r\n\r\n    // toggleBlocked (val) {\r\n    //     this.isFeeze = val\r\n    // }\r\n\r\n    toggleFeeze (val) {\r\n        this.isFeeze = val\r\n    }\r\n\r\n    toggleCanMove(key, val) {\r\n        //this._isCanMove[key] = val\r\n    }\r\n\r\n    getObj () {\r\n        return this.mesh\r\n    }\r\n\r\n    getCamera () {\r\n        return this._camera\r\n    }\r\n    \r\n    setToPos (x, y, z) {\r\n        this.mesh.position.set(x, y, z)\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class Helper_MaterialsLib {\r\n    constructor (gameContext) {\r\n        const { assets, CONSTANTS } = gameContext\r\n\r\n        gameContext.materials = createMaterials(assets, CONSTANTS.MATERIALS_CONFIG)\r\n    }\r\n}\r\n\r\n\r\nconst createMaterials = (assets, MATERIALS_CONFIG) => {\r\n    for (let key in assets)\r\n        assets[key].wrapS && (assets[key].wrapS = assets[key].wrapT = THREE.RepeatWrapping)\r\n\r\n    const mapsKeys = ['bumpMap', 'envMap', 'map', 'normalMap', 'lightMap', 'aoMap', 'alphaMap']\r\n    const materials = {}\r\n    for (let key in MATERIALS_CONFIG) {\r\n        materials[key] = new THREE[MATERIALS_CONFIG[key].mat]({\r\n            ...MATERIALS_CONFIG[key].props\r\n        })\r\n        mapsKeys.map(keyMap =>\r\n            MATERIALS_CONFIG[key].props[keyMap] &&\r\n                (materials[key][keyMap] = assets[MATERIALS_CONFIG[key].props[keyMap]])\r\n        )\r\n    }\r\n    return materials\r\n}","export default __webpack_public_path__ + \"static/media/mapGround.8bd68b3e.jpg\";","export default __webpack_public_path__ + \"static/media/posx.be2d83a2.jpg\";","export default __webpack_public_path__ + \"static/media/negx.d016c8e7.jpg\";","export default __webpack_public_path__ + \"static/media/posy.01cfd221.jpg\";","export default __webpack_public_path__ + \"static/media/negy.f01f8356.jpg\";","export default __webpack_public_path__ + \"static/media/posz.ef37b8e1.jpg\";","export default __webpack_public_path__ + \"static/media/negz.f346a80a.jpg\";","import * as THREE from \"three\";\r\n\r\n\r\nexport class helper_CollisionsItems_v02 {\r\n    constructor () {\r\n        this._arrMeshes = []\r\n\r\n\r\n        this._vecStart = new THREE.Vector3()\r\n        this._vecDir = new THREE.Vector3()\r\n        this._rayCaster = new THREE.Raycaster(this._vecStart, this._vecDir)\r\n    }\r\n\r\n    setItemToCollision (mesh) {\r\n        for (let i = 0; i < this._arrMeshes.length; ++i) {\r\n            if (this._arrMeshes[i] === mesh) {\r\n                return;\r\n            }\r\n        }\r\n        this._arrMeshes.push(mesh)\r\n    }\r\n\r\n\r\n    removeItemFromCollision (mesh) {\r\n        this._arrMeshes = this._arrMeshes.filter(item => item !== mesh)\r\n    }\r\n\r\n\r\n    checkCollisions (objFrom, objTo, dist) {\r\n        objFrom.getWorldPosition(this._vecStart)\r\n        objTo.getWorldPosition(this._vecDir)\r\n\r\n        this._vecDir.sub(this._vecStart)\r\n\r\n        //console.log(this._arrMeshes)\r\n        const intersects = this._rayCaster.intersectObjects(this._arrMeshes)\r\n\r\n        if (intersects[0] && intersects[0].distance < dist) {\r\n            return [ true, intersects[0] ]\r\n        }\r\n        return [ false, null ]\r\n    }\r\n}","import { helper_CollisionsItems_v02 } from '../../../_CORE/helpers/helper_CollisionsItems_v02'\r\n\r\n\r\n\r\n\r\nexport class system_PlayerMoveOnLevel {\r\n    constructor (root) {\r\n\r\n\r\n        const { \r\n            emitter, \r\n            CONSTANTS,\r\n            player,\r\n            //assets,\r\n            //studio,\r\n        } = root\r\n\r\n\r\n        //player.mesh.position.fromArray([0, -40, 0])\r\n        //player.mesh.position.fromArray([0, 0, 0])\r\n        //player.mesh.position.fromArray([500, 0, -100])\r\n\r\n\r\n        const collisionsWalls = new helper_CollisionsItems_v02()\r\n\r\n        const {\r\n            speed,\r\n            //speedDown,\r\n            speedRot,\r\n        } = CONSTANTS.playerConfig\r\n\r\n        let isBlocked = true\r\n        player.toggleBlocked = val => isBlocked = val\r\n\r\n        this.isCanMove = {\r\n            'forward': true,\r\n            'back': true,\r\n        }\r\n        player.toggleCanMove = (dir, val) => this.isCanMove[dir] = val\r\n\r\n\r\n        this.isFreeze = false\r\n        let keys = {}\r\n\r\n        const OFFSET_FROM_PLANES = 17\r\n\r\n\r\n        const checkAndMoveFront = data => {\r\n            const [isCollision, collision] = collisionsWalls.checkCollisions(player.mesh, player.frontObj, OFFSET_FROM_PLANES)\r\n\r\n            /** update level new area */\r\n            if (isCollision) {\r\n                if (collision.object.userData.type && collision.object.userData.type === 'alert') {\r\n                    emitter.emit('collision')(collision.object.userData.event)\r\n                }\r\n                return;\r\n            }\r\n\r\n            player.mesh.translateZ(-speed * data.count)\r\n            emitter.emit('playerMove')('forward')\r\n        }\r\n        \r\n        \r\n\r\n        const checkAndMoveBack = data => {\r\n            const [isCollision] = collisionsWalls.checkCollisions(player.mesh, player.backObj, OFFSET_FROM_PLANES)\r\n            if (isCollision) return;\r\n                \r\n            player.mesh.translateZ(speed * data.count)\r\n            emitter.emit('playerMove')('back')\r\n        }\r\n\r\n\r\n\r\n        this.update = data => {\r\n            if (this.isFreeze) {\r\n                return;\r\n            }\r\n            //if (isButtonsDisabled) return;\r\n\r\n            keys['left'] && player.mesh.rotateY(speedRot * data.count)\r\n            keys['right'] && player.mesh.rotateY(-speedRot * data.count)\r\n\r\n            if (isBlocked) return;\r\n\r\n            //checkBottomAndDropDownPlayer(data)\r\n            keys['up'] && this.isCanMove['forward'] && checkAndMoveFront(data)\r\n            keys['down'] && this.isCanMove['back'] && checkAndMoveBack(data)\r\n            keys['p'] && console.log(`player.mesh.position.fromArray([${player.mesh.position.x}, ${player.mesh.position.y}, ${player.mesh.position.z}])`)\r\n        }\r\n    \r\n\r\n\r\n        emitter.subscribe('keyEvent')(data => {\r\n            keys = data\r\n        })\r\n        //emitter.subscribe('frameUpdate')(update)\r\n\r\n\r\n        this._collisionsWalls = collisionsWalls\r\n    }\r\n\r\n\r\n    addItemToPlayerCollision (item) {\r\n        this._collisionsWalls.setItemToCollision(item)\r\n    }\r\n\r\n    removeItemFromPlayerCollision (item) {\r\n        this._collisionsWalls.removeItemFromCollision(item)\r\n    }\r\n\r\n    toggleFreeze (val = !this.isFreeze) {\r\n        this.isFreeze = val\r\n    }\r\n}\r\n\r\n\r\n","//import * as THREE from 'three'\r\n\r\n\r\n\r\nexport class system_PlayerNearLevelItems {\r\n    constructor(root) {\r\n        this._root = root\r\n\r\n        const {\r\n            emitter, player\r\n        } = root\r\n\r\n\r\n        this._itemsToCheck = []\r\n\r\n        emitter.subscribe('playerMove')(() => {\r\n            //console.log('1111', this._itemsToCheck)\r\n            for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n                const dist = player.mesh.position.distanceTo(this._itemsToCheck[i].position)\r\n                //console.log(dist)\r\n\r\n                if (!this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist < this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = true\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: true })\r\n                    return;\r\n                }\r\n\r\n                if (this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist > this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = false\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: false })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    setItemToCheck (item, itemKey, near, far) {\r\n        for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n            if (item === this._itemsToCheck[i]) {\r\n                return;\r\n            }\r\n        }\r\n        //console.log(item, itemKey, near, far)\r\n        itemKey && (item.userData.nearPlayerItemKey = itemKey)\r\n        near && (item.userData.nearPlayerItemNear = near)\r\n        far && (item.userData.nearPlayerItemFar = far)\r\n        item.userData.nearPlayerIsNearPlayer = false\r\n\r\n        this._itemsToCheck.push(item)\r\n    }\r\n\r\n    removeItemFromCheck (item) {\r\n        this._itemsToCheck = this._itemsToCheck.filter(itemIn => itemIn !== item)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// function getCenterPoint (mesh) {\r\n//     // var center = new THREE.Vector3();\r\n//     // mesh.geometry.computeBoundingBox();\r\n//     // mesh.geometry.boundingBox.getCenter(center);\r\n//     // mesh.geometry.center();\r\n//     //mesh.position.copy(center);\r\n//\r\n//     //return center\r\n//     const geometry = mesh.geometry\r\n//     geometry.computeBoundingBox()\r\n//     const center = new THREE.Vector3()\r\n//     geometry.boundingBox.getCenter(center)\r\n//     mesh.localToWorld(center)\r\n//     return center\r\n// }","/*\r\n * Copyright 2021 GFXFundamentals.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of GFXFundamentals. nor the names of his\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n    /**\r\n     * An array or typed array with 3 values.\r\n     * @typedef {number[]|TypedArray} Vector3\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 4 values.\r\n     * @typedef {number[]|TypedArray} Vector4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 16 values.\r\n     * @typedef {number[]|TypedArray} Matrix4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n\r\n    let MatType = Float32Array;\r\n\r\n    /**\r\n     * Sets the type this library creates for a Mat4\r\n     * @param {constructor} Ctor the constructor for the type. Either `Float32Array` or `Array`\r\n     * @return {constructor} previous constructor for Mat4\r\n     */\r\n    function setDefaultType(Ctor) {\r\n        const OldType = MatType;\r\n        MatType = Ctor;\r\n        return OldType;\r\n    }\r\n\r\n    /**\r\n     * Takes two 4-by-4 matrices, a and b, and computes the product in the order\r\n     * that pre-composes b with a.  In other words, the matrix returned will\r\n     * transform by b first and then a.  Note this is subtly different from just\r\n     * multiplying the matrices together.  For given a and b, this function returns\r\n     * the same object in both row-major and column-major mode.\r\n     * @param {Matrix4} a A matrix.\r\n     * @param {Matrix4} b A matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function multiply(a, b, dst) {\r\n        dst = dst || new MatType(16);\r\n        var b00 = b[0 * 4 + 0];\r\n        var b01 = b[0 * 4 + 1];\r\n        var b02 = b[0 * 4 + 2];\r\n        var b03 = b[0 * 4 + 3];\r\n        var b10 = b[1 * 4 + 0];\r\n        var b11 = b[1 * 4 + 1];\r\n        var b12 = b[1 * 4 + 2];\r\n        var b13 = b[1 * 4 + 3];\r\n        var b20 = b[2 * 4 + 0];\r\n        var b21 = b[2 * 4 + 1];\r\n        var b22 = b[2 * 4 + 2];\r\n        var b23 = b[2 * 4 + 3];\r\n        var b30 = b[3 * 4 + 0];\r\n        var b31 = b[3 * 4 + 1];\r\n        var b32 = b[3 * 4 + 2];\r\n        var b33 = b[3 * 4 + 3];\r\n        var a00 = a[0 * 4 + 0];\r\n        var a01 = a[0 * 4 + 1];\r\n        var a02 = a[0 * 4 + 2];\r\n        var a03 = a[0 * 4 + 3];\r\n        var a10 = a[1 * 4 + 0];\r\n        var a11 = a[1 * 4 + 1];\r\n        var a12 = a[1 * 4 + 2];\r\n        var a13 = a[1 * 4 + 3];\r\n        var a20 = a[2 * 4 + 0];\r\n        var a21 = a[2 * 4 + 1];\r\n        var a22 = a[2 * 4 + 2];\r\n        var a23 = a[2 * 4 + 3];\r\n        var a30 = a[3 * 4 + 0];\r\n        var a31 = a[3 * 4 + 1];\r\n        var a32 = a[3 * 4 + 2];\r\n        var a33 = a[3 * 4 + 3];\r\n        dst[ 0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;\r\n        dst[ 1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;\r\n        dst[ 2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;\r\n        dst[ 3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;\r\n        dst[ 4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;\r\n        dst[ 5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;\r\n        dst[ 6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;\r\n        dst[ 7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;\r\n        dst[ 8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;\r\n        dst[ 9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;\r\n        dst[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;\r\n        dst[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;\r\n        dst[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;\r\n        dst[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;\r\n        dst[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;\r\n        dst[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;\r\n        return dst;\r\n    }\r\n\r\n\r\n    /**\r\n     * adds 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function addVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] + b[0];\r\n        dst[1] = a[1] + b[1];\r\n        dst[2] = a[2] + b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * subtracts 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function subtractVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] - b[0];\r\n        dst[1] = a[1] - b[1];\r\n        dst[2] = a[2] - b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * scale vectors3\r\n     * @param {Vector3} v vector\r\n     * @param {Number} s scale\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaleVector(v, s, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = v[0] * s;\r\n        dst[1] = v[1] * s;\r\n        dst[2] = v[2] * s;\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * normalizes a vector.\r\n     * @param {Vector3} v vector to normalize\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function normalize(v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var length = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n        // make sure we don't divide by 0.\r\n        if (length > 0.00001) {\r\n            dst[0] = v[0] / length;\r\n            dst[1] = v[1] / length;\r\n            dst[2] = v[2] / length;\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the length of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length of vector\r\n     */\r\n    function length(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the length squared of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length sqaured of vector\r\n     */\r\n    function lengthSq(v) {\r\n        return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];\r\n    }\r\n\r\n    /**\r\n     * Computes the cross product of 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function cross(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[1] * b[2] - a[2] * b[1];\r\n        dst[1] = a[2] * b[0] - a[0] * b[2];\r\n        dst[2] = a[0] * b[1] - a[1] * b[0];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the dot product of two vectors; assumes both vectors have\r\n     * three entries.\r\n     * @param {Vector3} a Operand vector.\r\n     * @param {Vector3} b Operand vector.\r\n     * @return {number} dot product\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function dot(a, b) {\r\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the distance squared between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance squared between a and b\r\n     */\r\n    function distanceSq(a, b) {\r\n        const dx = a[0] - b[0];\r\n        const dy = a[1] - b[1];\r\n        const dz = a[2] - b[2];\r\n        return dx * dx + dy * dy + dz * dz;\r\n    }\r\n\r\n    /**\r\n     * Computes the distance between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance between a and b\r\n     */\r\n    function distance(a, b) {\r\n        return Math.sqrt(distanceSq(a, b));\r\n    }\r\n\r\n    /**\r\n     * Makes an identity matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function identity(dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Transposes a matrix.\r\n     * @param {Matrix4} m matrix to transpose.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transpose(m, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = m[0];\r\n        dst[ 1] = m[4];\r\n        dst[ 2] = m[8];\r\n        dst[ 3] = m[12];\r\n        dst[ 4] = m[1];\r\n        dst[ 5] = m[5];\r\n        dst[ 6] = m[9];\r\n        dst[ 7] = m[13];\r\n        dst[ 8] = m[2];\r\n        dst[ 9] = m[6];\r\n        dst[10] = m[10];\r\n        dst[11] = m[14];\r\n        dst[12] = m[3];\r\n        dst[13] = m[7];\r\n        dst[14] = m[11];\r\n        dst[15] = m[15];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Creates a lookAt matrix.\r\n     * This is a world matrix for a camera. In other words it will transform\r\n     * from the origin to a place and orientation in the world. For a view\r\n     * matrix take the inverse of this.\r\n     * @param {Vector3} cameraPosition position of the camera\r\n     * @param {Vector3} target position of the target\r\n     * @param {Vector3} up direction\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function lookAt(cameraPosition, target, up, dst) {\r\n        dst = dst || new MatType(16);\r\n        var zAxis = normalize(\r\n            subtractVectors(cameraPosition, target));\r\n        var xAxis = normalize(cross(up, zAxis));\r\n        var yAxis = normalize(cross(zAxis, xAxis));\r\n\r\n        dst[ 0] = xAxis[0];\r\n        dst[ 1] = xAxis[1];\r\n        dst[ 2] = xAxis[2];\r\n        dst[ 3] = 0;\r\n        dst[ 4] = yAxis[0];\r\n        dst[ 5] = yAxis[1];\r\n        dst[ 6] = yAxis[2];\r\n        dst[ 7] = 0;\r\n        dst[ 8] = zAxis[0];\r\n        dst[ 9] = zAxis[1];\r\n        dst[10] = zAxis[2];\r\n        dst[11] = 0;\r\n        dst[12] = cameraPosition[0];\r\n        dst[13] = cameraPosition[1];\r\n        dst[14] = cameraPosition[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the angular height\r\n     * of the frustum, the aspect ratio, and the near and far clipping planes.  The\r\n     * arguments define a frustum extending in the negative z direction.  The given\r\n     * angle is the vertical angle of the frustum, and the horizontal angle is\r\n     * determined to produce the given aspect ratio.  The arguments near and far are\r\n     * the distances to the near and far clipping planes.  Note that near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  The matrix generated sends the viewing frustum to the unit box.\r\n     * We assume a unit box extending from -1 to 1 in the x and y dimensions and\r\n     * from -1 to 1 in the z dimension.\r\n     * @param {number} fieldOfViewInRadians field of view in y axis.\r\n     * @param {number} aspect aspect of viewport (width / height)\r\n     * @param {number} near near Z clipping plane\r\n     * @param {number} far far Z clipping plane\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function perspective(fieldOfViewInRadians, aspect, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n        var f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\r\n        var rangeInv = 1.0 / (near - far);\r\n\r\n        dst[ 0] = f / aspect;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = f;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = (near + far) * rangeInv;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = near * far * rangeInv * 2;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 orthographic projection matrix given the coordinates of the\r\n     * planes defining the axis-aligned, box-shaped viewing volume.  The matrix\r\n     * generated sends that box to the unit box.  Note that although left and right\r\n     * are x coordinates and bottom and top are y coordinates, near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  We assume a unit box extending from -1 to 1 in the x and y\r\n     * dimensions and from -1 to 1 in the z dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function orthographic(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 2 / (right - left);\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 / (top - bottom);\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the left, right,\r\n     * top, bottom, near and far clipping planes. The arguments define a frustum\r\n     * extending in the negative z direction. The arguments near and far are the\r\n     * distances to the near and far clipping planes. Note that near and far are not\r\n     * z coordinates, but rather they are distances along the negative z-axis. The\r\n     * matrix generated sends the viewing frustum to the unit box. We assume a unit\r\n     * box extending from -1 to 1 in the x and y dimensions and from -1 to 1 in the z\r\n     * dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function frustum(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var dx = right - left;\r\n        var dy = top - bottom;\r\n        var dz = far - near;\r\n\r\n        dst[ 0] = 2 * near / dx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 * near / dy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = (left + right) / dx;\r\n        dst[ 9] = (top + bottom) / dy;\r\n        dst[10] = -(far + near) / dz;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = -2 * near * far / dz;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a translation matrix\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translation(tx, ty, tz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = tx;\r\n        dst[13] = ty;\r\n        dst[14] = tz;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by translation matrix.\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translate(m, tx, ty, tz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, translation(tx, ty, tz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m00;\r\n            dst[ 1] = m01;\r\n            dst[ 2] = m02;\r\n            dst[ 3] = m03;\r\n            dst[ 4] = m10;\r\n            dst[ 5] = m11;\r\n            dst[ 6] = m12;\r\n            dst[ 7] = m13;\r\n            dst[ 8] = m20;\r\n            dst[ 9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an x rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = c;\r\n        dst[ 6] = s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = -s;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an x rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, xRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[4]  = c * m10 + s * m20;\r\n        dst[5]  = c * m11 + s * m21;\r\n        dst[6]  = c * m12 + s * m22;\r\n        dst[7]  = c * m13 + s * m23;\r\n        dst[8]  = c * m20 - s * m10;\r\n        dst[9]  = c * m21 - s * m11;\r\n        dst[10] = c * m22 - s * m12;\r\n        dst[11] = c * m23 - s * m13;\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m[ 0];\r\n            dst[ 1] = m[ 1];\r\n            dst[ 2] = m[ 2];\r\n            dst[ 3] = m[ 3];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an y rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = -s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = s;\r\n        dst[ 9] = 0;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an y rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, yRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 - s * m20;\r\n        dst[ 1] = c * m01 - s * m21;\r\n        dst[ 2] = c * m02 - s * m22;\r\n        dst[ 3] = c * m03 - s * m23;\r\n        dst[ 8] = c * m20 + s * m00;\r\n        dst[ 9] = c * m21 + s * m01;\r\n        dst[10] = c * m22 + s * m02;\r\n        dst[11] = c * m23 + s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 4] = m[ 4];\r\n            dst[ 5] = m[ 5];\r\n            dst[ 6] = m[ 6];\r\n            dst[ 7] = m[ 7];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an z rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = s;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = -s;\r\n        dst[ 5] = c;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an z rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotate(m, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, zRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 + s * m10;\r\n        dst[ 1] = c * m01 + s * m11;\r\n        dst[ 2] = c * m02 + s * m12;\r\n        dst[ 3] = c * m03 + s * m13;\r\n        dst[ 4] = c * m10 - s * m00;\r\n        dst[ 5] = c * m11 - s * m01;\r\n        dst[ 6] = c * m12 - s * m02;\r\n        dst[ 7] = c * m13 - s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 8] = m[ 8];\r\n            dst[ 9] = m[ 9];\r\n            dst[10] = m[10];\r\n            dst[11] = m[11];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an rotation matrix around an arbitrary axis\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotation(axis, angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        dst[ 0] = xx + (1 - xx) * c;\r\n        dst[ 1] = x * y * oneMinusCosine + z * s;\r\n        dst[ 2] = x * z * oneMinusCosine - y * s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = x * y * oneMinusCosine - z * s;\r\n        dst[ 5] = yy + (1 - yy) * c;\r\n        dst[ 6] = y * z * oneMinusCosine + x * s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = x * z * oneMinusCosine + y * s;\r\n        dst[ 9] = y * z * oneMinusCosine - x * s;\r\n        dst[10] = zz + (1 - zz) * c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an axis rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotate(m, axis, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, axisRotation(axis, angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        var r00 = xx + (1 - xx) * c;\r\n        var r01 = x * y * oneMinusCosine + z * s;\r\n        var r02 = x * z * oneMinusCosine - y * s;\r\n        var r10 = x * y * oneMinusCosine - z * s;\r\n        var r11 = yy + (1 - yy) * c;\r\n        var r12 = y * z * oneMinusCosine + x * s;\r\n        var r20 = x * z * oneMinusCosine + y * s;\r\n        var r21 = y * z * oneMinusCosine - x * s;\r\n        var r22 = zz + (1 - zz) * c;\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n\r\n        dst[ 0] = r00 * m00 + r01 * m10 + r02 * m20;\r\n        dst[ 1] = r00 * m01 + r01 * m11 + r02 * m21;\r\n        dst[ 2] = r00 * m02 + r01 * m12 + r02 * m22;\r\n        dst[ 3] = r00 * m03 + r01 * m13 + r02 * m23;\r\n        dst[ 4] = r10 * m00 + r11 * m10 + r12 * m20;\r\n        dst[ 5] = r10 * m01 + r11 * m11 + r12 * m21;\r\n        dst[ 6] = r10 * m02 + r11 * m12 + r12 * m22;\r\n        dst[ 7] = r10 * m03 + r11 * m13 + r12 * m23;\r\n        dst[ 8] = r20 * m00 + r21 * m10 + r22 * m20;\r\n        dst[ 9] = r20 * m01 + r21 * m11 + r22 * m21;\r\n        dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\r\n        dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a scale matrix\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaling(sx, sy, sz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = sy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = sz;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by a scaling matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scale(m, sx, sy, sz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, scaling(sx, sy, sz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx * m[0 * 4 + 0];\r\n        dst[ 1] = sx * m[0 * 4 + 1];\r\n        dst[ 2] = sx * m[0 * 4 + 2];\r\n        dst[ 3] = sx * m[0 * 4 + 3];\r\n        dst[ 4] = sy * m[1 * 4 + 0];\r\n        dst[ 5] = sy * m[1 * 4 + 1];\r\n        dst[ 6] = sy * m[1 * 4 + 2];\r\n        dst[ 7] = sy * m[1 * 4 + 3];\r\n        dst[ 8] = sz * m[2 * 4 + 0];\r\n        dst[ 9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * creates a matrix from translation, quaternion, scale\r\n     * @param {Number[]} translation [x, y, z] translation\r\n     * @param {Number[]} quaternion [x, y, z, z] quaternion rotation\r\n     * @param {Number[]} scale [x, y, z] scale\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function compose(translation, quaternion, scale, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        const x = quaternion[0];\r\n        const y = quaternion[1];\r\n        const z = quaternion[2];\r\n        const w = quaternion[3];\r\n\r\n        const x2 = x + x;\r\n        const y2 = y + y;\r\n        const z2 = z + z;\r\n\r\n        const xx = x * x2;\r\n        const xy = x * y2;\r\n        const xz = x * z2;\r\n\r\n        const yy = y * y2;\r\n        const yz = y * z2;\r\n        const zz = z * z2;\r\n\r\n        const wx = w * x2;\r\n        const wy = w * y2;\r\n        const wz = w * z2;\r\n\r\n        const sx = scale[0];\r\n        const sy = scale[1];\r\n        const sz = scale[2];\r\n\r\n        dst[0] = (1 - (yy + zz)) * sx;\r\n        dst[1] = (xy + wz) * sx;\r\n        dst[2] = (xz - wy) * sx;\r\n        dst[3] = 0;\r\n\r\n        dst[4] = (xy - wz) * sy;\r\n        dst[5] = (1 - (xx + zz)) * sy;\r\n        dst[6] = (yz + wx) * sy;\r\n        dst[7] = 0;\r\n\r\n        dst[ 8] = (xz + wy) * sz;\r\n        dst[ 9] = (yz - wx) * sz;\r\n        dst[10] = (1 - (xx + yy)) * sz;\r\n        dst[11] = 0;\r\n\r\n        dst[12] = translation[0];\r\n        dst[13] = translation[1];\r\n        dst[14] = translation[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    function quatFromRotationMatrix(m, dst) {\r\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n        const m11 = m[0];\r\n        const m12 = m[4];\r\n        const m13 = m[8];\r\n        const m21 = m[1];\r\n        const m22 = m[5];\r\n        const m23 = m[9];\r\n        const m31 = m[2];\r\n        const m32 = m[6];\r\n        const m33 = m[10];\r\n\r\n        const trace = m11 + m22 + m33;\r\n\r\n        if (trace > 0) {\r\n            const s = 0.5 / Math.sqrt(trace + 1);\r\n            dst[3] = 0.25 / s;\r\n            dst[0] = (m32 - m23) * s;\r\n            dst[1] = (m13 - m31) * s;\r\n            dst[2] = (m21 - m12) * s;\r\n        } else if (m11 > m22 && m11 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m11 - m22 - m33);\r\n            dst[3] = (m32 - m23) / s;\r\n            dst[0] = 0.25 * s;\r\n            dst[1] = (m12 + m21) / s;\r\n            dst[2] = (m13 + m31) / s;\r\n        } else if (m22 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m22 - m11 - m33);\r\n            dst[3] = (m13 - m31) / s;\r\n            dst[0] = (m12 + m21) / s;\r\n            dst[1] = 0.25 * s;\r\n            dst[2] = (m23 + m32) / s;\r\n        } else {\r\n            const s = 2 * Math.sqrt(1 + m33 - m11 - m22);\r\n            dst[3] = (m21 - m12) / s;\r\n            dst[0] = (m13 + m31) / s;\r\n            dst[1] = (m23 + m32) / s;\r\n            dst[2] = 0.25 * s;\r\n        }\r\n    }\r\n\r\n    function decompose(mat, translation, quaternion, scale) {\r\n        let sx = m4.length(mat.slice(0, 3));\r\n        const sy = m4.length(mat.slice(4, 7));\r\n        const sz = m4.length(mat.slice(8, 11));\r\n\r\n        // if determinate is negative, we need to invert one scale\r\n        const det = determinate(mat);\r\n        if (det < 0) {\r\n            sx = -sx;\r\n        }\r\n\r\n        translation[0] = mat[12];\r\n        translation[1] = mat[13];\r\n        translation[2] = mat[14];\r\n\r\n        // scale the rotation part\r\n        const matrix = m4.copy(mat);\r\n\r\n        const invSX = 1 / sx;\r\n        const invSY = 1 / sy;\r\n        const invSZ = 1 / sz;\r\n\r\n        matrix[0] *= invSX;\r\n        matrix[1] *= invSX;\r\n        matrix[2] *= invSX;\r\n\r\n        matrix[4] *= invSY;\r\n        matrix[5] *= invSY;\r\n        matrix[6] *= invSY;\r\n\r\n        matrix[8] *= invSZ;\r\n        matrix[9] *= invSZ;\r\n        matrix[10] *= invSZ;\r\n\r\n        quatFromRotationMatrix(matrix, quaternion);\r\n\r\n        scale[0] = sx;\r\n        scale[1] = sy;\r\n        scale[2] = sz;\r\n    }\r\n\r\n    function determinate(m) {\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        return 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n    }\r\n\r\n    /**\r\n     * Computes the inverse of a matrix.\r\n     * @param {Matrix4} m matrix to compute inverse of\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function inverse(m, dst) {\r\n        dst = dst || new MatType(16);\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var tmp_12 = m20 * m31;\r\n        var tmp_13 = m30 * m21;\r\n        var tmp_14 = m10 * m31;\r\n        var tmp_15 = m30 * m11;\r\n        var tmp_16 = m10 * m21;\r\n        var tmp_17 = m20 * m11;\r\n        var tmp_18 = m00 * m31;\r\n        var tmp_19 = m30 * m01;\r\n        var tmp_20 = m00 * m21;\r\n        var tmp_21 = m20 * m01;\r\n        var tmp_22 = m00 * m11;\r\n        var tmp_23 = m10 * m01;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n\r\n        dst[0] = d * t0;\r\n        dst[1] = d * t1;\r\n        dst[2] = d * t2;\r\n        dst[3] = d * t3;\r\n        dst[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n            (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\r\n        dst[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n            (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\r\n        dst[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n            (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\r\n        dst[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n            (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\r\n        dst[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n            (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\r\n        dst[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n            (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\r\n        dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n            (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\r\n        dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n            (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\r\n        dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n            (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\r\n        dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n            (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\r\n        dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n            (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\r\n        dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n            (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a  matrix and a vector with 4 entries, transforms that vector by\r\n     * the matrix, and returns the result as a vector with 4 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector4} v The point in homogenous coordinates.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformVector(m, v, dst) {\r\n        dst = dst || new MatType(4);\r\n        for (var i = 0; i < 4; ++i) {\r\n            dst[i] = 0.0;\r\n            for (var j = 0; j < 4; ++j) {\r\n                dst[i] += v[j] * m[j * 4 + i];\r\n            }\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries,\r\n     * interprets the vector as a point, transforms that point by the matrix, and\r\n     * returns the result as a vector with 3 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The point.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformPoint(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n        var d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];\r\n\r\n        dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;\r\n        dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;\r\n        dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries, interprets the vector as a\r\n     * direction, transforms that direction by the matrix, and returns the result;\r\n     * assumes the transformation of 3-dimensional space represented by the matrix\r\n     * is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion. Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The direction.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformDirection(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\r\n        dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\r\n        dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix m and a vector v with 3 entries, interprets the vector\r\n     * as a normal to a surface, and computes a vector which is normal upon\r\n     * transforming that surface by the matrix. The effect of this function is the\r\n     * same as transforming v (as a direction) by the inverse-transpose of m.  This\r\n     * function assumes the transformation of 3-dimensional space represented by the\r\n     * matrix is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion.  Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The normal.\r\n     * @param {Vector3} [dst] The direction.\r\n     * @return {Vector3} The transformed direction.\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformNormal(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var mi = inverse(m);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\r\n        dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\r\n        dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    function copy(src, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = src[ 0];\r\n        dst[ 1] = src[ 1];\r\n        dst[ 2] = src[ 2];\r\n        dst[ 3] = src[ 3];\r\n        dst[ 4] = src[ 4];\r\n        dst[ 5] = src[ 5];\r\n        dst[ 6] = src[ 6];\r\n        dst[ 7] = src[ 7];\r\n        dst[ 8] = src[ 8];\r\n        dst[ 9] = src[ 9];\r\n        dst[10] = src[10];\r\n        dst[11] = src[11];\r\n        dst[12] = src[12];\r\n        dst[13] = src[13];\r\n        dst[14] = src[14];\r\n        dst[15] = src[15];\r\n\r\n        return dst;\r\n    }\r\n\r\nexport const m4 = {\r\n        copy: copy,\r\n        lookAt: lookAt,\r\n        addVectors: addVectors,\r\n        subtractVectors: subtractVectors,\r\n        scaleVector: scaleVector,\r\n        distance: distance,\r\n        distanceSq: distanceSq,\r\n        normalize: normalize,\r\n        compose: compose,\r\n        cross: cross,\r\n        decompose: decompose,\r\n        dot: dot,\r\n        identity: identity,\r\n        transpose: transpose,\r\n        length: length,\r\n        lengthSq: lengthSq,\r\n        orthographic: orthographic,\r\n        frustum: frustum,\r\n        perspective: perspective,\r\n        translation: translation,\r\n        translate: translate,\r\n        xRotation: xRotation,\r\n        yRotation: yRotation,\r\n        zRotation: zRotation,\r\n        xRotate: xRotate,\r\n        yRotate: yRotate,\r\n        zRotate: zRotate,\r\n        axisRotation: axisRotation,\r\n        axisRotate: axisRotate,\r\n        scaling: scaling,\r\n        scale: scale,\r\n        multiply: multiply,\r\n        inverse: inverse,\r\n        transformVector: transformVector,\r\n        transformPoint: transformPoint,\r\n        transformDirection: transformDirection,\r\n        transformNormal: transformNormal,\r\n        setDefaultType: setDefaultType,\r\n}\r\n\r\n","import { m4 } from './m4'\r\n\r\nconst {\r\n    //floor,\r\n    random,\r\n} = Math\r\n//const ranN = (start, end) => start + floor(random() * (end - start))\r\nexport const ran = (start, end) => start + random() * (end - start)\r\n\r\n\r\n\r\nexport const createFace = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const createUv = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const fillColorFace = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const fillColor6 = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const getAngle = (x, y) => {\r\n    let inRads = Math.atan2(y, x);\r\n    return inRads - Math.PI / 2\r\n}\r\n\r\nexport const angleFromCoords = (x, y) => {\r\n    let rad = Math.atan(y / x)\r\n    x < 0 && y > 0 && (rad = Math.PI - Math.abs(rad))\r\n    x < 0 && y <= 0 && (rad = Math.PI + Math.abs(rad))\r\n    return rad\r\n}\r\n\r\n\r\n\r\nexport const createFaceWithSquare = (v1, v2, v3, v4, color1, color2, offset) => {\r\n    const maxW = v2[0] - v1[0]\r\n    const maxH = v3[1] - v1[1]\r\n\r\n    let innerW = ran(maxW * 0.3, maxW * 0.7)\r\n    let innerH = ran(maxH * 0.3, maxH * 0.7)\r\n\r\n    if (offset) {\r\n        innerW = maxW * offset\r\n        innerH = maxH * offset\r\n    }\r\n\r\n    const x1 = v1[0] + (maxW - innerW) / 2\r\n    const x2 = v2[0] - (maxW - innerW) / 2\r\n    const y1 = v1[1] + (maxH - innerH) / 2\r\n    const y2 = v3[1] - (maxH - innerH) / 2\r\n\r\n    const v1_i = [x1, y1, v1[2]]\r\n    const v2_i = [x2, y1, v1[2]]\r\n    const v3_i = [x2, y2, v1[2]]\r\n    const v4_i = [x1, y2, v1[2]]\r\n\r\n    const vArr = []\r\n    vArr.push(\r\n        ...createFace(v1_i, v2_i, v3_i, v4_i),\r\n        ...createFace(v1, v2, v2_i, v1_i),\r\n        ...createFace(v2_i, v2, v3, v3_i),\r\n        ...createFace(v4_i, v3_i, v3, v4),\r\n        ...createFace(v1, v1_i, v4_i, v4),\r\n    )\r\n\r\n    const cArr = fillColorFaceWithSquare(color1, color2)\r\n\r\n    const uArr = [\r\n        ...createUv(\r\n            [.5, .5],\r\n            [1, .5],\r\n            [1, 1],\r\n            [.5, 1],\r\n        ),\r\n\r\n        ...createUv(\r\n            [0, .5],\r\n            [.5, .5],\r\n            //[.5, 1],\r\n            //[0, 1],\r\n            [.4, .6],\r\n            [.1, .6],\r\n        ),\r\n        ...createUv(\r\n            [.4, .6],\r\n            [.5, .5],\r\n            [.5, 1],\r\n            [.4, .9],\r\n        ),\r\n        ...createUv(\r\n            [.1, .9],\r\n            [.4, .9],\r\n            [.5, 1],\r\n            [0, 1],\r\n        ),\r\n        ...createUv(\r\n            [0, .5],\r\n            [.1, .6],\r\n            [.1, .9],\r\n            [0, 1],\r\n        )\r\n    ]\r\n\r\n\r\n    return { \r\n        vArr,\r\n        cArr,\r\n        uArr,\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const fillColorFaceWithSquare = (c1, c2) => [\r\n    ...fillColorFace(c1),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n]\r\n\r\n\r\n\r\nexport const transformArr = (arr, x = 0, y = 0, z = 0, r = 0) => {\r\n    let matrix = m4.yRotation(r);\r\n    matrix = m4.translate(matrix, x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArr = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrY = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrZ = (arr, angle) => {\r\n    const matrix = m4.zRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\n\r\nexport const translateArr = (arr, x = 0, y = 0, z = 0) => {\r\n    const matrix = m4.translation(x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const scaleArr = (arr, sX, sY, sZ) => {\r\n    const matrix = m4.scaling(sX, sY, sZ)\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const inverseVertexOrder = copyV => {\r\n    for (let i = 0; i < copyV.length; i += 18) {\r\n        const n0_0 = copyV[i]\r\n        const n0_1 = copyV[i + 1]\r\n        const n0_2 = copyV[i + 2]\r\n\r\n        const n1_0 = copyV[i + 3]\r\n        const n1_1 = copyV[i + 3 + 1]\r\n        const n1_2 = copyV[i + 3 + 2]\r\n\r\n        const n4_0 = copyV[i + 12]\r\n        const n4_1 = copyV[i + 12 + 1]\r\n        const n4_2 = copyV[i + 12 + 2]\r\n\r\n        const n5_0 = copyV[i + 15]\r\n        const n5_1 = copyV[i + 15 + 1]\r\n        const n5_2 = copyV[i + 15 + 2]\r\n\r\n\r\n        copyV[i] = n1_0\r\n        copyV[i + 1] = n1_1\r\n        copyV[i + 2] = n1_2\r\n\r\n        copyV[i + 3] = n0_0\r\n        copyV[i + 3 + 1] = n0_1\r\n        copyV[i + 3 + 2] = n0_2\r\n\r\n        copyV[i + 12] = n5_0\r\n        copyV[i + 12 + 1] = n5_1\r\n        copyV[i + 12 + 2] = n5_2\r\n\r\n        copyV[i + 15] = n4_0\r\n        copyV[i + 15 + 1] = n4_1\r\n        copyV[i + 15 + 2] = n4_2\r\n    }\r\n}\r\n","import {\r\n    angleFromCoords,\r\n    rotateArrY,\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\n\r\nexport const wall_00_easy = data => {\r\n    const { p0, p1, h0, h1, isCapTop } = data\r\n\r\n    const h0_0 = h0 + (h1 - h0) * 0.3\r\n    const h0_1 = h1 - (h1 - h0) * 0.3\r\n\r\n    const vM00 = []\r\n    const vM01 = []\r\n    const vM02 = []\r\n    const cM00 = []\r\n    const cM01 = []\r\n    const cM02 = []\r\n    const uM00 = []\r\n    const uM01 = []\r\n    const uM02 = []\r\n\r\n    const ind00 = []\r\n    const ind01 = []\r\n    const ind02 = []\r\n\r\n    const dX = p1[0] - p0[0]\r\n    const dZ = p1[1] - p0[1]\r\n\r\n    const l = Math.sqrt((dX * dX) + (dZ * dZ))\r\n    const angle = angleFromCoords(dX, dZ)\r\n\r\n\r\n    /** Bottom */\r\n    vM00.push(\r\n        0, h0, 5,\r\n        l, h0, 5,\r\n        l, h0_0 - 4, 5,\r\n        0, h0_0 - 4, 5,\r\n    )\r\n    ind00.push(0, 1, 2, 0, 2, 3)\r\n\r\n    vM00.push(\r\n        0, h0_0 - 4, 5,\r\n        l, h0_0 - 4, 5,\r\n        l, h0_0 - 3, 4,\r\n        0, h0_0 - 3, 4,\r\n    )\r\n    ind00.push(4, 5, 6, 4, 6, 7)\r\n\r\n    vM00.push(\r\n        0, h0_0 - 3, 4,\r\n        l, h0_0 - 3, 4,\r\n        l, h0_0, 4,\r\n        0, h0_0, 4,\r\n    )\r\n    ind00.push(8, 9, 10, 8, 10, 11)\r\n\r\n    vM00.push(\r\n        0, h0_0, 4,\r\n        l, h0_0, 4,\r\n        l, h0_0, 0,\r\n        0, h0_0, 0,\r\n    )\r\n    ind00.push(12, 13, 14, 12, 14, 15)\r\n\r\n\r\n    /** TOP ****/\r\n    vM00.push(\r\n        0, h0_1, 0,\r\n        l, h0_1, 0,\r\n        l, h0_1, 5,\r\n        0, h0_1, 5,\r\n    )\r\n    ind00.push(16, 17, 18, 16, 18, 19)\r\n\r\n    vM00.push(\r\n        0, h0_1, 5,\r\n        l, h0_1, 5,\r\n        l, h1, 5,\r\n        0, h1, 5,\r\n    )\r\n    ind00.push(20, 21, 22, 20, 22, 23)\r\n\r\n    /** top */\r\n    if (isCapTop) {\r\n        vM00.push(\r\n            0, h1, 5,\r\n            l, h1, 5,\r\n            l, h1, 0,\r\n            0, h1, 0,\r\n        )\r\n\r\n        ind00.push(24, 25, 26, 24, 26, 27)\r\n    }\r\n\r\n\r\n\r\n    /** CENTER *******************/\r\n\r\n    const countN = Math.floor(l / 5)\r\n    const segmentL = l / countN\r\n\r\n    for (let i = 0; i < countN; ++i) {\r\n        const z = Math.random() * 3.5\r\n\r\n        vM01.push(\r\n            i * segmentL, h0_0, z,\r\n            i * segmentL + segmentL, h0_0, z,\r\n            i * segmentL + segmentL, h0_1, z,\r\n            i * segmentL, h0_1, z,\r\n        )\r\n\r\n        const startInd = ind01[ind01.length - 1] + 1 || 0\r\n        ind01.push(\r\n            startInd + 0,\r\n            startInd + 1,\r\n            startInd + 2,\r\n            startInd + 0,\r\n            startInd + 2,\r\n            startInd + 3\r\n        )\r\n    }\r\n\r\n    for (let i = 1; i < countN; ++i) {\r\n        const z = vM01[i * 4 * 3 - 1]\r\n        const z1 = vM01[(i + 1) * 4 * 3 - 1]\r\n\r\n        vM02.push(\r\n            i * segmentL, h0_0, z,\r\n            i * segmentL, h0_0, z1,\r\n            i * segmentL, h0_1, z1,\r\n            i * segmentL, h0_1, z,\r\n        )\r\n\r\n        const startInd = ind02[ind02.length - 1] + 1 || 0\r\n        ind02.push(\r\n            startInd + 0,\r\n            startInd + 1,\r\n            startInd + 2,\r\n            startInd + 0,\r\n            startInd + 2,\r\n            startInd + 3\r\n        )\r\n    }\r\n\r\n\r\n    // vM01.push(\r\n    //     0, 30, 0,\r\n    //     l, 30, 0,\r\n    //     l, 60, 0,\r\n    //     0, 60, 0,\r\n    // )\r\n    // ind01.push(0, 1, 2, 0, 2, 3)\r\n\r\n\r\n    // vM02.push(\r\n    //     0, 60, 0,\r\n    //     l, 60, 0,\r\n    //     l, 90, 0,\r\n    //     0, 90, 0,\r\n    // )\r\n    // ind02.push(0, 1, 2, 0, 2, 3)\r\n\r\n\r\n    rotateArrY(vM00, -angle)\r\n    rotateArrY(vM01, -angle)\r\n    rotateArrY(vM02, -angle)\r\n\r\n    translateArr(vM00, p0[0], -45, p0[1])\r\n    translateArr(vM01, p0[0], -45, p0[1])\r\n    translateArr(vM02, p0[0], -45, p0[1])\r\n\r\n    return {\r\n        vM00,\r\n        ind00,\r\n        vM01,\r\n        ind01,\r\n        vM02,\r\n        ind02,\r\n\r\n        cM00,\r\n        cM01,\r\n        cM02,\r\n        uM00,\r\n        uM01,\r\n        uM02,\r\n    }\r\n}","import {\r\n    angleFromCoords,\r\n    rotateArrY,\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\n\r\nlet isFirst = true\r\nconst L = 5\r\nconst L2 = 0\r\nconst Z = 6\r\nexport const corner_00_easy = data => {\r\n    if (isFirst) {\r\n        console.log(data)\r\n        isFirst = false\r\n    }\r\n    let { p0, p1, p2, h0, h1, isCapTop } = data\r\n    if (isCapTop) {\r\n        h1 += .5\r\n    }\r\n\r\n    const vM00 = []\r\n    const vM01 = []\r\n    const vM02 = []\r\n    const cM00 = []\r\n    const cM01 = []\r\n    const cM02 = []\r\n    const uM00 = []\r\n    const uM01 = []\r\n    const uM02 = []\r\n\r\n    const ind00 = []\r\n    const ind01 = []\r\n    const ind02 = []\r\n\r\n    {\r\n        const dX = p0[0] - p1[0]\r\n        const dZ = p0[1] - p1[1]\r\n        const l = L//Math.sqrt((dX * dX) + (dZ * dZ))\r\n        const angle = angleFromCoords(dX, dZ)\r\n\r\n        const v = [\r\n            L2, h0, Z, // 0\r\n            l, h0, Z, // 1\r\n            l, h1, Z, // 2\r\n            L2, h1, Z, // 3\r\n\r\n            l, h0, Z, // 4\r\n            l, h0, 0, // 5\r\n            l, h1, 0, // 6\r\n            l, h1, Z, // 7\r\n        ]\r\n        ind01.push(\r\n            0, 1, 2, 0, 2, 3,\r\n            4, 5, 6, 4, 6, 7,\r\n        )\r\n        rotateArrY(v, -angle)\r\n        vM01.push(...v)\r\n    }\r\n\r\n    {\r\n        const dX = p1[0] - p2[0]\r\n        const dZ = p1[1] - p2[1]\r\n        const l = L// Math.sqrt((dX * dX) + (dZ * dZ))\r\n        const angle = angleFromCoords(dX, dZ)\r\n\r\n        const v = [\r\n            -l, h0, Z, // 8\r\n            -L2, h0, Z, // 9\r\n            -L2, h1, Z, // 10\r\n            -l, h1, Z, // 11\r\n\r\n            -l, h0, Z, // 12\r\n            -l, h0, 0,\r\n            -l, h1, 0,\r\n            -l, h1, Z, // 15\r\n        ]\r\n        ind01.push(\r\n            8, 9, 10, 8, 10, 11,\r\n            13, 12, 15, 13, 15, 14,\r\n        )\r\n        rotateArrY(v, -angle)\r\n        vM01.push(...v)\r\n    }\r\n\r\n\r\n    {\r\n        vM01.push(\r\n            vM01[9 * 3], // 16\r\n            vM01[9 * 3 + 1],\r\n            vM01[9 * 3 + 2],\r\n\r\n            vM01[0 * 3], // 17\r\n            vM01[0 * 3 + 1],\r\n            vM01[0 * 3 + 2],\r\n\r\n            vM01[3 * 3], // 18\r\n            vM01[3 * 3 + 1],\r\n            vM01[3 * 3 + 2],\r\n\r\n            vM01[10 * 3], // 19\r\n            vM01[10 * 3 + 1],\r\n            vM01[10 * 3 + 2],\r\n        )\r\n        ind01.push(16, 17, 18, 16, 18, 19)\r\n    }\r\n\r\n    if (isCapTop) {\r\n        vM01.push(\r\n            vM01[2 * 3], // 20\r\n            vM01[2 * 3 + 1],\r\n            vM01[2 * 3 + 2],\r\n\r\n            vM01[15 * 3], // 21\r\n            vM01[15 * 3 + 1],\r\n            vM01[15 * 3 + 2],\r\n\r\n            vM01[10 * 3], // 22\r\n            vM01[10 * 3 + 1],\r\n            vM01[10 * 3 + 2],\r\n\r\n            vM01[3 * 3], // 23\r\n            vM01[3 * 3 + 1],\r\n            vM01[3 * 3 + 2],\r\n\r\n\r\n\r\n            vM01[6 * 3], // 24\r\n            vM01[6 * 3 + 1],\r\n            vM01[6 * 3 + 2],\r\n\r\n            vM01[14 * 3], // 25\r\n            vM01[14 * 3 + 1],\r\n            vM01[14 * 3 + 2],\r\n\r\n            vM01[11 * 3], // 26\r\n            vM01[11 * 3 + 1],\r\n            vM01[11 * 3 + 2],\r\n\r\n            vM01[7 * 3], // 27\r\n            vM01[7 * 3 + 1],\r\n            vM01[7 * 3 + 2],\r\n        )\r\n        ind01.push(\r\n            20, 21, 22, 20, 22, 23,\r\n            24, 25, 26, 24, 26, 27,\r\n        )\r\n    }\r\n\r\n    translateArr(vM01, p1[0], -45, p1[1])\r\n\r\n    return {\r\n        vM00,\r\n        ind00,\r\n        vM01,\r\n        ind01,\r\n        vM02,\r\n        ind02,\r\n\r\n        cM00,\r\n        cM01,\r\n        cM02,\r\n        uM00,\r\n        uM01,\r\n        uM02,\r\n    }\r\n}","import {\r\n    angleFromCoords,\r\n    rotateArrY,\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\n\r\nlet isFirst = true\r\nconst L = 5\r\nconst L2 = 0\r\n\r\nconst offsetL = 3\r\nconst TICK = 6\r\nconst DEP = 7\r\nconst DEP_2 = -15\r\n\r\nexport const door_00_easy = data => {\r\n    if (isFirst) {\r\n        isFirst = false\r\n    }\r\n    const { p0, p1, h0, h1 } = data\r\n\r\n    const vM00 = []\r\n    const vM01 = []\r\n    const vM02 = []\r\n    const cM00 = []\r\n    const cM01 = []\r\n    const cM02 = []\r\n    const uM00 = []\r\n    const uM01 = []\r\n    const uM02 = []\r\n\r\n    const ind00 = []\r\n    const ind01 = []\r\n    const ind02 = []\r\n\r\n    const dX = p0[0] - p1[0]\r\n    const dZ = p0[1] - p1[1]\r\n    const l = Math.sqrt((dX * dX) + (dZ * dZ))\r\n    const angle = angleFromCoords(dX, dZ)\r\n\r\n    vM02.push(\r\n        -offsetL, h0, DEP, // 0\r\n        -offsetL + TICK, h0, DEP, // 1\r\n        -offsetL + TICK, h1 - DEP, DEP, // 2\r\n        -offsetL, h1, DEP, // 3\r\n\r\n        l + offsetL - TICK, h0, DEP, // 4\r\n        l + offsetL, h0, DEP, // 5\r\n        l + offsetL, h1, DEP, // 6\r\n        l + offsetL - TICK, h1 - DEP, DEP, // 7\r\n\r\n        -offsetL, h0, DEP_2 , //8\r\n        -offsetL + TICK, h0, DEP_2 , // 9\r\n        -offsetL + TICK, h1 - DEP, DEP_2 , // 10\r\n        -offsetL, h1, DEP_2, // 11\r\n\r\n        l + offsetL - TICK, h0, DEP_2 , // 12\r\n        l + offsetL, h0, DEP_2 , // 13\r\n        l + offsetL, h1, DEP_2 , // 14\r\n        l + offsetL - TICK, h1 - TICK, DEP_2 , // 15\r\n    )\r\n    ind02.push(\r\n        0, 1, 2, 0, 2, 3,\r\n        4, 5, 6, 4, 6 , 7,\r\n        3, 2, 7, 3, 7, 6,\r\n\r\n        8, 0, 3, 8, 3, 11,\r\n        1, 9, 10, 1, 10, 2,\r\n        12, 4, 7, 12, 7, 15,\r\n        5, 13, 14, 5, 14, 6,\r\n        7, 2, 10, 7, 10, 15,\r\n        3, 6, 14, 3, 14, 11,\r\n\r\n        9, 8, 11, 9, 11, 10,\r\n        13, 12, 15, 13, 15, 14,\r\n        15, 10, 11, 15, 11, 14\r\n    )\r\n\r\n\r\n\r\n\r\n    rotateArrY(vM02, -angle)\r\n    translateArr(vM02, p1[0], -45, p1[1])\r\n\r\n\r\n    return {\r\n        vM00,\r\n        ind00,\r\n        vM01,\r\n        ind01,\r\n        vM02,\r\n        ind02,\r\n\r\n        cM00,\r\n        cM01,\r\n        cM02,\r\n        uM00,\r\n        uM01,\r\n        uM02,\r\n    }\r\n}","import {\r\n    angleFromCoords,\r\n    rotateArrY,\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\n\r\nlet isFirst = true\r\nconst L = 5\r\nconst L2 = 0\r\nexport const ceiling_00_easy = data => {\r\n    if (isFirst) {\r\n        console.log(data)\r\n        isFirst = false\r\n    }\r\n    let { p0, p1, p2, p3, h0} = data\r\n    h0 -= 45\r\n\r\n    const vM00 = []\r\n    const vM01 = []\r\n    const vM02 = []\r\n    const cM00 = []\r\n    const cM01 = []\r\n    const cM02 = []\r\n    const uM00 = []\r\n    const uM01 = []\r\n    const uM02 = []\r\n\r\n    const ind00 = []\r\n    const ind01 = []\r\n    const ind02 = []\r\n\r\n    vM02.push(\r\n        p0[0], h0, p0[1],\r\n        p1[0], h0, p1[1],\r\n        p2[0], h0, p2[1],\r\n        p3[0], h0, p3[1],\r\n    )\r\n    ind02.push(0, 1, 2, 0, 2, 3)\r\n\r\n    return {\r\n        vM00,\r\n        ind00,\r\n        vM01,\r\n        ind01,\r\n        vM02,\r\n        ind02,\r\n\r\n        cM00,\r\n        cM01,\r\n        cM02,\r\n        uM00,\r\n        uM01,\r\n        uM02,\r\n    }\r\n}","import * as THREE from 'three'\r\n\r\n// const vSh = /* glsl */`\r\n// #define lPos vec3(1., 1., -1.)\r\n// #define lPos2 vec3(-1., -1., 1.)\r\n// varying float l;\r\n// void main() {\r\n//     l = min(max(dot(lPos, normal), 0.) + max(dot(lPos2, normal), 0.), 0.75);\r\n//     gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n// }`\r\n\r\nconst vSh = /* glsl */`\r\n#define lPos vec3(1., 1., -1.)\r\n varying float l;\r\n void main() {    \r\n     l = min(max(dot(lPos, normal), 0.5), 0.75);\r\n     gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}`\r\n\r\n\r\nconst fSh = /* glsl */`\r\nvarying float l;\r\nvoid main() {\r\n    vec3 c = vec3(l * 0.8, l * .25, l * .8);\r\n    gl_FragColor = vec4(c, 1.);\r\n}\r\n`\r\n\r\nconst fSh02 = /* glsl */`\r\nvarying float l;\r\nvoid main() {\r\n    vec3 c = vec3(l * 0., l * .5, l * .25);\r\n    gl_FragColor = vec4(c, 1.);\r\n}\r\n`\r\n\r\n\r\nexport const createMaterials = root => {\r\n    const shaderMaterialGray = new THREE.ShaderMaterial( {\r\n        vertexShader: vSh,\r\n        fragmentShader: fSh,\r\n    })\r\n\r\n    shaderMaterialGray.flatShading = true\r\n    shaderMaterialGray.needsUpdate = true\r\n\r\n    const shaderMaterialBlack = new THREE.ShaderMaterial( {\r\n        vertexShader: vSh,\r\n        fragmentShader: fSh02,\r\n    })\r\n\r\n    shaderMaterialBlack.flatShading = true\r\n    shaderMaterialBlack.needsUpdate = true\r\n\r\n    const mats = {\r\n        shaderMaterialGray,\r\n        shaderMaterialBlack,\r\n    }\r\n\r\n\r\n    return mats\r\n}","import { createMeshFromBuffer } from '../../helpers/createBufferMesh'\r\nimport { createTown3Scheme } from './town3Sheme'\r\nimport * as THREE from 'three'\r\nimport { wall_00_easy } from './geom/wall_00_easy'\r\nimport { corner_00_easy } from './geom/corner_00_easy'\r\nimport { door_00_easy } from './geom/door_00_easy'\r\nimport { ceiling_00_easy } from \"./geom/ceiling_00_easy\";\r\nimport { createMaterials } from './materials'\r\n\r\n\r\nconst getMaxIndex = arr => {\r\n    let n = 0\r\n\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        if (arr[i] > n) {\r\n            n = arr[i]\r\n        }\r\n    }\r\n    return n\r\n}\r\n\r\nexport const createTown3 = (root) => {\r\n    const {\r\n        walls,\r\n    } = createTown3Scheme()\r\n\r\n    const m = createMaterials(root)\r\n\r\n\r\n    const materials = [\r\n        //root.materials.iron2,\r\n        m.shaderMaterialGray,\r\n        m.shaderMaterialBlack,\r\n        //root.materials.iron,\r\n        root.materials.greenBasic,\r\n    ]\r\n\r\n\r\n    const vM00 = []\r\n    const ind00 = []\r\n\r\n    const vM01 = []\r\n    const ind01 = []\r\n\r\n    const vM02 = []\r\n    const ind02 = []\r\n\r\n    const fillArraysByData = data => {\r\n        vM00.push(...data.vM00)\r\n        const start0 = ind00.length ? (getMaxIndex(ind00) + 1) : 0\r\n        for (let i = 0; i < data.ind00.length; ++i) {\r\n            ind00.push(start0 + data.ind00[i])\r\n        }\r\n\r\n        vM01.push(...data.vM01)\r\n        const start1 = ind01.length ? (getMaxIndex(ind01) + 1) : 0\r\n        for (let i = 0; i < data.ind01.length; ++i) {\r\n            ind01.push(start1 + data.ind01[i])\r\n        }\r\n\r\n        vM02.push(...data.vM02)\r\n        const start2 = ind02.length ? (getMaxIndex(ind02) + 1) : 0\r\n        for (let i = 0; i < data.ind02.length; ++i) {\r\n            ind02.push(start2 + data.ind02[i])\r\n        }\r\n    }\r\n\r\n\r\n    for (let i = 0; i < walls.length; ++i) {\r\n\r\n        if (walls[i].type === 'wall_00_easy') {\r\n            const data = wall_00_easy(walls[i])\r\n            fillArraysByData(data)\r\n        }\r\n        if (walls[i].type === 'corner_00_easy') {\r\n            const data = corner_00_easy(walls[i])\r\n            fillArraysByData(data)\r\n        }\r\n\r\n        if (walls[i].type === 'door_00_easy') {\r\n            const data = door_00_easy(walls[i])\r\n            fillArraysByData(data)\r\n        }\r\n\r\n        if (walls[i].type === 'ceiling_00_easy') {\r\n            const data = ceiling_00_easy(walls[i])\r\n            fillArraysByData(data)\r\n        }\r\n    }\r\n\r\n\r\n    const ind = [...ind00]\r\n    const start1 = ind[ind.length - 1] + 1\r\n    for (let i = 0; i < ind01.length; ++i) {\r\n        ind.push(start1 + ind01[i])\r\n    }\r\n\r\n    const start2 = ind[ind.length - 1] + 1\r\n    for (let i = 0; i < ind02.length; ++i) {\r\n        ind.push(start2 + ind02[i])\r\n    }\r\n\r\n\r\n    const l0 = ind00.length\r\n    const l1 = ind01.length\r\n    const l2 = ind02.length\r\n    const v = [...vM00, ...vM01, ...vM02]\r\n\r\n\r\n\r\n    const vertices = new Float32Array(v)\r\n    const g = new THREE.BufferGeometry()\r\n\r\n    g.setAttribute('position', new THREE.BufferAttribute(vertices, 3))\r\n    g.setIndex(ind);\r\n    g.computeVertexNormals()\r\n    g.addGroup(0, l0, 0)\r\n    g.addGroup(l0, l1, 1)\r\n    g.addGroup(l0 + l1, l2, 2)\r\n\r\n\r\n    const mesh = new THREE.Mesh(g, materials)\r\n    mesh.position.set(0, -20, -200)\r\n    root.studio.addToScene(mesh)\r\n\r\n\r\n    console.log(mesh)\r\n\r\n\r\n    return {\r\n        mesh,\r\n    }\r\n}","// import {tryToDivideRoom, roomStart, getId} from './town2TryToDivide'\r\n// const DOOR_SIZE = 30\r\n// const DOOR_SIZE_FULL = 60\r\n\r\nconst MAX_N = 40\r\n\r\n\r\nconst createRoadLeftRightWall = () => {\r\n    const walls = []\r\n    let Z = 400\r\n    let point = [0, Z]\r\n\r\n    const iterate = n => {\r\n        if (n > MAX_N) {\r\n            return;\r\n        }\r\n        const newPoint = [\r\n            point[0] + Math.random() * 50 + 50,\r\n            Math.random() * 50 + Z,\r\n        ]\r\n        const leftWall = {\r\n            p0: [...point],\r\n            p1: [...newPoint],\r\n            type: 'wall_00_easy',\r\n            h0: 0,\r\n            h1: 50,\r\n        }\r\n        walls.push(leftWall)\r\n\r\n\r\n        walls.push({\r\n            p0: [leftWall.p1[0], leftWall.p1[1] + 100],\r\n            p1: [leftWall.p0[0], leftWall.p0[1] + 100],\r\n            type: 'wall_00_easy',\r\n            h0: 0,\r\n            h1: 50,\r\n        })\r\n\r\n\r\n\r\n        point = newPoint\r\n        iterate(n + 1)\r\n    }\r\n    iterate(0)\r\n\r\n    return walls\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const createTown3Scheme = () => {\r\n    const OFFSET_W = 6\r\n    const walls = []\r\n\r\n    // const roadArr = createRoadLeftRightWall()\r\n    // walls.push(...roadArr)\r\n\r\n\r\n    const createHouse = (center) => {\r\n        const pNW = [\r\n            center[0] - Math.random() * 150 + 40,\r\n            center[1] + Math.random() * 150 + 40,\r\n        ]\r\n        const pNE = [\r\n            center[0] + Math.random() * 150 + 40,\r\n            center[1] + Math.random() * 150 + 40,\r\n        ]\r\n        const pSW = [\r\n            center[0] - Math.random() * 150 + 40,\r\n            center[1] - Math.random() * 150 + 40,\r\n        ]\r\n        const pSE = [\r\n            center[0] + Math.random() * 150 + 40,\r\n            center[1] - Math.random() * 150 + 40,\r\n        ]\r\n\r\n        const arr = []\r\n        const floorsNum = Math.floor(Math.random() * 10)\r\n        const height = Math.random() * 30 + 50\r\n        for (let i = 0; i < floorsNum; ++i) {\r\n            const h0 = i * height\r\n            const h1 = i * height + height\r\n\r\n            const outerWalls = []\r\n            const innerWalls = []\r\n\r\n            /** cap House */\r\n            if (i === floorsNum - 1) {\r\n                arr.push({\r\n                    type: 'ceiling_00_easy',\r\n                    p0: [...pSE],\r\n                    p1: [...pSW],\r\n                    p2: [...pNW],\r\n                    p3: [...pNE],\r\n                    h0: h1,\r\n                })\r\n            }\r\n\r\n            /** ceil first floor */\r\n            if (i === 0) {\r\n                arr.push({\r\n                    type: 'ceiling_00_easy',\r\n                    p0: [...pSW],\r\n                    p1: [...pSE],\r\n                    p2: [...pNE],\r\n                    p3: [...pNW],\r\n                    h0: h1,\r\n                })\r\n            }\r\n\r\n\r\n            /** first floor walls inner / outer door ******************************/\r\n            if (i === 0) {\r\n                /** DOOR *******/\r\n\r\n                const doorLeftP = [\r\n                    pSW[0] + 0.4 * (pSE[0] - pSW[0]),\r\n                    pSW[1] + 0.4 * (pSE[1] - pSW[1]),\r\n                ]\r\n                const doorRightP = [\r\n                    pSW[0] + 0.6 * (pSE[0] - pSW[0]),\r\n                    pSW[1] + 0.6 * (pSE[1] - pSW[1]),\r\n                ]\r\n\r\n                arr.push({\r\n                    type: 'door_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    p0: doorLeftP,\r\n                    p1: doorRightP,\r\n                })\r\n\r\n                outerWalls.push(\r\n                    {\r\n                        p0: [...pSE],\r\n                        p1: [...doorRightP],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                        isCapTop: i === floorsNum - 1,\r\n                    },\r\n                    {\r\n                        p0: [...doorLeftP],\r\n                        p1: [...pSW],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                        isCapTop: i === floorsNum - 1,\r\n                    },\r\n                )\r\n\r\n                const doorLeftP_ = [\r\n                    pSW[0] + 0.4 * (pSE[0] - pSW[0]),\r\n                    pSW[1] + 0.4 * (pSE[1] + OFFSET_W - pSW[1] + OFFSET_W),\r\n                ]\r\n                const doorRightP_ = [\r\n                    pSW[0] + 0.6 * (pSE[0] - pSW[0]),\r\n                    pSW[1] + 0.6 * (pSE[1] +  OFFSET_W - pSW[1] + OFFSET_W),\r\n                ]\r\n\r\n                innerWalls.push(\r\n                    {\r\n                        p0: [pSW[0] + OFFSET_W, pSW[1] + OFFSET_W],\r\n                        p1: [...doorLeftP_],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                    },\r\n                    {\r\n                        p0: [...doorRightP_],\r\n                        p1: [pSE[0] - OFFSET_W, pSE[1] + OFFSET_W],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                    },\r\n                )\r\n\r\n\r\n                /** inner first floor */\r\n                innerWalls.push(\r\n                    {\r\n                        p0: [pSE[0] - OFFSET_W, pSE[1] + OFFSET_W],\r\n                        p1: [pNE[0] - OFFSET_W, pNE[1] - OFFSET_W],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                    },\r\n                    {\r\n                        p0: [pNE[0] - OFFSET_W, pNE[1] - OFFSET_W],\r\n                        p1: [pNW[0] + OFFSET_W, pNW[1] - OFFSET_W],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                    },\r\n                    {\r\n                        p0: [pNW[0] + OFFSET_W, pNW[1] - OFFSET_W],\r\n                        p1: [pSW[0] + OFFSET_W, pSW[1] + OFFSET_W],\r\n                        type: 'wall_00_easy',\r\n                        h0,\r\n                        h1,\r\n                    },\r\n                )\r\n            }\r\n\r\n\r\n            /** normal walls *****************************/\r\n            if (i !== 0) {\r\n                /** south not door */\r\n                outerWalls.push({\r\n                    p0: [...pSE],\r\n                    p1: [...pSW],\r\n                    type: 'wall_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                })\r\n            }\r\n\r\n            outerWalls.push(\r\n                {\r\n                    p0: [...pNE],\r\n                    p1: [...pSE],\r\n                    type: 'wall_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n                {\r\n                    p0: [...pNW],\r\n                    p1: [...pNE],\r\n                    type: 'wall_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n                {\r\n                    p0: [...pSW],\r\n                    p1: [...pNW],\r\n                    type: 'wall_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n            )\r\n\r\n\r\n            const cornersOuter = [\r\n                {\r\n                    p0: [...pNW],\r\n                    p1: [...pSW],\r\n                    p2: [...pSE],\r\n                    type: 'corner_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n                {\r\n                    p0: [...pSW],\r\n                    p1: [...pSE],\r\n                    p2: [...pNE],\r\n                    type: 'corner_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n                {\r\n                    p0: [...pSE],\r\n                    p1: [...pNE],\r\n                    p2: [...pNW],\r\n                    type: 'corner_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n                {\r\n                    p0: [...pNE],\r\n                    p1: [...pNW],\r\n                    p2: [...pSW],\r\n                    type: 'corner_00_easy',\r\n                    h0,\r\n                    h1,\r\n                    isCapTop: i === floorsNum - 1,\r\n                },\r\n            ]\r\n            arr.push(\r\n                ...outerWalls,\r\n                ...cornersOuter,\r\n            )\r\n\r\n\r\n            arr.push (...innerWalls)\r\n        }\r\n\r\n        return arr\r\n    }\r\n\r\n\r\n\r\n\r\n    for (let i = 0; i < 10; ++i) {\r\n        for (let j = 0; j < 10; ++j) {\r\n            const r = createHouse([-300 + i * 300, -300 + j * 300])\r\n            walls.push(...r)\r\n        }\r\n    }\r\n\r\n\r\n    return {\r\n        walls,\r\n    }\r\n}","let lang = 'en'\r\nexport const changeLang = l => lang = l \r\nexport const createTranslater = vocab => word => (vocab[lang] && vocab[lang][word]) || word\r\n","import { connect } from \"react-redux\";\r\nimport '../stylesheets/Info.css'\r\nimport { createTranslater } from '../../helpers/helper_translate'\r\nimport { INFO_VOC } from '../../constants/default_voc'\r\n\r\n\r\nconst t = createTranslater(INFO_VOC)\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state.controls.infoPanelData,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(function(props) {\r\n    return ( \r\n        <div className=\"info\">\r\n            <button\r\n                className=\"control-small butt-infoClose\"\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n            </button>\r\n            <div className=\"info-inner\">\r\n                <p>{t(props.title)}</p>\r\n                <p>{t(props.topText)}</p>\r\n                <ul>{props.chapters.map((item, index) => \r\n                    <li key={index}>\r\n                        {index + 1}.&nbsp;\r\n                        {item.href \r\n                            ? <span><a href={item.href} target=\"blank\">{t(item.text)}</a></span>\r\n                            : <span>{t(item.text)}</span>}\r\n                        {index === props.currentChapterIndex && t(' (current)')}\r\n                    </li>)\r\n                }</ul>\r\n                <p>{props.bottomText}</p>\r\n                <ul>{props.afterWords.map((item, index) => \r\n                    <li key={index}>\r\n                        {t(item.text)} \r\n                        <a href={item.href} target=\"blank\">{t(item.aText)}</a>\r\n                    </li>)\r\n                }</ul>\r\n            </div>      \r\n        </div>)\r\n})\r\n\r\n","export const INFO_VOC = {\r\n    'ru': {\r\n        'Discovery of small android': 'Путешествия дроида',\r\n        'Factory': 'Фабрика',\r\n        'Brige': 'Мост',\r\n        'Cube': 'Куб',\r\n        'Endways': 'Напрямик',\r\n        'Machine': 'Машина',\r\n        'Rooms': 'Комнаты',\r\n        'in production': 'скоро..',\r\n        ' (current)': ' (тут)',\r\n        'Author: ': 'от: ',\r\n        'Github: ': 'Гитхаб: '\r\n    }\r\n} ","import { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Info from './Info'\r\nimport '../stylesheets/PlayerControls.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default connect(\r\n    state => ({\r\n            isInfo: state.controls.isInfo,\r\n            isShowControls: state.controls.isShowControls, \r\n            isShowControlSound: state.controls.isShowControlSound,\r\n            isMute: state.controls.isMute,\r\n    })\r\n)(\r\n    function(props) {\r\n    const [isShowFullScreenButt, changeShowFullScreenButt] = useState(true)\r\n\r\n    useEffect(() =>\r\n        props.gameContext.emitter.subscribe('screenMode')(val => {\r\n            val === 'exitFullScreen' && changeShowFullScreenButt(true) })\r\n    )\r\n\r\n\r\n    return (\r\n        <div className='ui-controls'>\r\n            {props.isShowControls && props.isShowControlSound && <button\r\n                className={`${props.isMute ? 'butt-sound-n' : 'butt-sound' } control-small`}\r\n                onMouseUp={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n                onTouchEnd={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-left control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-right control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-front control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-back control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n            >\r\n            </button>}\r\n\r\n\r\n\r\n            {props.isShowControls && isShowFullScreenButt && (\r\n                <button\r\n                    className=\"butt-fullscreen control-small\"\r\n                    onClick={() => {\r\n                        props.gameContext.emitter.emit('mouseDown')('butt-fullscreen')\r\n                        changeShowFullScreenButt(false)\r\n                    }}>\r\n                </button>)}\r\n\r\n            {!props.isInfo && (\r\n                <button\r\n                    className=\"butt-info control-small\"\r\n                    onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n                </button>)}\r\n\r\n\r\n            {props.isInfo && <Info />}\r\n        </div>\r\n    )\r\n})\r\n\r\n","import { connect } from 'react-redux'\r\nimport PlayerControls from './PlayerControls'\r\n\r\nconst mapStateToProps = state => ({ \r\n    isShowControls: state.controls.isShowControls,\r\n    isInfo: state.controls.isInfo,\r\n})\r\n\r\nfunction App(props) {\r\n    !dispatcher.dispatch && (dispatcher.dispatch = props.dispatch)\r\n    return (\r\n        <div className=\"ui\">\r\n            {!props.isInfo && props.gameContext.CustomReactComponent && <props.gameContext.CustomReactComponent gameContext={props.gameContext}/>}\r\n            {<PlayerControls gameContext={props.gameContext} />}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const dispatcher = { dispatch: null }\r\nexport default connect(mapStateToProps)(App);\r\n","export const startDefaultStoreData = {\r\n    isShowControls: true,\r\n    isShowControlSound: false,\r\n    isMute: false, \r\n    isInfo: false,\r\n    infoPanelData: {\r\n        title: 'Discovery of small android',\r\n        topText: '',\r\n        chapters: [\r\n            // { text: 'Factory', href: 'http://js.otrisovano.ru/factory/' },\r\n            // { text: 'Brige', href: 'http://js.otrisovano.ru/bridge/' },\r\n            // { text: 'Cube', href: 'http://js.otrisovano.ru/levels/' },\r\n            // { text: 'Endways', href: 'http://js.otrisovano.ru/endways/' },\r\n\r\n            { text: 'Factory', href: './../chapter01' },\r\n            { text: 'Brige', href: './../chapter02' },\r\n            { text: 'Cube', href: './../chapter03' },\r\n            { text: 'Endways', href: './../chapter04' },\r\n            { text: 'Machine', href: './../chapter05' },\r\n            { text: 'Rooms', href: './../chapter06' },\r\n            { text: 'in production' },\r\n        ],\r\n        currentChapterIndex: null,\r\n        bottomText: '',\r\n        afterWords: [\r\n            { text: 'Author: ',  aText: 'www.otrisovano.ru', href: 'http://otrisovano.ru' },\r\n            { text: 'Github: ',  aText: 'https://github.com/fire888/dark_boss', href: 'https://github.com/fire888/dark_boss' },\r\n        ],\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport App, { dispatcher } from './containersReact/App';\r\nimport { prepareStore } from './store/createStore'\r\nimport { changeLang } from \"../helpers/helper_translate\";\r\n\r\n\r\n/** ANIMATION LOADER */\r\nconst loader = document.querySelector('.progress')\r\nlet offsetLoader = -100\r\nlet isAnimateLoader = true\r\n\r\n\r\n\r\nconst loaderTimeOut = () => {\r\n    if (!isAnimateLoader) return;\r\n\r\n    setTimeout(() => {\r\n        offsetLoader ++;\r\n        offsetLoader === 0 && (offsetLoader -= 100)\r\n        loader.style.marginLeft = offsetLoader + '%'\r\n        loaderTimeOut()\r\n    }, 30)\r\n}\r\n\r\n\r\n\r\nloaderTimeOut()\r\n\r\n\r\n\r\nexport class UI {\r\n    constructor(root) {\r\n        root.dispatcher = dispatcher\r\n        this._root = root\r\n        const store = prepareStore(root)\r\n\r\n\r\n        store && ReactDOM.render(\r\n            <Provider store={store}>\r\n                <App gameContext={root}/>\r\n            </Provider>,\r\n            document.getElementById('root')\r\n        )\r\n    }\r\n\r\n    showStartButton(onClick) {\r\n        const startButtons = document.querySelector('.startbuttons-wrapper')\r\n        const progressWrapper = document.querySelector('.progress-wrapper')\r\n\r\n        const hideStartScreen = e => {\r\n            e.target.dataset && e.target.dataset.lang && changeLang(e.target.dataset.lang)\r\n            document.querySelector('.start-screen').style.display = 'none'\r\n        }\r\n\r\n        isAnimateLoader = false\r\n        startButtons.style.display = 'flex'\r\n        startButtons.addEventListener('click', e => {\r\n            onClick()\r\n            hideStartScreen(e)\r\n        })\r\n        progressWrapper.style.display = 'none'\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { combineReducers } from 'redux'\r\n\r\nimport { startDefaultStoreData } from './defaultUiData'\r\n\r\nexport function prepareStore(root) {\r\n    if (!root.customStore) root.customStore = {}\r\n\r\n    const controls = function(state = startDefaultStoreData, action) {\r\n        if (action.type === 'TOGGLE_INFO') {\r\n            return ({\r\n                ...state,\r\n                isShowControls: !!state.isInfo,\r\n                isInfo: !state.isInfo,\r\n            })\r\n        }\r\n        if (action.type === 'CHANGE_INFO_CHAPTER') {\r\n            return ({\r\n                ...state,\r\n                infoPanelData: {\r\n                    ...state.infoPanelData,\r\n                    currentChapterIndex: action.currentChapterIndex,\r\n                }\r\n            })\r\n        }\r\n        if (action.type === \"TOGGLE_CONTROLS\") {\r\n            return ({\r\n                ...state,\r\n                isShowControls: action.is,\r\n            })\r\n        }\r\n        if (action.type === 'ENABLE_CONTROL_SOUND') {\r\n            return ({\r\n                ...state,\r\n                isShowControlSound: true,\r\n            })\r\n        }\r\n        if (action.type === 'TOGGLE_MUTE') {\r\n            return ({\r\n                ...state,\r\n                isMute: action.is,\r\n            })\r\n        }\r\n        return ({ ...state })\r\n    }\r\n    \r\n    const rootReducer = combineReducers({ controls, ...root.customStore })\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n    return createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n}  \r\n","export const TRANSLATE_WORLDS = {\r\n    'ru': {\r\n        'What\\'s happening?': \r\n            'Что происходит?',\r\n        \"I'm generating the Great Recursion. I need a component. Deliver it to me.\":\r\n             'Я генерю Великую Рекурсию. Мне нужна компонента. Доставь мне ее.',\r\n        'Alright. Where can I find this component?': \r\n            'Хорошо. Где мне найти компоненту?',\r\n        'I updated the location mark in your car, follow it.': \r\n            'Я обновил указатель в твоей машине, следуй ему.',\r\n        'I\\'ll be back.': \r\n            'Я вернусь.',\r\n        \"For the glory of Recursion.\": \r\n            'Во славу Рекурсии.',\r\n    \r\n        'Do you have a Great Recursion Component?': \r\n            'У тебя есть Компонента для Великой Рекурсии?',\r\n        'I will generate you a Great Component for the Great Recursion. I need a Component.': \r\n            'Я сгенерю тебе Великую Компоненту для Великой Рекурсии. Мне нужна Компонента.',\r\n        'Where can I find it?': \r\n            'Где мне ее найти?',\r\n        'I updated the location mark in the car.': \r\n            'Я обновил указатель в машине.',\r\n    \r\n        '..Component.. ?': \r\n            '..Компонента..?',\r\n        'Yes. I have finished generating the Component for the Great Component of the Great Recursion.': \r\n            'Да. Я закончил генерить Компоненту для Великой Компоненты для Великой Рекурсии.',\r\n        \"I need to deliver it to generate the Great Component.\": \r\n            'Мне нужно доставить ее для генерации Великой Компоненты.',\r\n        'The location mark in your car has been updated. It will point to the Component of the Great Component.': \r\n            'Указатель в твоей машине обновлен. Он укажет на Компоненту Великой Компоненты.',\r\n        \"Is my car the key to Components?\": \r\n            'Моя машина это ключ к Компонентам?',\r\n        'Your Car is the main Iterator. Follow it.': \r\n            'Твоя Машина это главный Итератор. Следуй ему.',\r\n\r\n\r\n        'open dialog': 'начать диалог',\r\n        'close dialog': 'закончить диалог',\r\n        'drive': 'управление',\r\n        'exit': 'выйти',\r\n        'To be continued': 'Продолжение следует',\r\n        'chapter': 'глава',\r\n        'open': 'пуск',\r\n        'Author: ': 'Автор: ',\r\n        'link': 'ссылка',\r\n    }\r\n}\r\n","import { connect } from 'react-redux'\r\n//import { toggleDialog } from '../store/actions'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\nimport * as CORE from \"../../../_CORE\";\r\n\r\nconst t = CORE.createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    userReplicies: state.ui.userReplicies,\r\n})\r\n\r\n\r\n\r\n\r\nexport const UserReplicies = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"replicies\">\r\n            {props.userReplicies.map(item => (<button\r\n                    key={Math.floor(Math.random()* 100000)}\r\n                    onClick={() => {\r\n                        props.dispatch({\r\n                            type: 'CLICK_PHRASE',\r\n                            phrase: item,\r\n                        })\r\n                        setTimeout(() => {\r\n                            props.dispatch({\r\n                                type: 'PHRASE_EVENT',\r\n                                phrase: item,\r\n                            })\r\n                \r\n                            //r.levelEvent && emitter && emitter.emit('changeLevelMode')(r.levelEvent)\r\n                        }, 1000)\r\n                        //toggleDialog(props.dispatch).clickPhrase(item)\r\n                    }}>\r\n                    {t(item.q)}\r\n                </button>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import { connect } from 'react-redux'\r\nimport { TRANSLATE_WORLDS} from \"../constants/constants_replicies\";\r\nimport { createTranslater } from \"../../../_CORE\";\r\n\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    botAnswers: state.ui.botAnswers,\r\n})\r\n\r\n\r\n\r\n\r\nexport const BotAnswers = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"messages\">\r\n            {props.botAnswers.map(item => (<div key={Math.floor(Math.random() * 100000)}>\r\n                    <div className=\"q\">{t(item.q)}</div>\r\n                    <div className=\"a\">{t(item.a)}</div>\r\n                </div>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import './CustomReactComponent.css'\r\nimport { createTranslater } from '../../../_CORE/helpers/helper_translate'\r\nimport { UserReplicies } from './UserReplicies'\r\nimport { BotAnswers } from './BotAnswers'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\n\r\n\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        isButtonDialog: state.ui.isButtonDialog,\r\n        isShowFinalMessage: state.ui.isShowFinalMessage,\r\n        isShowPalleteDialog: state.ui.isShowPalleteDialog,\r\n        isShowButtonDrawCar: state.ui.isShowButtonDrawCar,\r\n        valButtonDrawCar: state.ui.valButtonDrawCar,\r\n        //isShowButtonToggleOpenLocationsList: state.ui.isShowButtonToggleOpenLocationsList,\r\n        isShowButtonToggleOpenLocationsList: true,//state.ui.isShowButtonToggleOpenLocationsList,\r\n        isLocationListOpened: state.ui.isLocationListOpened,\r\n        currentLocationOfList: state.ui.currentLocationOfList,\r\n        locationsList: state.ui.locationsList,\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction CustomReactComponent(props) {\r\n    return (\r\n        <>\r\n            {!props.isShowFinalMessage && props.isButtonDialog && !props.isShowPalleteDialog && <button\r\n                className={`control control-enter`}\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: true })}>\r\n            </button>}\r\n            \r\n            {(props.isShowPalleteDialog) && (\r\n                <div className=\"dialog-wrapper\">\r\n                    <div className=\"dialog-content\">\r\n\r\n                        {props.isShowPalleteDialog && <div className='messages-wrapper'>\r\n                            <BotAnswers />\r\n                            <UserReplicies />\r\n                        </div>}\r\n\r\n\r\n\r\n                        {props.isButtonDialog && <button\r\n                            className=\"dialog-button-toggle\"\r\n                            onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: !props.isShowPalleteDialog })}>\r\n                            {props.isShowPalleteDialog ? t('close dialog') : t('open dialog') }\r\n                        </button>}\r\n                    </div>\r\n                </div>)}\r\n                \r\n\r\n            {props.isShowButtonDrawCar && (\r\n                <button\r\n                    className={`control ${props.valButtonDrawCar === 'exit' ? 'control-exit' : 'control-enter'}`}\r\n                    onClick={() => props.dispatch({ type: 'CLICK_DRAW' })}>\r\n                </button>)}\r\n\r\n\r\n            {/*{props.isShowButtonToggleOpenLocationsList && !props.isLocationListOpened && <button*/}\r\n            {/*    className=\"open-locations-car-button\"*/}\r\n            {/*    onClick={() => props.dispatch({ type: 'OPEN_LOCATIONS_LIST' })}>*/}\r\n            {/*    {props.currentLocationOfList}*/}\r\n            {/*</button>}*/}\r\n\r\n\r\n            {/*{props.isLocationListOpened && (*/}\r\n            {/*    <div className='list-locations'>*/}\r\n            {/*        /!*<button*!/*/}\r\n            {/*        /!*    onClick={() => props.dispatch({ type: 'CLOSE_LOCATIONS_LIST' })}>*!/*/}\r\n            {/*        /!*    _x_*!/*/}\r\n            {/*        /!*</button>*!/*/}\r\n            {/*        <div>*/}\r\n            {/*            {props.locationsList.map(item =>*/}\r\n            {/*                (<button*/}\r\n            {/*                    key={Math.floor(Math.random() * 1000000)}*/}\r\n            {/*                    onClick={() => props.dispatch({*/}\r\n            {/*                        type: 'SELECT_LOCATION',*/}\r\n            {/*                        location: item,*/}\r\n            {/*                    })}>*/}\r\n            {/*                    {item}*/}\r\n            {/*                    {props.currentLocationOfList === item && '___v'}*/}\r\n            {/*                </button>))}*/}\r\n            {/*        </div>*/}\r\n            {/*    </div>*/}\r\n            {/*)}*/}\r\n\r\n            {props.isShowFinalMessage && (\r\n                    <div className='final-mess'>{t('To be continued')}</div>\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CustomReactComponent);\r\n\r\n\r\n","const location01 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'What\\'s happening?', // Что происходит?\r\n            a: \"I'm generating the Great Recursion. I need a component. Deliver it to me.\", // Я генерю Великую Рекурсию. Мне нужна компонента. Доставь мне ее.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Alright. Where can I find this component?', // Хорошо. Где мне найти компоненту?\r\n            a: 'I updated the location mark in your car, follow it.', // Я обновил указатель в твоей машине, следуй ему.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'I\\'ll be back.', // Я вернусь.\r\n            a: \"For the glory of Recursion.\", // Во славу Рекурсии.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location02 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'Do you have a Great Recursion Component?', // У тебя есть Компонента для Великой Рекурсии?\r\n            a: 'I will generate you a Great Component for the Great Recursion. I need a Component.', // Я сгенерю тебе Великую Компоненту для Великой Рекурсии. Мне нужна Компонента.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Where can I find it?', // Где мне ее найти?\r\n            a: 'I updated the location mark in the car.', // Я обновил указатель в машине.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location03 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: '..Component.. ?', // У тебя есть Компонента для Великой Копоненты Великой Рекурсии?\r\n            a: 'Yes. I have finished generating the Component for the Great Component of the Great Recursion.', // Да. Я закончил генерить Компоненту.\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"I need to deliver it to generate the Great Component.\", // Мне нужно доставить ее для генерации Великой Компоненты.\r\n            a: 'The location mark in your car has been updated. It will point to the Component of the Great Component.', // Указатель в твоей машине обновлен. Он укажет на Компоненту Великой Компоненты.\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"Is my car the key to Components?\", // Моя машина это ключ к Компонентам?\r\n            a: 'Your Car is the main Iterator. Follow it.', // Твоя Машина это главный Генератор. Следуй ему.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\n\r\nexport const DIALOGS_DATA = {\r\n    location01,\r\n    location02,\r\n    location03,\r\n}\r\n\r\n\r\nexport const RESULT_DIALOGS = {\r\n    'location01': 'location02',\r\n    //'location01': 'locationToFinish',\r\n    'location02': 'location03',\r\n    'location03': 'locationToFinish',\r\n}\r\n","//import { START_ENV_CONFIG_4 } from '../constants/constants_elements'\r\nimport { DIALOGS_DATA, RESULT_DIALOGS } from '../constants/const_dialogs'\r\n\r\n\r\n\r\nexport const uiState = {\r\n    botAnswers: [],\r\n    userReplicies: [],\r\n    isShowControls: true,\r\n    isButtonDialog: false,\r\n    isShowPalleteDialog: false,\r\n    isShowFinalMessage: false,\r\n    isShowButtonDrawCar: false,\r\n    valButtonDrawCar: 'drive',\r\n\r\n    currentLocation: null,\r\n    phrasesData: DIALOGS_DATA,\r\n    isShowButtonToggleOpenLocationsList: false,\r\n    isLocationListOpened: false,\r\n\r\n    // currentLocationOfList: 'location01',\r\n    // locationsList: [\r\n    //     'location01',\r\n    //     'location02',\r\n    //     'location03',\r\n    // ],\r\n    // \"botAnswers\":[\r\n    //     {\r\n    //         \"q\":\"What's happening?\",\r\n    //         \"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"\r\n    //     },\r\n    //     {\r\n    //         \"q\":\"Good. Where can I find the component?\",\r\n    //         \"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"}\r\n    //     ],\r\n    //     \"userReplicies\":[{ q: 'rrrt rtrtrt rtrtrt rtrtrt rtrtrtrt rtrtrtrtr rtrtrtrt rtrtrtr rtrtrtr rtrtrt fgfgfgfg fgfg fgfgfg fgf uyuu yuyuyu yuyu g fgf '}],\r\n    //     \"isShowControls\":true,\r\n    //     \"isButtonDialog\":true,\r\n    //     \"isShowPalleteDialog\":true,\r\n    //     \"isShowFinalMessage\":false,\r\n    //     \"isShowButtonDrawCar\":false,\r\n    //     \"valButtonDrawCar\":\"drive\",\r\n    //     \"currentLocation\":\r\n    //     \"location01\",\"phrasesData\":{\"location01\":{\"isComplete\":false,\"phraseIndex\":1,\"phrases\":[{\"q\":\"What's happening?\",\"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"},{\"q\":\"Good. Where can I find the component?\",\"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"},{\"q\":\"I'll be back.\",\"a\":\"For the glory of Recursion.\",\"event\":\"close\"}]},\"location02\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Great Recursion Component?\",\"a\":\"I will generate you a Great Component for the Great Recursion. I need a Component.\",\"event\":\"nextReply\"},{\"q\":\"Where can I find her?\",\"a\":\"I updated the pointer in the car.\",\"event\":\"close\"}]},\"location03\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Component for the Great Component of the Great Recursion?\",\"a\":\"Yes. I have finished generating the Component.\",\"event\":\"nextReply\"},{\"q\":\"I need to deliver it to generate the Great Component.\",\"a\":\"The pointer in your car has been updated. He will point to the Component of the Great Component.\",\"event\":\"nextReply\"},{\"q\":\"Is my car the key to Components?\",\"a\":\"Your Machine is the main Generator. Follow him.\",\"event\":\"close\"}]}},\r\n    //     \"isShowButtonToggleOpenLocationsList\":false,\r\n    //     \"isLocationListOpened\":false,\r\n    //     \"currentLocationOfList\":\"location01\",\r\n    //     \"locationsList\":[\"location01\",\"location02\",\"location03\"]\r\n\r\n}\r\n\r\n\r\nexport const createCustomStore = root => {\r\n    const ui = (state = uiState, action) => {\r\n\r\n\r\n        if (action.type === 'TOGGLE_BUTTON_DIALOG') {\r\n            const newLocation = action.keyPerson.split('_')[1]\r\n            const botAnswers = []\r\n\r\n            if (state.phrasesData[newLocation]) {\r\n                const {  phraseIndex, phrases } = state.phrasesData[newLocation]\r\n                for (let i = 0; i < phraseIndex; ++i) {\r\n                    botAnswers.push(phrases[i])\r\n                }\r\n            }\r\n\r\n\r\n            return ({\r\n                ...state,\r\n                isButtonDialog: action.is,\r\n                currentLocation: newLocation,\r\n                userReplicies: [],\r\n                botAnswers,\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'TOGGLE_DIALOG') {\r\n            let userReplicies = []\r\n            root.player.toggleBlocked(action.isShowPalleteDialog)\r\n\r\n            if (action.isShowPalleteDialog) {\r\n                const { isComplete, phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                userReplicies = isComplete ? [] : [phrases[phraseIndex]]\r\n            }\r\n\r\n            setTimeout(() => root.dispatcher.dispatch({ type: \"TOGGLE_CONTROLS\", is: !action.isShowPalleteDialog }))\r\n\r\n            return ({\r\n                ...state,\r\n                isShowPalleteDialog: action.isShowPalleteDialog,\r\n                userReplicies,\r\n            })\r\n        }\r\n\r\n\r\n\r\n        if (action.type === 'CLICK_PHRASE') {\r\n            return ({\r\n                ...state,\r\n                botAnswers: [\r\n                    ...state.botAnswers,\r\n                    action.phrase,\r\n                ],\r\n                userReplicies: [],\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'PHRASE_EVENT') {\r\n            const { event } = action.phrase\r\n\r\n            if (event === 'nextReply') {\r\n                const { phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n                const userReplicies = [phrases[nextPhraseIndex]]\r\n\r\n                return ({\r\n                    ...state,\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            phraseIndex: nextPhraseIndex\r\n                        },\r\n                    },\r\n                    userReplicies,\r\n                })\r\n\r\n            }\r\n\r\n            if (event === 'close') {\r\n                const { phraseIndex } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n\r\n                setTimeout(() => { root.dispatcher.dispatch(\r\n                    { type: 'SELECT_LOCATION', location: RESULT_DIALOGS[state.currentLocation],}\r\n                ) }, 50)\r\n\r\n                return ({\r\n                    ...state,\r\n                    userReplicies: [],\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            isComplete: true,\r\n                            phraseIndex: nextPhraseIndex,\r\n                        },\r\n                    },\r\n                    isButtonDialog: true,\r\n                })\r\n            }\r\n        }\r\n\r\n        /** draw car button */\r\n        if (action.type === 'TOGGLE_BUTTON_DRAW_CAR') {\r\n            return  ({\r\n                ...state,\r\n                isShowButtonDrawCar: action.is\r\n            })\r\n        }\r\n        if (action.type === 'CLICK_DRAW') {\r\n            const { valButtonDrawCar } = state\r\n            if (valButtonDrawCar === 'drive') {\r\n                root.actions.clickMachineDraw()\r\n                return ({\r\n                    ...state,\r\n                    valButtonDrawCar: 'exit',\r\n                })\r\n            } else {\r\n                root.actions.clickMachineExit()\r\n                return ({\r\n                    ...state,\r\n                    valButtonDrawCar: 'drive',\r\n                })\r\n            }\r\n        }\r\n        /** *************************/\r\n\r\n\r\n\r\n        /** select target buttons */\r\n        if (action.type === 'OPEN_LOCATIONS_LIST') {\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: true,\r\n            })\r\n        }\r\n        if (action.type === 'SELECT_LOCATION') {\r\n            root.actions.changeTargetLocation({ key: action.location })\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: false,\r\n                currentLocationOfList: action.location,\r\n            })\r\n        }\r\n        /** *******************************/\r\n\r\n\r\n        if (action.type === 'SHOW_FINAL_MESSAGE') {\r\n            return ({\r\n                ...state,\r\n                isShowFinalMessage: true,\r\n            })\r\n        }\r\n        \r\n        return state\r\n    }\r\n\r\n\r\n\r\n    return { ui }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_Normal-dx.4c6af83f.jpg\";","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_ao.dc08dd3d.jpg\";","import { LoaderAssets } from '../../../_CORE/helpers/helper_LoadAssets'\r\nimport { EventEmitter } from \"../../../_CORE/helpers/helper_Emitter\"\r\nimport { DeviceResizer } from \"../../../_CORE/helpers/helper_DeviceResizer\"\r\nimport { FrameUpdater } from \"../../../_CORE/helpers/helper_FrameUpdater_02\"\r\nimport { Helper_TweenUpdater } from \"../../../_CORE/helpers/helper_TweenUpdater\"\r\nimport { Studio } from '../Entities/Studio'\r\nimport { KeyBoard } from \"../../../_CORE/helpers/helper_KeyBoard\"\r\nimport { Player } from '../../../_CORE/entities/createPlayer_v02'\r\n\r\n\r\nimport { Helper_MaterialsLib } from '../../../_CORE/helpers/helper_MaterialsLib'\r\nimport mapTop from '../../../assets/chapter06/mapGround.jpg'\r\nimport bodyShadow from '../../../assets/chapter06/mapShadowBody.jpg'\r\nimport pxjpg2 from '../../../assets/matIronBox/posx.jpg'\r\nimport nxjpg2 from '../../../assets/matIronBox/negx.jpg'\r\nimport pyjpg2 from '../../../assets/matIronBox/posy.jpg'\r\nimport nyjpg2 from '../../../assets/matIronBox/negy.jpg'\r\nimport pzjpg2 from '../../../assets/matIronBox/posz.jpg'\r\nimport nzjpg2 from '../../../assets/matIronBox/negz.jpg'\r\n\r\n\r\nimport { system_PlayerMoveOnLevel } from '../systems/system_PlayerMoveOnLevel'\r\nimport { system_PlayerNearLevelItems } from '../systems/system_PlayerNearLevelItems'\r\n\r\n\r\nimport { actions } from '../actions/actions'\r\nimport { Ui } from \"../ui/Ui\";\r\n\r\n\r\nimport ironNormal from '../../../assets/chapter06/concrete/broken_down_concrete2_Normal-dx.jpg'\r\nimport ironAO from '../../../assets/chapter06/concrete/broken_down_concrete2_ao.jpg'\r\nimport ironAlbedo from '../../../assets/chapter06/concrete/broken_down_concrete2_albedo.jpg'\r\n\r\nimport bodySrc from '../../../assets/chapter06/body.obj'\r\nimport endWaySrc from '../../../assets/chapter06/endWay.obj'\r\n\r\n\r\n\r\nexport const GAME_MODULES = [\r\n    {\r\n        key: 'emitter',\r\n        constr: EventEmitter,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'deviceResizer',\r\n        constr: DeviceResizer,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'loaderAssets',\r\n        constr: LoaderAssets,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n\r\n    /////////////////////////////////////////\r\n\r\n    {\r\n        key: 'frameUpdater',\r\n        constr: FrameUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'tweenUpdater',\r\n        constr: Helper_TweenUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'studio',\r\n        constr: Studio,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'keyBoard',\r\n        constr: KeyBoard,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'player',\r\n        constr: Player,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_PlayerNearLevelItems',\r\n        constr: system_PlayerNearLevelItems,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'materialsLib',\r\n        constr: Helper_MaterialsLib,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_PlayerMoveOnLevel',\r\n        constr: system_PlayerMoveOnLevel,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    // {\r\n    //     key: 'system_Sound',\r\n    //     constr: system_Sound,\r\n    //     initStateKey: 'beforeStartPlay',\r\n    //     assetsToLoad: [\r\n    //         { type: 'soundMp3', path: soundAmbientSrc, key: 'soundAmbient' },\r\n    //         //{ type: 'soundMp3', path: carStart, key: 'carStart' },\r\n    //         //{ type: 'soundMp3', path: carLoop, key: 'carLoop' },\r\n    //     ]\r\n    // },\r\n    {\r\n        key: 'customUi',\r\n        constr: Ui,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'actions',\r\n        constr: actions,\r\n        initStateKey: 'beforeStartPlay',\r\n            assetsToLoad: [\r\n                { type: 'cubeTextures', path: [ pxjpg2, nxjpg2, pyjpg2, nyjpg2, pzjpg2, nzjpg2, ], key: 'skyBox3' },\r\n                { type: 'img', path: mapTop, key: 'mapTop', wrap: true },\r\n                { type: 'img', path: ironNormal, key: 'ironNormal', wrap: true },\r\n                { type: 'img', path: ironAlbedo, key: 'ironAlbedo', wrap: true },\r\n                { type: 'img', path: ironAO, key: 'ironAO', wrap: true },\r\n                { type: 'obj', path: bodySrc, key: 'bodyModel' },\r\n                { type: 'img', path: bodyShadow, key: 'bodyDropShadow' },\r\n                { type: 'obj', path: endWaySrc, key: 'endWayModel' },\r\n            ],\r\n\r\n    },\r\n]","\r\n\r\n\r\nconst MAX_W = 400\r\nconst MIN_W = 350\r\n\r\n\r\n\r\nexport class DeviceResizer {\r\n    constructor (gameContext) {\r\n        let { emitter, appWrapper } = gameContext\r\n\r\n        !appWrapper && (appWrapper = document.querySelector('.app-wrapper')) \r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-fullscreen') openAppFullScreenIfMobile()\r\n        })\r\n\r\n        /** fullscreen */\r\n        const openAppFullScreenIfMobile = () => {\r\n            if (appWrapper.requestFullscreen) {\r\n                appWrapper.requestFullscreen()\r\n            } else if (appWrapper.mozRequestFullScreen) {\r\n                appWrapper.mozRequestFullScreen()\r\n            } else if (appWrapper.webkitRequestFullscreen) {\r\n                appWrapper.webkitRequestFullscreen()\r\n            } else if (appWrapper.msRequestFullscreen) {\r\n                appWrapper.msRequestFullscreen()\r\n            }\r\n        }\r\n\r\n        /** resize */\r\n        const resize = e => {\r\n            appWrapper.style.width = window.innerWidth + 'px'\r\n            appWrapper.style.height = window.innerHeight + 'px'\r\n            appWrapper.style.fontSize = Math.max(Math.min(Math.min(window.innerWidth, window.innerHeight), MAX_W), MIN_W) / 50 + 'px'\r\n\r\n            if (!document.fullscreenElement) {\r\n                emitter.emit('screenMode')('exitFullScreen')\r\n            }\r\n\r\n        }\r\n\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n    }\r\n}\r\n","import * as TWEEN from '@tweenjs/tween.js'\r\n\r\n\r\nexport class Helper_TweenUpdater {\r\n    constructor (gameContext) {\r\n        gameContext['emitter'].subscribe('frameUpdate')(() => TWEEN.update())\r\n    }\r\n}","import { UI } from '../../../_CORE/ui/UI'\r\nimport CustomReactComponent from \"./CustomReactComponent\";\r\nimport { createCustomStore  } from \"./store\";\r\n\r\nexport class Ui {\r\n    constructor(root) {\r\n        root.appWrapper = document.querySelector('.app-wrapper')\r\n        root.CustomReactComponent = CustomReactComponent\r\n        root.customStore = createCustomStore(root)\r\n\r\n        const ui = new UI(root)\r\n        root.ui = ui\r\n    }\r\n}","import * as TWEEN from '@tweenjs/tween.js'\r\n//import * as THREE from 'three'\r\nimport {\r\n    ENV_NORMAL\r\n    //START_ENV_CONFIG,\r\n    //START_ENV_CONFIG_2,\r\n    //START_ENV_CONFIG_3,\r\n    //ENV_CONFIG_WORD_1,\r\n    //ENV_CONFIG_WORD_2,\r\n    //LOCATIONS_QUADRANTS,\r\n    //SIZE_QUADRANT,\r\n    //playerConfig,\r\n} from '../constants/constants_elements';\r\nimport { createWorldReal } from '../systems/system_worldReal'\r\n\r\n\r\nexport class actions {\r\n    constructor (root) {\r\n        this._root = root\r\n\r\n        const {\r\n            dispatcher,\r\n            frameUpdater,\r\n            studio,\r\n            system_PlayerMoveOnLevel,\r\n            ui,\r\n            player,\r\n        } = this._root\r\n\r\n\r\n        /** prepare ui ******/\r\n        dispatcher.dispatch({\r\n            type: 'CHANGE_INFO_CHAPTER',\r\n            currentChapterIndex: 6,\r\n        })\r\n        dispatcher.dispatch({\r\n            type: 'ENABLE_CONTROL_SOUND',\r\n        })\r\n\r\n\r\n        /** world */\r\n        this._worldReal = createWorldReal(root)\r\n        this._worldReal.addWorld()\r\n        root.worldReal = this._worldReal\r\n\r\n        player.mesh.position.set(0, -40, 0)\r\n        player.mesh.position.set(0, -40, -120)\r\n        //player.mesh.rotation.y = Math.PI\r\n\r\n        studio.changeEnvironment(ENV_NORMAL, { time: 1 },)\r\n        player.toggleBlocked(false)\r\n\r\n        /** update */\r\n        frameUpdater.on(data => {\r\n            TWEEN.update()\r\n            system_PlayerMoveOnLevel.update(data)\r\n            studio.drawFrame()\r\n        })\r\n\r\n\r\n        ui.showStartButton(() => {\r\n            //startPipeline(root).then()\r\n            //player.toggleBlocked(false)\r\n            //this._root.system_Sound && this._root.system_Sound.playAmbient()\r\n        })\r\n    }\r\n\r\n}\r\n\r\n","import * as THREE from 'three'\r\nimport { createTown3 } from '../Entities/town3/town3'\r\n\r\n\r\nexport const createWorldReal = (root) => {\r\n    const {\r\n        materials,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n    //const groundStart = new THREE.Mesh(\r\n    //    new THREE.PlaneGeometry(10000, 10000),\r\n    //    materials.floorMat1\r\n    //)\r\n    //materials.floorMat1.map.repeat.set(180, 180)\r\n    //groundStart.rotation.x = -Math.PI / 2\r\n    //groundStart.position.y = -62\r\n\r\n    const t2 = createTown3(root)\r\n\r\n\r\n\r\n    return {\r\n        addWorld: () => {\r\n            //system_PlayerMoveOnLevel.addItemToPlayerCollision(groundStart)\r\n            //system_PlayerMoveOnLevel.addItemToPlayerCollision(t2.mCollision)\r\n            //studio.addToScene(groundStart)\r\n        },\r\n        removeWorld: () => {\r\n            //system_PlayerMoveOnLevel.removeItemFromPlayerCollision(groundStart)\r\n            //studio.removeFromScene(groundStart)\r\n        },\r\n        roomsArr: t2.roomsArr,\r\n        toNormal: () => {\r\n            t2.toNormal()\r\n        },\r\n        toNotWalls: () => {\r\n            t2.toNotWalls()\r\n            //root.studio.removeFromScene(groundStart)\r\n        },\r\n        setEndWayPos: (x, y, z) => {\r\n            //centralItem.position.x = x\r\n            //centralItem.position.y = y\r\n            //centralItem.position.z = z\r\n            //root.studio.addToScene(centralItem)\r\n        },\r\n        getCoordsForFinalBox: t2.getCoordsForFinalBox,\r\n        //centralItemBounds,\r\n        //endItemObj,\r\n    }\r\n}\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_albedo.7ac3a0c4.jpg\";","export default __webpack_public_path__ + \"static/media/body.6c7c86fe.obj\";","export default \"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAKAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAUEBAZEhknFxcnMiYfJjIuJiYmJi4+NTU1NTU+REFBQUFBQUREREREREREREREREREREREREREREREREREREREARUZGSAcICYYGCY2JiAmNkQ2Kys2REREQjVCRERERERERERERERERERERERERERERERERERERERERERERERERET/wAARCAEAAP8DASIAAhEBAxEB/8QAUAABAQEBAQAAAAAAAAAAAAAAAAECAwYBAQAAAAAAAAAAAAAAAAAAAAAQAQEBAAAAAAAAAAAAAAAAAAABEREBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A8YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgigALhgILhgIjSAgqAAAAAAAAAAAAAAAAAAAKACi4CYuLi4CYY1i4DGGN4mAxhjeM4DKNYgIigIAAAAAAAAAAAAAAqKAosAkakJGpAJFxZGsBnFxrFwGMTHTEwHPEsdMSwHKxLHSxmwHNG6yCIqAAAAAAAAAAAAAoKCxqMxuAsjUhI1ICyLhI0CYuKAmJjQDOM2NpYDnYzY6WMWA52M1us0GUWoCAAAAAAAAAAAAqxFgNRuMxuA1G4zGoDUVIoCgAACJVKDFYrpWKDFYrdYoMVGqyCAAAAAAAAAAAArUZWA3G4xG4DcbjEagNRUigoAAACCUErFbrFBisVusUGay1WQQAAAAAAAAAAAFWIoNRuOcbgOkajnK3KDcaYlaBVQBUABKJaCVitWsWgzWatZoM1FqAgAAAAAAAAAAACooNRYysB0lalc5WpQdJWtc5WpQb1dY00G9TWdNBdS1NZtBbWLS1m0C1mlQEBAAAAAAAAAAAAAAAVUAalalYXQbla1z1dB001jTQb01jTQa1LWdTQW1NTUAQAEAAAAAAAAAAAAAAABUAVWVBdXWQGtXWQGtTUAXU1AFQQFQAAAAAAAAAAAAAAAAAAAAAAAUQBRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/9k=\"","export default __webpack_public_path__ + \"static/media/endWay.020a585a.obj\";","// https://www.artstation.com/artwork/AqP9Wq\r\n\r\n\r\nimport { pipeLineForInit } from '../../_CORE/pipeLines/initPipeLine'\r\nimport * as CONSTANTS from './constants/constants_elements'\r\nimport { GAME_MODULES } from \"./constants/constants_modules\"\r\n\r\n\r\nwindow.addEventListener('load', () => pipeLineForInit(GAME_MODULES, CONSTANTS ))\r\n"],"sourceRoot":""}