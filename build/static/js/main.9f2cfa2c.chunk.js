(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o,a=n(9),r=n.n(a),i=n(11),s=n(10),l=null,c=function(e){l=e},u=function(e){return{startPlay:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"outer"})},showBackground:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"back"})},startFinalFog:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"start"})}}},h=function(e){return{clickFullScreen:function(){e({type:"CLICK_FULL_SCREEN"})},exitFullScreen:function(){e({type:"EXIT_FULL_SCREEN"})}}},d=function(e){return{clickInfo:function(t){e({type:"INFO_TOGGLE",mode:t})}}},m=function(e){return{clickPhrase:function(t){e({type:"CLICK_PHRASE",phrase:t}),setTimeout((function(){e({type:"PHRASE_EVENT",phrase:t}),t.levelEvent&&l&&l.emit("changeLevelMode")(t.levelEvent)}),1e3)},toggleDialog:function(t){e({type:"TOGGLE_DIALOG",isDialog:t})},toggleButtonDialog:function(t){e({type:"TOGGLE_BUTTON",isButtonDialog:t})}}},p=n(3),f={ru:(o={"Hello there!":"\u041f\u0440\u0438\u0432\u0435\u0442 !","Good day, carbon-based life form.":"\u0414\u0435\u043d\u044c \u0434\u043e\u0431\u0440\u044b\u0439, \u043a\u0440\u0435\u043c\u043d\u0438\u0435\u0432\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u0436\u0438\u0437\u043d\u0438.","What is this place ?":"\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u043c\u0435\u0441\u0442\u043e?","This is an entrance to the entropic hyper-maze.":"\u042d\u0442\u043e \u0432\u0445\u043e\u0434 \u0432 \u044d\u043d\u0442\u0440\u043e\u043f\u0438\u0439\u043d\u044b\u0439 \u0433\u0438\u043f\u0435\u0440-\u043a\u0443\u0431.","And what happens if I enter it ?":"\u0427\u0442\u043e \u0431\u0443\u0434\u0435\u0442, \u0435\u0441\u043b\u0438 \u044f \u0432\u043e\u0439\u0434\u0443 \u0432 \u043d\u0435\u0433\u043e?","This place is waiting.":"\u041a\u0443\u0431 \u043f\u0440\u0438\u043c\u0435\u0442 \u0442\u0435\u0431\u044f.","Say, where do these corridors lead ?":"\u041a\u0443\u0434\u0430 \u0432\u0435\u0434\u0443\u0442 \u044d\u0442\u0438 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b ?","They will lead you to the end.":"\u041e\u043d\u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0443\u0442 \u0442\u0435\u0431\u044f \u043a \u0444\u0438\u043d\u0430\u043b\u0443.","Ooook, I'm heading in then.":"\u042f \u043f\u043e\u0448\u0435\u043b \u0434\u0430\u043b\u044c\u0448\u0435.","We will meet again.":"\u041c\u044b \u0435\u0449\u0435 \u0443\u0432\u0438\u0434\u0438\u043c\u0441\u044f.","What do you do here ?":"\u0427\u0442\u043e \u0442\u044b \u0437\u0434\u0435\u0441\u044c \u0434\u0435\u043b\u0430\u0435\u0448\u044c ?","Collecting the energy of the night.":"\u0421\u043e\u0431\u0438\u0440\u0430\u044e \u044d\u043d\u0435\u0440\u0433\u0438\u044e \u043d\u043e\u0447\u0438.","Can you tell me which way is out of here ?":"\u0412 \u043a\u0430\u043a\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u043c\u043d\u0435 \u0438\u0434\u0442\u0438 ?","It is about the journey, not the destination":"\u0417\u0434\u0435\u0441\u044c \u043d\u0435\u0442 \u0441\u0442\u043e\u0440\u043e\u043d. \u0417\u0434\u0435\u0441\u044c \u0432\u0430\u0436\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u0438\u043d\u0430 \u043f\u0443\u0442\u0438.","Hey, it looks like I'm walking in circles.":"\u042f \u0443\u0436\u0435 \u0434\u043e\u043b\u0433\u043e \u0438\u0434\u0443.","You have walked long enough.":"\u0422\u044b \u043f\u0440\u043e\u0448\u0435\u043b \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f.","Meaning?":"\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442?","The way to the next level is open to you.":"\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u043f\u0443\u0442\u044c \u043d\u0430 \u043e\u0434\u043d\u0443 \u0441\u0442\u0443\u043f\u0435\u043d\u044c \u0432\u044b\u0448\u0435.",'Hi, I heard I can find the "end" around here?':"\u042f \u0438\u0449\u0443 \u0444\u0438\u043d\u0430\u043b.","Yes, I told you this is where the corridors lead.":"\u042f \u043f\u043e\u043c\u043d\u044e \u043e \u0442\u0432\u043e\u0435\u043c \u043f\u0443\u0442\u0438.","Man, you all look the same.":"\u0412\u044b \u0432\u0441\u0435 \u0442\u0430\u043a \u043f\u043e\u0445\u043e\u0436\u0438."},Object(p.a)(o,"We will meet again.","\u041c\u044b \u0435\u0449\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043c\u0441\u044f."),Object(p.a)(o,"Soooo, is that you again ?","\u042d\u0442\u043e \u0441\u043d\u043e\u0432\u0430 \u0442\u044b?"),Object(p.a)(o,"Yes. All of me are myself.","\u0414\u0430, \u043c\u044b \u0432\u0441\u0435 \u0435\u0434\u0438\u043d\u044b."),Object(p.a)(o,"Yeah, just like those corridors.","\u0422\u0443\u0442 \u0432\u0441\u0435 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f."),Object(p.a)(o,"The meaning of everything is in being whole.","\u0421\u0443\u0442\u044c \u0432\u0441\u0435\u0433\u043e \u0432 \u0435\u0434\u0438\u043d\u043e\u043c."),Object(p.a)(o,"Am I there yet?","\u041a\u0430\u043a \u0434\u043e\u043b\u0433\u043e \u0435\u0449\u0435 \u0438\u0434\u0442\u0438."),Object(p.a)(o,"The sign will be given when you are.","\u0422\u0435\u0431\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u043a, \u043a\u043e\u0433\u0434\u0430 \u0442\u044b \u0431\u0443\u0434\u0435\u0448\u044c \u0433\u043e\u0442\u043e\u0432."),Object(p.a)(o,"How do I know what it is?","\u041a\u0430\u043a \u044f \u0443\u0437\u043d\u0430\u044e \u044d\u0442\u043e\u0442 \u0437\u043d\u0430\u043a."),Object(p.a)(o,"I will give it to you.","\u042f \u043f\u043e\u0434\u0430\u043c \u0435\u0433\u043e."),Object(p.a)(o,"That's the same exact corridor with you again.","\u042d\u0442\u043e \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0439 \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u0430 \u0441 \u0442\u043e\u0431\u043e\u0439."),Object(p.a)(o,"You are ready for the next level.","\u0422\u044b \u0433\u043e\u0442\u043e\u0432 \u043a \u043d\u043e\u0432\u043e\u043c\u0443 \u0443\u0440\u043e\u0432\u043d\u044e."),Object(p.a)(o,"Hey man, seriously, how do I get out of here ?","\u041f\u0440\u0438\u0432\u0435\u0442 \u0441\u043d\u043e\u0432\u0430. \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c\u0441\u044f. \u0423\u0436\u0435 \u043d\u0430\u0434\u043e\u0435\u043b\u043e."),Object(p.a)(o,"You have not reached the end.","\u0422\u044b \u043d\u0435 \u043f\u043e\u0441\u0442\u0438\u0433 \u0434\u0437\u0435\u043d."),Object(p.a)(o,"We'll how do you reach it ?","\u0422\u044b-\u0442\u043e \u043a\u0430\u043a \u0432\u044b\u0445\u043e\u0434\u0438\u0448\u044c \u043d\u0430 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c?"),Object(p.a)(o,"I have my way.","\u0423 \u043c\u0435\u043d\u044f \u0441\u0432\u043e\u0439 \u043f\u0443\u0442\u044c."),Object(p.a)(o,"So how's your way btw ?","\u0422\u044b \u0432\u0441\u0435 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u043f\u0443\u0442\u0438?"),Object(p.a)(o,"It is like yourself.","\u041a\u0430\u043a \u0438 \u0442\u044b."),Object(p.a)(o,"And how long you've been on it ?","\u041a\u0430\u043a \u0434\u043e\u043b\u0433\u043e \u0442\u044b \u043d\u0430 \u043d\u0435\u043c?"),Object(p.a)(o,"These walls can hear us.","\u042d\u0442\u0438 \u0441\u0442\u0435\u043d\u044b \u043d\u0430\u0441 \u0441\u043b\u044b\u0448\u0430\u0442."),Object(p.a)(o,"I think you're weighing this corridor down.","\u041c\u043d\u0435 \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u0442\u044b \u0438\u0434\u0435\u0448\u044c \u0432 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043a \u044d\u0442\u043e\u043c\u0443 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u0430."),Object(p.a)(o,"The next level is open to you.","\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(p.a)(o,"Look bud, next level or not, nothing's changed at all !","\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f."),Object(p.a)(o,"Except the number of steps.","\u041c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0448\u0430\u0433\u043e\u0432."),Object(p.a)(o,"So this place counts steps ?","\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0448\u0430\u0433\u0438?"),Object(p.a)(o,"This is place is waiting.","\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0436\u0434\u0435\u0442."),Object(p.a)(o,"How long have you been here ?","\u041a\u0430\u043a \u0434\u0430\u0432\u043d\u043e \u0442\u044b \u0437\u0434\u0435\u0441\u044c?"),Object(p.a)(o,"How long is irrelevant. What matters is the journey.","\u0412\u0440\u0435\u043c\u044f \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u0435\u0442 \u043b\u0438\u0448\u044c \u043f\u0443\u0442\u044c."),Object(p.a)(o,"Then why aren't you on one?","\u041d\u043e \u0442\u044b \u0436\u0435 \u043d\u0435 \u0438\u0434\u0435\u0448\u044c."),Object(p.a)(o,"With you walking for both of us, I do not have to.","\u0417\u0430\u0442\u043e \u0442\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0448\u044c \u043c\u0438\u043c\u043e."),Object(p.a)(o,"Look, just make a new level, please.","\u0421\u0434\u0435\u043b\u0430\u0439 \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(p.a)(o,"You are ready. It is waiting for you.","\u0422\u044b \u0433\u043e\u0442\u043e\u0432 - \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0436\u0434\u0435\u0442 \u0442\u0435\u0431\u044f."),Object(p.a)(o,"Wait, you are this place! You control all its fragments.","\u0422\u044b \u0438 \u0435\u0441\u0442\u044c \u044d\u0442\u043e \u043c\u0435\u0441\u0442\u043e. \u0422\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0448\u044c \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u043c\u0438."),Object(p.a)(o,"You have almost reached the end.","\u0422\u044b \u043f\u043e\u0447\u0442\u0438 \u0434\u043e\u0448\u0435\u043b \u0434\u043e \u043a\u0440\u0430\u044f."),Object(p.a)(o,"Why do you do this ?","\u0417\u0430\u0447\u0435\u043c \u0442\u0435\u0431\u0435 \u044d\u0442\u043e?"),Object(p.a)(o,"It is my way to warp space. More movement. More fragments.","\u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431 \u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e. \u0411\u043e\u043b\u044c\u0448\u0435 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f. \u0411\u043e\u043b\u044c\u0448\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432."),Object(p.a)(o,"How many people have been through here ?","\u041a\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432 \u043f\u043e\u043f\u0430\u0434\u0430\u043b\u043e \u0441\u044e\u0434\u0430?"),Object(p.a)(o,"Many are still here.","\u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u0437 \u043d\u0438\u0445 \u0434\u043e \u0441\u0438\u0445 \u043f\u043e\u0440 \u0442\u0443\u0442."),Object(p.a)(o,"So where are they?","\u041f\u043e\u0447\u0435\u043c\u0443 \u044f \u0438\u0445 \u043d\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b?"),Object(p.a)(o,"Everyone has a different system of fragments.","\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u0432\u043e\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432."),Object(p.a)(o,"Will you let me out ?","\u0422\u044b \u0432\u044b\u043f\u0443\u0441\u0442\u0438\u0448\u044c \u043c\u0435\u043d\u044f?"),Object(p.a)(o,"All ways lead to the end.","\u0412\u0441\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0441\u0432\u0435\u0442\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u044b \u0442\u0435\u0431\u0435."),Object(p.a)(o,"I wanna meet the others.","\u042f \u0445\u043e\u0447\u0443 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0445."),Object(p.a)(o,"The next level is waiting for you.","\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(p.a)(o,"Everything's looped here.","\u042f \u0432\u0438\u0436\u0443 \u0437\u0430\u0440\u0435\u0432\u043e?"),Object(p.a)(o,"Everything is looped with small differences.","\u042d\u0442\u043e \u0437\u0430\u0440\u0435\u0432\u043e \u043f\u0440\u043e\u0441\u0432\u0435\u0442\u043b\u0435\u043d\u0438\u044f. \u0422\u044b \u0431\u043b\u0438\u0437\u043e\u043a"),Object(p.a)(o,"How many levels even are there ?","\u0412\u0441\u0435 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f."),Object(p.a)(o,"It all depends on you.","\u0412\u0441\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0441\u044f \u0441 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0440\u0430\u0437\u043d\u0438\u0446\u0435\u0439."),Object(p.a)(o,"That's it, I'm done.","\u0412\u0441\u0435 \u043c\u043e\u0439 \u043f\u0443\u0442\u044c \u043e\u043a\u043e\u043d\u0447\u0435\u043d."),Object(p.a)(o,"Have you reached your journey's end ?","\u0422\u044b \u043e\u0442\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0448\u044c\u0441\u044f \u0438\u0434\u0442\u0438?"),Object(p.a)(o,"Yes, you mad bastard! I have !","\u0414\u0430, \u0442\u044b \u0431\u0435\u0437\u0443\u043c\u0435\u043d."),Object(p.a)(o,"Then I am giving you the sign.","\u042f \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u044e \u0442\u0435\u0431\u044f."),Object(p.a)(o,"open dialog","\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),Object(p.a)(o,"close dialog","\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),Object(p.a)(o,"To be continued","\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442"),Object(p.a)(o,"chapter","\u0433\u043b\u0430\u0432\u0430"),Object(p.a)(o,"open","\u043f\u0443\u0441\u043a"),Object(p.a)(o,"Author: ","\u0410\u0432\u0442\u043e\u0440: "),Object(p.a)(o,"link","\u0441\u0441\u044b\u043b\u043a\u0430"),o)},b=function(e){return f.en&&f.en[e]||e},v=n(6),g=Object(s.b)((function(e){return{userReplicies:e.app.ui.userReplicies}}))((function(e){return Object(v.jsx)("div",{className:"userReplicies",children:e.userReplicies.map((function(t){return Object(v.jsx)("button",{onClick:function(){m(e.dispatch).clickPhrase(t)},children:b(t.q)},Math.floor(1e5*Math.random()))}))})})),y=Object(s.b)((function(e){return{botAnswers:e.app.ui.botAnswers}}))((function(e){return Object(v.jsx)("div",{className:"botAnswers",children:e.botAnswers.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"q",children:b(e.q)}),Object(v.jsx)("div",{className:"a",children:b(e.a)})]},Math.floor(1e5*Math.random()))}))})}));var w={dispatch:null},j=Object(s.b)((function(e){return{isButtonDialog:e.app.ui.isButtonDialog,isDialog:e.app.ui.isDialog,isShowClickFullScreen:e.app.ui.isShowButtFullScreen,isShowInfo:e.app.ui.isShowInfo,isShowFinalMessage:e.app.ui.isShowFinalMessage}}))((function(e){return!w.dispatch&&(w.dispatch=e.dispatch),Object(v.jsxs)("div",{className:"ui",children:[e.isButtonDialog&&Object(v.jsx)("button",{className:"butt-toggleDialog control",onClick:function(){m(e.dispatch).toggleDialog(!e.isDialog)},children:e.isDialog?b("close dialog"):b("open dialog")}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-left control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")},children:"\u25c4"}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-right control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")},children:"\u25ba"}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-front control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")},children:"\u25b2"}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-back control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")},children:"\u25bc"}),!e.isDialog&&e.isShowClickFullScreen&&Object(v.jsx)("button",{className:"butt-fullscreen control",onClick:function(){e.gameContext.emitter.emit("mouseDown")("butt-fullscreen"),h(e.dispatch).clickFullScreen()},children:"\u2752"}),!e.isDialog&&!e.isShowInfo&&Object(v.jsx)("button",{className:"butt-info control",onClick:function(){return d(e.dispatch).clickInfo(!0)},children:"i"}),e.isDialog&&Object(v.jsx)("div",{className:"dialog",children:Object(v.jsxs)("div",{className:"dialog-inner",children:[Object(v.jsx)(y,{}),Object(v.jsx)(g,{})]})}),e.isShowFinalMessage&&Object(v.jsx)("div",{className:"info",children:Object(v.jsx)("div",{className:"info-inner final-message",children:Object(v.jsx)("p",{children:b("To be continued")})})}),e.isShowInfo&&Object(v.jsx)("div",{className:"info",children:Object(v.jsxs)("div",{className:"info-inner",children:[Object(v.jsx)("button",{className:"control butt-infoClose",onClick:function(){return d(e.dispatch).clickInfo(!1)},children:"x"}),Object(v.jsxs)("p",{children:["1 ".concat(b("chapter"),": "),Object(v.jsx)("a",{href:"http://js.otrisovano.ru/factory/",target:"blank",children:b("link")})]}),Object(v.jsxs)("p",{children:["2 ".concat(b("chapter"),": "),Object(v.jsx)("a",{href:"http://js.otrisovano.ru/bridge/",target:"blank",children:b("link")})]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),b("Author: "),Object(v.jsx)("a",{href:"http://otrisovano.ru",target:"blank",children:b("link")})]}),Object(v.jsxs)("p",{children:[b("Github: "),Object(v.jsx)("a",{href:"https://github.com/fire888/levels/",target:"blank",children:b("link")})]})]})})]})})),O=n(7),_=n(4),S=n(13),N=n(21),k={iron:{mat:"MeshPhongMaterial",props:{color:16777215,emissive:13192,specular:16777215,shininess:60,bumpMap:"botMap",bumpScale:.1,envMap:"ironEnv",reflectivity:.5,map:"botMap",skinning:!0}},wall:{mat:"MeshPhongMaterial",props:{color:17510,emissive:16777215,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5,specular:2236962}},green:{mat:"MeshPhongMaterial",props:{color:17510,emissive:16777215,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}},road:{mat:"MeshPhongMaterial",props:{color:10556063,emissive:10556063,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}}},E=175.335,A="FRAME_UPDATE",x={"-2":{outer:{fogNear:-200,fogFar:500,color:1582461},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:8914344}},"-1":{start:{fogNear:0,fogFar:5,color:1582461},outer:{fogNear:20,fogFar:500,color:1582461},back:{fogNear:20,fogFar:500,color:1582461,backgroundImgKey:"skyBox"},firstRoomLight:{fogNear:-40,fogFar:150,color:9054},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:3019147}},0:{default:{fogNear:-40,fogFar:150,color:3950848}},1:{default:{fogNear:-40,fogFar:150,color:933458}},2:{default:{fogNear:0,fogFar:80,color:661347}},3:{default:{fogNear:0,fogFar:80,color:680768}},4:{default:{fogNear:0,fogFar:80,color:11272192}}},M={canId:"webgl-canvas",rendererCon:{antialias:!0},clearColor:x[-1].outer.color,backgroundColor:x[-1].outer.color,amb:{color:x[-1].outer.color,strength:.7}},C={speed:.8,speedRot:.02,speedDown:-.45,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startRot:[0,0,0],startPos:[100,-78,1e3],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e3,pos:[0,2,-.5]},frontObjPos:[0,0,-1],backObjPos:[0,0,1],lightDataOne:{color:16777215,strength:5e3,pos:[0,50,5]}},T={sceneEnvironment:{color:x[-1].start.color,fogNear:x[-1].start.fogNear,fogFar:x[-1].start.fogFar,backgroundImgKey:null},playerQuadrant:{oldDialogPlayerQuadrant:[0,0,-50],oldQuadrant:[0,0,0],newQuadrant:[0,0,0],counter:null},level:{isStartCorridorShow:!0},ui:{isShowButtFullScreen:!0,isShowInfo:!1,isShowFinalMessage:!1,botAnswers:[],userReplicies:[],history:[],isDialog:!1,isButtonDialog:!1},botIndex:-1,phraseIndex:0,phrasesData:[{phrases:[{q:"Hello there!",a:"Good day, carbon-based life form.",event:"nextReply",levelEvent:null},{q:"What is this place ?",a:"This is an entrance to the entropic hyper-maze.",event:"nextReply",levelEvent:null},{q:"And what happens if I enter it ?",a:"This place is waiting.",event:"close",levelEvent:null}]},{phrases:[{q:"Say, where do these corridors lead ?",a:"They will lead you to the end.",event:"nextReply",levelEvent:null},{q:"Ooook, I'm heading in then.",a:"We will meet again.",event:"close",levelEvent:null}]},{phrases:[{q:"What do you do here ?",a:"Collecting the energy of the night.",event:"nextReply",levelEvent:null},{q:"Can you tell me which way is out of here ?",a:"It is about the journey, not the destination",event:"close",levelEvent:null}]},{phrases:[{q:"Hey, it looks like I'm walking in circles.",a:"You have walked long enough.",event:"nextReply",levelEvent:null},{q:"Meaning?",a:"The way to the next level is open to you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:'Hi, I heard I can find the "end" around here?',a:"Yes, I told you this is where the corridors lead.",event:"nextReply",levelEvent:null},{q:"Man, you all look the same.",a:"We will meet again.",event:"close",levelEvent:null}]},{phrases:[{q:"Soooo, is that you again ?",a:"Yes. All of me are myself.",event:"nextReply",levelEvent:null},{q:"Yeah, just like those corridors.",a:"The meaning of everything is in being whole.",event:"close",levelEvent:null}]},{phrases:[{q:"Am I there yet?",a:"The sign will be given when you are.",event:"nextReply",levelEvent:null},{q:"How do I know what it is?",a:"I will give it to you.",event:"close",levelEvent:null}]},{phrases:[{q:"That's the same exact corridor with you again.",a:"You are ready for the next level.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Hey man, seriously, how do I get out of here ?",a:"You have not reached the end.",event:"nextReply",levelEvent:null},{q:"We'll how do you reach it ?",a:"I have my way.",event:"close",levelEvent:null}]},{phrases:[{q:"So how's your way btw ?",a:"It is like yourself.",event:"nextReply",levelEvent:null},{q:"And how long you've been on it ?",a:"These walls can hear us.",event:"close",levelEvent:null}]},{phrases:[{q:"I think you're weighing this corridor down.",a:"The next level is open to you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Look bud, next level or not, nothing's changed at all !",a:"Except the number of steps.",event:"nextReply",levelEvent:null},{q:"So this place counts steps ?",a:"This is place is waiting.",event:"close",levelEvent:null}]},{phrases:[{q:"How long have you been here ?",a:"How long is irrelevant. What matters is the journey.",event:"nextReply",levelEvent:null},{q:"Then why aren't you on one?",a:"With you walking for both of us, I do not have to.",event:"close",levelEvent:null}]},{phrases:[{q:"Look, just make a new level, please.",a:"You are ready. It is waiting for you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Wait, you are this place! You control all its fragments.",a:"You have almost reached the end.",event:"nextReply",levelEvent:null},{q:"Why do you do this ?",a:"It is my way to warp space. More movement. More fragments.",event:"close",levelEvent:null}]},{phrases:[{q:"How many people have been through here ?",a:"Many are still here.",event:"nextReply",levelEvent:null},{q:"So where are they?",a:"Everyone has a different system of fragments.",event:"close",levelEvent:null}]},{phrases:[{q:"Will you let me out ?",a:"All ways lead to the end.",event:"nextReply",levelEvent:null},{q:"I wanna meet the others.",a:"The next level is waiting for you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Everything's looped here.",a:"Everything is looped with small differences.",event:"nextReply",levelEvent:null},{q:"How many levels even are there ?",a:"It all depends on you.",event:"close",levelEvent:null}]},{phrases:[{q:"That's it, I'm done.",a:"Have you reached your journey's end ?",event:"nextReply",levelEvent:null},{q:"Yes, you mad bastard! I have !",a:"Then I am giving you the sign.",event:"close",levelEvent:"addWell"}]}]},I=Object(S.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;if("CLICK_FULL_SCREEN"===t.type)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isShowButtFullScreen:!1})});if("EXIT_FULL_SCREEN"===t.type)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isShowButtFullScreen:!0})});if("INFO_TOGGLE"===t.type)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isShowFinalMessage:!1,isShowInfo:t.mode})});if("TOGGLE_FINAL_MESSAGE"===t.type)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isShowFinalMessage:t.mode,isShowInfo:!1})});if("CHANGE_ENVIRONMENT"===t.type){var n=t.newQuadrant,o=t.environmentMode;if(!x[n[1]])return e;var a=x[n[1]][o],r=a.fogNear,i=a.fogFar,s=a.color,l=a.backgroundImgKey;return Object(_.a)(Object(_.a)({},e),{},{sceneEnvironment:{fogNear:r,fogFar:i,color:s,backgroundImgKey:l}})}if("CHANGE_QUADRANT"===t.type)return Object(_.a)(Object(_.a)({},e),{},{playerQuadrant:Object(_.a)(Object(_.a)({},e.playerQuadrant),t)});if("DESTROY_START_CORRIDOR"===t.type)return Object(_.a)(Object(_.a)({},e),{},{level:Object(_.a)(Object(_.a)({},e.level),{},{isStartCorridorShow:!1})});if("CLICK_PHRASE"===t.type)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{botAnswers:[].concat(Object(O.a)(e.ui.botAnswers),[t.phrase]),userReplicies:[]})});if("PHRASE_EVENT"===t.type){var c=t.phrase.event;if("nextReply"===c){var u=[e.phrasesData[e.botIndex].phrases[e.phraseIndex+1]];return Object(_.a)(Object(_.a)({},e),{},{phraseIndex:e.phraseIndex+1,ui:Object(_.a)(Object(_.a)({},e.ui),{},{userReplicies:u})})}if("close"===c)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{userReplicies:[],isButtonDialog:!0}),playerQuadrant:Object(_.a)(Object(_.a)({},e.playerQuadrant),{},{oldDialogPlayerQuadrant:Object(O.a)(e.playerQuadrant.newQuadrant)})})}if("TOGGLE_DIALOG"===t.type){var h=!1,d=e.playerQuadrant,m=d.oldDialogPlayerQuadrant,p=d.newQuadrant;if(m[0]===p[0]&&m[1]===p[1]&&m[2]===p[2]||(h=!0),!h)return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isDialog:t.isDialog,isButtonDialog:!0})});var f=0,b=e.botIndex+1,v=!1,g=e.phrasesData[b]?[e.phrasesData[b].phrases[f]]:[];return Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{userReplicies:g,botAnswers:[],isDialog:t.isDialog,isButtonDialog:v}),isCanChangeBotIndex:!1,botIndex:b,phraseIndex:f})}return"TOGGLE_BUTTON"===t.type?Object(_.a)(Object(_.a)({},e),{},{ui:Object(_.a)(Object(_.a)({},e.ui),{},{isDialog:!1,isButtonDialog:t.isButtonDialog})}):e}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||S.c,D=Object(S.d)(I,R(Object(S.a)(N.a))),L=n(1),F=n(2),Q=n(0),Y=n(22),G=n(23),P=function(){var e=null,t=null,n=null,o=null;return function(a,r){return new Promise((function(i){return function(a){return"obj"===a?e=e||new Y.a:"glb"===a||"gltf"===a?n=n||new G.a:"img"===a?t=t||new Q.TextureLoader:"cubeTextures"===a?o=o||new Q.CubeTextureLoader:void 0}(r).load(a,i)}))}},B=function(){function e(){Object(L.a)(this,e),this.resources={},this._load=P()}return Object(F.a)(e,[{key:"loadAssets",value:function(e){var t=this;return new Promise((function(n){var o=t._load,a=t.resources;function s(e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(r.a.mark((function t(i){var l,c,u,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e[i]){t.next=5;break}return l=e[i],c=l.key,u=l.path,h=l.type,t.next=4,o(u,h);case 4:a[c]=t.sent;case 5:if(++i,e[i]){t.next=10;break}n(a),t.next=12;break;case 10:return t.next=12,s(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s(0)}))}}]),e}(),U=function(){function e(){Object(L.a)(this,e),this._storage={}}return Object(F.a)(e,[{key:"emit",value:function(e){var t=this;return function(n){return q(t._storage)(e).forEach((function(e){return e(n)}))}}},{key:"subscribe",value:function(e){var t=this;return function(n){return q(t._storage)(e).push(n),function(){return t._storage[e]=t._storage[e].filter((function(e){return e!==n}))}}}},{key:"showAll",value:function(){var e={};for(var t in this._storage)e[t]=this._storage[t].length;console.log(e)}}]),e}(),q=function(e){return function(t){return e[t]=e[t]||[]}},K=(n(5),n(16)),H=n.n(K),W=(n(38),document.querySelector(".progress")),V=-100,z=!0;!function e(){z&&setTimeout((function(){0===++V&&(V-=100),W.style.marginLeft=V+"%",e()}),30)}();var X=function(){function e(t){Object(L.a)(this,e),this._gameContext=t,H.a.render(Object(v.jsx)(s.a,{store:t.store,children:Object(v.jsx)(j,{gameContext:t})}),document.getElementById("root"))}return Object(F.a)(e,[{key:"showStartButton",value:function(e){var t=this,n=document.querySelector(".startbuttons-wrapper"),o=document.querySelector(".progress-wrapper");z=!1,n.style.display="flex",n.addEventListener("click",(function(n){e(),function(e){t._gameContext.emitter.emit("setLanguage")(e.target.dataset.lang),document.querySelector(".start-screen").style.display="none"}(n)})),o.style.display="none"}}]),e}(),Z=n(42),J=n(17),$=n(25),ee=n(24),te=n(15),ne={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\n\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = (texel * texel * texel) * vec4(3.);\n\n}"},oe=function(){function e(t){var n=this;Object(L.a)(this,e);var o=t.store,a=t.assets,r=t.emitter,i=M.canId,s=M.rendererCon,l=M.clearColor,c=M.amb;s.canvas=document.getElementById(i);var u=new Q.WebGLRenderer(s);u.setClearColor(l),u.setPixelRatio(window.devicePixelRatio),u.setSize(window.innerWidth,window.innerHeight),this._scene=new Q.Scene;var h,d=o.getState().app.sceneEnvironment,m=d.color,p=d.fogNear,f=d.fogFar,b=d.backgroundImgKey;this._scene.background=a[b]||null,this._scene.fog=new Q.Fog(m,p,f);var v=c.color,g=c.strength;h=new Q.AmbientLight(v,g),this._scene.add(h),this._camera=null,this._composer=new $.a(u);var y=function(){var e={width:window.innerWidth,height:window.innerHeight};u.setSize(e.width,e.height),n._composer.setSize(e.width,e.height),n._camera&&(n._camera.aspect=e.width/e.height,n._camera.updateProjectionMatrix())};window.addEventListener("resize",y),y(),this.addToScene=this._scene.add.bind(this._scene);r.subscribe(A)((function(){return n._camera&&n._composer.render(n._scene,n._camera)}));var w=this._scene.fog.near,j=this._scene.fog.far,O=this._scene.fog.color,_=o.getState().app.sceneEnvironment.backgroundImgKey;o.subscribe((function(){var e=o.getState().app.sceneEnvironment,t=e.fogNear,r=e.fogFar,i=e.color,s=e.backgroundImgKey;if(t!==w||r!==j||i!==O){var l={color:n._scene.fog.color,near:n._scene.fog.near,far:n._scene.fog.far},c={color:new Q.Color(i),near:t,far:r};w=t,j=r,O=i,new J.a(l).to(c,3e3).onUpdate((function(){n._scene.fog.color=l.color,n._scene.fog.near=l.near,n._scene.fog.far=l.far,h.color=l.color,u.setClearColor(l.color)})).start()}s!==_&&(_=s,n._scene.background=a[s]||null)}))}return Object(F.a)(e,[{key:"setCamera",value:function(e){this._camera=e,this._composer.addPass(new ee.a(this._scene,this._camera)),this._composer.addPass(new te.a(ne))}}]),e}(),ae=function(){function e(t){Object(L.a)(this,e);var n=t.emitter,o={up:!1,down:!1,left:!1,right:!1},a={up:!0,down:!0,left:!0,right:!0};this.keysEnabled=a,this.keys=o;var r=function(e,t){switch(e){case 38:case 87:a.up&&(o.up=t);break;case 40:case 83:a.down&&(o.down=t);break;case 37:case 65:o.left=t;break;case 39:case 68:o.right=t}n.emit("keyEvent")(o)};document.addEventListener("keydown",(function(e){return r(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){return r(e.keyCode,!1)})),n.subscribe("mouseDown")((function(e){"butt-left"===e&&r(37,!0),"butt-right"===e&&r(39,!0),"butt-front"===e&&r(38,!0),"butt-back"===e&&r(40,!0)})),n.subscribe("mouseUp")((function(e){"butt-left"===e&&r(37,!1),"butt-right"===e&&r(39,!1),"butt-front"===e&&r(38,!1),"butt-back"===e&&r(40,!1)}))}return Object(F.a)(e,[{key:"toggleEnableKeys",value:function(e,t){this.keysEnabled[e]=t,!t&&(this.keys[e]=!1)}}]),e}(),re=[],ie=function(e){return re.push(e)},se=function(e){return re=re.filter((function(t){return t!==e}))},le=[],ce=function(e,t,n){var o=n,a=e,r=t,i=new Q.Vector3,s=new Q.Vector3,l=new Q.Raycaster(i,s);return{check:function(){r.getWorldPosition(s),i.copy(a.position),s.sub(i);var e=l.intersectObjects(le);return e[0]&&e[0].distance<o}}},ue=function(e){return le.push(e)},he=function(e){return le=le.filter((function(t){return e!==t}))},de=function(){function e(t){var n=this;Object(L.a)(this,e);var o=t.emitter,a=t.studio,r=t.pr,i=C.startPos,s=C.startRot,l=C.cameraData,c=C.frontObjPos,h=C.backObjPos,d=C.lightDataOne,m=C.speed,p=C.offsetFromFloor,f=C.offsetFromFloorFactor,b=C.speedDown,v=C.offsetWallCollision,g=C.speedRot;this._camera=null;var y={},w=!1;this._isBlocked=!0,this._isCanMove={up:!0,down:!0},this._mainObj=new Q.Object3D,this._mainObj.position.fromArray(i),this._mainObj.rotation.fromArray(s);var j=new Q.Object3D;j.position.fromArray(c),this._mainObj.add(j),this.frontObj=j;var O=new Q.Object3D;O.position.fromArray(h),this._mainObj.add(O),this.backObj=O;var _=l.fov,S=l.ratio,N=l.near,k=l.far,E=l.pos;this._camera=new Q.PerspectiveCamera(_,S,N,k),this._camera.position.fromArray(E),this._mainObj.add(this._camera);var x=d.color,M=d.strenth,T=d.pos,I=new Q.PointLight(x,M);I.position.fromArray(T),this._mainObj.add(I),this._checkFloors=function(e,t,n,o){var a=e,r=t,i=n,s=o,l=new Q.Vector3,c=new Q.Vector3(0,-1,0),u=!1,h=new Q.Raycaster(l,c);return{check:function(e){if(!u){l.copy(a.position);var t=h.intersectObjects(re);t&&t[0]&&t[0].distance>r+i?a.position.y+=s*e.count:!t||t[0]?a.position.y=t[0].point.y+r:a.position.y+=s*e.count}},toggleDisable:function(e){u=e}}}(this._mainObj,p,f,b);var R=ce(this._mainObj,j,v),D=ce(this._mainObj,O,v),F=this._mainObj.position.y,Y=0,G=!1;o.subscribe("keyEvent")((function(e){return y=e})),o.subscribe(A)((function(e){if(!w&&!n._isBlocked&&(n._checkFloors.check(e),y)){if(y.up){if(R.check())return;if(!n._isCanMove.up)return;n._mainObj.translateZ(-m*e.count),o.emit("playerMove")({pos:n._mainObj.position,dir:"up"})}if(y.down){if(D.check())return;if(!n._isCanMove.down)return;n._mainObj.translateZ(m*e.count),o.emit("playerMove")({pos:n._mainObj.position,dir:"down"})}y.left&&(n._mainObj.rotation.y+=g*e.count),y.right&&(n._mainObj.rotation.y-=g*e.count),F>n._mainObj.position.y?++Y:Y=0,F=n._mainObj.position.y,Y>800&&!G&&(G=!0,setTimeout((function(){u(r.dispatch).startFinalFog(),setTimeout((function(){var e;(e=r.dispatch,{toggleFinalMessage:function(t){return e({type:"TOGGLE_FINAL_MESSAGE",mode:t})}}).toggleFinalMessage(!0)}),6e3)}),1e4))}})),o.subscribe("toggleDialog")((function(e){return w=e.isOpen})),a.setCamera(this._camera),a.addToScene(this._mainObj)}return Object(F.a)(e,[{key:"toggleBlocked",value:function(e){this._isBlocked=e}},{key:"toggleCanMove",value:function(e,t){this._isCanMove[e]=t}},{key:"getObj",value:function(){return this._mainObj}},{key:"getCamera",value:function(){return this._camera}},{key:"setToPos",value:function(e,t,n){this._mainObj.position.set(e,t,n)}}]),e}(),me=function(e){for(var t in e)e[t].wrapS&&(e[t].wrapS=e[t].wrapT=Q.RepeatWrapping);var n=["bumpMap","envMap","map","normalMap","lightMap","aoMap"],o={},a=function(t){o[t]=new Q[k[t].mat](Object(_.a)({},k[t].props)),n.map((function(n){return k[t].props[n]&&(o[t][n]=e[k[t].props[n]])}))};for(var r in k)a(r);return o},pe=["room_02","room_03","room_04","room_05"],fe=["outer_walls","outer_floor","outer_road"],be=function(e,t){var n={},o={},a={};return e["level-rooms"].traverse((function(e){if(e.name.includes("room_")){var r=new Q.Mesh(e.geometry,t.wall);o[e.name]=r,r.name=e.name,n[e.name]=r}if(e.name.includes("collision_")){var i=new Q.Mesh(e.geometry);a[e.name]=i,i.name=e.name,n[e.name]=i}if(e.name.includes("outer_walls")){var s=new Q.Mesh(e.geometry,t.wall);s.name=e.name,n[e.name]=s}if(e.name.includes("outer_road")){var l=new Q.Mesh(e.geometry,t.green);l.name=e.name,n[e.name]=l}if(e.name.includes("outer_floor")){var c=new Q.Mesh(e.geometry,t.road);c.name=e.name,n[e.name]=c}})),{rooms:o,allMeshes:n,collisionsBotsRooms:a}},ve=n.p+"static/media/level-rooms.5251ade2.obj",ge=n.p+"static/media/floor_outer_map.35e50f6e.jpg",ye=n.p+"static/media/px.2be78f43.jpg",we=n.p+"static/media/nx.b2401269.jpg",je=n.p+"static/media/py.659ebc34.jpg",Oe=n.p+"static/media/ny.462f1251.jpg",_e=n.p+"static/media/pz.8ea5ba14.jpg",Se=n.p+"static/media/nz.7f255b96.jpg",Ne={x:55,z:75},ke=function(){function e(){Object(L.a)(this,e),this.inScene=!1,this._state="go",this._targetAngle=null,this.container=new Q.Group,this._modelGroup=new Q.Group,this._modelGroup.position.x=Ne.x,this._modelGroup.position.z=Ne.z,this._modelGroup.rotation.y=Math.random()*(2*Math.PI),this.container.add(this._modelGroup),this._objFrom=new Q.Object3D,this._modelGroup.add(this._objFrom),this._objTo=new Q.Object3D,this._objTo.position.set(0,0,1),this._modelGroup.add(this._objTo);var t=function(e){var t={animations:e.animations,scene:e.scene.clone(!0)},n={};e.scene.traverse((function(e){e.isSkinnedMesh&&(n[e.name]=e)}));var o={},a={};for(var r in t.scene.traverse((function(e){e.isBone&&(o[e.name]=e),e.isSkinnedMesh&&(a[e.name]=e)})),n){for(var i=n[r].skeleton,s=a[r],l=[],c=0;c<i.bones.length;++c){var u=o[i.bones[c].name];l.push(u)}s.bind(new Q.Skeleton(l,i.boneInverses),s.matrixWorld)}return t}(e.botScene);this.model=t.scene.children[0],this.model.children[1].material=e.botMaterial,this._animations=e.botScene.animations,this._mixer=new Q.AnimationMixer(this.model.children[1]),this._walkAction=this._mixer.clipAction(this._animations[1]),this._walkAction.play(),this._walkAction.timeScale=.7,this._speakAction=this._mixer.clipAction(this._animations[0]),this._speakAction.timeScale=.4,this._modelGroup.add(this.model)}return Object(F.a)(e,[{key:"update",value:function(e){this._mixer.update(e.delta),this._componentCollision&&this._updateState()}},{key:"setCollisionMesh",value:function(e){this._collisionMeshes=[e],this.container.add(e),e.material.visible=!1,this._componentCollision=Ee(this._objFrom,this._objTo,7,this._collisionMeshes)}},{key:"removeCollisionMesh",value:function(){this._collisionMeshes=null,this._componentCollision=null}},{key:"prepareToSay",value:function(e){this._state="say",this._walkAction.stop(),this._speakAction.play(),this._modelGroup.lookAt(e.x,this.container.position.y,e.z)}},{key:"_updateState",value:function(){"go"===this._state&&(this._componentCollision.check()?this._startRotate():this._modelGroup.translateZ(.05));"rotate"===this._state&&(this._modelGroup.rotation.y+=this._targetAngle-this._modelGroup.rotation.y<0?-.01:.01,this._modelGroup.rotation.y%=2*Math.PI,Math.abs(this._modelGroup.rotation.y-this._targetAngle)<.5&&this._startGo())}},{key:"_startGo",value:function(){this._state="go",this._walkAction.play(),this._speakAction.stop()}},{key:"_startRotate",value:function(){this._state="rotate",this._targetAngle=(this._modelGroup.rotation.y+1.5+4*Math.random())%(2*Math.PI)}}]),e}();ke.botScene=null,ke.botMaterial=null;var Ee=function(e,t,n,o){var a=new Q.Vector3,r=new Q.Vector3;return{check:function(){return t.getWorldPosition(r),e.getWorldPosition(a),r.sub(a),!!new Q.Raycaster(a,r,0,20).intersectObject(o[0],!0)[0]}}},Ae=175.335,xe=n.p+"static/media/botMap.972e276e.png",Me=n.p+"static/media/botAnim2.47b6030d.glb",Ce=n.p+"static/media/posx.be2d83a2.jpg",Te=n.p+"static/media/negx.d016c8e7.jpg",Ie=n.p+"static/media/posy.01cfd221.jpg",Re=n.p+"static/media/negy.f01f8356.jpg",De=n.p+"static/media/posz.ef37b8e1.jpg",Le=n.p+"static/media/negz.f346a80a.jpg",Fe=[{oldState:"outer",newState:"corridor",oldQuadrant:[0,-2,4],newQuadrant:[0,-2,3],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"corridorLight",backgroundImg:!1}]},{oldState:"corridor",newState:"outer",oldQuadrant:[0,-2,3],newQuadrant:[0,-2,4],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"outer"}]},{oldState:"corridor",newState:"firstRoom",oldQuadrant:[0,-1,2],newQuadrant:[0,-1,1],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"firstRoomLight"}]},{oldState:"firstRoom",newState:"corridor",oldQuadrant:[0,-1,1],newQuadrant:[0,-1,2],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"corridorLight"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:[0,-1,"ANY_MINUS_ONE"],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_MINUS_ONE",-1,0],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_PLUS_ONE",-1,0],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_PLUS_ONE","ANY"],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"default"},{emitKey:"CHANGE_QUADRANT",counter:function(){return 0}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_MINUS_ONE","ANY"],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"default"},{emitKey:"CHANGE_QUADRANT",counter:function(){return 100}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_MINUS_ONE"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_MINUS_ONE","ANY","ANY"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_PLUS_ONE","ANY","ANY"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_PLUS_ONE"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]}],Qe="outer",Ye=function(e,t){for(var n=0;n<Fe.length;++n){var o=Ge(Object(O.a)(e),Object(O.a)(t),Object(_.a)(Object(_.a)({},Fe[n]),{},{oldQuadrant:Object(O.a)(Fe[n].oldQuadrant),newQuadrant:Object(O.a)(Fe[n].newQuadrant)}));if(o)return o}return{levelState:Qe}},Ge=function(e,t,n){var o=n.oldState,a=n.newState,r=n.oldQuadrant,i=n.newQuadrant,s=n.emitData;if(Qe===o&&("ANY"===r[0]&&(r[0]=e[0]),"ANY"===r[1]&&(r[1]=e[1]),"ANY"===r[2]&&(r[2]=e[2]),"ANY"===i[0]&&(i[0]=t[0]),"ANY"===i[1]&&(i[1]=t[1]),"ANY"===i[2]&&(i[2]=t[2]),"ANY_PLUS_ONE"===i[0]&&(i[0]=e[0]+1),"ANY_PLUS_ONE"===i[1]&&(i[1]=e[1]+1),"ANY_PLUS_ONE"===i[2]&&(i[2]=e[2]+1),"ANY_MINUS_ONE"===i[0]&&(i[0]=e[0]-1),"ANY_MINUS_ONE"===i[1]&&(i[1]=e[1]-1),"ANY_MINUS_ONE"===i[2]&&(i[2]=e[2]-1),r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]))return Qe=a,s.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{levelState:Qe,oldQuadrant:Object(O.a)(r),newQuadrant:Object(O.a)(i)})}))},Pe=function(){var e=[];return{update:function(t){var n=t.x,o=t.y,a=t.z,r=[Math.floor(n/E),Math.floor(o/70),Math.floor(a/E)];if(r[0]!==e[0]||r[1]!==e[1]||r[2]!==e[2]){var i={isChanged:!0,currentQuadrant:r,oldQuadrant:e};return e=[].concat(r),i}return{isChanged:!1}}}},Be=[{key:"emitter",constr:U,initStateKey:"pageLoaded"},{key:"ui",constr:X,initStateKey:"pageLoaded"},{key:"deviceResizer",constr:function e(t){Object(L.a)(this,e);var n=t.emitter,o=t.appWrapper,a=t.pr;n.subscribe("mouseDown")((function(e){"butt-fullscreen"===e&&r()}));var r=function(){o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen()},i=function(e){o.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px",o.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",document.fullscreenElement||a&&h(a.dispatch).exitFullScreen()};window.addEventListener("resize",i),i()},initStateKey:"pageLoaded"},{key:"loaderAssets",constr:B,initStateKey:"pageLoaded"},{key:"frameUpdater",constr:function e(t){Object(L.a)(this,e);var n=t.emitter.emit(A),o={time:0,delta:0,count:0,oldTime:0},a=Z.a((function(){return o}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0===e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){return n(e),e}),(function(e){return e.oldTime=e.time,e}),(function(e){return o=e}));!function e(){requestAnimationFrame(e),a(o)}()},initStateKey:"beforeStartPlay"},{key:"tweenUpdater",constr:function e(t){Object(L.a)(this,e),t.emitter.subscribe(A)((function(){return J.b()}))},initStateKey:"beforeStartPlay"},{key:"studio",constr:oe,initStateKey:"beforeStartPlay"},{key:"keyBoard",constr:ae,initStateKey:"beforeStartPlay"},{key:"player",constr:de,initStateKey:"beforeStartPlay"},{key:"materialsLib",constr:function e(t){Object(L.a)(this,e);var n=t.assets;t.materials=me(n)},initStateKey:"beforeStartPlay"},{key:"level",constr:function e(t){Object(L.a)(this,e);var n=t.emitter,o=t.studio,a=t.store,r=t.assets,i=t.materials,s=be(r,i),l=s.rooms,c=s.allMeshes,u=s.collisionsBotsRooms;this.collisionsBotsRooms=u;var h=new Q.Group;o.addToScene(h);var d={},m="normal",p=function e(t,o){var a=o||pe[Math.floor(Math.random()*pe.length)],r="r_".concat(t[0],"_").concat(t[1],"_").concat(t[2]),i=l[a].clone();i.position.set(t[0]*E,70*t[1],t[2]*E),ie(i),ue(i),h.add(i),d[r]=i,n.emit("levelChanged")({typeLevelChange:"createRoom",instanceKey:a,objKey:r,kv:t,isAddBot:"room_01"===a}),"room_06"===a&&e([t[0],t[1]+1,t[2]],"room_dummy")},f=function e(t){var o="r_".concat(t[0],"_").concat(t[1],"_").concat(t[2]);if(d[o]){var a=d[o].name;h.remove(d[o]),se(d[o]),he(d[o]),delete d[o],n.emit("levelChanged")({typeLevelChange:"destroyRoom",instanceKey:a,objKey:o,kv:t,isRemoveBot:"room_01"===a}),"room_dummy"===a&&e([t[0],t[1]-1,t[2]]),"room_06"===a&&e([t[0],t[1]+1,t[2]])}};p([0,-1,0],"room_02"),p([0,-1,-1],"room_02"),p([-1,-1,0],"room_02"),p([1,-1,0],"room_02");for(var b={},v=0;v<fe.length;++v){var g=c[fe[v]].clone();ie(g),ue(g),h.add(g),g.position.set(0,-70,0),b[fe[v]]=g}var y=0,w=!1,j=a.getState(),_=j.app.playerQuadrant.oldQuadrant,S=j.app.playerQuadrant.newQuadrant,N=j.app.level.isStartCorridorShow;a.subscribe((function(){var e=a.getState();if(N&&N!==e.app.level.isStartCorridorShow)for(var t in N=!1,b)se(b[t]),he(b[t]),h.remove(b[t]);var o=e.app.playerQuadrant,r=o.type,i=o.oldQuadrant,s=o.newQuadrant,l=o.counter;if("CHANGE_QUADRANT"===r&&(_[0]!==i[0]||_[1]!==i[1]||_[2]!==i[2]||S[0]!==s[0]||S[1]!==s[1]||S[2]!==s[2])){_=Object(O.a)(i),S=Object(O.a)(s);var c=pe[Math.floor(Math.random()*pe.length)];l&&(y=l(y),w?w=!1:(y<3?m="normal":y<100?"normal"===m&&(m="addBot"):m="addStairs","addBot"===m&&(c="room_01",w=!0),"addStairs"===m&&(c="room_06",w=!0),"addWell"===m&&(c="room_07"))),n.subscribe("changeLevelMode")((function(e){return m=e}));var u=i,v=s;v[0]<u[0]&&(console.log("----------- west"),f([u[0]+1,u[1],u[2]]),d["r_".concat(v[0]+1,"_").concat(v[1],"_").concat(v[2])]=d["r_".concat(u[0],"_").concat(u[1],"_").concat(u[2])],p([u[0]-2,u[1],u[2]],c),f([u[0],u[1],u[2]-1]),p([v[0],v[1],v[2]-1],c),f([u[0],u[1],u[2]+1]),p([v[0],v[1],v[2]+1],c)),v[0]>u[0]&&(console.log("----------- east"),f([u[0]-1,u[1],u[2]]),d["r_".concat(v[0]-1,"_").concat(v[1],"_").concat(v[2])]=d["r_".concat(u[0],"_").concat(u[1],"_").concat(u[2])],p([u[0]+2,u[1],u[2]],c),f([u[0],u[1],u[2]-1]),p([v[0],v[1],v[2]-1],c),f([u[0],u[1],u[2]+1]),p([v[0],v[1],v[2]+1],c)),v[2]<u[2]&&(console.log("-----------north"),f([u[0],u[1],u[2]+1]),d["r_".concat(v[0],"_").concat(v[1],"_").concat(v[2]+1)]=d["r_".concat(u[0],"_").concat(u[1],"_").concat(u[2])],p([u[0],u[1],u[2]-2],c),f([u[0]-1,u[1],u[2]]),p([v[0]-1,v[1],v[2]],c),f([u[0]+1,u[1],u[2]]),p([v[0]+1,v[1],v[2]],c)),v[2]>u[2]&&(console.log("-----------south"),f([u[0],u[1],u[2]-1]),d["r_".concat(v[0],"_").concat(v[1],"_").concat(v[2]-1)]=d["r_".concat(u[0],"_").concat(u[1],"_").concat(u[2])],p([u[0],u[1],u[2]+2],c),f([u[0]-1,u[1],u[2]]),p([v[0]-1,v[1],v[2]],c),f([u[0]+1,u[1],u[2]]),p([v[0]+1,v[1],v[2]],c)),(v[1]>u[1]||v[1]<u[1])&&(console.log("-----------top"),f([u[0],u[1],u[2]-1]),p([v[0],v[1],v[2]-1]),f([u[0],u[1],u[2]+1]),p([v[0],v[1],v[2]+1]),f([u[0]-1,u[1],u[2]]),p([v[0]-1,v[1],v[2]]),f([u[0]+1,u[1],u[2]]),p([v[0]+1,v[1],v[2]]))}}))},initStateKey:"beforeStartPlay",assetsToLoad:[{type:"obj",path:ve,key:"level-rooms"},{type:"cubeTextures",path:[ye,we,je,Oe,_e,Se],key:"skyBox"},{type:"img",path:ge,key:"mapFloorOuter",wrap:!0}]},{key:"bots",constr:function e(t){Object(L.a)(this,e);var n=t.assets,o=t.emitter,a=t.store,r=t.studio,i=t.materials;ke.botMaterial=i.iron,ke.botScene=n.bot;var s=new Q.Group;r.addToScene(s);var l=[];this.arrBots=l;var c=null;t.level&&t.level.collisionsBotsRooms&&(c=t.level.collisionsBotsRooms);for(var u=0;u<5;++u){var h=new ke;s.add(h.container),h.container.position.set(30*u-30,-92,750),h.inScene="aaa",c&&h.setCollisionMesh(c.collision_r_01.clone()),l.push(h)}o.subscribe(A)((function(e){for(var t=0;t<l.length;++t)l[t].inScene&&l[t].update(e)}));var d=a.getState().app.level.isStartCorridorShow;a.subscribe((function(){var e=a.getState();if(d&&d!==e.app.level.isStartCorridorShow){d=e.app.level.isStartCorridorShow;for(var t=0;t<l.length;++t)l[t].inScene=null,l[t].container.position.y=-1e4,l[t].removeCollisionMesh()}})),o.subscribe("levelChanged")((function(e){var t=e.objKey,n=e.kv,o=e.isAddBot,a=e.isRemoveBot;if(o)for(var r=0;r<l.length;++r)if(!l[r].inScene){l[r].inScene=t,l[r].container.position.set(n[0]*Ae,70*n[1]+14,n[2]*Ae),c&&l[r].setCollisionMesh(c.collision_r_01.clone());break}if(a)for(var i=0;i<l.length;++i)l[i].inScene===t&&(l[i].inScene=null,l[i].container.position.y=-1e4,l[i].removeCollisionMesh())}))},initStateKey:"beforeStartPlay",assetsToLoad:[{type:"glb",path:Me,key:"bot"},{type:"img",path:xe,key:"botMap"},{type:"cubeTextures",path:[Ce,Te,Ie,Re,De,Le],key:"ironEnv"}]},{key:"changerQuadrant",constr:function e(t){Object(L.a)(this,e);var n=t.pr,o=t.emitter,a=Pe();o.subscribe("playerMove")((function(e){var t=e.pos,o=a.update(t),r=o.currentQuadrant,i=o.oldQuadrant;if(o.isChanged){var s=Ye(i,r);s.length&&s.forEach((function(e){return n.dispatch(Object(_.a)(Object(_.a)({},e),{},{type:e.emitKey}))}))}}))},initStateKey:"beforeStartPlay"},{key:"playerInBot",constr:function e(t){Object(L.a)(this,e);var n=t.player,o=t.bots,a=t.emitter,r=t.keyBoard,i=t.pr,s=new Q.Vector3,l={up:n.frontObj,down:n.backObj},c=null,u=new Q.Vector3;a.subscribe(A)((function(){var e=null;if(r.keys.up&&(e="up"),r.keys.down&&(e="down"),e){for(var t=null,a=0;a<o.arrBots.length;++a)if(o.arrBots[a].inScene){o.arrBots[a]._modelGroup.getWorldPosition(s);var h=s.distanceTo(l[e].getWorldPosition(u));h<12&&(t=e),"say"===o.arrBots[a]._state&&h>30&&(o.arrBots[a]._startRotate(),m(i.dispatch).toggleButtonDialog(!1)),"say"!==o.arrBots[a]._state&&h<30&&(o.arrBots[a].prepareToSay(n._mainObj.position),m(i.dispatch).toggleButtonDialog(!0))}t?c!==t&&(c=e,n.toggleCanMove("up",!0),n.toggleCanMove("down",!0),n.toggleCanMove(e,!1)):c&&(n.toggleCanMove("up",!0),n.toggleCanMove("down",!0),c=null)}}))},initStateKey:"beforeStartPlay"}];function Ue(){return(Ue=Object(i.a)(r.a.mark((function e(){var t,n,o,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pr:w,store:D,appWrapper:document.querySelector(".app-wrapper")},qe("pageLoaded",Be,t),n=t.loaderAssets,o=t.emitter,c(o),a=Ke(Be),e.next=7,n.loadAssets(a);case 7:t.assets=e.sent,qe("beforeStartPlay",Be,t),i=t.player,t.ui.showStartButton((function(){u(w.dispatch).startPlay(),u(w.dispatch).showBackground(),i.toggleBlocked(!1)}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=function(e,t,n){for(var o=0;o<t.length;++o){var a=Be[o],r=a.key,i=a.constr;a.initStateKey===e&&(n[r]=new i(n))}},Ke=function(e){for(var t=[],n=0;n<e.length;++n)if(e[n].assetsToLoad&&e[n].assetsToLoad.length)for(var o=0;o<e[n].assetsToLoad.length;++o)t.push(e[n].assetsToLoad[o]);return t};window.addEventListener("load",(function(){return Ue.apply(this,arguments)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.9f2cfa2c.chunk.js.map