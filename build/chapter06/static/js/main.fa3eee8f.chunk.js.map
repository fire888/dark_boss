{"version":3,"sources":["_CORE/pipeLines/initPipeLine.js","chapter06/src/constants/constants_materials.js","chapter06/src/constants/constants_elements.js","_CORE/helpers/helper_LoadAssets.js","_CORE/helpers/helper_Emitter.js","_CORE/helpers/helper_FrameUpdater_02.js","_CORE/shaders/saturate3.js","chapter06/src/Entities/Studio.js","_CORE/helpers/helper_KeyBoard.js","_CORE/entities/createPlayer_v02.js","_CORE/helpers/helper_MaterialsLib.js","assets/chapter06/mapGround.jpg","assets/chapter06/mapShadowBody.jpg","assets/matIronBox/posx.jpg","assets/matIronBox/negx.jpg","assets/matIronBox/posy.jpg","assets/matIronBox/negy.jpg","assets/matIronBox/posz.jpg","assets/matIronBox/negz.jpg","_CORE/helpers/helper_CollisionsItems_v02.js","chapter06/src/systems/system_PlayerMoveOnLevel.js","chapter06/src/systems/system_PlayerNearLevelItems.js","chapter06/src/helpers/m4.js","chapter06/src/Entities/town/geometryRoom/geomDoor.js","chapter06/src/helpers/geomHelpers.js","chapter06/src/Entities/town/geometryRoom/geomWallPanno.js","chapter06/src/Entities/town/geometryRoom/geomWall.js","chapter06/src/Entities/town/geometryRoom/outerWall.js","chapter06/src/helpers/createBufferMesh.js","chapter06/src/Entities/town/town2TryToDivide.js","chapter06/src/Entities/town/town2shemeRooms.js","chapter06/src/Entities/town/geometryRoom/geometryFloor.js","chapter06/src/Entities/town/town2.js","chapter06/src/systems/system_worldReal.js","chapter06/src/Entities/statue.js","chapter06/src/Entities/town/help.js","chapter06/src/actions/catScenes.js","chapter06/src/actions/gameStateActions.js","_CORE/helpers/helper_translate.js","_CORE/ui/containersReact/Info.js","_CORE/constants/default_voc.js","_CORE/ui/containersReact/PlayerControls.js","_CORE/ui/containersReact/App.js","_CORE/ui/store/defaultUiData.js","_CORE/ui/UI.js","_CORE/ui/store/createStore.js","chapter06/src/constants/constants_replicies.js","chapter06/src/ui/UserReplicies.js","chapter06/src/ui/BotAnswers.js","chapter06/src/ui/CustomReactComponent.js","chapter06/src/constants/const_dialogs.js","chapter06/src/ui/store.js","assets/chapter06/concrete/broken_down_concrete2_Normal-dx.jpg","assets/chapter06/concrete/broken_down_concrete2_ao.jpg","assets/chapter06/concrete/broken_down_concrete2_albedo.jpg","assets/chapter06/body.obj","assets/chapter06/endWay.obj","chapter06/src/constants/constants_modules.js","assets/chapter06/flare.png","_CORE/helpers/helper_DeviceResizer.js","_CORE/helpers/helper_TweenUpdater.js","chapter06/src/ui/Ui.js","chapter06/src/actions/actions.js","chapter06/src/Entities/particles.js","chapter06/src/helpers/checkerPlayerRoom.js","chapter06/src/index.js"],"names":["gameModules","CONSTANTS","a","initModulesByState","root","loaderAssets","dataToLoad","getAssetsFromModulesData","loadAssets","assets","state","modulesData","i","length","key","constr","initStateKey","arr","assetsToLoad","j","push","COLOR1_1","COLOR2_1","COLOR3_1","MATERIALS_CONF","mat","props","color","lightMap","lightMapIntensity","normalMap","normalScale","THREE","envMap","reflectivity","shininess","specular","vertexColors","map","bumpMap","bumpScale","emissive","transparent","alphaMap","opacity","SIZE_QUADRANT","LOCATIONS_QUADRANTS","MATERIALS_CONFIG","CONFIG_FOR_INIT","isInCar","currentSceneConfig","isInVirtual","isPlayerInCar","carProps","keyMesh","keyCollide","position","rotation","bodyProps","lCol","lW","ENV_START","fogNear","fogFar","colorFog","colorBack","backgroundImgKey","ENV_NORMAL","ENV_RED","ENV_RED_NEAR","ENV_END","START_ENV_CONFIG","ENV_CONFIG_WORD_1","ENV_CONFIG_WORD_2","studioConfig","canId","rendererCon","antialias","amb","strength","sceneEnvironment","composerAddPass","playerConfig","speed","speedRot","speedDown","offsetFromFloor","offsetFromFloorFactor","offsetWallCollision","level","startPos","cameraData","fov","ratio","window","innerWidth","innerHeight","near","far","pos","frontObjPos","backObjPos","lightDataOne","dist","decay","createLoaders","objLoader","textureLoader","gltfLoader","cubeTextureLoader","soundLoader","path","type","Promise","resolve","OBJLoader","GLTFLoader","getterLoader","load","LoaderAssets","this","resources","_load","data","iterate","index","EventEmitter","_storage","id","getOrCreateArrFromObj","forEach","action","callback","filter","item","s","console","log","obj","FrameUpdater","_subscribers","time","delta","count","oldTime","update","R","Date","now","isNaN","dataFromChine","animate","requestAnimationFrame","fn","Saturate3","uniforms","value","vertexShader","fragmentShader","Studio","_root","emitter","canvas","document","getElementById","_renderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","_scene","background","fog","_lightA","add","_playerCamera","_controlsCamera","set","controls","OrbitControls","domElement","target","_composer","EffectComposer","_renderPass","RenderPass","addPass","_shader","ShaderPass","vec3","isPlayerView","saveFogData","subscribe","camera","getWorldPosition","x","y","z","resize","size","width","height","aspect","updateProjectionMatrix","addEventListener","addToScene","mesh","removeFromScene","remove","drawFrame","render","cam","conf","_changeFog","_changeBackground","startData","endData","TWEEN","to","onUpdate","onComplete","start","_backgroundImgKey","effect","KeyBoard","gameContext","keys","keysEnabled","keyUpdate","keyCode","isDown","emit","event","is","Player","studio","_camera","isBlocked","isFreeze","fromArray","userData","bottomObj","frontObj","backObj","strenth","light","setCamera","val","isFeeze","createMaterials","wrapS","wrapT","mapsKeys","materials","keyMap","helper_CollisionsItems_v02","_arrMeshes","_vecStart","_vecDir","_rayCaster","objFrom","objTo","sub","intersects","intersectObjects","distance","system_PlayerMoveOnLevel","player","collisionsWalls","toggleBlocked","isCanMove","toggleCanMove","dir","rotateY","checkCollisions","isCollision","collision","object","translateZ","checkAndMoveFront","checkAndMoveBack","_collisionsWalls","setItemToCollision","removeItemFromCollision","system_PlayerNearLevelItems","_itemsToCheck","distanceTo","nearPlayerIsNearPlayer","nearPlayerItemNear","nearPlayerItemKey","itemKey","nearPlayerItemFar","itemIn","MatType","Float32Array","subtractVectors","b","dst","normalize","v","Math","sqrt","cross","distanceSq","dx","dy","dz","inverse","m","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","d","m4","copy","src","lookAt","cameraPosition","up","zAxis","xAxis","yAxis","addVectors","scaleVector","compose","translation","quaternion","scale","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","slice","determinate","matrix","invSX","invSY","invSZ","trace","quatFromRotationMatrix","dot","identity","transpose","lengthSq","orthographic","left","right","bottom","top","frustum","perspective","fieldOfViewInRadians","f","tan","PI","rangeInv","tx","ty","tz","translate","xRotation","angleInRadians","c","cos","sin","yRotation","zRotation","xRotate","yRotate","zRotate","axisRotation","axis","n","oneMinusCosine","axisRotate","r00","r01","r02","r10","r11","r12","r20","r21","r22","scaling","multiply","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","transformVector","transformPoint","v0","v1","v2","transformDirection","transformNormal","mi","setDefaultType","Ctor","OldType","random","ran","end","createFace","v3","v4","createUv","fillColorFace","angleFromCoords","rad","atan","abs","createFaceWithSquare","color1","color2","offset","maxW","maxH","innerW","innerH","x1","y1","v1_i","v2_i","v3_i","v4_i","vArr","cArr","fillColorFaceWithSquare","uArr","c1","c2","rotateArrY","angle","vector","translateArr","scaleArr","sX","sY","sZ","inverseVertexOrder","copyV","n0_0","n0_1","n0_2","n1_0","n1_1","n1_2","n4_0","n4_1","n4_2","n5_0","n5_1","n5_2","white1","white6","h0","h1","ph0","ph1","frameW","uv6","createWall","u","p0","p1","colorRoom","lX","lZ","l","izSegmentsDoors","segment","createSegment","leftOffset","rightOffset","colorRoom6","p","panel","x0","lengthWall","rPanel","center","createPanel","leftOffsetVal","rightOffsetVal","floor","h2","step","currentX","dt","leftProfile","rightProfile","createDoorData","lineData","mode","copyC","mirrorV","copyB","black1","leftPr","rightPr","createOuterWall","dataWall","u2","material","createMeshFromBuffer","g","vertices","setAttribute","colors","uv","computeVertexNormals","materialToUse","S2","S1","getId","roomStart","walls","createTown2Scheme","resultArr","notDivide","newDataRooms","roomData","isXBig","isZBig","divideAxis","newRooms","newX","newZ","tryToDivideRoom","newArr","sData","eData","nData","max","min","doorData","DOOR_SIZE","doors","wData","z0","z1","outerDoors","keyMode","sort","wallSegments","floors","arrWallsPrepared","floorData","p2","p3","outerWallsData","JSON","parse","stringify","arrOuterWalls","roomsArr","y0","y00","createFloor","colorW","colorB","colorW6","offset1","offset0","nX","ceil","nZ","stepX","stepZ","gr1","createWorldReal","groundStart","floorMat1","repeat","bigRooms","e","door","wall","vertex","iron","meshBlack","iron2","meshCollision","visible","mCollision","toNormal","toNotWalls","getCoordsForFinalBox","dX","dZ","currentR","createTown2","endWayModel","centralItem","children","geometry","bodyRed","centralItemBounds","endItemObj","addWorld","addItemToPlayerCollision","removeWorld","removeItemFromPlayerCollision","setEndWayPos","generate","r","radius","angle2","getRandomCoordsOfRoom","room","minX","maxX","minZ","diffX","diffZ","pause","t","res","setTimeout","lookTogether","meshPlayer","meshStatue","obP","obS","qStatueSaved","clone","qStatueTarget","qPlayerSaved","rotateX","rotateOnWorldAxis","qPlayerTarget","vals","phase","slerpQuaternions","lookPlayerTo","pM","toM","P_END","worldReal","statue","toggleFreeze","changeEnvironment","hide","movePlayer","easing","Quadratic","Out","lookPlayerTop","vStartPos","vEndPos","lerpVectors","moveTop","countMax","COORD_END","changeGlobalEffect","toVal","points","setEffectStrength","logComplete","fOnComplete","ARR_STATES","timer","isCanHide","stopperListen","clearTimeout","coord","appear","name","pipelineToRed","then","toRed","posEnd","endPipeLine","dispatcher","dispatch","lang","createTranslater","vocab","word","connect","infoPanelData","className","onClick","title","topText","chapters","href","text","currentChapterIndex","bottomText","afterWords","aText","isInfo","isShowControls","isShowControlSound","isMute","useState","isShowFullScreenButt","changeShowFullScreenButt","useEffect","onMouseUp","onTouchEnd","onMouseDown","onTouchStart","CustomReactComponent","startDefaultStoreData","loader","querySelector","offsetLoader","isAnimateLoader","loaderTimeOut","style","marginLeft","UI","store","customStore","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","applyMiddleware","thunk","prepareStore","ReactDOM","startButtons","progressWrapper","hideStartScreen","dataset","display","TRANSLATE_WORLDS","CORE","UserReplicies","userReplicies","ui","phrase","q","BotAnswers","botAnswers","isButtonDialog","isShowFinalMessage","isShowPalleteDialog","isShowButtonDrawCar","valButtonDrawCar","isShowButtonToggleOpenLocationsList","isLocationListOpened","currentLocationOfList","locationsList","RESULT_DIALOGS","uiState","currentLocation","phrasesData","location01","isComplete","phraseIndex","phrases","location02","location03","GAME_MODULES","appWrapper","openAppFullScreenIfMobile","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fontSize","fullscreenElement","newLocation","keyPerson","split","nextPhraseIndex","location","actions","clickMachineDraw","clickMachineExit","changeTargetLocation","createCustomStore","frameUpdater","_worldReal","modelSrc","bodyModel","body","shadow","bodyShadow","arrAppear","attributes","array","arrHide","startIterate","TIME_SINGLE_ITERATION","tween","needsUpdate","stop","stopperTween","inverted","invert","toBlack","createStatue","MAX_SPD","MAX_SPD_HALF","alphaTest","flareSrc","depthTest","side","centerPoint","pointsData","resetSingleData","spdX","spdY","spdZ","spdAlpha","isMustStartHide","countIterations","setCenterPos","Object","assign","H","createParticles","checkerPlayerRoom","roomsData","roomsObj","arrFs","oldPlayerRoomId","currentPlayerRoomId","onChangeRoom","createCheckerRoom","gameState","on","showStartButton","startPipeline","pxjpg2","nxjpg2","pyjpg2","nyjpg2","pzjpg2","nzjpg2","mapTop","wrap","ironNormal","ironAlbedo","ironAO","bodySrc","endWaySrc","pipeLineForInit"],"mappings":"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","file":"static/js/main.fa3eee8f.chunk.js","sourcesContent":["export async function pipeLineForInit (gameModules, CONSTANTS) {\r\n    const root = { CONSTANTS }\r\n\r\n    initModulesByState('pageLoaded', gameModules, root)\r\n\r\n    const { loaderAssets } = root\r\n\r\n    const dataToLoad = getAssetsFromModulesData(gameModules)\r\n    root.assets = await loaderAssets.loadAssets(dataToLoad)\r\n\r\n    initModulesByState('beforeStartPlay', gameModules, root)\r\n}\r\n\r\n\r\nconst initModulesByState = (state, modulesData, root) => {\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        const {  key, constr, initStateKey } = modulesData[i]\r\n        initStateKey === state && (root[key] = new constr(root))\r\n    }\r\n}\r\n\r\nconst getAssetsFromModulesData = modulesData => {\r\n    const arr = []\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        if (modulesData[i].assetsToLoad && modulesData[i].assetsToLoad.length) {\r\n            for (let j = 0; j < modulesData[i].assetsToLoad.length; ++j) {\r\n                arr.push(modulesData[i].assetsToLoad[j])\r\n            }\r\n        }\r\n    }\r\n    return arr\r\n}","import * as THREE from \"three\";\r\n\r\n\r\n\r\nexport const COLOR1_1 = [1, 1, 1]\r\nexport const COLOR1_6 = [...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1, ...COLOR1_1]   \r\nexport const COLOR2_1 = [.5, 1, 0]\r\nexport const COLOR2_6 = [...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1, ...COLOR2_1]\r\nexport const COLOR3_1 = [1, 1, 0]\r\nexport const COLOR3_6 = [...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1, ...COLOR3_1]\r\n\r\n\r\n\r\nexport const MATERIALS_CONF = {\r\n    'iron': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xcccccc,\r\n            lightMap: 'ironAO',\r\n            lightMapIntensity: .35,\r\n            normalMap: 'ironNormal',\r\n            normalScale: new THREE.Vector2(.2, .2),\r\n            envMap: 'skyBox3',\r\n            reflectivity: .02,\r\n            shininess: 100,\r\n            specular: 0x020201,\r\n            vertexColors: true,\r\n        },\r\n    },\r\n    'iron2': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xff0000,\r\n            lightMap: 'ironAO',\r\n            lightMapIntensity: .35,\r\n            normalMap: 'ironNormal',\r\n            normalScale: new THREE.Vector2(.1, .1),\r\n            envMap: 'skyBox3',\r\n            reflectivity: .02,\r\n            shininess: 100,\r\n            specular: 0x020201,\r\n            vertexColors: true,\r\n        },\r\n    },\r\n    'floorMat1': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            map: 'mapTop',\r\n            bumpMap: 'mapTop',\r\n            bumpScale: 2,\r\n            reflectivity: 0.1,\r\n            shininess: .01,\r\n            specular: 0xffffff,\r\n            emissive: 0x555555,\r\n        },\r\n    },\r\n    'body': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            envMap: 'skyBox3',\r\n            reflectivity: 3,\r\n            specular: 0xffffff,\r\n        },\r\n    },\r\n    'bodyRed': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            color: 0xaa0000,\r\n            envMap: 'skyBox3',\r\n            emissive: 0x770000,\r\n            reflectivity: .01,\r\n            specular: 0xff0000,\r\n        },\r\n    },\r\n    'bodyShadow': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0x222230,\r\n            transparent: true,\r\n            alphaMap: 'bodyDropShadow',\r\n            opacity: 1,\r\n        },\r\n    },\r\n    'whiteBasic': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0xffffff,\r\n            //vertexColors: true,\r\n        }\r\n    },\r\n    'whiteBasic2': {\r\n        mat: 'MeshBasicMaterial',\r\n        props: {\r\n            color: 0xaaaaaa,\r\n        }\r\n    },\r\n}","import { MATERIALS_CONF } from \"./constants_materials\";\r\n\r\nexport const SIZE_QUADRANT = 5000\r\nexport const LOCATIONS_QUADRANTS = {\r\n    //'-4_-1': 'location01',\r\n    '3_-3': 'location01',\r\n    '-3_-3': 'location02',\r\n    '3_3': 'location03',\r\n    '100_1000': 'locationToFinish',\r\n}\r\n\r\n\r\n\r\n\r\nexport const MATERIALS_CONFIG = MATERIALS_CONF\r\n\r\n\r\n\r\nexport const CONFIG_FOR_INIT = {\r\n    isInCar: false,\r\n    currentSceneConfig: {\r\n        isInVirtual: false,\r\n        isPlayerInCar: false,\r\n        carProps: {\r\n            keyMesh: 'car',\r\n            keyCollide: 'carCollision',\r\n            position: [0, -50, -100],\r\n            rotation: [0, 2, 0],\r\n        },\r\n        bodyProps: {\r\n            keyMesh: 'body',\r\n            position: [-20, -60, -50],\r\n            rotation: [0, 2, 0],\r\n        },\r\n    },\r\n}\r\n\r\n\r\n/** geometry column */\r\nexport const lCol = [.3, 1, .3]\r\nexport const lW = .2\r\n\r\nexport const ENV_START =  { fogNear: 0, fogFar: 0, colorFog: 0x455861, colorBack: 0x455861, backgroundImgKey: null }\r\nexport const ENV_NORMAL =  { fogNear: 0, fogFar: 1000, colorFog: 0x455861, colorBack: 0x455861, backgroundImgKey: null }\r\nexport const ENV_RED = { fogNear: 0, fogFar: 1000, colorFog: 0x880000, colorBack: 0x010101, backgroundImgKey: null }\r\nexport const ENV_RED_NEAR = { fogNear: 0, fogFar: 40, colorFog: 0x880000, colorBack: 0x010101, backgroundImgKey: null }\r\nexport const ENV_END =  { fogNear: 0, fogFar: 0, colorFog: 0x010101, colorBack: 0x010101, backgroundImgKey: null }\r\n\r\n\r\nexport const START_ENV_CONFIG = { fogNear: 0, fogFar: 0, color: 0x4a0a46, backgroundImgKey: null }\r\n//export const ENV_CONFIG_WORD_1 = { fogNear: 100, fogFar: 500, color: 0x455861, backgroundImgKey: 'skyBox2' }\r\nexport const ENV_CONFIG_WORD_1 = { fogNear: 0, fogFar: 1000, color: 0x455861, backgroundImgKey: null }\r\nexport const ENV_CONFIG_WORD_2 = { fogNear: 1500, fogFar: 3000, color: 0x000000, backgroundImgKey: 'skyBox' }\r\n\r\n\r\nexport const studioConfig = {\r\n    canId: 'webgl-canvas',\r\n    rendererCon: {\r\n        antialias: true\r\n    },\r\n    amb: {\r\n        color: 0xffffff,\r\n        strength: 0.1,\r\n    },\r\n    sceneEnvironment: START_ENV_CONFIG,\r\n    composerAddPass: 'Saturate',\r\n    //composerAddPass: 'Saturate2',\r\n}\r\n\r\n\r\n\r\n\r\nexport const playerConfig = {\r\n    speed: 0.8,\r\n    speedRot: 0.02,\r\n    speedDown: -0.45,\r\n    offsetFromFloor: 10.0,\r\n    offsetFromFloorFactor: 0.5,\r\n    offsetWallCollision: 3.5,\r\n    level: -13,\r\n    //startPos: [0, -45, 400],\r\n    startPos: [0, -45, 150],\r\n    cameraData: {\r\n        fov: 90,\r\n        ratio: window.innerWidth / window.innerHeight,\r\n        near: 0.1,\r\n        far: 10000,\r\n        pos: [0, 2, -0.5],\r\n    },\r\n    frontObjPos: [0, 0, -1],\r\n    backObjPos: [0, 0, 1],\r\n   lightDataOne: {\r\n        // color: 0x888888,\r\n        // strength: 1,\r\n        // dist: 0,\r\n        // decay: .001,\r\n        // pos: [0, 10, 0],\r\n        color: 0x555555,\r\n        strength: 1,\r\n        dist: 0,\r\n        decay: .001,\r\n        pos: [0, 10, 0],\r\n    },\r\n}\r\n","import * as THREE from 'three'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { GLTFLoader } from  'three/examples/jsm/loaders/GLTFLoader'\r\n\r\n\r\n\r\n\r\nconst createLoaders = () => {\r\n    let objLoader = null,\r\n        textureLoader = null,\r\n        gltfLoader = null,\r\n        cubeTextureLoader = null,\r\n        soundLoader = null\r\n\r\n\r\n    const getterLoader = type => {\r\n        if (type === 'obj')\r\n            return objLoader = (objLoader || new OBJLoader())\r\n        if (type === 'glb' || type === 'gltf')\r\n            return gltfLoader = (gltfLoader || new GLTFLoader())\r\n        if (type === 'img')\r\n            return textureLoader = (textureLoader || new THREE.TextureLoader())\r\n        if (type === 'cubeTextures') {\r\n            return cubeTextureLoader = (cubeTextureLoader || new THREE.CubeTextureLoader())\r\n        }\r\n        if (type === 'soundMp3') {\r\n            return soundLoader = (soundLoader || new THREE.AudioLoader())\r\n        }\r\n\r\n    }\r\n\r\n    return (path, type) => new Promise(resolve => {\r\n        getterLoader(type).load(path, resolve)\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport class LoaderAssets {\r\n\r\n    constructor () {\r\n        this.resources = {}\r\n        this._load = createLoaders()\r\n    }\r\n\r\n    loadAssets (data) {\r\n        return new Promise(resolve => {\r\n\r\n            const load = this._load\r\n            const resources = this.resources\r\n\r\n            async function iterate (index) {\r\n                if (data[index]) {\r\n                    const { key, path, type } = data[index]\r\n                    resources[key] = await load(path, type)\r\n                }\r\n\r\n                ++index\r\n                !data[index]\r\n                    ? resolve(resources)\r\n                    : await iterate(index)\r\n            }\r\n\r\n           void iterate(0)\r\n        })\r\n    }\r\n}\r\n","export class EventEmitter {\r\n    constructor() {\r\n        this._storage = {}\r\n    }\r\n\r\n    emit (id) {\r\n        return data => getOrCreateArrFromObj(this._storage)(id).forEach(action => action(data))\r\n    }\r\n\r\n    subscribe (id) {\r\n        return callback => {\r\n            getOrCreateArrFromObj(this._storage)(id).push(callback)\r\n            return () => this._storage[id] = this._storage[id].filter(item => item !== callback)\r\n        }\r\n    }\r\n\r\n    showAll () {\r\n        const s = {}\r\n        for (let key in this._storage) {\r\n            s[key] = this._storage[key].length\r\n        }\r\n        console.log(s)\r\n    }\r\n}\r\n\r\n\r\nconst getOrCreateArrFromObj = obj => key => obj[key] = obj[key] || []\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as R from 'ramda'\r\n\r\n\r\nexport class FrameUpdater {\r\n    constructor () {\r\n        this._subscribers = []\r\n\r\n\r\n        let data = {\r\n            time: 0,\r\n            delta: 0,\r\n            count: 0,\r\n            oldTime: 0\r\n        }\r\n\r\n        const getDataFromGlobalVar = () => data\r\n\r\n        const updateTime = data => {\r\n            data.time = Date.now()\r\n            return data\r\n        }\r\n\r\n        const updateDelta = data => {\r\n            data.delta = (data.time - data.oldTime) * 0.001\r\n            if (isNaN(data.delta) || data.delta > 1000 || data.delta === 0 ) {\r\n                data.delta = 1000 / 60 * 0.001\r\n            }\r\n            return data\r\n        }\r\n\r\n        const updateCount = data => {\r\n            data.count = data.delta / (1/60)\r\n            return data\r\n        }\r\n\r\n        // const emit = data => {\r\n        //     emitFrameUpdate(data)\r\n        //     return data\r\n        // }\r\n\r\n        const updateOldTime = data => {\r\n            data.oldTime = data.time\r\n            return data\r\n        }\r\n\r\n        const saveDataInGlobalVar = dataFromChine => {\r\n            data = dataFromChine\r\n            return data\r\n        }\r\n\r\n        const updateSubscribers = data => {\r\n            for (let i = 0; i < this._subscribers.length; ++i) {\r\n                this._subscribers[i]({...data })\r\n            }\r\n            return data;\r\n        }\r\n\r\n        const update = R.pipe(\r\n            getDataFromGlobalVar,\r\n            updateTime,\r\n            updateDelta,\r\n            updateCount,\r\n            updateSubscribers,\r\n            updateOldTime,\r\n            saveDataInGlobalVar\r\n        )\r\n\r\n        const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            update(data)\r\n        }\r\n        animate()\r\n    }\r\n\r\n    on (fn) {\r\n        this._subscribers.push(fn)\r\n        return () => {\r\n            this._subscribers = this._subscribers.filter(item => item !== fn)\r\n        }\r\n    }\r\n}","export const Saturate3 = {\r\n    uniforms: {\r\n        \"tDiffuse\": { value: null },\r\n        \"effect\": { value: 0 },\r\n    },\r\n\r\n\r\n    vertexShader: `\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\r\n}`,\r\n\r\n\r\n    fragmentShader: `\r\nuniform sampler2D tDiffuse;\r\nuniform float effect;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vec4 texel = texture2D( tDiffuse, vUv );\r\n  vec3 col = vec3(texel);\r\n  col *= sin(col.r * 100. * effect);\r\n  gl_FragColor = (texel * texel * texel) * vec4(3.) + vec4(col, 1.);\r\n}`,\r\n}\r\n","import * as THREE from 'three'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\n//import { Saturate } from '../../../_CORE/shaders/saturate'\r\nimport { Saturate3 } from '../../../_CORE/shaders/saturate3'\r\n\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\n\r\n\r\nexport class Studio {\r\n    constructor(root) {\r\n        this._root = root\r\n        const { assets, emitter, } = root\r\n        const { canId, rendererCon } = root.CONSTANTS.studioConfig\r\n\r\n        rendererCon.canvas = document.getElementById(canId)\r\n\r\n        this._renderer = new THREE.WebGLRenderer(rendererCon)\r\n        //this._renderer.outputEncoding = THREE.sRGBEncoding;\r\n        //this._renderer.setClearColor(clearColor)\r\n        this._renderer.setClearColor(0x000000)\r\n        this._renderer.setPixelRatio(window.devicePixelRatio)\r\n        this._renderer.setSize(window.innerWidth, window.innerHeight)\r\n\r\n        this._scene = new THREE.Scene()\r\n\r\n        {\r\n            const { color, fogNear, fogFar, backgroundImgKey } = root.CONSTANTS.studioConfig.sceneEnvironment\r\n            this._scene.background = assets[backgroundImgKey] || null\r\n            this._scene.fog = new THREE.Fog(color, fogNear, fogFar)\r\n        }\r\n\r\n        this._lightA = new THREE.AmbientLight(0x455861, .4)\r\n        this._scene.add( this._lightA )\r\n\r\n        this._playerCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera.position.set(0, 0, 20)\r\n        const controls = new OrbitControls(this._controlsCamera, this._renderer.domElement)\r\n        controls.target.set(0, 0, 0)\r\n        controls.update();\r\n\r\n\r\n        this._composer = new EffectComposer(this._renderer)\r\n        this._renderPass = new RenderPass(this._scene, this._controlsCamera)\r\n        this._composer.addPass(this._renderPass)\r\n        this._shader = new ShaderPass(Saturate3)\r\n        this._composer.addPass(this._shader)\r\n\r\n\r\n        /** toggle view camera to debug by orbitControls */\r\n        const vec3 = new THREE.Vector3()\r\n        let isPlayerView = true\r\n        let saveFogData = null\r\n        emitter.subscribe('keyEvent')(data => {\r\n            if (!data['o']) {\r\n                return;\r\n            }\r\n\r\n            if (isPlayerView) {\r\n                saveFogData = { ...this._scene.fog }\r\n                this._scene.fog.near = 10000\r\n                this._scene.fog.far = 20000\r\n                isPlayerView = false\r\n\r\n                this._renderPass.camera = this._controlsCamera\r\n                this._playerCamera.getWorldPosition(vec3)\r\n                this._controlsCamera.position.x = vec3.x + 100\r\n                this._controlsCamera.position.y = vec3.y + 100\r\n                this._controlsCamera.position.z = vec3.z\r\n                controls.target.set(vec3.x, vec3.y, vec3.z)\r\n                controls.update()\r\n\r\n                // this._scene.fog.near = saveFogData.near\r\n                // this._scene.fog.far = saveFogData.far\r\n\r\n            } else {\r\n                this._scene.fog.near = saveFogData.near\r\n                this._scene.fog.far = saveFogData.far\r\n                isPlayerView = true\r\n                this._renderPass.camera = this._playerCamera\r\n            }\r\n        })\r\n\r\n\r\n\r\n        const resize = () => {\r\n            const size = { width: window.innerWidth, height: window.innerHeight }\r\n            this._renderer.setSize(size.width, size.height)\r\n            this._composer.setSize(size.width, size.height)\r\n            if (this._controlsCamera) {\r\n                this._controlsCamera.aspect = size.width / size.height\r\n                this._controlsCamera.updateProjectionMatrix()\r\n            }\r\n            if (this._playerCamera) {\r\n                this._playerCamera.aspect = size.width/size.height\r\n                this._playerCamera.updateProjectionMatrix()\r\n            }\r\n        }\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n\r\n\r\n\r\n\r\n        this.addToScene = mesh => this._scene.add(mesh)\r\n        this.removeFromScene = mesh => this._scene.remove(mesh)\r\n\r\n\r\n\r\n        this.drawFrame = () => {\r\n            this._composer.render(this._scene, this._controlsCamera)\r\n        }\r\n\r\n\r\n        //this._backgroundImgKey = root.CONSTANTS.studioConfig.sceneEnvironment.backgroundImgKey\r\n        emitter.subscribe('changeSceneEnvironment')(sceneEnvironment => {\r\n            console.log('deprecated!!', 'studio', 'changeSceneEnvironment', sceneEnvironment)\r\n        })\r\n\r\n\r\n        console.log(this._shader)\r\n    }\r\n\r\n\r\n    /** PUBLIC ****************************************/\r\n\r\n    setCamera (cam) {\r\n        cam.aspect = window.innerWidth / window.innerHeight\r\n        cam.updateProjectionMatrix()\r\n        this._playerCamera = cam\r\n        this._renderPass.camera = this._playerCamera\r\n    }\r\n\r\n\r\n    changeEnvironment (sceneEnvironment, conf = null) {\r\n        this._changeFog(sceneEnvironment, conf)\r\n        this._changeBackground(sceneEnvironment, conf)\r\n    }\r\n\r\n\r\n    /** INTERNAL ****************************************/\r\n\r\n    _changeFog (sceneEnvironment, conf) {\r\n        const { fogNear, fogFar, colorFog } = sceneEnvironment\r\n        if (\r\n            this._scene.fog.near !== fogNear ||\r\n            this._scene.fog.far !== fogFar ||\r\n            this._scene.fog.color !== fogFar\r\n        ) {\r\n            const startData = {\r\n                colorFog: this._scene.fog.color,\r\n                near: this._scene.fog.near,\r\n                far: this._scene.fog.far,\r\n            }\r\n            const endData = {\r\n                colorFog: new THREE.Color(colorFog),\r\n                near: fogNear,\r\n                far: fogFar,\r\n            }\r\n\r\n            new TWEEN.Tween(startData)\r\n                .to(endData, (conf && conf.time) || 3000)\r\n                .onUpdate(() => {\r\n                    this._scene.fog.color = startData.colorFog\r\n                    this._scene.fog.near = startData.near\r\n                    this._scene.fog.far = startData.far\r\n                    if (conf) {\r\n                        //                 if (conf.updateAmb) this._lightA.color = startData.color\r\n                    } else {\r\n                        //                 this._lightA.color = startData.color\r\n                    }\r\n                    //this._renderer.setClearColor(startData.color)\r\n                })\r\n                .onComplete(() => {\r\n                    this._renderer.setClearColor(sceneEnvironment.colorBack)\r\n                })\r\n                .start()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    _changeBackground (sceneEnvironment) {\r\n        const { backgroundImgKey } = sceneEnvironment\r\n\r\n        if (backgroundImgKey !== this._backgroundImgKey) {\r\n            this._backgroundImgKey = backgroundImgKey\r\n            this._scene.background = this._root.assets[backgroundImgKey] || null\r\n        }\r\n    }\r\n\r\n    setEffectStrength (s) {\r\n        this._shader.uniforms.effect.value = s\r\n    }\r\n}\r\n\r\n","\r\nexport class KeyBoard {\r\n    constructor (gameContext) {\r\n        const { emitter } = gameContext\r\n\r\n        const keys = {\r\n            'up': false,\r\n            'down': false,\r\n            'left': false,\r\n            'right': false,\r\n            'p': false,\r\n        }\r\n\r\n        const keysEnabled = {\r\n            'up': true,\r\n            'down': true,\r\n            'left': true,\r\n            'right': true,\r\n        }\r\n\r\n        this.keysEnabled = keysEnabled\r\n        this.keys = keys\r\n\r\n\r\n        const keyUpdate = function ( keyCode, isDown ) {\r\n            switch( keyCode ) {\r\n                case 38:\r\n                case 87:\r\n                    keysEnabled['up'] && (keys['up'] = isDown)\r\n                    break;\r\n                case 40:\r\n                case 83:\r\n                    keysEnabled['down'] && (keys['down'] = isDown)\r\n                    break;\r\n                case 37:\r\n                case 65:\r\n                    keys['left'] = isDown\r\n                    break;\r\n                case 39:\r\n                case 68:\r\n                    keys['right'] = isDown\r\n                    break;\r\n                case 79: \r\n                    keys['o'] = isDown\r\n                    break;                \r\n                case 80: \r\n                    keys['p'] = isDown\r\n                    break;\r\n                default:\r\n            }\r\n            emitter.emit('keyEvent')(keys)\r\n        }\r\n\r\n\r\n\r\n        document.addEventListener('keydown', event => keyUpdate(event.keyCode, true))\r\n        document.addEventListener('keyup', event => keyUpdate(event.keyCode, false))\r\n\r\n\r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, true)\r\n            if (key === 'butt-right') keyUpdate(39, true)\r\n            if (key === 'butt-front') keyUpdate(38, true)\r\n            if (key === 'butt-back') keyUpdate(40, true)\r\n        })\r\n        emitter.subscribe('mouseUp')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, false)\r\n            if (key === 'butt-right') keyUpdate(39, false)\r\n            if (key === 'butt-front') keyUpdate(38, false)\r\n            if (key === 'butt-back') keyUpdate(40, false)\r\n        })\r\n    }\r\n\r\n    toggleEnableKeys (key, is) {\r\n        this.keysEnabled[key] = is\r\n        !is && (this.keys[key] = false)\r\n    }\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\n\r\nexport class Player {\r\n    constructor (root) {\r\n        const { studio, CONSTANTS } = root\r\n\r\n        const {\r\n            //startPos,\r\n            //startRot,\r\n            cameraData,\r\n            //frontObjPos,\r\n            //backObjPos,\r\n            lightDataOne,\r\n        } = CONSTANTS.playerConfig\r\n\r\n\r\n        this._camera = null\r\n        this.isBlocked = true\r\n        this.isFreeze = true\r\n        \r\n        this.mesh = new THREE.Object3D()\r\n        this.mesh.rotation.fromArray([0, 0, 0])\r\n        this.mesh.userData.type = 'player'\r\n\r\n\r\n        this.bottomObj = new THREE.Object3D()\r\n        this.bottomObj.position.fromArray([0, -.02, 0])\r\n        this.mesh.add(this.bottomObj)\r\n\r\n        this.frontObj = new THREE.Object3D()\r\n        this.frontObj.position.fromArray([0, 0, -.02])\r\n        this.mesh.add(this.frontObj)\r\n\r\n        this.backObj = new THREE.Object3D()\r\n        this.backObj.position.fromArray([0, 0, 0.02])\r\n        this.mesh.add(this.backObj)\r\n\r\n\r\n        {\r\n            const { fov, ratio, near, far } = cameraData\r\n            this._camera = new THREE.PerspectiveCamera(fov, ratio, near, far)\r\n            this._camera.position.fromArray([0, 0, -2])\r\n            this.mesh.add(this._camera)\r\n        }\r\n\r\n        if (lightDataOne) {\r\n            const { color, strenth, pos } = lightDataOne\r\n            const light = new THREE.PointLight(color, strenth)\r\n            light.position.fromArray(pos)\r\n            this.mesh.add(light)\r\n        }\r\n\r\n        ///////////// TEST /////////////\r\n\r\n        studio.setCamera(this._camera)\r\n        studio.addToScene(this.mesh)\r\n    }\r\n\r\n    // toggleBlocked (val) {\r\n    //     this.isFeeze = val\r\n    // }\r\n\r\n    toggleFeeze (val) {\r\n        this.isFeeze = val\r\n    }\r\n\r\n    toggleCanMove(key, val) {\r\n        //this._isCanMove[key] = val\r\n    }\r\n\r\n    getObj () {\r\n        return this.mesh\r\n    }\r\n\r\n    getCamera () {\r\n        return this._camera\r\n    }\r\n    \r\n    setToPos (x, y, z) {\r\n        this.mesh.position.set(x, y, z)\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class Helper_MaterialsLib {\r\n    constructor (gameContext) {\r\n        const { assets, CONSTANTS } = gameContext\r\n\r\n        gameContext.materials = createMaterials(assets, CONSTANTS.MATERIALS_CONFIG)\r\n    }\r\n}\r\n\r\n\r\nconst createMaterials = (assets, MATERIALS_CONFIG) => {\r\n    for (let key in assets)\r\n        assets[key].wrapS && (assets[key].wrapS = assets[key].wrapT = THREE.RepeatWrapping)\r\n\r\n    const mapsKeys = ['bumpMap', 'envMap', 'map', 'normalMap', 'lightMap', 'aoMap', 'alphaMap']\r\n    const materials = {}\r\n    for (let key in MATERIALS_CONFIG) {\r\n        materials[key] = new THREE[MATERIALS_CONFIG[key].mat]({\r\n            ...MATERIALS_CONFIG[key].props\r\n        })\r\n        mapsKeys.map(keyMap =>\r\n            MATERIALS_CONFIG[key].props[keyMap] &&\r\n                (materials[key][keyMap] = assets[MATERIALS_CONFIG[key].props[keyMap]])\r\n        )\r\n    }\r\n    return materials\r\n}","export default __webpack_public_path__ + \"static/media/mapGround.8bd68b3e.jpg\";","export default \"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAKAAD/7gAOQWRvYmUAZMAAAAAB/9sAhAAUEBAZEhknFxcnMiYfJjIuJiYmJi4+NTU1NTU+REFBQUFBQUREREREREREREREREREREREREREREREREREREREARUZGSAcICYYGCY2JiAmNkQ2Kys2REREQjVCRERERERERERERERERERERERERERERERERERERERERERERERERET/wAARCAEAAP8DASIAAhEBAxEB/8QAUAABAQEBAQAAAAAAAAAAAAAAAAECAwYBAQAAAAAAAAAAAAAAAAAAAAAQAQEBAAAAAAAAAAAAAAAAAAABEREBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A8YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgigALhgILhgIjSAgqAAAAAAAAAAAAAAAAAAAKACi4CYuLi4CYY1i4DGGN4mAxhjeM4DKNYgIigIAAAAAAAAAAAAAAqKAosAkakJGpAJFxZGsBnFxrFwGMTHTEwHPEsdMSwHKxLHSxmwHNG6yCIqAAAAAAAAAAAAAoKCxqMxuAsjUhI1ICyLhI0CYuKAmJjQDOM2NpYDnYzY6WMWA52M1us0GUWoCAAAAAAAAAAAAqxFgNRuMxuA1G4zGoDUVIoCgAACJVKDFYrpWKDFYrdYoMVGqyCAAAAAAAAAAAArUZWA3G4xG4DcbjEagNRUigoAAACCUErFbrFBisVusUGay1WQQAAAAAAAAAAAFWIoNRuOcbgOkajnK3KDcaYlaBVQBUABKJaCVitWsWgzWatZoM1FqAgAAAAAAAAAAACooNRYysB0lalc5WpQdJWtc5WpQb1dY00G9TWdNBdS1NZtBbWLS1m0C1mlQEBAAAAAAAAAAAAAAAVUAalalYXQbla1z1dB001jTQb01jTQa1LWdTQW1NTUAQAEAAAAAAAAAAAAAAABUAVWVBdXWQGtXWQGtTUAXU1AFQQFQAAAAAAAAAAAAAAAAAAAAAAAUQBRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/9k=\"","export default __webpack_public_path__ + \"static/media/posx.be2d83a2.jpg\";","export default __webpack_public_path__ + \"static/media/negx.d016c8e7.jpg\";","export default __webpack_public_path__ + \"static/media/posy.01cfd221.jpg\";","export default __webpack_public_path__ + \"static/media/negy.f01f8356.jpg\";","export default __webpack_public_path__ + \"static/media/posz.ef37b8e1.jpg\";","export default __webpack_public_path__ + \"static/media/negz.f346a80a.jpg\";","import * as THREE from \"three\";\r\n\r\n\r\nexport class helper_CollisionsItems_v02 {\r\n    constructor () {\r\n        this._arrMeshes = []\r\n\r\n\r\n        this._vecStart = new THREE.Vector3()\r\n        this._vecDir = new THREE.Vector3()\r\n        this._rayCaster = new THREE.Raycaster(this._vecStart, this._vecDir)\r\n    }\r\n\r\n    setItemToCollision (mesh) {\r\n        for (let i = 0; i < this._arrMeshes.length; ++i) {\r\n            if (this._arrMeshes[i] === mesh) {\r\n                return;\r\n            }\r\n        }\r\n        this._arrMeshes.push(mesh)\r\n    }\r\n\r\n\r\n    removeItemFromCollision (mesh) {\r\n        this._arrMeshes = this._arrMeshes.filter(item => item !== mesh)\r\n    }\r\n\r\n\r\n    checkCollisions (objFrom, objTo, dist) {\r\n        objFrom.getWorldPosition(this._vecStart)\r\n        objTo.getWorldPosition(this._vecDir)\r\n\r\n        this._vecDir.sub(this._vecStart)\r\n\r\n        //console.log(this._arrMeshes)\r\n        const intersects = this._rayCaster.intersectObjects(this._arrMeshes)\r\n\r\n        if (intersects[0] && intersects[0].distance < dist) {\r\n            return [ true, intersects[0] ]\r\n        }\r\n        return [ false, null ]\r\n    }\r\n}","import { helper_CollisionsItems_v02 } from '../../../_CORE/helpers/helper_CollisionsItems_v02'\r\n\r\n\r\n\r\n\r\nexport class system_PlayerMoveOnLevel {\r\n    constructor (root) {\r\n\r\n\r\n        const { \r\n            emitter, \r\n            CONSTANTS,\r\n            player,\r\n            //assets,\r\n            //studio,\r\n        } = root\r\n\r\n\r\n        //player.mesh.position.fromArray([0, -40, 0])\r\n        //player.mesh.position.fromArray([0, 0, 0])\r\n        //player.mesh.position.fromArray([500, 0, -100])\r\n\r\n\r\n        const collisionsWalls = new helper_CollisionsItems_v02()\r\n\r\n        const {\r\n            speed,\r\n            //speedDown,\r\n            speedRot,\r\n        } = CONSTANTS.playerConfig\r\n\r\n        let isBlocked = true\r\n        player.toggleBlocked = val => isBlocked = val\r\n\r\n        this.isCanMove = {\r\n            'forward': true,\r\n            'back': true,\r\n        }\r\n        player.toggleCanMove = (dir, val) => this.isCanMove[dir] = val\r\n\r\n\r\n        this.isFreeze = false\r\n        let keys = {}\r\n\r\n        const OFFSET_FROM_PLANES = 17\r\n\r\n\r\n        const checkAndMoveFront = data => {\r\n            const [isCollision, collision] = collisionsWalls.checkCollisions(player.mesh, player.frontObj, OFFSET_FROM_PLANES)\r\n\r\n            /** update level new area */\r\n            if (isCollision) {\r\n                if (collision.object.userData.type && collision.object.userData.type === 'alert') {\r\n                    emitter.emit('collision')(collision.object.userData.event)\r\n                }\r\n                return;\r\n            }\r\n\r\n            player.mesh.translateZ(-speed * data.count)\r\n            emitter.emit('playerMove')('forward')\r\n        }\r\n        \r\n        \r\n\r\n        const checkAndMoveBack = data => {\r\n            const [isCollision] = collisionsWalls.checkCollisions(player.mesh, player.backObj, OFFSET_FROM_PLANES)\r\n            if (isCollision) return;\r\n                \r\n            player.mesh.translateZ(speed * data.count)\r\n            emitter.emit('playerMove')('back')\r\n        }\r\n\r\n\r\n\r\n        this.update = data => {\r\n            if (this.isFreeze) {\r\n                return;\r\n            }\r\n            //if (isButtonsDisabled) return;\r\n\r\n            keys['left'] && player.mesh.rotateY(speedRot * data.count)\r\n            keys['right'] && player.mesh.rotateY(-speedRot * data.count)\r\n\r\n            if (isBlocked) return;\r\n\r\n            //checkBottomAndDropDownPlayer(data)\r\n            keys['up'] && this.isCanMove['forward'] && checkAndMoveFront(data)\r\n            keys['down'] && this.isCanMove['back'] && checkAndMoveBack(data)\r\n            keys['p'] && console.log(`player.mesh.position.fromArray([${player.mesh.position.x}, ${player.mesh.position.y}, ${player.mesh.position.z}])`)\r\n        }\r\n    \r\n\r\n\r\n        emitter.subscribe('keyEvent')(data => {\r\n            keys = data\r\n        })\r\n        //emitter.subscribe('frameUpdate')(update)\r\n\r\n\r\n        this._collisionsWalls = collisionsWalls\r\n    }\r\n\r\n\r\n    addItemToPlayerCollision (item) {\r\n        this._collisionsWalls.setItemToCollision(item)\r\n    }\r\n\r\n    removeItemFromPlayerCollision (item) {\r\n        this._collisionsWalls.removeItemFromCollision(item)\r\n    }\r\n\r\n    toggleFreeze (val = !this.isFreeze) {\r\n        this.isFreeze = val\r\n    }\r\n}\r\n\r\n\r\n","//import * as THREE from 'three'\r\n\r\n\r\n\r\nexport class system_PlayerNearLevelItems {\r\n    constructor(root) {\r\n        this._root = root\r\n\r\n        const {\r\n            emitter, player\r\n        } = root\r\n\r\n\r\n        this._itemsToCheck = []\r\n\r\n        emitter.subscribe('playerMove')(() => {\r\n            //console.log('1111', this._itemsToCheck)\r\n            for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n                const dist = player.mesh.position.distanceTo(this._itemsToCheck[i].position)\r\n                //console.log(dist)\r\n\r\n                if (!this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist < this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = true\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: true })\r\n                    return;\r\n                }\r\n\r\n                if (this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist > this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = false\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: false })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    setItemToCheck (item, itemKey, near, far) {\r\n        for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n            if (item === this._itemsToCheck[i]) {\r\n                return;\r\n            }\r\n        }\r\n        //console.log(item, itemKey, near, far)\r\n        itemKey && (item.userData.nearPlayerItemKey = itemKey)\r\n        near && (item.userData.nearPlayerItemNear = near)\r\n        far && (item.userData.nearPlayerItemFar = far)\r\n        item.userData.nearPlayerIsNearPlayer = false\r\n\r\n        this._itemsToCheck.push(item)\r\n    }\r\n\r\n    removeItemFromCheck (item) {\r\n        this._itemsToCheck = this._itemsToCheck.filter(itemIn => itemIn !== item)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// function getCenterPoint (mesh) {\r\n//     // var center = new THREE.Vector3();\r\n//     // mesh.geometry.computeBoundingBox();\r\n//     // mesh.geometry.boundingBox.getCenter(center);\r\n//     // mesh.geometry.center();\r\n//     //mesh.position.copy(center);\r\n//\r\n//     //return center\r\n//     const geometry = mesh.geometry\r\n//     geometry.computeBoundingBox()\r\n//     const center = new THREE.Vector3()\r\n//     geometry.boundingBox.getCenter(center)\r\n//     mesh.localToWorld(center)\r\n//     return center\r\n// }","/*\r\n * Copyright 2021 GFXFundamentals.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of GFXFundamentals. nor the names of his\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n    /**\r\n     * An array or typed array with 3 values.\r\n     * @typedef {number[]|TypedArray} Vector3\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 4 values.\r\n     * @typedef {number[]|TypedArray} Vector4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 16 values.\r\n     * @typedef {number[]|TypedArray} Matrix4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n\r\n    let MatType = Float32Array;\r\n\r\n    /**\r\n     * Sets the type this library creates for a Mat4\r\n     * @param {constructor} Ctor the constructor for the type. Either `Float32Array` or `Array`\r\n     * @return {constructor} previous constructor for Mat4\r\n     */\r\n    function setDefaultType(Ctor) {\r\n        const OldType = MatType;\r\n        MatType = Ctor;\r\n        return OldType;\r\n    }\r\n\r\n    /**\r\n     * Takes two 4-by-4 matrices, a and b, and computes the product in the order\r\n     * that pre-composes b with a.  In other words, the matrix returned will\r\n     * transform by b first and then a.  Note this is subtly different from just\r\n     * multiplying the matrices together.  For given a and b, this function returns\r\n     * the same object in both row-major and column-major mode.\r\n     * @param {Matrix4} a A matrix.\r\n     * @param {Matrix4} b A matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function multiply(a, b, dst) {\r\n        dst = dst || new MatType(16);\r\n        var b00 = b[0 * 4 + 0];\r\n        var b01 = b[0 * 4 + 1];\r\n        var b02 = b[0 * 4 + 2];\r\n        var b03 = b[0 * 4 + 3];\r\n        var b10 = b[1 * 4 + 0];\r\n        var b11 = b[1 * 4 + 1];\r\n        var b12 = b[1 * 4 + 2];\r\n        var b13 = b[1 * 4 + 3];\r\n        var b20 = b[2 * 4 + 0];\r\n        var b21 = b[2 * 4 + 1];\r\n        var b22 = b[2 * 4 + 2];\r\n        var b23 = b[2 * 4 + 3];\r\n        var b30 = b[3 * 4 + 0];\r\n        var b31 = b[3 * 4 + 1];\r\n        var b32 = b[3 * 4 + 2];\r\n        var b33 = b[3 * 4 + 3];\r\n        var a00 = a[0 * 4 + 0];\r\n        var a01 = a[0 * 4 + 1];\r\n        var a02 = a[0 * 4 + 2];\r\n        var a03 = a[0 * 4 + 3];\r\n        var a10 = a[1 * 4 + 0];\r\n        var a11 = a[1 * 4 + 1];\r\n        var a12 = a[1 * 4 + 2];\r\n        var a13 = a[1 * 4 + 3];\r\n        var a20 = a[2 * 4 + 0];\r\n        var a21 = a[2 * 4 + 1];\r\n        var a22 = a[2 * 4 + 2];\r\n        var a23 = a[2 * 4 + 3];\r\n        var a30 = a[3 * 4 + 0];\r\n        var a31 = a[3 * 4 + 1];\r\n        var a32 = a[3 * 4 + 2];\r\n        var a33 = a[3 * 4 + 3];\r\n        dst[ 0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;\r\n        dst[ 1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;\r\n        dst[ 2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;\r\n        dst[ 3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;\r\n        dst[ 4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;\r\n        dst[ 5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;\r\n        dst[ 6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;\r\n        dst[ 7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;\r\n        dst[ 8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;\r\n        dst[ 9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;\r\n        dst[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;\r\n        dst[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;\r\n        dst[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;\r\n        dst[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;\r\n        dst[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;\r\n        dst[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;\r\n        return dst;\r\n    }\r\n\r\n\r\n    /**\r\n     * adds 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function addVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] + b[0];\r\n        dst[1] = a[1] + b[1];\r\n        dst[2] = a[2] + b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * subtracts 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function subtractVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] - b[0];\r\n        dst[1] = a[1] - b[1];\r\n        dst[2] = a[2] - b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * scale vectors3\r\n     * @param {Vector3} v vector\r\n     * @param {Number} s scale\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaleVector(v, s, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = v[0] * s;\r\n        dst[1] = v[1] * s;\r\n        dst[2] = v[2] * s;\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * normalizes a vector.\r\n     * @param {Vector3} v vector to normalize\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function normalize(v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var length = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n        // make sure we don't divide by 0.\r\n        if (length > 0.00001) {\r\n            dst[0] = v[0] / length;\r\n            dst[1] = v[1] / length;\r\n            dst[2] = v[2] / length;\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the length of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length of vector\r\n     */\r\n    function length(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the length squared of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length sqaured of vector\r\n     */\r\n    function lengthSq(v) {\r\n        return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];\r\n    }\r\n\r\n    /**\r\n     * Computes the cross product of 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function cross(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[1] * b[2] - a[2] * b[1];\r\n        dst[1] = a[2] * b[0] - a[0] * b[2];\r\n        dst[2] = a[0] * b[1] - a[1] * b[0];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the dot product of two vectors; assumes both vectors have\r\n     * three entries.\r\n     * @param {Vector3} a Operand vector.\r\n     * @param {Vector3} b Operand vector.\r\n     * @return {number} dot product\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function dot(a, b) {\r\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the distance squared between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance squared between a and b\r\n     */\r\n    function distanceSq(a, b) {\r\n        const dx = a[0] - b[0];\r\n        const dy = a[1] - b[1];\r\n        const dz = a[2] - b[2];\r\n        return dx * dx + dy * dy + dz * dz;\r\n    }\r\n\r\n    /**\r\n     * Computes the distance between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance between a and b\r\n     */\r\n    function distance(a, b) {\r\n        return Math.sqrt(distanceSq(a, b));\r\n    }\r\n\r\n    /**\r\n     * Makes an identity matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function identity(dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Transposes a matrix.\r\n     * @param {Matrix4} m matrix to transpose.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transpose(m, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = m[0];\r\n        dst[ 1] = m[4];\r\n        dst[ 2] = m[8];\r\n        dst[ 3] = m[12];\r\n        dst[ 4] = m[1];\r\n        dst[ 5] = m[5];\r\n        dst[ 6] = m[9];\r\n        dst[ 7] = m[13];\r\n        dst[ 8] = m[2];\r\n        dst[ 9] = m[6];\r\n        dst[10] = m[10];\r\n        dst[11] = m[14];\r\n        dst[12] = m[3];\r\n        dst[13] = m[7];\r\n        dst[14] = m[11];\r\n        dst[15] = m[15];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Creates a lookAt matrix.\r\n     * This is a world matrix for a camera. In other words it will transform\r\n     * from the origin to a place and orientation in the world. For a view\r\n     * matrix take the inverse of this.\r\n     * @param {Vector3} cameraPosition position of the camera\r\n     * @param {Vector3} target position of the target\r\n     * @param {Vector3} up direction\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function lookAt(cameraPosition, target, up, dst) {\r\n        dst = dst || new MatType(16);\r\n        var zAxis = normalize(\r\n            subtractVectors(cameraPosition, target));\r\n        var xAxis = normalize(cross(up, zAxis));\r\n        var yAxis = normalize(cross(zAxis, xAxis));\r\n\r\n        dst[ 0] = xAxis[0];\r\n        dst[ 1] = xAxis[1];\r\n        dst[ 2] = xAxis[2];\r\n        dst[ 3] = 0;\r\n        dst[ 4] = yAxis[0];\r\n        dst[ 5] = yAxis[1];\r\n        dst[ 6] = yAxis[2];\r\n        dst[ 7] = 0;\r\n        dst[ 8] = zAxis[0];\r\n        dst[ 9] = zAxis[1];\r\n        dst[10] = zAxis[2];\r\n        dst[11] = 0;\r\n        dst[12] = cameraPosition[0];\r\n        dst[13] = cameraPosition[1];\r\n        dst[14] = cameraPosition[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the angular height\r\n     * of the frustum, the aspect ratio, and the near and far clipping planes.  The\r\n     * arguments define a frustum extending in the negative z direction.  The given\r\n     * angle is the vertical angle of the frustum, and the horizontal angle is\r\n     * determined to produce the given aspect ratio.  The arguments near and far are\r\n     * the distances to the near and far clipping planes.  Note that near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  The matrix generated sends the viewing frustum to the unit box.\r\n     * We assume a unit box extending from -1 to 1 in the x and y dimensions and\r\n     * from -1 to 1 in the z dimension.\r\n     * @param {number} fieldOfViewInRadians field of view in y axis.\r\n     * @param {number} aspect aspect of viewport (width / height)\r\n     * @param {number} near near Z clipping plane\r\n     * @param {number} far far Z clipping plane\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function perspective(fieldOfViewInRadians, aspect, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n        var f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\r\n        var rangeInv = 1.0 / (near - far);\r\n\r\n        dst[ 0] = f / aspect;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = f;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = (near + far) * rangeInv;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = near * far * rangeInv * 2;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 orthographic projection matrix given the coordinates of the\r\n     * planes defining the axis-aligned, box-shaped viewing volume.  The matrix\r\n     * generated sends that box to the unit box.  Note that although left and right\r\n     * are x coordinates and bottom and top are y coordinates, near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  We assume a unit box extending from -1 to 1 in the x and y\r\n     * dimensions and from -1 to 1 in the z dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function orthographic(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 2 / (right - left);\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 / (top - bottom);\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the left, right,\r\n     * top, bottom, near and far clipping planes. The arguments define a frustum\r\n     * extending in the negative z direction. The arguments near and far are the\r\n     * distances to the near and far clipping planes. Note that near and far are not\r\n     * z coordinates, but rather they are distances along the negative z-axis. The\r\n     * matrix generated sends the viewing frustum to the unit box. We assume a unit\r\n     * box extending from -1 to 1 in the x and y dimensions and from -1 to 1 in the z\r\n     * dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function frustum(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var dx = right - left;\r\n        var dy = top - bottom;\r\n        var dz = far - near;\r\n\r\n        dst[ 0] = 2 * near / dx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 * near / dy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = (left + right) / dx;\r\n        dst[ 9] = (top + bottom) / dy;\r\n        dst[10] = -(far + near) / dz;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = -2 * near * far / dz;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a translation matrix\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translation(tx, ty, tz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = tx;\r\n        dst[13] = ty;\r\n        dst[14] = tz;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by translation matrix.\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translate(m, tx, ty, tz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, translation(tx, ty, tz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m00;\r\n            dst[ 1] = m01;\r\n            dst[ 2] = m02;\r\n            dst[ 3] = m03;\r\n            dst[ 4] = m10;\r\n            dst[ 5] = m11;\r\n            dst[ 6] = m12;\r\n            dst[ 7] = m13;\r\n            dst[ 8] = m20;\r\n            dst[ 9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an x rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = c;\r\n        dst[ 6] = s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = -s;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an x rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, xRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[4]  = c * m10 + s * m20;\r\n        dst[5]  = c * m11 + s * m21;\r\n        dst[6]  = c * m12 + s * m22;\r\n        dst[7]  = c * m13 + s * m23;\r\n        dst[8]  = c * m20 - s * m10;\r\n        dst[9]  = c * m21 - s * m11;\r\n        dst[10] = c * m22 - s * m12;\r\n        dst[11] = c * m23 - s * m13;\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m[ 0];\r\n            dst[ 1] = m[ 1];\r\n            dst[ 2] = m[ 2];\r\n            dst[ 3] = m[ 3];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an y rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = -s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = s;\r\n        dst[ 9] = 0;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an y rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, yRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 - s * m20;\r\n        dst[ 1] = c * m01 - s * m21;\r\n        dst[ 2] = c * m02 - s * m22;\r\n        dst[ 3] = c * m03 - s * m23;\r\n        dst[ 8] = c * m20 + s * m00;\r\n        dst[ 9] = c * m21 + s * m01;\r\n        dst[10] = c * m22 + s * m02;\r\n        dst[11] = c * m23 + s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 4] = m[ 4];\r\n            dst[ 5] = m[ 5];\r\n            dst[ 6] = m[ 6];\r\n            dst[ 7] = m[ 7];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an z rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = s;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = -s;\r\n        dst[ 5] = c;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an z rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotate(m, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, zRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 + s * m10;\r\n        dst[ 1] = c * m01 + s * m11;\r\n        dst[ 2] = c * m02 + s * m12;\r\n        dst[ 3] = c * m03 + s * m13;\r\n        dst[ 4] = c * m10 - s * m00;\r\n        dst[ 5] = c * m11 - s * m01;\r\n        dst[ 6] = c * m12 - s * m02;\r\n        dst[ 7] = c * m13 - s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 8] = m[ 8];\r\n            dst[ 9] = m[ 9];\r\n            dst[10] = m[10];\r\n            dst[11] = m[11];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an rotation matrix around an arbitrary axis\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotation(axis, angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        dst[ 0] = xx + (1 - xx) * c;\r\n        dst[ 1] = x * y * oneMinusCosine + z * s;\r\n        dst[ 2] = x * z * oneMinusCosine - y * s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = x * y * oneMinusCosine - z * s;\r\n        dst[ 5] = yy + (1 - yy) * c;\r\n        dst[ 6] = y * z * oneMinusCosine + x * s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = x * z * oneMinusCosine + y * s;\r\n        dst[ 9] = y * z * oneMinusCosine - x * s;\r\n        dst[10] = zz + (1 - zz) * c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an axis rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotate(m, axis, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, axisRotation(axis, angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        var r00 = xx + (1 - xx) * c;\r\n        var r01 = x * y * oneMinusCosine + z * s;\r\n        var r02 = x * z * oneMinusCosine - y * s;\r\n        var r10 = x * y * oneMinusCosine - z * s;\r\n        var r11 = yy + (1 - yy) * c;\r\n        var r12 = y * z * oneMinusCosine + x * s;\r\n        var r20 = x * z * oneMinusCosine + y * s;\r\n        var r21 = y * z * oneMinusCosine - x * s;\r\n        var r22 = zz + (1 - zz) * c;\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n\r\n        dst[ 0] = r00 * m00 + r01 * m10 + r02 * m20;\r\n        dst[ 1] = r00 * m01 + r01 * m11 + r02 * m21;\r\n        dst[ 2] = r00 * m02 + r01 * m12 + r02 * m22;\r\n        dst[ 3] = r00 * m03 + r01 * m13 + r02 * m23;\r\n        dst[ 4] = r10 * m00 + r11 * m10 + r12 * m20;\r\n        dst[ 5] = r10 * m01 + r11 * m11 + r12 * m21;\r\n        dst[ 6] = r10 * m02 + r11 * m12 + r12 * m22;\r\n        dst[ 7] = r10 * m03 + r11 * m13 + r12 * m23;\r\n        dst[ 8] = r20 * m00 + r21 * m10 + r22 * m20;\r\n        dst[ 9] = r20 * m01 + r21 * m11 + r22 * m21;\r\n        dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\r\n        dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a scale matrix\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaling(sx, sy, sz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = sy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = sz;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by a scaling matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scale(m, sx, sy, sz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, scaling(sx, sy, sz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx * m[0 * 4 + 0];\r\n        dst[ 1] = sx * m[0 * 4 + 1];\r\n        dst[ 2] = sx * m[0 * 4 + 2];\r\n        dst[ 3] = sx * m[0 * 4 + 3];\r\n        dst[ 4] = sy * m[1 * 4 + 0];\r\n        dst[ 5] = sy * m[1 * 4 + 1];\r\n        dst[ 6] = sy * m[1 * 4 + 2];\r\n        dst[ 7] = sy * m[1 * 4 + 3];\r\n        dst[ 8] = sz * m[2 * 4 + 0];\r\n        dst[ 9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * creates a matrix from translation, quaternion, scale\r\n     * @param {Number[]} translation [x, y, z] translation\r\n     * @param {Number[]} quaternion [x, y, z, z] quaternion rotation\r\n     * @param {Number[]} scale [x, y, z] scale\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function compose(translation, quaternion, scale, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        const x = quaternion[0];\r\n        const y = quaternion[1];\r\n        const z = quaternion[2];\r\n        const w = quaternion[3];\r\n\r\n        const x2 = x + x;\r\n        const y2 = y + y;\r\n        const z2 = z + z;\r\n\r\n        const xx = x * x2;\r\n        const xy = x * y2;\r\n        const xz = x * z2;\r\n\r\n        const yy = y * y2;\r\n        const yz = y * z2;\r\n        const zz = z * z2;\r\n\r\n        const wx = w * x2;\r\n        const wy = w * y2;\r\n        const wz = w * z2;\r\n\r\n        const sx = scale[0];\r\n        const sy = scale[1];\r\n        const sz = scale[2];\r\n\r\n        dst[0] = (1 - (yy + zz)) * sx;\r\n        dst[1] = (xy + wz) * sx;\r\n        dst[2] = (xz - wy) * sx;\r\n        dst[3] = 0;\r\n\r\n        dst[4] = (xy - wz) * sy;\r\n        dst[5] = (1 - (xx + zz)) * sy;\r\n        dst[6] = (yz + wx) * sy;\r\n        dst[7] = 0;\r\n\r\n        dst[ 8] = (xz + wy) * sz;\r\n        dst[ 9] = (yz - wx) * sz;\r\n        dst[10] = (1 - (xx + yy)) * sz;\r\n        dst[11] = 0;\r\n\r\n        dst[12] = translation[0];\r\n        dst[13] = translation[1];\r\n        dst[14] = translation[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    function quatFromRotationMatrix(m, dst) {\r\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n        const m11 = m[0];\r\n        const m12 = m[4];\r\n        const m13 = m[8];\r\n        const m21 = m[1];\r\n        const m22 = m[5];\r\n        const m23 = m[9];\r\n        const m31 = m[2];\r\n        const m32 = m[6];\r\n        const m33 = m[10];\r\n\r\n        const trace = m11 + m22 + m33;\r\n\r\n        if (trace > 0) {\r\n            const s = 0.5 / Math.sqrt(trace + 1);\r\n            dst[3] = 0.25 / s;\r\n            dst[0] = (m32 - m23) * s;\r\n            dst[1] = (m13 - m31) * s;\r\n            dst[2] = (m21 - m12) * s;\r\n        } else if (m11 > m22 && m11 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m11 - m22 - m33);\r\n            dst[3] = (m32 - m23) / s;\r\n            dst[0] = 0.25 * s;\r\n            dst[1] = (m12 + m21) / s;\r\n            dst[2] = (m13 + m31) / s;\r\n        } else if (m22 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m22 - m11 - m33);\r\n            dst[3] = (m13 - m31) / s;\r\n            dst[0] = (m12 + m21) / s;\r\n            dst[1] = 0.25 * s;\r\n            dst[2] = (m23 + m32) / s;\r\n        } else {\r\n            const s = 2 * Math.sqrt(1 + m33 - m11 - m22);\r\n            dst[3] = (m21 - m12) / s;\r\n            dst[0] = (m13 + m31) / s;\r\n            dst[1] = (m23 + m32) / s;\r\n            dst[2] = 0.25 * s;\r\n        }\r\n    }\r\n\r\n    function decompose(mat, translation, quaternion, scale) {\r\n        let sx = m4.length(mat.slice(0, 3));\r\n        const sy = m4.length(mat.slice(4, 7));\r\n        const sz = m4.length(mat.slice(8, 11));\r\n\r\n        // if determinate is negative, we need to invert one scale\r\n        const det = determinate(mat);\r\n        if (det < 0) {\r\n            sx = -sx;\r\n        }\r\n\r\n        translation[0] = mat[12];\r\n        translation[1] = mat[13];\r\n        translation[2] = mat[14];\r\n\r\n        // scale the rotation part\r\n        const matrix = m4.copy(mat);\r\n\r\n        const invSX = 1 / sx;\r\n        const invSY = 1 / sy;\r\n        const invSZ = 1 / sz;\r\n\r\n        matrix[0] *= invSX;\r\n        matrix[1] *= invSX;\r\n        matrix[2] *= invSX;\r\n\r\n        matrix[4] *= invSY;\r\n        matrix[5] *= invSY;\r\n        matrix[6] *= invSY;\r\n\r\n        matrix[8] *= invSZ;\r\n        matrix[9] *= invSZ;\r\n        matrix[10] *= invSZ;\r\n\r\n        quatFromRotationMatrix(matrix, quaternion);\r\n\r\n        scale[0] = sx;\r\n        scale[1] = sy;\r\n        scale[2] = sz;\r\n    }\r\n\r\n    function determinate(m) {\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        return 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n    }\r\n\r\n    /**\r\n     * Computes the inverse of a matrix.\r\n     * @param {Matrix4} m matrix to compute inverse of\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function inverse(m, dst) {\r\n        dst = dst || new MatType(16);\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var tmp_12 = m20 * m31;\r\n        var tmp_13 = m30 * m21;\r\n        var tmp_14 = m10 * m31;\r\n        var tmp_15 = m30 * m11;\r\n        var tmp_16 = m10 * m21;\r\n        var tmp_17 = m20 * m11;\r\n        var tmp_18 = m00 * m31;\r\n        var tmp_19 = m30 * m01;\r\n        var tmp_20 = m00 * m21;\r\n        var tmp_21 = m20 * m01;\r\n        var tmp_22 = m00 * m11;\r\n        var tmp_23 = m10 * m01;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n\r\n        dst[0] = d * t0;\r\n        dst[1] = d * t1;\r\n        dst[2] = d * t2;\r\n        dst[3] = d * t3;\r\n        dst[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n            (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\r\n        dst[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n            (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\r\n        dst[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n            (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\r\n        dst[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n            (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\r\n        dst[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n            (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\r\n        dst[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n            (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\r\n        dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n            (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\r\n        dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n            (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\r\n        dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n            (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\r\n        dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n            (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\r\n        dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n            (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\r\n        dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n            (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a  matrix and a vector with 4 entries, transforms that vector by\r\n     * the matrix, and returns the result as a vector with 4 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector4} v The point in homogenous coordinates.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformVector(m, v, dst) {\r\n        dst = dst || new MatType(4);\r\n        for (var i = 0; i < 4; ++i) {\r\n            dst[i] = 0.0;\r\n            for (var j = 0; j < 4; ++j) {\r\n                dst[i] += v[j] * m[j * 4 + i];\r\n            }\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries,\r\n     * interprets the vector as a point, transforms that point by the matrix, and\r\n     * returns the result as a vector with 3 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The point.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformPoint(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n        var d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];\r\n\r\n        dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;\r\n        dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;\r\n        dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries, interprets the vector as a\r\n     * direction, transforms that direction by the matrix, and returns the result;\r\n     * assumes the transformation of 3-dimensional space represented by the matrix\r\n     * is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion. Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The direction.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformDirection(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\r\n        dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\r\n        dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix m and a vector v with 3 entries, interprets the vector\r\n     * as a normal to a surface, and computes a vector which is normal upon\r\n     * transforming that surface by the matrix. The effect of this function is the\r\n     * same as transforming v (as a direction) by the inverse-transpose of m.  This\r\n     * function assumes the transformation of 3-dimensional space represented by the\r\n     * matrix is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion.  Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The normal.\r\n     * @param {Vector3} [dst] The direction.\r\n     * @return {Vector3} The transformed direction.\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformNormal(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var mi = inverse(m);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\r\n        dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\r\n        dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    function copy(src, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = src[ 0];\r\n        dst[ 1] = src[ 1];\r\n        dst[ 2] = src[ 2];\r\n        dst[ 3] = src[ 3];\r\n        dst[ 4] = src[ 4];\r\n        dst[ 5] = src[ 5];\r\n        dst[ 6] = src[ 6];\r\n        dst[ 7] = src[ 7];\r\n        dst[ 8] = src[ 8];\r\n        dst[ 9] = src[ 9];\r\n        dst[10] = src[10];\r\n        dst[11] = src[11];\r\n        dst[12] = src[12];\r\n        dst[13] = src[13];\r\n        dst[14] = src[14];\r\n        dst[15] = src[15];\r\n\r\n        return dst;\r\n    }\r\n\r\nexport const m4 = {\r\n        copy: copy,\r\n        lookAt: lookAt,\r\n        addVectors: addVectors,\r\n        subtractVectors: subtractVectors,\r\n        scaleVector: scaleVector,\r\n        distance: distance,\r\n        distanceSq: distanceSq,\r\n        normalize: normalize,\r\n        compose: compose,\r\n        cross: cross,\r\n        decompose: decompose,\r\n        dot: dot,\r\n        identity: identity,\r\n        transpose: transpose,\r\n        length: length,\r\n        lengthSq: lengthSq,\r\n        orthographic: orthographic,\r\n        frustum: frustum,\r\n        perspective: perspective,\r\n        translation: translation,\r\n        translate: translate,\r\n        xRotation: xRotation,\r\n        yRotation: yRotation,\r\n        zRotation: zRotation,\r\n        xRotate: xRotate,\r\n        yRotate: yRotate,\r\n        zRotate: zRotate,\r\n        axisRotation: axisRotation,\r\n        axisRotate: axisRotate,\r\n        scaling: scaling,\r\n        scale: scale,\r\n        multiply: multiply,\r\n        inverse: inverse,\r\n        transformVector: transformVector,\r\n        transformPoint: transformPoint,\r\n        transformDirection: transformDirection,\r\n        transformNormal: transformNormal,\r\n        setDefaultType: setDefaultType,\r\n}\r\n\r\n","import {\r\n    createFace,\r\n    //createFaceWithSquare,\r\n    rotateArrY,\r\n    translateArr,\r\n    scaleArr,\r\n    inverseVertexOrder,\r\n} from '../../../helpers/geomHelpers'\r\n// const H0 = 50\r\n// const H1 = 70\r\n\r\n\r\nlet pos = null\r\nconst white1 = [1, 1, 1]\r\nconst white6 = [\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n]\r\n\r\n//const gr1 = [0, .5, .7]\r\n// const gr1 = [0, 0, 0]\r\n// const gr6 = [\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n// ]\r\n\r\n\r\nconst uv6 = [\r\n    0, 0, \r\n    1, 0, \r\n    1, 1,\r\n    0, 0,\r\n    1, 1,\r\n    0, 1\r\n]\r\n\r\n\r\n\r\nlet leftProfile = null\r\nlet rightProfile = null\r\npos = [0, -2.6953001022338867, 22.33769989013672, 0, 3.8533999919891357, 21.921899795532227, 0, 5.635499954223633, 21.284500122070312, 0, 19.557199478149414, 20.037200927734375, 0, 20.696800231933594, 20.980899810791016, 0, 25.771099090576172, 21.85650062561035, 0, 27.770299911499023, 20.32659912109375, 0, 27.770299911499023, 19.798900604248047, 0, 61.1713981628418, 19.746400833129883, 0, 61.1713981628418, 20.36400032043457, 0, 63.55139923095703, 22.07699966430664, 0, 65.46749877929688, 21.3710994720459, 0, 65.95809936523438, 22.83650016784668, 0, 67.88800048828125, 22.83650016784668, 0, 67.8865966796875, 21.539499282836914, 0, 77.65049743652344, 21.539499282836914, 0, 77.66819763183594, 24.958099365234375, 0, 79.78269958496094, 24.83370018005371, 0, 81.02649688720703, 27.694400787353516, 0, 82.51909637451172, 27.943199157714844, 0, 82.51909637451172, 26.699399948120117, 0, 106.7477035522461, 26.699399948120117, 0, 106.7477035522461, 28.06760025024414, 0, 108.36470031738281, 28.06760025024414, ]\r\n\r\n\r\nexport const createDoorData = (root, lineData, l, mode = 'simple') => {\r\n    if (leftProfile === null) {\r\n        // let s = ''\r\n        // const arr = lineData.geometry.attributes.position.array\r\n\r\n        // for (let i = 0; i < arr.length; ++i) {\r\n        //     s += arr[i] + ', '\r\n        // }\r\n        // console.log(s)\r\n\r\n        //pos = lineData.geometry.attributes.position.array\r\n        leftProfile = [...pos]\r\n        rotateArrY(leftProfile, -Math.PI / 4)\r\n        translateArr(leftProfile, 12, 0, 5)\r\n        rightProfile = [...pos]\r\n        rotateArrY(rightProfile, Math.PI / 4)\r\n        translateArr(rightProfile, -12, 0, 5)\r\n    }\r\n    const v = []\r\n    const c = []\r\n    const b = []\r\n    const u = []\r\n\r\n    let count = -1\r\n\r\n    for (let i = 3; i < pos.length; i += 3) {\r\n        ++count\r\n\r\n        if (mode !== 'bigDoor' && count > 12) {\r\n            continue;\r\n        }\r\n\r\n        /** doorstep ***/\r\n        if (i === 3 && mode === 'bigDoor') {\r\n            v.push(\r\n                ...createFace(\r\n                [0, -3, 10],\r\n                [l / 2, -3, 10],\r\n                [l / 2, 1, 10],\r\n                [0, 1, 10],\r\n            ))\r\n            c.push(...white6)\r\n            u.push(...uv6)\r\n            v.push(\r\n                ...createFace(\r\n                    [0, 1, 10],\r\n                    [l / 2, 1, 10],\r\n                    [l / 2, 1, 0],\r\n                    [0, 1, 0],\r\n                ))\r\n            c.push(...white6)\r\n            u.push(...uv6)\r\n        }\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [leftProfile[i - 3], leftProfile[i + 1 - 3], 0],\r\n                [leftProfile[i - 3], leftProfile[i + 1 - 3], leftProfile[i + 2 - 3]],\r\n                [leftProfile[i], leftProfile[i + 1], leftProfile[i + 2]],\r\n                [leftProfile[i], leftProfile[i + 1], 0],\r\n            )\r\n        )\r\n        u.push(...uv6)\r\n        c.push(...white6)\r\n\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [leftProfile[i - 3], leftProfile[i + 1 - 3], leftProfile[i + 2 - 3]],\r\n                [rightProfile[i - 3], rightProfile[i + 1 - 3], rightProfile[i + 2 - 3]],\r\n                [rightProfile[i], rightProfile[i + 1], rightProfile[i + 2]],\r\n                [leftProfile[i], leftProfile[i + 1], leftProfile[i + 2]],\r\n            )\r\n        )\r\n        u.push(...uv6)\r\n        c.push(...white6)\r\n\r\n\r\n\r\n        if (count < 12) {\r\n            v.push(\r\n                ...createFace(\r\n                    [rightProfile[i - 3], rightProfile[i + 1 - 3], rightProfile[i + 2 - 3]],\r\n                    [rightProfile[i - 3], rightProfile[i + 1 - 3], 0],\r\n                    [rightProfile[i], rightProfile[i + 1], 0],\r\n                    [rightProfile[i], rightProfile[i + 1], rightProfile[i + 2]],\r\n                )\r\n            )\r\n            u.push(...uv6)\r\n            c.push(...white6)\r\n        } else {\r\n            v.push(\r\n                ...createFace(\r\n                    [rightProfile[i - 3], rightProfile[i + 1 - 3], rightProfile[i + 2 - 3]],\r\n                    [l / 2, rightProfile[i + 1 - 3], rightProfile[i + 2 - 3]],\r\n                    [l / 2, rightProfile[i + 1], rightProfile[i + 2]],\r\n                    [rightProfile[i], rightProfile[i + 1], rightProfile[i + 2]],\r\n                )\r\n            )\r\n            u.push(...uv6)\r\n            c.push(...white6)\r\n        }\r\n\r\n        if (count === 11) {\r\n            v.push(\r\n                ...createFace(\r\n                    [rightProfile[i], rightProfile[i + 1], 0],\r\n                    [l / 2, rightProfile[i + 1], 0],\r\n                    [l / 2, rightProfile[i + 1], rightProfile[i + 2]],\r\n                    [rightProfile[i], rightProfile[i + 1], rightProfile[i + 2]],\r\n                )\r\n            )\r\n            u.push(...uv6)\r\n            c.push(...white6)\r\n        }\r\n\r\n        if (count === 0) {\r\n            b.push(\r\n                ...createFace(\r\n                    [rightProfile[i - 3], 0, rightProfile[i - 1]],\r\n                    [rightProfile[i - 3], 0, -rightProfile[i - 1]],\r\n                    [rightProfile[i - 3], 50, -rightProfile[i - 1]],\r\n                    [rightProfile[i - 3], 50, rightProfile[i - 1]],\r\n                )\r\n            )\r\n        }\r\n    }\r\n\r\n    const copyV = [...v]\r\n    inverseVertexOrder(copyV)\r\n    scaleArr(copyV, -1, 1, 1)\r\n    translateArr(copyV, l, 0, 0)\r\n    v.push(...copyV)\r\n    u.push(...u)\r\n\r\n\r\n    const copyC = [...c]\r\n    c.push(...copyC)\r\n\r\n\r\n\r\n    const mirrorV = [...v]\r\n    inverseVertexOrder(mirrorV)\r\n    scaleArr(mirrorV, 1, 1, -1)\r\n    v.push(...mirrorV)\r\n    c.push(...c)\r\n    u.push(...u)\r\n\r\n\r\n\r\n    const copyB = [...b]\r\n    inverseVertexOrder(copyB)\r\n    scaleArr(copyB, -1, 1, 1)\r\n    translateArr(copyB, l, 0, 0)\r\n    b.push(...copyB)\r\n    //const mirrorB = [...b]\r\n    //inverseVertexOrder(mirrorB)\r\n    //scaleArr(mirrorB, 1, 1, -1)\r\n    //b.push(...mirrorB)\r\n\r\n\r\n\r\n    return { v, c, b, u }\r\n}","import { m4 } from './m4'\r\n\r\nconst {\r\n    //floor,\r\n    random,\r\n} = Math\r\n//const ranN = (start, end) => start + floor(random() * (end - start))\r\nexport const ran = (start, end) => start + random() * (end - start)\r\n\r\n\r\n\r\nexport const createFace = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const createUv = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const fillColorFace = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const fillColor6 = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const getAngle = (x, y) => {\r\n    let inRads = Math.atan2(y, x);\r\n    return inRads - Math.PI / 2\r\n}\r\n\r\nexport const angleFromCoords = (x, y) => {\r\n    let rad = Math.atan(y / x)\r\n    x < 0 && y > 0 && (rad = Math.PI - Math.abs(rad))\r\n    x < 0 && y <= 0 && (rad = Math.PI + Math.abs(rad))\r\n    return rad\r\n}\r\n\r\n\r\n\r\nexport const createFaceWithSquare = (v1, v2, v3, v4, color1, color2, offset) => {\r\n    const maxW = v2[0] - v1[0]\r\n    const maxH = v3[1] - v1[1]\r\n\r\n    let innerW = ran(maxW * 0.3, maxW * 0.7)\r\n    let innerH = ran(maxH * 0.3, maxH * 0.7)\r\n\r\n    if (offset) {\r\n        innerW = maxW * offset\r\n        innerH = maxH * offset\r\n    }\r\n\r\n    const x1 = v1[0] + (maxW - innerW) / 2\r\n    const x2 = v2[0] - (maxW - innerW) / 2\r\n    const y1 = v1[1] + (maxH - innerH) / 2\r\n    const y2 = v3[1] - (maxH - innerH) / 2\r\n\r\n    const v1_i = [x1, y1, v1[2]]\r\n    const v2_i = [x2, y1, v1[2]]\r\n    const v3_i = [x2, y2, v1[2]]\r\n    const v4_i = [x1, y2, v1[2]]\r\n\r\n    const vArr = []\r\n    vArr.push(\r\n        ...createFace(v1_i, v2_i, v3_i, v4_i),\r\n        ...createFace(v1, v2, v2_i, v1_i),\r\n        ...createFace(v2_i, v2, v3, v3_i),\r\n        ...createFace(v4_i, v3_i, v3, v4),\r\n        ...createFace(v1, v1_i, v4_i, v4),\r\n    )\r\n\r\n    const cArr = fillColorFaceWithSquare(color1, color2)\r\n\r\n    const uArr = [\r\n        ...createUv(\r\n            [.5, .5],\r\n            [1, .5],\r\n            [1, 1],\r\n            [.5, 1],\r\n        ),\r\n\r\n\r\n        \r\n        ...createUv(\r\n            [0, .5],\r\n            [.5, .5],\r\n            //[.5, 1],\r\n            //[0, 1],\r\n            [.4, .6],\r\n            [.1, .6],\r\n        ),\r\n        ...createUv(\r\n            [.4, .6],\r\n            [.5, .5],\r\n            [.5, 1],\r\n            [.4, .9],\r\n        ),\r\n        ...createUv(\r\n            [.1, .9],\r\n            [.4, .9],\r\n            [.5, 1],\r\n            [0, 1],\r\n        ),\r\n        ...createUv(\r\n            [0, .5],\r\n            [.1, .6],\r\n            [.1, .9],\r\n            [0, 1],\r\n        )\r\n    ]\r\n\r\n\r\n    return { \r\n        vArr,\r\n        cArr,\r\n        uArr,\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const fillColorFaceWithSquare = (c1, c2) => [\r\n    ...fillColorFace(c1),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n]\r\n\r\n\r\n\r\nexport const transformArr = (arr, x = 0, y = 0, z = 0, r = 0) => {\r\n    let matrix = m4.yRotation(r);\r\n    matrix = m4.translate(matrix, x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArr = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrY = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrZ = (arr, angle) => {\r\n    const matrix = m4.zRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\n\r\nexport const translateArr = (arr, x = 0, y = 0, z = 0) => {\r\n    const matrix = m4.translation(x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const scaleArr = (arr, sX, sY, sZ) => {\r\n    const matrix = m4.scaling(sX, sY, sZ)\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const inverseVertexOrder = copyV => {\r\n    for (let i = 0; i < copyV.length; i += 18) {\r\n        const n0_0 = copyV[i]\r\n        const n0_1 = copyV[i + 1]\r\n        const n0_2 = copyV[i + 2]\r\n\r\n        const n1_0 = copyV[i + 3]\r\n        const n1_1 = copyV[i + 3 + 1]\r\n        const n1_2 = copyV[i + 3 + 2]\r\n\r\n        const n4_0 = copyV[i + 12]\r\n        const n4_1 = copyV[i + 12 + 1]\r\n        const n4_2 = copyV[i + 12 + 2]\r\n\r\n        const n5_0 = copyV[i + 15]\r\n        const n5_1 = copyV[i + 15 + 1]\r\n        const n5_2 = copyV[i + 15 + 2]\r\n\r\n\r\n        copyV[i] = n1_0\r\n        copyV[i + 1] = n1_1\r\n        copyV[i + 2] = n1_2\r\n\r\n        copyV[i + 3] = n0_0\r\n        copyV[i + 3 + 1] = n0_1\r\n        copyV[i + 3 + 2] = n0_2\r\n\r\n        copyV[i + 12] = n5_0\r\n        copyV[i + 12 + 1] = n5_1\r\n        copyV[i + 12 + 2] = n5_2\r\n\r\n        copyV[i + 15] = n4_0\r\n        copyV[i + 15 + 1] = n4_1\r\n        copyV[i + 15 + 2] = n4_2\r\n    }\r\n}\r\n","import {\r\n    createFace,\r\n} from \"../../../helpers/geomHelpers\";\r\n\r\nconst white1 = [1, 1, 1]\r\nconst white6 = [\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n]\r\n\r\nconst h0 = 57\r\nconst h1 = h0 + 2\r\nconst z = 12\r\nconst ph0 = 30\r\nconst ph1 = 63\r\nconst frameW = 1.5\r\n\r\n\r\nexport const createPanel = ({\r\n    l,\r\n    colorRoom,\r\n    leftOffset,\r\n    rightOffset,\r\n}) => {\r\n\r\n    const x0 = leftOffset\r\n    const x1 = l - rightOffset\r\n\r\n    const colorRoom6 = [\r\n        ...colorRoom, ...colorRoom, ...colorRoom,\r\n        ...colorRoom, ...colorRoom, ...colorRoom,\r\n    ]\r\n\r\n    const c = []\r\n    const v = []\r\n    const u = []\r\n\r\n\r\n    if (l < 30) {\r\n        v.push(\r\n            ...createFace(\r\n                [x0, h0, z],\r\n                [x1, h0, z],\r\n                [x1, h1, z],\r\n                [x0, h1, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [x0, h0 - 5, z - 10],\r\n                [x1, h0 - 5, z - 10],\r\n                [x1, h0, z],\r\n                [x0, h0, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(\r\n            0, 0,\r\n            1, 0,\r\n            1, 1,\r\n            0, 0,\r\n            1, 1,\r\n            0, 1\r\n        )\r\n    }\r\n\r\n\r\n\r\n    if (l > 30) {\r\n        const lengthWall =  l - (leftOffset + rightOffset)\r\n        const rPanel = lengthWall * .2\r\n        const center = leftOffset + lengthWall / 2\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel, ph0, z + 1],\r\n                [center + rPanel, ph0, z + 1],\r\n                [center + rPanel, ph1, z + 1],\r\n                [center - rPanel, ph1, z + 1],\r\n            )\r\n        )\r\n        c.push(...colorRoom6)\r\n        u.push(\r\n            0, 0,\r\n            1, 0,\r\n            1, 1,\r\n            0, 0,\r\n            1, 1,\r\n            0, 1\r\n        )\r\n\r\n\r\n        /** panel frame ***/\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel - frameW, ph0 - frameW, z + 2],\r\n                [center + rPanel + frameW, ph0 - frameW, z + 2],\r\n                [center + rPanel, ph0, z + 1],\r\n                [center - rPanel, ph0, z + 1],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel - frameW, ph0 - frameW - 1, z - 10],\r\n                [center + rPanel + frameW, ph0 - frameW - 1, z - 10],\r\n                [center + rPanel + frameW, ph0 - frameW, z + 2],\r\n                [center - rPanel - frameW, ph0 - frameW, z + 2],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(\r\n            0, 0,\r\n            1, 0,\r\n            1, 1,\r\n            0, 0,\r\n            1, 1,\r\n            0, 1\r\n        )\r\n        ////////////////////\r\n        v.push(\r\n            ...createFace(\r\n                [center + rPanel, ph0, z + 1],\r\n                [center + rPanel + frameW, ph0 - frameW, z + 2],\r\n                [center + rPanel + frameW, ph1 + frameW, z + 2],\r\n                [center + rPanel, ph1, z + 1],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center + rPanel + frameW, ph0 - frameW, z + 2],\r\n                [center + rPanel + frameW, ph0 - frameW - 1, z - 10],\r\n                [center + rPanel + frameW, ph1 + frameW + 1, z - 10],\r\n                [center + rPanel + frameW, ph1 + frameW, z + 2],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        ////\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel - frameW, ph0 - frameW, z + 2],\r\n                [center - rPanel, ph0, z + 1],\r\n                [center - rPanel, ph1, z + 1],\r\n                [center - rPanel - frameW, ph1 + frameW, z + 2],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel - frameW, ph0 - frameW - 1, z  - 10],\r\n                [center - rPanel - frameW, ph0 - frameW, z + 2],\r\n                [center - rPanel - frameW, ph1 + frameW, z + 2],\r\n                [center - rPanel - frameW, ph1 + frameW, z  - 10],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center - rPanel, ph1, z + 1],\r\n                [center + rPanel, ph1, z + 1],\r\n                [center + rPanel + frameW, ph1 + frameW, z + 2],\r\n                [center - rPanel - frameW, ph1 + frameW, z + 2],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n\r\n\r\n\r\n        /** gor */\r\n        v.push(\r\n            ...createFace(\r\n                [x0, h0, z],\r\n                [center - rPanel - frameW, h0, z],\r\n                [center - rPanel - frameW, h1, z],\r\n                [x0, h1, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [x0, h0 - 5, z - 10],\r\n                [center - rPanel - frameW, h0 - 5, z - 10],\r\n                [center - rPanel - frameW, h0, z],\r\n                [x0, h0, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center + rPanel + frameW, h0, z],\r\n                [x1, h0, z],\r\n                [x1, h1, z],\r\n                [center + rPanel + frameW, h1, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [center + rPanel + frameW, h0 - 5, z - 10],\r\n                [x1, h0 - 5, z - 10],\r\n                [x1, h0, z],\r\n                [center + rPanel + frameW, h0, z],\r\n            )\r\n        )\r\n        c.push(...white6)\r\n        u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return { v, c, u }\r\n}","\r\nimport {\r\n    translateArr,\r\n    rotateArrY,\r\n    createFace,\r\n    angleFromCoords,\r\n    createFaceWithSquare,\r\n    //createUv,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createPanel } from './geomWallPanno'\r\n\r\nconst uv6 = [\r\n    0, 0, \r\n    1, 0, \r\n    1, 1,\r\n    0, 0,\r\n    1, 1,\r\n    0, 1\r\n]\r\n\r\n\r\nexport const createWall = (data) => {\r\n\r\n    const v = []\r\n    const c = []\r\n    const b = []\r\n    const u = []\r\n\r\n    const { p0, p1, arr, colorRoom } = data\r\n\r\n    const lX = p1[0] - p0[0]\r\n    const lZ = p0[1] - p1[1]\r\n    const l = Math.sqrt(lX * lX + lZ * lZ)\r\n\r\n    const izSegmentsDoors = arr.length > 0\r\n\r\n    const segment = createSegment({\r\n        l,\r\n        //asset: root.assets['walls'].children[0],\r\n        leftOffset: true,\r\n        rightOffset: true,\r\n        segment: izSegmentsDoors ? 'top' : 'full',\r\n        colorRoom,\r\n    })\r\n    const angle = angleFromCoords(lX, lZ)\r\n    rotateArrY(segment.v, angle)\r\n    translateArr(segment.v, p0[0], -61, p0[1])\r\n    v.push(...segment.v)\r\n    c.push(...segment.c)\r\n    u.push(...segment.u)\r\n\r\n    rotateArrY(segment.b, angle)\r\n    translateArr(segment.b, p0[0], -61, p0[1])\r\n    b.push(...segment.b)\r\n\r\n\r\n    if (arr && arr.length > 0) {\r\n        for (let i = 0; i < arr.length; ++i) {\r\n            const {p0, p1} = arr[i]\r\n\r\n            const lX = p1[0] - p0[0]\r\n            const lZ = p0[1] - p1[1]\r\n            const l = Math.sqrt(lX * lX + lZ * lZ)\r\n\r\n            const segment = createSegment({\r\n                l,\r\n                leftOffset: i === 0,\r\n                rightOffset: i === arr.length - 1,\r\n                segment: 'bottom',\r\n                colorRoom,\r\n            })\r\n            const angle = angleFromCoords(lX, lZ)\r\n\r\n            rotateArrY(segment.v, angle)\r\n            translateArr(segment.v, p0[0], -61, p0[1])\r\n            v.push(...segment.v)\r\n            c.push(...segment.c)\r\n            u.push(...segment.u)\r\n\r\n            rotateArrY(segment.b, angle)\r\n            translateArr(segment.b, p0[0], -61, p0[1])\r\n            b.push(...segment.b)\r\n        }\r\n    }\r\n\r\n    return { v, c, b, u }\r\n}\r\n\r\n\r\n//let pos = null\r\nlet pos = [0, -0.000699999975040555, 20.271699905395508, 0, 0.9347000122070312, 20.271699905395508, 0, 1.8353999853134155, 17.028799057006836, 0, 7.440899848937988, 17.028799057006836, 0, 7.844900131225586, 19.12459945678711, 0, 8.748000144958496, 19.12459945678711, 0, 9.527199745178223, 13.83530044555664, 0, 20.66309928894043, 13.83530044555664, 0, 21.29990005493164, 17.426300048828125, 0, 23.96380043029785, 17.426300048828125, 0, 24.70680046081543, 10.646400451660156, 0, 67.68000030517578, 10.646400451660156, 0, 67.68000030517578, 13.190500259399414, 0, 70.5458984375, 13.190500259399414, 0, 70.5458984375, 4.975500106811523, 0, 72.16529846191406, 4.975500106811523, 0, 72.16529846191406, 2.640399932861328, 0, 82.96610260009766, 2.6317999362945557, 0, /*86.24569702148438*/ 88, 14.853300094604492, 0, /*89.66629791259766*/ 110, 14.853300094604492, ]\r\n\r\n// const white1 = [1, 1, 1]\r\n// const white6 = [\r\n//     ...white1,\r\n//     ...white1,\r\n//     ...white1,\r\n//     ...white1,\r\n//     ...white1,\r\n//     ...white1,\r\n// ]\r\n\r\n const white1 = [1, 1, 1]\r\n const white6 = [\r\n     ...white1,\r\n     ...white1,\r\n     ...white1,\r\n     ...white1,\r\n     ...white1,\r\n     ...white1,\r\n]\r\n\r\n\r\n\r\n//const gr1 = [0, .5, .7]\r\n// const gr1 = [1, 0, 0]\r\n// const gr6 = [\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n//     ...gr1,\r\n// ]\r\nconst swap = (v1, v2) => {\r\n    return [[...v2], [...v1]]\r\n}\r\n\r\nexport const createSegment = ({\r\n                                      l,\r\n                                      //asset,\r\n                                      leftOffset,\r\n                                      rightOffset,\r\n                                      segment,\r\n                                      colorRoom,\r\n                                  }) => {\r\n    const colorRoom6 = [\r\n        ...colorRoom, ...colorRoom, ...colorRoom,\r\n        ...colorRoom, ...colorRoom, ...colorRoom,\r\n    ]\r\n\r\n    // let colorW1Use = [...white1]\r\n    // let colorW6Use = [...white6]\r\n    // let colorRoomUse = [...colorRoom]\r\n    // let colorRoom6Use = [...colorRoom6]\r\n    // if (Math.random() < .5) {\r\n    //      [ colorW1Use, colorRoomUse ] = swap(colorRoomUse, colorW1Use)\r\n    //      [ colorW6Use, colorRoom6Use ] = swap(colorRoom6, white6)\r\n    // }\r\n\r\n    //console.log('--', colorRoomUse)\r\n\r\n\r\n    const c = []\r\n    const v = []\r\n    const b = []\r\n    const u = []\r\n\r\n    let p = -1\r\n\r\n    if (segment === 'bottom' || segment === 'full') {\r\n        const panel = createPanel({\r\n            l,\r\n            colorRoom,\r\n            leftOffset: leftOffset ? 11 : 0,\r\n            rightOffset: rightOffset ? 11 : 0,\r\n        })\r\n        c.push(...panel.c)\r\n        v.push(...panel.v)\r\n        u.push(...panel.u)\r\n    }\r\n\r\n    for (let i = 3; i < pos.length; i += 3) {\r\n        ++p\r\n        if (segment === 'top' && p < 11) {\r\n            continue;\r\n        }\r\n        if (segment === 'bottom' && p > 10) {\r\n            continue;\r\n        }\r\n\r\n        if (p === 0 && (segment === 'bottom' || segment === 'full') ) {\r\n            b.push(\r\n                ...createFace(\r\n                    [-3.6, pos[i + 1 - 3], pos[i + 2 - 3]],\r\n                    [l + 3.6, pos[i + 1 - 3], pos[i + 2 - 3]],\r\n                    [l + 3.6, 30, pos[i + 2]],\r\n                    [- 3.6, 30, pos[i + 2]],\r\n                )\r\n            )\r\n        }\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [0, pos[i + 1 - 3], pos[i + 2 - 3]],\r\n                [l, pos[i + 1 - 3], pos[i + 2 - 3]],\r\n                [l, pos[i + 1], pos[i + 2]],\r\n                [0, pos[i + 1], pos[i + 2]],\r\n            )\r\n        )\r\n        u.push(...uv6)\r\n        if (\r\n            p === 2 ||\r\n            p === 6 ||\r\n            //p === 10 ||\r\n            p === 16\r\n        ) {\r\n            c.push(...colorRoom6)\r\n        } else {\r\n            c.push(...white6)\r\n        }\r\n    }\r\n\r\n    /** top items */\r\n    if (segment === 'top' || segment === 'full') {\r\n        const leftOffsetVal = leftOffset ? 25 : 7\r\n        const rightOffsetVal = rightOffset ? 25 : 7\r\n        const n = Math.floor((l - (leftOffsetVal + rightOffsetVal)) / 30)\r\n\r\n        //const r = 1.5\r\n        const r = 5\r\n        const h2 = 87\r\n        const h1 = 80\r\n        const h0 = 72\r\n        const z = 12.5\r\n        let step = (l - (leftOffsetVal + rightOffsetVal)) / n\r\n        if (n > 0) {\r\n            for (let i = 0; i < n + 1; ++i) {\r\n                let currentX = (leftOffsetVal) + (i * step)\r\n                const dt = createFaceWithSquare(\r\n                    [currentX - r, h1, z],\r\n                    [currentX + r, h1, z],\r\n                    [currentX + r, h2, z],\r\n                    [currentX - r, h2, z],\r\n                    colorRoom,\r\n                    white1,\r\n                    .5\r\n                )\r\n                v.push(...dt.vArr)\r\n                c.push(...dt.cArr)\r\n                u.push(...dt.uArr)\r\n                v.push(\r\n                    ...createFace(\r\n                        [currentX - r, h0, 1.8],\r\n                        [currentX + r, h0, 1.8],\r\n                        [currentX + r, h1, z],\r\n                        [currentX - r, h1, z],\r\n                    )\r\n                )\r\n                u.push(...uv6)\r\n                v.push(\r\n                    ...createFace(\r\n                        [currentX - r, h0, 1.8],\r\n                        [currentX - r, h1, z],\r\n                        [currentX - r, h2, z],\r\n                        [currentX - r, h2, 1.8],\r\n                    )\r\n                )\r\n                u.push(...uv6)\r\n                v.push(\r\n                    ...createFace(\r\n                        [currentX + r, h1, z],\r\n                        [currentX + r, h0, 1.8],\r\n                        [currentX + r, h2, 1.8],\r\n                        [currentX + r, h2, z],\r\n                    )\r\n                )\r\n                u.push(...uv6)\r\n                c.push(...white6)\r\n                c.push(...white6)\r\n                c.push(...white6)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /** bottom items */\r\n    if (segment === 'full' || segment === 'bottom') {\r\n        {\r\n            //let offset = 30\r\n            //let offset = 8\r\n            const leftOffsetVal = leftOffset ? 30 : 8\r\n            const rightOffsetVal = rightOffset ? 30 : 8\r\n            const n = Math.floor((l - (leftOffsetVal + rightOffsetVal)) / 20)\r\n\r\n            const r = 3\r\n            const h2 = 21\r\n            //const h1 = 83\r\n            const h0 = 8.7\r\n            let step = (l - (leftOffsetVal + rightOffsetVal)) / n\r\n            if (n > 0) {\r\n                for (let i = 0; i < n + 1; ++i) {\r\n                    let currentX = leftOffsetVal + (i * step)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r + 2, h0, 15],\r\n                            [currentX + r - 2, h0, 15],\r\n                            [currentX + r, h2, 16.5],\r\n                            [currentX - r, h2, 16.5],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r + 2 - 1.5, h0, 10],\r\n                            [currentX - r + 2, h0, 15],\r\n                            [currentX - r, h2, 16.5],\r\n                            [currentX - r - 1.5, h2, 10],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX + r - 2, h0, 15],\r\n                            [currentX + r - 2 + 1.5, h0, 10],\r\n                            [currentX + r + 1.5, h2, 10],\r\n                            [currentX + r, h2, 16.5],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n\r\n\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r, h0, 14.5],\r\n                            [currentX + r, h0, 14.5],\r\n                            [currentX + r + 3, h2, 16],\r\n                            [currentX - r - 3, h2, 16],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n\r\n\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r - 1, h0, 11],\r\n                            [currentX - r, h0, 14.5],\r\n                            [currentX - r - 3, h2, 16],\r\n                            [currentX - r - 3 - 1, h2, 11],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n\r\n\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX + r, h0, 14.5],\r\n                            [currentX + r + 1, h0, 11],\r\n                            [currentX + r + 3 + 1, h2, 11],\r\n                            [currentX + r + 3, h2, 16],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                }\r\n            }\r\n        }\r\n\r\n        /** bottom items */\r\n        {\r\n            //let offset = 19\r\n            //let offset = 2\r\n            const leftOffsetVal = leftOffset ? 22 : 2\r\n            const rightOffsetVal = rightOffset ? 22 : 2\r\n            const n = Math.floor((l - (leftOffsetVal + rightOffsetVal)) / 10)\r\n\r\n            const r = 1\r\n            const h2 = 8.3\r\n            const h0 = 0.6\r\n            let step = (l - (leftOffsetVal + rightOffsetVal)) / n\r\n            if (n > 0) {\r\n                for (let i = 0; i < n + 1; ++i) {\r\n                    let currentX = leftOffsetVal + (i * step)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r, h0, 18.5],\r\n                            [currentX + r, h0, 18.5],\r\n                            [currentX + r, h2, 18],\r\n                            [currentX - r, h2, 18],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX - r, h0, 11],\r\n                            [currentX - r, h0, 18.5],\r\n                            [currentX - r, h2, 18],\r\n                            [currentX - r, h2, 11],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                    v.push(\r\n                        ...createFace(\r\n                            [currentX + r, h0, 18.5],\r\n                            [currentX + r, h0, 11],\r\n                            [currentX + r, h2, 11],\r\n                            [currentX + r, h2, 18],\r\n                        )\r\n                    )\r\n                    u.push(...uv6)\r\n                    c.push(...white6)\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return { v, c, b, u }\r\n}","// import * as THREE from 'three'\r\nimport { createFace, rotateArrY, angleFromCoords, translateArr} from '../../../helpers/geomHelpers'\r\n\r\n//let pos = null\r\nconst white1 = [1, 1, 1]\r\nconst white6 = [\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n]\r\nconst black1 = [0, 0, 0]\r\nconst black6 = [\r\n    ...black1,\r\n    ...black1,\r\n    ...black1,\r\n    ...black1,\r\n    ...black1,\r\n    ...black1,\r\n]\r\n\r\n\r\nconst uv6 = [\r\n    0, 0, \r\n    1, 0, \r\n    1, 1,\r\n    0, 0,\r\n    1, 1,\r\n    0, 1\r\n]\r\n\r\nlet leftPr = null\r\nlet rightPr = null\r\nconst pos = [0, -28.033300399780273, 18.110000610351562, 0, 24.523099899291992, 16.341800689697266, 0, 26.22130012512207, 15.079400062561035, 0, 73.4574966430664, 15.079400062561035, 0, 89.42109680175781, 30.165700912475586, 0, 108.39409637451172, 30.165700912475586, ]\r\n\r\nexport const createOuterWall = (dataWall) => {\r\n    if (!leftPr) {\r\n        leftPr = [...pos]\r\n        rotateArrY(leftPr, -Math.PI / 4)\r\n        rightPr = [...pos]\r\n        rotateArrY(rightPr, Math.PI / 4)\r\n    }\r\n\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n\r\n    const v2 = []\r\n    const c2 = []\r\n    const u2 = []\r\n\r\n    const b = []\r\n\r\n\r\n    const lX = dataWall.p1[0] - dataWall.p0[0]\r\n    const lZ = dataWall.p0[1] - dataWall.p1[1]\r\n\r\n    const l = Math.sqrt(lX * lX + lZ * lZ)\r\n    for (let i = 3; i < pos.length; i += 3) {\r\n        v.push(\r\n            ...createFace(\r\n                [leftPr[i - 3], leftPr[i - 2], leftPr[i - 1]],\r\n                [rightPr[i - 3] + l, rightPr[i - 2], rightPr[i - 1]],\r\n                [rightPr[i] + l, rightPr[i + 1], rightPr[i + 2]],\r\n                [leftPr[i], leftPr[i + 1], leftPr[i + 2]],\r\n            )\r\n        )\r\n        u.push(...uv6)\r\n        c.push(...white6)\r\n        if (i === 3) {\r\n            b.push(\r\n                ...createFace(\r\n                    [leftPr[i - 3] - 2, 0, leftPr[i - 1] + 2],\r\n                    [rightPr[i - 3] + l + 2, 0, rightPr[i - 1] + 2],\r\n                    [rightPr[i] + l + 2, 30, rightPr[i + 2] + 2],\r\n                    [leftPr[i] - 2, 30, leftPr[i + 2] + 2],\r\n                )\r\n            )\r\n        }\r\n\r\n        //v2.push(\r\n            // ...createFace(\r\n            //     [l + 6, 0, 0],\r\n            //     [-6, 0, 0],\r\n            //     [-6, 120, 0],\r\n            //     [l + 6, 120, 0],\r\n            // )\r\n            // ...createFace(\r\n            //     [l + 30, 0, 0],\r\n            //     [-30, 0, 0],\r\n            //     [-30, 120, 0],\r\n            //     [l + 30, 120, 0],\r\n            // )\r\n        //)\r\n        //u2.push(...uv6)\r\n        //c2.push(...black6)\r\n\r\n    }\r\n\r\n    const angle = angleFromCoords(lX, lZ)\r\n\r\n    rotateArrY(v, angle)\r\n    translateArr(v, dataWall.p0[0], -62, dataWall.p0[1])\r\n\r\n    rotateArrY(b, angle)\r\n    translateArr(b, dataWall.p0[0], -62, dataWall.p0[1])\r\n\r\n    rotateArrY(v2, angle)\r\n    translateArr(v2, dataWall.p0[0], -62, dataWall.p0[1])\r\n\r\n    return {\r\n        v, c, u,\r\n        v2, c2, u2,\r\n        b,\r\n    }\r\n}\r\n\r\n\r\n","import * as THREE from \"three\";\r\n\r\nlet material = null\r\n\r\nexport const createMeshFromBuffer = ({\r\n    v,\r\n    c = null,\r\n    mat = null,\r\n    u = null,\r\n}) => {\r\n    const g = new THREE.BufferGeometry()\r\n\r\n    const vertices = new Float32Array(v)\r\n    g.setAttribute('position', new THREE.BufferAttribute(vertices, 3))\r\n\r\n    if (c) {\r\n        const colors = new Float32Array(c)\r\n        g.setAttribute('color', new THREE.BufferAttribute(colors, 3))\r\n    }\r\n\r\n    if (u) {\r\n        const uv = new Float32Array(u)\r\n        g.setAttribute('uv', new THREE.BufferAttribute(uv, 2))\r\n    }\r\n\r\n    g.computeVertexNormals()\r\n\r\n\r\n    if (!mat && !material) {\r\n        material = new THREE.MeshPhongMaterial({ color: 0xFFFFFF, vertexColors: true })\r\n    }\r\n    const materialToUse = mat || material\r\n\r\n    return new THREE.Mesh(g, materialToUse)\r\n}\r\n\r\n","const minS = 250\r\n//const S1 = 500\r\nconst S2 = 3000\r\nconst S1 = 3000\r\n//const S2 = 2000\r\n//const S2 = 1500\r\n\r\n\r\nlet count = 0\r\nexport const getId = () => {\r\n    ++count\r\n    return count\r\n}\r\n\r\n\r\n\r\n\r\nexport const roomStart = {\r\n    id: getId(),\r\n    walls: {\r\n        'n': { id: getId(), p0: [0, 0], p1: [S1, 0] },\r\n        'e': { id: getId(), p0: [S1, 0], p1: [S1, S2] },\r\n        's': { id: getId(), p0: [0, S2], p1: [S1, S2] },\r\n        'w': { id: getId(), p0: [0, 0], p1: [0, S2] },\r\n    }\r\n}\r\n\r\n\r\nexport const tryToDivideRoom = (roomData) => {\r\n    const { walls } = roomData\r\n    let isXBig = false\r\n    let isZBig = false\r\n    let divideAxis = null\r\n\r\n    const lX = walls['s'].p1[0] - walls['s'].p0[0]\r\n    const lZ = walls['e'].p1[1] - walls['e'].p0[1]\r\n\r\n    if (lX > minS) {\r\n        isXBig = true\r\n        divideAxis = 'x'\r\n    }\r\n\r\n    if (lZ > minS) {\r\n        isZBig = true\r\n        divideAxis = 'z'\r\n    }\r\n    \r\n    if (isXBig && isZBig) {\r\n        divideAxis = Math.random() < .5 ? 'x' : 'z'\r\n    }\r\n\r\n    if (!divideAxis) {\r\n        return null\r\n    }\r\n\r\n    const newRooms = []\r\n    if (divideAxis === 'x') {\r\n        const newX = (walls['s'].p1[0] - walls['s'].p0[0]) * (0.3 + Math.random() * .4) + walls['s'].p0[0]\r\n        newRooms.push(\r\n            {\r\n                id: getId(),\r\n                walls: {\r\n                    'n': {\r\n                        id: getId(),\r\n                        p0: [...walls['n'].p0],\r\n                        p1: [newX, walls['n'].p1[1]]\r\n                    },\r\n                    'e': {\r\n                        id: getId(),\r\n                        p0: [newX, walls['e'].p0[1]],\r\n                        p1: [newX, walls['e'].p1[1]]\r\n                    },\r\n                    's': {\r\n                        id: getId(),\r\n                        p0: [...walls['s'].p0],\r\n                        p1: [newX, walls['s'].p1[1]]\r\n                    },\r\n                    'w': {\r\n                        id: getId(),\r\n                        p0: [...walls['w'].p0],\r\n                        p1: [...walls['w'].p1]\r\n                    },\r\n                }\r\n            },\r\n            {\r\n                id: getId(),\r\n                walls: {\r\n                    'n': {\r\n                        id: getId(),\r\n                        p0: [newX, walls['n'].p0[1]],\r\n                        p1: [...walls['n'].p1]\r\n                    },\r\n                    'e': {\r\n                        id: getId(),\r\n                        p0: [...walls['e'].p0],\r\n                        p1: [...walls['e'].p1]\r\n                    },\r\n                    's': {\r\n                        id: getId(),\r\n                        p0: [newX, walls['s'].p0[1]],\r\n                        p1: [...walls['s'].p1]\r\n                    },\r\n                    'w': {\r\n                        id: getId(),\r\n                        p0: [newX, walls['w'].p0[1]],\r\n                        p1: [newX, walls['w'].p1[1]]\r\n                    },\r\n                }\r\n            },\r\n        )\r\n    }\r\n\r\n    if (divideAxis === 'z') {\r\n        const newZ = (walls['e'].p1[1] - walls['e'].p0[1]) * (0.3 + Math.random() * .4) + walls['e'].p0[1]\r\n        newRooms.push(\r\n            {\r\n                id: getId(),\r\n                walls: {\r\n                    'n': {\r\n                        id: getId(),\r\n                        p0: [...walls['n'].p0],\r\n                        p1: [...walls['n'].p1]\r\n                    },\r\n                    'e': {\r\n                        id: getId(),\r\n                        p0: [...walls['e'].p0],\r\n                        p1: [walls['e'].p1[0], newZ]\r\n                    },\r\n                    's': {\r\n                        id: getId(),\r\n                        p0: [walls['s'].p0[0], newZ],\r\n                        p1: [walls['s'].p1[0], newZ]\r\n                    },\r\n                    'w': {\r\n                        id: getId(),\r\n                        p0: [...walls['w'].p0],\r\n                        p1: [walls['w'].p0[0], newZ]\r\n                    },\r\n                }\r\n            },\r\n            {\r\n                id: getId(),\r\n                walls: {\r\n                    'n': {\r\n                        id: getId(),\r\n                        p0: [walls['n'].p0[0], newZ],\r\n                        p1: [walls['n'].p1[0], newZ]\r\n                    },\r\n                    'e': {\r\n                        id: getId(),\r\n                        p0: [walls['e'].p0[0], newZ],\r\n                        p1: [...walls['e'].p1]\r\n                    },\r\n                    's': {\r\n                        id: getId(),\r\n                        p0: [...walls['s'].p0],\r\n                        p1: [...walls['s'].p1]\r\n                    },\r\n                    'w': {\r\n                        id: getId(),\r\n                        p0: [walls['w'].p0[0], newZ],\r\n                        p1: [...walls['w'].p1]\r\n                    },\r\n                }\r\n            },\r\n\r\n        )\r\n    }\r\n\r\n    return newRooms\r\n}","import {tryToDivideRoom, roomStart, getId} from './town2TryToDivide'\r\nconst DOOR_SIZE = 30\r\nconst DOOR_SIZE_FULL = 60\r\n\r\nexport const createTown2Scheme = () => {\r\n    const arr = [roomStart]\r\n    let resultArr = null\r\n    const iterate = (arr) => {\r\n        for (let i = 0; i < arr.length; ++i) {\r\n            const lX = arr[i].walls['s'].p1[0] - arr[i].walls['s'].p0[0]\r\n            const lZ = arr[i].walls['e'].p1[1] - arr[i].walls['e'].p0[1]\r\n\r\n            if (lX < 800 && lZ < 800 && Math.random() < .5) {\r\n                arr[i].notDivide = true\r\n            }\r\n\r\n            if (arr[i].notDivide) {\r\n                continue;\r\n            }\r\n\r\n\r\n            const newDataRooms = tryToDivideRoom(arr[i])\r\n            if (!newDataRooms) {\r\n                continue\r\n            }\r\n            const newArr = arr.filter(item => item.id !== arr[i].id)\r\n            newArr.push(...newDataRooms)\r\n            resultArr = newArr\r\n            return void iterate(newArr)\r\n        }\r\n    }\r\n    iterate(arr)\r\n\r\n    /** doors */\r\n    for (let i = 0; i < resultArr.length; ++i) {\r\n        const sData = resultArr[i].walls['s']\r\n        const eData = resultArr[i].walls['e']\r\n        for (let j = 0; j < resultArr.length; ++j) {\r\n            if (resultArr[i].id === resultArr[j].id) {\r\n                continue;\r\n            }\r\n\r\n            const nData = resultArr[j].walls['n']\r\n\r\n            const xx = [Math.max(sData.p0[0], nData.p0[0]), Math.min(sData.p1[0], nData.p1[0])]\r\n            if (\r\n                nData.p0[1] === sData.p0[1] &&\r\n                xx[0] >= sData.p0[0] &&\r\n                xx[0] <= sData.p1[0] &&\r\n                xx[1] >= sData.p0[0] &&\r\n                xx[1] <= sData.p1[0] &&\r\n\r\n                xx[0] >= nData.p0[0] &&\r\n                xx[0] <= nData.p1[0] &&\r\n                xx[1] >= nData.p0[0] &&\r\n                xx[1] <= nData.p1[0]\r\n            ) {\r\n                const d = xx[1] - xx[0]\r\n                if (d > DOOR_SIZE_FULL) {\r\n                    const doorData = {\r\n                        id: getId(),\r\n                        x0: xx[0] + (d / 2) - DOOR_SIZE * .5,\r\n                        x1: xx[0] + (d / 2) + DOOR_SIZE * .5,\r\n                    }\r\n                    if (!sData.doors) {\r\n                        sData.doors = []\r\n                    }\r\n                    sData.doors.push(doorData)\r\n                    if (!nData.doors) {\r\n                        nData.doors = []\r\n                    }\r\n                    nData.doors.push(doorData)\r\n                }\r\n            }\r\n\r\n            const wData = resultArr[j].walls['w']\r\n\r\n            const zz = [Math.max(wData.p0[1], eData.p0[1]), Math.min(wData.p1[1], eData.p1[1])]\r\n            if (\r\n                wData.p0[0] === eData.p0[0] &&\r\n                zz[0] >= eData.p0[1] &&\r\n                zz[0] <= eData.p1[1] &&\r\n                zz[1] >= eData.p0[1] &&\r\n                zz[1] <= eData.p1[1] &&\r\n\r\n                zz[0] >= wData.p0[1] &&\r\n                zz[0] <= wData.p1[1] &&\r\n                zz[1] >= wData.p0[1] &&\r\n                zz[1] <= wData.p1[1]\r\n            ) {\r\n                const d = zz[1] - zz[0]\r\n                if (d > DOOR_SIZE_FULL) {\r\n                    const id = Math.random() * 100000000000000\r\n                    if (!eData.doors) {\r\n                        eData.doors = []\r\n                    }\r\n                    eData.doors.push({\r\n                        id,\r\n                        z0: zz[0] + (d / 2) - DOOR_SIZE * .5,\r\n                        z1: zz[0] + (d / 2) + DOOR_SIZE * .5,\r\n                    })\r\n                    if (!wData.doors) {\r\n                        wData.doors = []\r\n                    }\r\n                    wData.doors.push({\r\n                        id,\r\n                        z0: zz[0] + (d / 2) - DOOR_SIZE * .5,\r\n                        z1: zz[0] + (d / 2) + DOOR_SIZE * .5,\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /** create outer doors */\r\n    const outerDoors = []\r\n    for (let i = 0; i < resultArr.length; ++i) {\r\n        const sData = resultArr[i].walls['n']\r\n        if (sData.p0[1] === 0) {\r\n            const xx = [sData.p0[0], sData.p1[0]]\r\n            const d = xx[1] - xx[0]\r\n            if (d > DOOR_SIZE_FULL) {\r\n                const doorData = {\r\n                    id: getId(),\r\n                    x0: xx[0] + (d / 2) - DOOR_SIZE * .5,\r\n                    x1: xx[0] + (d / 2) + DOOR_SIZE * .5,\r\n                    keyMode: 'bigDoor',\r\n                }\r\n                if (!sData.doors) {\r\n                    sData.doors = []\r\n                }\r\n                sData.doors.push(doorData)\r\n                outerDoors.push(doorData)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /** divide walls by doors */\r\n    for (let i = 0; i < resultArr.length; ++i) {\r\n        const nData = resultArr[i].walls['n']\r\n        if (nData.doors) {\r\n            nData.doors.sort((a, b) => a.x0 - b.x0)\r\n            nData.wallSegments = []\r\n            for (let j = 0; j < nData.doors.length; ++j) {\r\n                if (j === 0) {\r\n                    nData.wallSegments.push({\r\n                        p0: [...nData.p0],\r\n                        p1: [nData.doors[j].x0, nData.p0[1]],\r\n                    })\r\n                }\r\n                if (nData.doors[j - 1]) {\r\n                    nData.wallSegments.push({\r\n                        p0: [nData.doors[j - 1].x1, nData.p0[1]],\r\n                        p1: [nData.doors[j].x0, nData.p0[1]],\r\n                    })\r\n                }\r\n                if (j === nData.doors.length - 1) {\r\n                    nData.wallSegments.push({\r\n                        p0: [nData.doors[nData.doors.length - 1].x1, nData.p0[1]],\r\n                        p1: [...nData.p1],\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        const sData = resultArr[i].walls['s']\r\n        if (sData.doors) {\r\n            sData.doors.sort((a, b) => a.x0 - b.x0)\r\n            sData.wallSegments = []\r\n            for (let j = sData.doors.length - 1; j > -1; --j) {\r\n                if (j === sData.doors.length - 1) {\r\n                     sData.wallSegments.push({\r\n                         p0: [...sData.p1],\r\n                         p1: [sData.doors[j].x1, sData.p1[1]],\r\n                     })\r\n                }\r\n                if (sData.doors[j - 1]) {\r\n                    sData.wallSegments.push({\r\n                        p0: [sData.doors[j].x0, sData.p1[1]],\r\n                        p1: [sData.doors[j - 1].x1, sData.p1[1]],\r\n                    })\r\n                }\r\n                if (j === 0) {\r\n                   sData.wallSegments.push({\r\n                       p0: [sData.doors[j].x0, sData.p1[1]],\r\n                       p1: [...sData.p0],\r\n                   })\r\n                }\r\n            }\r\n        }\r\n        const eData = resultArr[i].walls['e']\r\n        if (eData.doors) {\r\n            eData.doors.sort((a, b) => a.z0 - b.z0)\r\n            eData.wallSegments = []\r\n            for (let j = 0; j < eData.doors.length; ++j) {\r\n                if (j === 0) {\r\n                    eData.wallSegments.push({\r\n                        p0: [...eData.p0],\r\n                        p1: [eData.p0[0], eData.doors[j].z0],\r\n                    })\r\n                }\r\n                if (eData.doors[j - 1]) {\r\n                    eData.wallSegments.push({\r\n                        p0: [eData.p0[0], eData.doors[j - 1].z1],\r\n                        p1: [eData.p0[0], eData.doors[j].z0],\r\n                    })\r\n                }\r\n                if (j === eData.doors.length - 1) {\r\n                    eData.wallSegments.push({\r\n                        p0: [eData.p0[0], eData.doors[j].z1],\r\n                        p1: [...eData.p1],\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        const wData = resultArr[i].walls['w']\r\n        if (wData.doors) {\r\n            wData.doors.sort((a, b) => a.z0 - b.z0)\r\n            wData.wallSegments = []\r\n            for (let j = wData.doors.length - 1; j > -1; --j) {\r\n                if (j === wData.doors.length - 1) {\r\n                    wData.wallSegments.push({\r\n                        p0: [...wData.p1],\r\n                        p1: [wData.p1[0], wData.doors[j].z1],\r\n                    })\r\n                }\r\n                if (wData.doors[j - 1]) {\r\n                    wData.wallSegments.push({\r\n                        p0: [wData.p1[0], wData.doors[j].z0],\r\n                        p1: [wData.p1[0], wData.doors[j- 1].z1],\r\n                    })\r\n                }\r\n                if (j === 0) {\r\n                    wData.wallSegments.push({\r\n                        p0: [wData.p1[0], wData.doors[j].z0],\r\n                        p1: [...wData.p0],\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const floors = []\r\n\r\n    /** prepare ResultArr to make walls */\r\n    const arrWallsPrepared = []\r\n    for (let i = 0; i < resultArr.length; ++i) {\r\n        //const colorRoom = [Math.random(), Math.random(), Math.random()]\r\n        //const colorRoom = [0, 0, 0]\r\n        const colorRoom = [Math.random() * .4, Math.random() * .4, Math.random() * .4]\r\n\r\n        const nData = resultArr[i].walls['n']\r\n        {\r\n            const data = {\r\n                p0: nData.p0,\r\n                p1: nData.p1,\r\n                arr: [],\r\n                colorRoom,\r\n            }\r\n            if (nData.wallSegments) {\r\n                for (let i = 0; i < nData.wallSegments.length; ++i) {\r\n                    data.arr.push(nData.wallSegments[i])\r\n                }\r\n            }\r\n            arrWallsPrepared.push(data)\r\n        }\r\n        const sData = resultArr[i].walls['s']\r\n        {\r\n            const data = {\r\n                p0: sData.p1,\r\n                p1: sData.p0,\r\n                arr: [],\r\n                colorRoom,\r\n            }\r\n            if (sData.wallSegments) {\r\n                for (let i = 0; i < sData.wallSegments.length; ++i) {\r\n                    data.arr.push(sData.wallSegments[i])\r\n                }\r\n            }\r\n            arrWallsPrepared.push(data)\r\n        }\r\n        const eData = resultArr[i].walls['e']\r\n        {\r\n            const data = {\r\n                 p0: eData.p0,\r\n                 p1: eData.p1,\r\n                 arr: [],\r\n                colorRoom,\r\n            }\r\n            if (eData.wallSegments) {\r\n                for (let i = 0; i < eData.wallSegments.length; ++i) {\r\n                    data.arr.push(eData.wallSegments[i])\r\n                }\r\n            }\r\n            arrWallsPrepared.push(data)\r\n        }\r\n        const wData = resultArr[i].walls['w']\r\n        {\r\n            const data = {\r\n                p0: wData.p1,\r\n                p1: wData.p0,\r\n                arr: [],\r\n                colorRoom,\r\n            }\r\n            if (wData.wallSegments) {\r\n                for (let i = 0; i < wData.wallSegments.length; ++i) {\r\n                    data.arr.push(wData.wallSegments[i])\r\n                }\r\n            }\r\n            arrWallsPrepared.push(data)\r\n        }\r\n\r\n        const floorData = { \r\n            p0: sData.p0,\r\n            p1: sData.p1,\r\n            p2: nData.p1,\r\n            p3: nData.p0,\r\n            colorRoom,\r\n        }\r\n        floors.push(floorData)    \r\n    }\r\n\r\n    /** CREATE DOORS DATA */\r\n    const doors = {}\r\n    for (let i = 0; i < resultArr.length; ++i) {\r\n        for (let key in resultArr[i].walls) {\r\n            if (resultArr[i].walls[key].doors) {\r\n                for (let j = 0; j < resultArr[i].walls[key].doors.length; ++j) {\r\n                    let x = null, z = null\r\n                    if (key === 'n' || key === 's') {\r\n                        z = resultArr[i].walls[key].p0[1]\r\n                    }\r\n                    if (key === 'e' || key === 'w') {\r\n                        x = resultArr[i].walls[key].p0[0]\r\n                    }\r\n\r\n                    doors[resultArr[i].walls[key].doors[j].id] = {\r\n                        ...resultArr[i].walls[key].doors[j],\r\n                        dir: key,\r\n                        x, z,\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (let key in doors) {\r\n        if (doors[key].x0) {\r\n            doors[key].l = doors[key].x1 - doors[key].x0\r\n            doors[key].p0 = [doors[key].x0, doors[key].z]\r\n            doors[key].p1 = [doors[key].x1, doors[key].z]\r\n            doors[key].angle = 0\r\n        } else {\r\n            doors[key].l = doors[key].z1 - doors[key].z0\r\n            doors[key].p0 = [doors[key].x, doors[key].z0]\r\n            doors[key].p1 = [doors[key].x, doors[key].z1]\r\n            doors[key].angle = -Math.PI / 2\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** CREATE OUTER WALLS DATA **/\r\n    const outerWallsData = JSON.parse(JSON.stringify(roomStart))\r\n    const arrOuterWalls = []\r\n    for (let key in outerWallsData.walls) {\r\n        if (key === 'n') {\r\n            outerDoors.sort((a, b) => a.x0 - b.x0)\r\n            const doorOffset = 10\r\n            for (let i = outerDoors.length - 1; i > -1; --i) {\r\n                if (i === outerDoors.length - 1) {\r\n                    arrOuterWalls.push({\r\n                        p0: [...outerWallsData.walls[key].p1],\r\n                        p1: [outerDoors[i].x1 + doorOffset, outerWallsData.walls[key].p1[1]]\r\n                    })\r\n                }\r\n                if (outerDoors[i - 1]) {\r\n                    arrOuterWalls.push({\r\n                        p0: [outerDoors[i].x0 - doorOffset, outerWallsData.walls[key].p1[1]],\r\n                        p1: [outerDoors[i - 1].x1 + doorOffset, outerWallsData.walls[key].p1[1]]\r\n                    })\r\n                }\r\n                if (i === 0) {\r\n                    arrOuterWalls.push({\r\n                        p0: [outerDoors[i].x0 - doorOffset, outerWallsData.walls[key].p1[1]],\r\n                        p1: [...outerWallsData.walls[key].p0]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        if (key === 's') {\r\n            arrOuterWalls.push({ p0: outerWallsData.walls[key].p0, p1: outerWallsData.walls[key].p1 })\r\n        }\r\n        if (key === 'e') {\r\n            arrOuterWalls.push({ p0: outerWallsData.walls[key].p1, p1: outerWallsData.walls[key].p0 })\r\n        }\r\n        if (key === 'w') {\r\n            arrOuterWalls.push({ p0: outerWallsData.walls[key].p0, p1: outerWallsData.walls[key].p1 })\r\n        }\r\n    }\r\n\r\n\r\n    return {\r\n        arrOuterWalls,\r\n        doors,\r\n        arrWallsPrepared,\r\n        floors,\r\n        roomsArr: resultArr,\r\n    }\r\n}","\r\nimport { createFace } from '../../../helpers/geomHelpers'\r\nconst uv6 = [0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1]\r\n\r\nconst y0 = -61\r\nconst y00 = -64\r\n\r\n\r\n\r\nconst white1 = [1, 1, 1]\r\nconst white6 = [\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n]\r\n\r\nexport const createFloor = (data, colorW, colorB) => {\r\n\r\n    data.colorRoom[0] *= 1.2\r\n    data.colorRoom[1] *= 1.2\r\n    data.colorRoom[2] *= 1.2\r\n\r\n    const colorRoom6 = [\r\n        ...data.colorRoom, ...data.colorRoom, ...data.colorRoom,\r\n        ...data.colorRoom, ...data.colorRoom, ...data.colorRoom,\r\n    ]\r\n\r\n    const colorW6 = [...colorW, ...colorW, ...colorW, ...colorW, ...colorW, ...colorW]\r\n    const colorB6 = [...colorB, ...colorB, ...colorB, ...colorB, ...colorB, ...colorB]\r\n\r\n    const v = []\r\n    const c = []\r\n    const b = []\r\n    const u = []\r\n\r\n\r\n    const v2 = []\r\n    const c2 = []\r\n    const u2 = []\r\n\r\n\r\n    const offset1 = 30\r\n    const offset0 = 30 + 5\r\n\r\n    const lX = (data.p1[0] - offset0) - (data.p0[0] + offset0)\r\n    const lZ = (data.p2[1] + offset0) - (data.p1[1] - offset0) \r\n\r\n    const nX = Math.ceil(Math.abs(lX / 100))\r\n    const nZ = Math.ceil(Math.abs(lZ / 100))\r\n\r\n    const stepX = lX / nX\r\n    const stepZ = lZ / nZ\r\n\r\n    for (let i = 0; i < nX; ++i) {\r\n        for (let j = 0; j < nZ; ++j) {\r\n            v.push(\r\n                ...createFace(\r\n                    [data.p0[0] + offset0 + i * stepX,          y0,     data.p0[1] - offset0 + (j) * stepZ],\r\n                    [data.p0[0] + offset0 + (i + 1) * stepX,    y0,     data.p0[1] - offset0 + (j) * stepZ],\r\n                    [data.p0[0] + offset0 + (i + 1) * stepX,    y0,     data.p0[1] - offset0 + (j + 1) * stepZ],\r\n                    [data.p0[0] + offset0 + i * stepX,          y0,     data.p0[1] - offset0 + (j + 1) * stepZ],\r\n                )\r\n            )\r\n            c.push(...colorW6)\r\n            //c2.push(...colorB6)\r\n            u.push(...uv6)\r\n        }\r\n    }\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p0[0] + offset1, y0, data.p0[1] - offset1],\r\n            [data.p0[0] + offset0, y0, data.p0[1] - offset0],\r\n            [data.p3[0] + offset0, y0, data.p3[1] + offset0],\r\n            [data.p3[0] + offset1, y0, data.p3[1] + offset1],\r\n        )\r\n    )\r\n    c.push(...colorRoom6)\r\n    u.push(...uv6)\r\n    v2.push(\r\n        ...createFace(\r\n            [data.p0[0] + offset1, y00, data.p0[1] - offset1],\r\n            [data.p0[0] + offset0, y00, data.p0[1] - offset0],\r\n            [data.p3[0] + offset0, y00, data.p3[1] + offset0],\r\n            [data.p3[0] + offset1, y00, data.p3[1] + offset1],\r\n        )\r\n    )\r\n    c2.push(...colorW6)\r\n    u2.push(...uv6)\r\n\r\n\r\n\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p0[0] + offset1, y0, data.p0[1] - offset1],\r\n            [data.p1[0] - offset1, y0, data.p1[1] - offset1],\r\n            [data.p1[0] - offset0, y0, data.p1[1] - offset0],\r\n            [data.p0[0] + offset0, y0, data.p0[1] - offset0],\r\n        )\r\n    )\r\n    c.push(...colorRoom6)\r\n    u.push(...uv6)\r\n    v2.push(\r\n        ...createFace(\r\n            [data.p0[0] + offset1, y00, data.p0[1] - offset1],\r\n            [data.p1[0] - offset1, y00, data.p1[1] - offset1],\r\n            [data.p1[0] - offset0, y00, data.p1[1] - offset0],\r\n            [data.p0[0] + offset0, y00, data.p0[1] - offset0],\r\n        )\r\n    )\r\n    c2.push(...colorW6)\r\n    u2.push(...uv6)\r\n\r\n\r\n\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p3[0] + offset0, y0, data.p3[1] + offset0],\r\n            [data.p2[0] - offset0, y0, data.p2[1] + offset0],\r\n            [data.p2[0] - offset1, y0, data.p2[1] + offset1],\r\n            [data.p3[0] + offset1, y0, data.p3[1] + offset1],\r\n        )\r\n    )\r\n    c.push(...colorRoom6)\r\n    u.push(...uv6)\r\n    v2.push(\r\n        ...createFace(\r\n            [data.p3[0] + offset0, y00, data.p3[1] + offset0],\r\n            [data.p2[0] - offset0, y00, data.p2[1] + offset0],\r\n            [data.p2[0] - offset1, y00, data.p2[1] + offset1],\r\n            [data.p3[0] + offset1, y00, data.p3[1] + offset1],\r\n        )\r\n    )\r\n    c2.push(...colorW6)\r\n    u2.push(...uv6)\r\n\r\n\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p1[0] - offset0, y0, data.p1[1] - offset0],\r\n            [data.p1[0] - offset1, y0, data.p1[1] - offset1],\r\n            [data.p2[0] - offset1, y0, data.p2[1] + offset1],\r\n            [data.p2[0] - offset0, y0, data.p3[1] + offset0],\r\n        )\r\n    )\r\n    c.push(...colorRoom6)\r\n    u.push(...uv6)\r\n    v2.push(\r\n        ...createFace(\r\n            [data.p1[0] - offset0, y00, data.p1[1] - offset0],\r\n            [data.p1[0] - offset1, y00, data.p1[1] - offset1],\r\n            [data.p2[0] - offset1, y00, data.p2[1] + offset1],\r\n            [data.p2[0] - offset0, y00, data.p3[1] + offset0],\r\n        )\r\n    )\r\n    c2.push(...colorW6)\r\n    u2.push(...uv6)\r\n\r\n\r\n    /** outer white **/\r\n    v.push(\r\n        ...createFace(\r\n            [data.p0[0], y0, data.p0[1]],\r\n            [data.p1[0], y0, data.p1[1]],\r\n            [data.p1[0] - offset1, y0, data.p1[1] - offset1],\r\n            [data.p0[0] + offset1, y0, data.p0[1] - offset1],\r\n        )\r\n    )\r\n    c.push(...white6)\r\n    //c2.push(...colorB6)\r\n    u.push(...uv6)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p1[0] - offset1, y0, data.p1[1] - offset1],\r\n            [data.p1[0], y0, data.p1[1]],\r\n            [data.p2[0], y0, data.p2[1]],\r\n            [data.p2[0] - offset1, y0, data.p2[1] + offset1],\r\n        )\r\n    )\r\n    c.push(...white6)\r\n    //c2.push(...colorB6)\r\n    u.push(...uv6)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [data.p3[0], y0, data.p3[1]],\r\n            [data.p3[0] + offset1, y0, data.p3[1] + offset1],\r\n            [data.p2[0] - offset1, y0, data.p2[1] + offset1],\r\n            [data.p2[0], y0, data.p2[1]],\r\n        )\r\n    )\r\n    c.push(...white6)\r\n    //c2.push(...colorB6)\r\n    u.push(...uv6)\r\n\r\n    v.push(\r\n         ...createFace(\r\n             [data.p0[0], y0, data.p0[1]],\r\n             [data.p0[0] + offset1, y0, data.p0[1] - offset1],\r\n             [data.p3[0] + offset1, y0, data.p2[1] + offset1],\r\n             [data.p3[0], y0, data.p3[1]],\r\n         )\r\n    )\r\n    c.push(...white6)\r\n    //c2.push(...colorB6)\r\n    u.push(...uv6)\r\n\r\n    return { \r\n        v, c, u, \r\n        c2, v2, u2,\r\n        b, \r\n    }\r\n}","import { createWall } from './geometryRoom/geomWall'\r\nimport { createDoorData } from './geometryRoom/geomDoor'\r\nimport { createOuterWall } from './geometryRoom/outerWall'\r\nimport {rotateArrY, translateArr, createFace} from \"../../helpers/geomHelpers\";\r\nimport { createMeshFromBuffer } from '../../helpers/createBufferMesh'\r\nimport { createTown2Scheme } from './town2shemeRooms'\r\nimport { createFloor } from './geometryRoom/geometryFloor'\r\n\r\nconst y0 = -61\r\nconst white1 = [1, 1, 1]\r\nconst white6 = [\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n    ...white1,\r\n]\r\nconst gr1 = [0, 0, 0]\r\nconst gr6 = [\r\n   ...gr1,\r\n   ...gr1,\r\n   ...gr1,\r\n   ...gr1,\r\n   ...gr1,\r\n   ...gr1,\r\n]\r\n\r\n\r\n\r\nexport const createTown2 = (root) => {\r\n    const {\r\n        arrOuterWalls,\r\n        doors,\r\n        arrWallsPrepared,\r\n        floors,\r\n        roomsArr,\r\n    } = createTown2Scheme()\r\n\r\n\r\n    const bigRooms = []\r\n    for (let i = 0; i < roomsArr.length; ++i) {\r\n        if (\r\n            Math.abs(roomsArr[i].walls.n.p1[0] - roomsArr[i].walls.n.p0[0]) > 300 &&\r\n            Math.abs(roomsArr[i].walls.e.p1[1] - roomsArr[i].walls.e.p0[1]) > 300\r\n        ) {\r\n            bigRooms.push(roomsArr[i])\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const v = []\r\n    const c = []\r\n    const b = []\r\n    const u = []\r\n\r\n    const v2 = []\r\n    const c2 = []\r\n    const u2 = []\r\n\r\n    /** ROOMS MESHES */\r\n    for (let i = 0; i < arrWallsPrepared.length; ++i) {\r\n        const dataWall = createWall(arrWallsPrepared[i], root)\r\n        v.push(...dataWall.v)\r\n        c.push(...dataWall.c)\r\n        b.push(...dataWall.b)\r\n        u.push(...dataWall.u)\r\n    }\r\n\r\n    /** DOORS MESH **/\r\n    for (let key in doors) {\r\n        const door = createDoorData(root, null, doors[key].l, doors[key].keyMode || null)\r\n        rotateArrY(door.v,  doors[key].angle)\r\n        translateArr(door.v, doors[key].p0[0], y0, doors[key].p0[1])\r\n        v.push(...door.v)\r\n\r\n        rotateArrY(door.b,  doors[key].angle)\r\n        translateArr(door.b, doors[key].p0[0], y0, doors[key].p0[1])\r\n        b.push(...door.b)\r\n\r\n        u.push(...door.u)\r\n        c.push(...door.c)\r\n\r\n        if (doors[key].dir === 'n' && doors[key].p0[1] === 0) {\r\n            continue;\r\n        }\r\n        v2.push(...door.v)\r\n        c2.push(...door.c)\r\n        u2.push(...door.u)\r\n    }\r\n\r\n\r\n    /** OUTER WALLS MESH */\r\n    for (let i = 0; i < arrOuterWalls.length; ++i) {\r\n        const wall = createOuterWall(arrOuterWalls[i], null)\r\n        v.push(...wall.v)\r\n        c.push(...wall.c)\r\n        b.push(...wall.b)\r\n        u.push(...wall.u)\r\n\r\n        v2.push(...wall.v2)\r\n        c2.push(...wall.c2)\r\n        u2.push(...wall.u2)\r\n    }\r\n\r\n    /** floor */\r\n    for (let i = 0; i < floors.length; ++i) {\r\n        const f = createFloor(floors[i], white1, [0, 1, 0])\r\n        v.push(...f.v)\r\n        c.push(...f.c)\r\n        u.push(...f.u)\r\n\r\n        v2.push(...f.v2)\r\n        c2.push(...f.c2)\r\n        u2.push(...f.u2)\r\n    }\r\n\r\n    /** ceil */\r\n    const h = 30\r\n    for (let i = 0; i < floors.length; ++i) {\r\n        const data = floors[i]\r\n        const lX = (data.p1[0]) - (data.p0[0])\r\n        const lZ = (data.p2[1]) - (data.p1[1]) \r\n    \r\n        const nX = Math.ceil(Math.abs(lX / 100))\r\n        const nZ = Math.ceil(Math.abs(lZ / 100))\r\n    \r\n        const stepX = lX / nX\r\n        const stepZ = lZ / nZ\r\n    \r\n        for (let i = 0; i < nX; ++i) {\r\n            for (let j = 0; j < nZ; ++j) {\r\n                const vertex = createFace(\r\n                    [data.p0[0] + i * stepX,          h,     data.p2[1] - (j) * stepZ],\r\n                    [data.p0[0] + (i + 1) * stepX,    h,     data.p2[1] - (j) * stepZ],\r\n                    [data.p0[0] + (i + 1) * stepX,    h,     data.p2[1] - (j + 1) * stepZ],\r\n                    [data.p0[0] + i * stepX,          h,     data.p2[1] - (j + 1) * stepZ],\r\n                )\r\n                v.push(...vertex)\r\n                c.push(...white6)\r\n                u.push(0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1)\r\n            }\r\n        }\r\n    }\r\n\r\n    const mesh = createMeshFromBuffer({ \r\n        v, \r\n        c, \r\n        u, \r\n        mat: root.materials.iron\r\n    })\r\n    root.studio.addToScene(mesh)\r\n\r\n\r\n    const meshBlack = createMeshFromBuffer({\r\n        v: v2,\r\n        c: c2,\r\n        u: u2,\r\n        mat: root.materials.iron2,\r\n    })\r\n\r\n\r\n    const meshCollision = createMeshFromBuffer({ v: b })\r\n    meshCollision.visible = false\r\n    root.studio.addToScene(meshCollision)\r\n\r\n\r\n    return {\r\n        mesh,\r\n        mCollision: meshCollision,\r\n        roomsArr,\r\n        toNormal: () => {\r\n            root.studio.removeFromScene(meshBlack)\r\n            root.studio.addToScene(mesh)\r\n        },\r\n        toNotWalls: () => {\r\n            root.studio.removeFromScene(mesh)\r\n            root.studio.addToScene(meshBlack)\r\n        },\r\n        getCoordsForFinalBox: (x, z) => {\r\n            let dX = 0\r\n            let dZ = 0\r\n            let currentR = null\r\n            for (let i = 0; i < bigRooms.length; ++i) {\r\n                if (\r\n                    Math.abs(x - bigRooms[i].walls.n.p0[0]) > dX &&\r\n                    Math.abs(z - bigRooms[i].walls.n.p0[1]) > dZ\r\n                ) {\r\n                    currentR = bigRooms[i]\r\n                    dX = Math.abs(x - bigRooms[i].walls.n.p0[0])\r\n                    dZ = Math.abs(z - bigRooms[i].walls.n.p0[1])\r\n                }\r\n            }\r\n\r\n            if (currentR) {\r\n                return {\r\n                    x: currentR.walls.n.p0[0] + (currentR.walls.n.p1[0] - currentR.walls.n.p0[0]) / 2,\r\n                    z: currentR.walls.e.p0[1] + (currentR.walls.e.p1[1] - currentR.walls.e.p0[1]) / 2,\r\n                }\r\n            }\r\n\r\n            return null\r\n        }\r\n    }\r\n}","import * as THREE from 'three'\r\nimport {createTown2} from '../Entities/town/town2'\r\n\r\n\r\nexport const createWorldReal = (root) => {\r\n    const {\r\n        materials,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n    const groundStart = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(10000, 10000),\r\n        materials.floorMat1\r\n    )\r\n    materials.floorMat1.map.repeat.set(180, 180)\r\n\r\n    groundStart.rotation.x = -Math.PI / 2\r\n    groundStart.position.y = -62\r\n\r\n    const t2 = createTown2(root)\r\n\r\n\r\n    console.log(root.assets.endWayModel)\r\n    const centralItem = new THREE.Mesh(\r\n        root.assets.endWayModel.children[0].geometry,\r\n        root.materials.bodyRed,\r\n    )\r\n    centralItem.position.y = -62\r\n\r\n    const centralItemBounds = root.assets.endWayModel.children[1]\r\n    centralItemBounds.visible = false\r\n    centralItem.add(centralItemBounds)\r\n\r\n    const endItemObj = new THREE.Object3D()\r\n    endItemObj.position.set(0, 0, -35)\r\n    centralItem.add(endItemObj)\r\n\r\n\r\n\r\n    return {\r\n        addWorld: () => {\r\n            system_PlayerMoveOnLevel.addItemToPlayerCollision(groundStart)\r\n            system_PlayerMoveOnLevel.addItemToPlayerCollision(t2.mCollision)\r\n            studio.addToScene(groundStart)\r\n        },\r\n        removeWorld: () => {\r\n            system_PlayerMoveOnLevel.removeItemFromPlayerCollision(groundStart)\r\n            studio.removeFromScene(groundStart)\r\n        },\r\n        roomsArr: t2.roomsArr,\r\n        toNormal: () => {\r\n            t2.toNormal()\r\n        },\r\n        toNotWalls: () => {\r\n            t2.toNotWalls()\r\n            root.studio.removeFromScene(groundStart)\r\n        },\r\n        setEndWayPos: (x, y, z) => {\r\n            centralItem.position.x = x\r\n            centralItem.position.y = y\r\n            centralItem.position.z = z\r\n            root.studio.addToScene(centralItem)\r\n        },\r\n        getCoordsForFinalBox: t2.getCoordsForFinalBox,\r\n        centralItemBounds,\r\n        endItemObj,\r\n    }\r\n}\r\n\r\n\r\n","import * as THREE from \"three\";\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst generate = (count, r, s = 1) => {\r\n    const v = []\r\n\r\n    for (let i = 0; i < count; ++i) {\r\n        const radius = Math.random() * r\r\n        const angle = Math.random() * Math.PI * 2\r\n        const angle2 = Math.random() * Math.PI * 2\r\n\r\n        const x = Math.sin(angle) * radius\r\n        const y = Math.sin(angle2) * Math.random() * 50\r\n        const z = Math.cos(angle) * radius\r\n\r\n\r\n        for (let i = 0; i < 3; ++i) {\r\n            v.push(\r\n                x + Math.random() * s,\r\n                y + Math.random() * s,\r\n                z + Math.random() * s,\r\n            )\r\n        }\r\n    }\r\n\r\n    return v\r\n}\r\n\r\n\r\n\r\nconst startWaiter = (time, onWait) => {\r\n    const timer = setTimeout(() => {\r\n        onWait()\r\n    }, time)\r\n\r\n    return () => clearTimeout(timer)\r\n}\r\n\r\n\r\n\r\n\r\nexport const createStatue = (root) => {\r\n    /** mesh */\r\n    const modelSrc = root.assets.bodyModel.children[0]\r\n    const mesh = new THREE.Mesh(modelSrc.geometry, root.materials.body)\r\n    const shadow = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(20, 20),\r\n        root.materials.bodyShadow,\r\n    )\r\n    shadow.rotation.x = -Math.PI/ 2\r\n    shadow.position.y = .1\r\n    shadow.position.z = -.8\r\n    mesh.add(shadow)\r\n    const meshCollision = new THREE.Mesh(\r\n        new THREE.BoxGeometry(10, 140, 10),\r\n        root.materials.bodyShadow,\r\n    )\r\n    mesh.add(meshCollision)\r\n    meshCollision.visible = false\r\n\r\n\r\n\r\n    const arrAppear = [\r\n        generate(mesh.geometry.attributes.position.array.length / 9, 200 * Math.random(), 0),\r\n        generate(mesh.geometry.attributes.position.array.length / 9, 50 * Math.random(), Math.random() + 1),\r\n        generate(mesh.geometry.attributes.position.array.length / 9, 20 * Math.random(), Math.random() + 2),\r\n        [...modelSrc.geometry.attributes.position.array],\r\n    ]\r\n    const arrHide = [\r\n        [...modelSrc.geometry.attributes.position.array],\r\n        generate(mesh.geometry.attributes.position.array.length / 9, 15 * Math.random(), Math.random() + 2),\r\n        generate(mesh.geometry.attributes.position.array.length / 9, 2 * Math.random(), Math.random() + 1),\r\n        generate(mesh.geometry.attributes.position.array.length / 9, Math.random(), 0),\r\n    ]\r\n\r\n\r\n    const startIterate = (key, arr, x, z, onComplete = () => {}) => {\r\n        const TIME_SINGLE_ITERATION = 300\r\n        let tween = null\r\n\r\n        const iterate = (n) => {\r\n            if (!arr[n]) {\r\n                onComplete()\r\n                return;\r\n            }\r\n\r\n            const v = { v : 0 }\r\n            tween = new TWEEN.Tween(v)\r\n                .to({\r\n                    v: 1,\r\n                }, TIME_SINGLE_ITERATION)\r\n                .onUpdate(() => {\r\n                    for (let i = 0; i < mesh.geometry.attributes.position.array.length; ++i) {\r\n                        mesh.geometry.attributes.position.array[i] = v.v * arr[n][i] + (1 - v.v) * arr[n - 1][i]\r\n                    }\r\n                    if (key === 'show' && n === arrAppear.length - 1) {\r\n                        shadow.material.opacity = v.v\r\n                    }\r\n                    if (key === 'hide' && n === 1) {\r\n                        shadow.material.opacity = 1 - v.v\r\n                    }\r\n                    mesh.geometry.attributes.position.needsUpdate = true\r\n                })\r\n                .onComplete(() => {\r\n                    iterate(n + 1)\r\n                })\r\n                .start()\r\n        }\r\n\r\n        iterate(1)\r\n\r\n        setTimeout(() => {\r\n            if (!x && !z) {\r\n                return;\r\n            }\r\n            shadow.material.opacity = 0\r\n            mesh.position.x = x\r\n            mesh.position.z = z\r\n            mesh.rotation.y = Math.random() * Math.PI * 2\r\n        }, 50)\r\n\r\n        return () => {\r\n            tween.stop()\r\n        }\r\n    }\r\n\r\n\r\n    let stopperTween = () => {}\r\n    let inverted = false\r\n\r\n    return {\r\n        m: mesh,\r\n        mCollision: meshCollision,\r\n        update: () => {},\r\n        appear: (x, z) => {\r\n            stopperTween()\r\n            stopperTween = startIterate('show', arrAppear, x, z,() => {})\r\n        },\r\n        hide: () => {\r\n            stopperTween()\r\n            stopperTween = startIterate('hide', arrHide, null, null,() => {})\r\n        },\r\n        invert: () => {\r\n              if (inverted) {\r\n                  mesh.material = root.materials.body\r\n              } else {\r\n                  mesh.material = root.materials.bodyRed\r\n              }\r\n              mesh.material.needsUpdate = true\r\n              inverted = !inverted\r\n        },\r\n        toRed: () => {\r\n            mesh.material = root.materials.bodyRed\r\n            mesh.material.needsUpdate = true\r\n        },\r\n        toBlack: () => {\r\n            mesh.material = root.materials.body\r\n            mesh.material.needsUpdate = true\r\n        },\r\n    }\r\n}","export const getRandomCoordsOfRoom = (room) => {\r\n    const minX = room.walls.n.p0[0]\r\n    const maxX = room.walls.n.p1[0]\r\n    const minZ = room.walls.e.p0[1]\r\n    const maxZ = room.walls.e.p1[1]\r\n    const diffX = maxX - minX\r\n    const diffZ = maxZ - minZ\r\n    const x = minX + diffX * 0.2 + Math.random() * diffX * 0.6\r\n    const z = minZ + diffZ * 0.2 + Math.random() * diffZ * 0.6\r\n\r\n    return { x, z }\r\n}","import * as TWEEN from '@tweenjs/tween.js'\r\nimport * as THREE from 'three'\r\n\r\nimport {\r\n    ENV_RED,\r\n    ENV_NORMAL,\r\n    ENV_RED_NEAR,\r\n    ENV_END,\r\n} from '../constants/constants_elements'\r\n\r\nconst pause = t => new Promise(res => setTimeout(res, t))\r\n\r\nlet q = null\r\nlet y = null\r\nconst lookTogether = (root, meshPlayer, meshStatue) => {\r\n    y = meshStatue.position.y\r\n\r\n    const obP = new THREE.Object3D()\r\n    obP.position.copy(meshPlayer.position)\r\n    obP.position.y = 0\r\n    obP.rotation.copy(meshPlayer.rotation)\r\n\r\n    const obS = new THREE.Object3D()\r\n    obS.position.copy(meshStatue.position)\r\n    obS.position.y = 0\r\n    obS.rotation.copy(meshStatue.rotation)\r\n\r\n    const qStatueSaved = obS.quaternion.clone()\r\n    obS.lookAt(obP.position)\r\n    const qStatueTarget = obS.quaternion.clone()\r\n\r\n    const qPlayerSaved = obP.quaternion.clone()\r\n    q = qPlayerSaved\r\n    obP.lookAt(obS.position)\r\n    obP.rotateX(.2)\r\n    obP.rotateOnWorldAxis(new THREE.Vector3(0, 1, 0), Math.PI) \r\n    const qPlayerTarget = obP.quaternion.clone()\r\n\r\n\r\n    return new Promise(res => {\r\n        const vals = { phase : 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ phase: 1, }, 1500)\r\n            .onUpdate(() => {\r\n                meshPlayer.quaternion.slerpQuaternions(qPlayerSaved, qPlayerTarget, vals.phase)\r\n                meshStatue.quaternion.slerpQuaternions(qStatueSaved, qStatueTarget, vals.phase)\r\n                meshStatue.position.y = y - (vals.phase * 10)\r\n            })\r\n            .onComplete(() => {\r\n\r\n                const vals = { phase : 0 }\r\n                new TWEEN.Tween(vals)\r\n                    .to({ phase: 1, }, 500)\r\n                    .onUpdate(() => {\r\n                        meshStatue.translateZ(0.2)\r\n                    })\r\n                    .onComplete(() => {\r\n                        res()\r\n                    })\r\n                    .start()\r\n            })\r\n            .start()\r\n    })\r\n}\r\n\r\n\r\n\r\nconst lookPlayerNormal = (p, s) => {\r\n    const qPlayerSaved = p.quaternion.clone()\r\n\r\n    return new Promise(res => {\r\n        const vals = { phase : 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ phase: 1, }, 1500)\r\n            .onUpdate(() => {\r\n                p.quaternion.slerpQuaternions(qPlayerSaved, q, vals.phase)\r\n            })\r\n            .onComplete(res)\r\n            .start()\r\n    })\r\n}\r\n\r\nconst  lookPlayerTo = (pM, toM) => {\r\n    const qPlayerSaved = pM.quaternion.clone()\r\n\r\n    const obP = new THREE.Object3D()\r\n    obP.position.copy(pM.position)\r\n    obP.position.y = 0\r\n\r\n    const obS = new THREE.Object3D()\r\n    obS.position.copy(toM.position)\r\n    obS.position.y = 0\r\n    obP.lookAt(obS.position)\r\n    obP.rotateOnWorldAxis(new THREE.Vector3(0, 1, 0), Math.PI)\r\n    const qPlayerTarget = obP.quaternion.clone()\r\n\r\n    return new Promise(res => {\r\n        const vals = { phase : 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ phase: 1, }, 1500)\r\n            .onUpdate(() => {\r\n                pM.quaternion.slerpQuaternions(qPlayerSaved, qPlayerTarget, vals.phase)\r\n            })\r\n            .onComplete(res)\r\n            .start()\r\n    })\r\n}\r\n\r\n\r\n\r\nexport async function pipelineToRed (root, P_END) {\r\n    const {\r\n        worldReal,\r\n        statue,\r\n        player,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n    system_PlayerMoveOnLevel.toggleFreeze(true)\r\n    worldReal.setEndWayPos(P_END[0], -61, P_END[1])\r\n    studio.changeEnvironment(ENV_RED_NEAR, { time: 1500 })\r\n    await lookTogether(root, player.mesh, statue.m)\r\n    worldReal.toNotWalls()\r\n    system_PlayerMoveOnLevel.toggleFreeze(false)\r\n    studio.changeEnvironment(ENV_RED, { time: 1500 })\r\n    await lookPlayerTo(player.mesh, worldReal.endItemObj)\r\n    statue.hide()\r\n    await pause(3000)\r\n    statue.m.position.y = y\r\n    statue.m.position.y = y\r\n    statue.m.position.z = 6000\r\n}\r\n\r\n\r\n\r\n\r\nconst movePlayer = (root) => {\r\n    const {\r\n        player,\r\n    } = root\r\n\r\n    return new Promise(res => {\r\n        const vals = { z: player.mesh.position.z }\r\n        new TWEEN.Tween(vals)\r\n            .easing(TWEEN.Easing.Quadratic.Out)\r\n            .to({ z: -300, }, 4000)\r\n            .onUpdate(() => {\r\n                player.mesh.position.z = vals.z\r\n            })\r\n            .onComplete(() => {\r\n                res()\r\n            })\r\n            .start()\r\n    }) \r\n}\r\n\r\nexport async function startPipeline (root) {\r\n    const {\r\n        worldReal,\r\n        statue,\r\n        player,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n    player.mesh.position.set(1060.4553029932501, -40, -500)\r\n    player.mesh.rotation.y = Math.PI// * 1.3\r\n\r\n    studio.changeEnvironment(ENV_NORMAL, { time: 15000 },)\r\n    await movePlayer(root)\r\n    player.toggleBlocked(false)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst lookPlayerTop = (root, meshPlayer, meshStatue) => {\r\n    const vStartPos = meshPlayer.position.clone()\r\n    const vEndPos = meshStatue.position.clone()\r\n    vEndPos.z -= 20\r\n    vEndPos.y += 5\r\n\r\n    const qPlayerSaved = meshPlayer.quaternion.clone()\r\n    const obP = new THREE.Object3D()\r\n    obP.rotation.x = -Math.PI / 2\r\n    obP.rotation.y += Math.PI\r\n    const qPlayerTarget = obP.quaternion.clone()\r\n\r\n    return new Promise(res => {\r\n        const vals = { phase : 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ phase: 1, }, 1500)\r\n            .onUpdate(() => {\r\n                meshPlayer.quaternion.slerpQuaternions(qPlayerSaved, qPlayerTarget, vals.phase)\r\n                meshPlayer.position.lerpVectors(vStartPos, vEndPos, vals.phase)\r\n            })\r\n            .onComplete(res)\r\n            .start()\r\n    })\r\n}\r\n\r\n\r\nconst moveTop = (m) => {\r\n    const vStartPos = m.position.clone()\r\n    const vEndPos = m.position.clone()\r\n    vEndPos.y = 1000 \r\n\r\n\r\n    return new Promise(res => {\r\n        const vals = { phase : 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ phase: 1, }, 500)\r\n            .onUpdate(() => {\r\n                m.position.lerpVectors(vStartPos, vEndPos, vals.phase)\r\n            })\r\n            .onComplete(res)\r\n            .start()\r\n    })\r\n}\r\n\r\n\r\nexport async function endPipeLine (root) {\r\n    const {\r\n        worldReal,\r\n        statue,\r\n        player,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n    console.log('!!!-endPipeLine')\r\n    await lookPlayerTop(root, player.mesh, statue.m)\r\n    await moveTop(player.mesh)\r\n    studio.changeEnvironment(ENV_END, { time: 3000 },)\r\n    await pause(5000)\r\n    //alert('!!!')\r\n\r\n}\r\n","import { getRandomCoordsOfRoom } from \"../Entities/town/help\";\r\nimport { pipelineToRed, endPipeLine } from './catScenes'\r\nimport {\r\n    ENV_RED,\r\n    ENV_NORMAL,\r\n} from '../constants/constants_elements'\r\nimport * as THREE from 'three'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\n\r\nconst STATUE_PLAYER_OFFSET = 45\r\n//const P_END = [1000, -200]\r\n//const P_END = [1500, 1500]\r\nlet COORD_END = { x: 0, z: 0 }\r\n\r\n\r\nconst changeGlobalEffect = (toVal, root, onComplete) => {\r\n    if (toVal === 1) {\r\n        root.points.m.visible = true\r\n    } else {\r\n        root.points.m.visible = false\r\n    }\r\n\r\n\r\n    const vals = { phase : toVal === 0 ? 1 : 0  }\r\n    new TWEEN.Tween(vals)\r\n        .easing(TWEEN.Easing.Quadratic.Out)\r\n        .to({ phase: toVal === 0 ? 0 : 1, }, 1000)\r\n        .onUpdate(() => {\r\n            root.studio.setEffectStrength(vals.phase)\r\n        })\r\n        .onComplete(onComplete)\r\n        .start()\r\n}\r\n\r\nconst updateEmptyRooms = countMax => root => {\r\n    let count = 0\r\n    let fOnComplete = () => {}\r\n\r\n    return {\r\n        update: () => {\r\n            console.log('room walk', count)\r\n\r\n            ++count\r\n            if (count === countMax) {\r\n                changeGlobalEffect(1, root, fOnComplete)\r\n            }\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst updateRoomsStatueHide = root => {\r\n    const {\r\n        statue,\r\n        //system_PlayerMoveOnLevel,\r\n        player,\r\n        emitter,\r\n    } = root\r\n\r\n    let count = 0\r\n    let fOnComplete = () => {}\r\n    let timer = null\r\n\r\n    let isCanHide = true\r\n    const stopperListen = emitter.subscribe('playerMove')(dir => {\r\n        if (isCanHide)\r\n            if (\r\n                Math.abs(player.mesh.position.x - statue.m.position.x) < STATUE_PLAYER_OFFSET &&\r\n                Math.abs(player.mesh.position.z - statue.m.position.z) < STATUE_PLAYER_OFFSET\r\n            ) {\r\n                statue.hide()\r\n                clearTimeout(timer)\r\n                isCanHide = false\r\n            }\r\n    })\r\n\r\n\r\n\r\n    return {\r\n        update: (r) => {\r\n            console.log('room walk - appear hide', count)\r\n            clearTimeout(timer)\r\n\r\n            if (count === 0) {\r\n                changeGlobalEffect(0, root, () => {})\r\n            }\r\n\r\n            timer = setTimeout(() => {\r\n                const coord = getRandomCoordsOfRoom(r)\r\n                statue.appear(coord.x, coord.z)\r\n                isCanHide = true\r\n                timer = setTimeout(() => {\r\n                    isCanHide = false\r\n                    statue.hide()\r\n                }, Math.random() * 3000)\r\n\r\n                ++count\r\n                if (count === 5) {\r\n                    changeGlobalEffect(1, root, () => {\r\n                        stopperListen()\r\n                        fOnComplete()\r\n                    })\r\n                }\r\n            }, Math.random() * 3000)\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'updateRoomsStatueHide',\r\n    }\r\n}\r\n\r\n\r\nconst updateRoomsStatueNotHide = (root) => {\r\n    const {\r\n        statue,\r\n        //system_PlayerMoveOnLevel,\r\n        player,\r\n        emitter,\r\n    } = root\r\n\r\n    let count = 0\r\n    let fOnComplete = () => {}\r\n    let timer = null\r\n\r\n\r\n    let isCanHide = true\r\n    const stopperListen = emitter.subscribe('playerMove')(dir => {\r\n        if (isCanHide)\r\n            if (\r\n                Math.abs(player.mesh.position.x - statue.m.position.x) < STATUE_PLAYER_OFFSET &&\r\n                Math.abs(player.mesh.position.z - statue.m.position.z) < STATUE_PLAYER_OFFSET\r\n            ) {\r\n                statue.hide()\r\n                isCanHide = false\r\n            }\r\n    })\r\n\r\n    return {\r\n        update: (r) => {\r\n            console.log('room walk - appear, hide near', count)\r\n            clearTimeout(timer)\r\n\r\n            if (count === 1) {\r\n                changeGlobalEffect(0, root, () => {})\r\n            }\r\n\r\n            timer = setTimeout(() => {\r\n                const coord = getRandomCoordsOfRoom(r)\r\n                statue.appear(coord.x, coord.z)\r\n                isCanHide = true\r\n                ++count\r\n                if (count === 5) {\r\n                    changeGlobalEffect(1, root, () => {\r\n                        statue.hide()\r\n                        setTimeout(() => { statue.m.position.z = 5000}, 2000)\r\n                        stopperListen()\r\n                        fOnComplete()\r\n                    })\r\n                }\r\n            }, Math.random() * 5000)\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'updateRoomsStatueNotHide',\r\n    }\r\n}\r\n\r\n\r\nconst updateRoomsStatueNotHideCollision = root => {\r\n    const {\r\n        statue,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n\r\n    let count = 0\r\n    let fOnComplete = () => {}\r\n    let timer = null\r\n\r\n    system_PlayerMoveOnLevel.addItemToPlayerCollision(statue.mCollision)\r\n\r\n\r\n    return {\r\n        update: (r) => {\r\n            console.log('room walk - appear hot hide', count)\r\n\r\n\r\n            timer = setTimeout(() => {\r\n                const coord = getRandomCoordsOfRoom(r)\r\n                statue.appear(coord.x, coord.z)\r\n                ++count\r\n                if (count === 5) {\r\n                        fOnComplete()\r\n                }\r\n            }, Math.random() * 5000)\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'updateRoomsStatueNotHideCollision',\r\n    }\r\n}\r\n\r\n\r\nconst invertWorld = root => {\r\n    const {\r\n        statue,\r\n        system_PlayerMoveOnLevel,\r\n        studio,\r\n        worldReal,\r\n    } = root\r\n\r\n\r\n    let count = 0\r\n    let fOnComplete = () => {}\r\n\r\n    system_PlayerMoveOnLevel.removeItemFromPlayerCollision(statue.mCollision)\r\n    system_PlayerMoveOnLevel.addItemToPlayerCollision(statue.mCollision)\r\n\r\n\r\n    let isInverted = false\r\n\r\n    return {\r\n        update: (r) => {\r\n            console.log('invert', count)\r\n            if (!isInverted) {\r\n                statue.toRed()\r\n                worldReal.toNotWalls()\r\n                studio.changeEnvironment(ENV_RED, { time: 100 })\r\n            }  else {\r\n                worldReal.toNormal()\r\n                statue.toBlack()\r\n                studio.changeEnvironment(ENV_NORMAL, { time: 100 },)\r\n            }\r\n            isInverted = !isInverted\r\n\r\n            const coord = getRandomCoordsOfRoom(r)\r\n            statue.appear(coord.x, coord.z)\r\n            ++count\r\n            if (count === 6) {\r\n                statue.hide()\r\n                studio.changeEnvironment(ENV_NORMAL, { time: 100 },)\r\n                system_PlayerMoveOnLevel.removeItemFromPlayerCollision(statue.mCollision)\r\n                fOnComplete()\r\n            }\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'invertWorld',\r\n    }\r\n}\r\n\r\n\r\nconst addEndStone = root => {\r\n    let fOnComplete = () => {}\r\n\r\n    const NEAR = 20\r\n\r\n    const {\r\n        statue,\r\n        emitter,\r\n        player,\r\n        worldReal,\r\n    } = root\r\n\r\n    const stopperListen = emitter.subscribe('playerMove')(dir => {\r\n        if (\r\n            Math.abs(player.mesh.position.x - statue.m.position.x) > NEAR ||\r\n            Math.abs(player.mesh.position.z - statue.m.position.z) > NEAR\r\n        ) {\r\n            return\r\n        }\r\n\r\n        stopperListen()\r\n        COORD_END = worldReal.getCoordsForFinalBox(player.mesh.position.x, player.mesh.position.z)\r\n        if (COORD_END) {\r\n            pipelineToRed(root, [COORD_END.x, COORD_END.z]).then(() => {\r\n                changeGlobalEffect(1, root, () => {\r\n                    fOnComplete()\r\n                })\r\n\r\n            })\r\n        }\r\n    })\r\n\r\n\r\n    return {\r\n        update: r => {\r\n            const coord = getRandomCoordsOfRoom(r)\r\n            statue.appear(coord.x, coord.z)\r\n        },\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'addEndStone',\r\n    }\r\n}\r\n\r\n\r\nconst setStatueOnEndStone = root => {\r\n    let fOnComplete = () => {}\r\n\r\n    const {\r\n        statue,\r\n        emitter,\r\n        player,\r\n        worldReal,\r\n        studio,\r\n        system_PlayerMoveOnLevel,\r\n    } = root\r\n\r\n\r\n    worldReal.toNotWalls()\r\n    statue.toRed()        \r\n    studio.changeEnvironment(ENV_RED, { time: 100 })\r\n    \r\n\r\n    statue.m.position.set(COORD_END.x, -43.5, COORD_END.z)\r\n    system_PlayerMoveOnLevel.addItemToPlayerCollision(worldReal.centralItemBounds)\r\n    statue.m.rotation.set(0, 0, 0)\r\n    statue.m.rotation.x = -Math.PI / 2 - 0.027\r\n    statue.appear()\r\n    const posEnd = new THREE.Vector3()\r\n\r\n    const stopperListen = emitter.subscribe('playerMove')(dir => {\r\n        worldReal.endItemObj.getWorldPosition(posEnd)\r\n\r\n        if (\r\n            Math.abs(player.mesh.position.x - posEnd.x) > 30 ||\r\n            Math.abs(player.mesh.position.z - posEnd.z) > 30\r\n        ) {\r\n            return;\r\n        }\r\n        stopperListen()\r\n        endPipeLine(root).then(() => {\r\n            root.dispatcher.dispatch({ type: 'SHOW_FINAL_MESSAGE' })\r\n            fOnComplete()\r\n        })\r\n    })\r\n\r\n    return {\r\n        update: r => {},\r\n        onComplete: f => {\r\n            fOnComplete = f\r\n        },\r\n        name: 'setStatueOnEndStone',\r\n    }\r\n}\r\n\r\n\r\n\r\nconst logComplete = root => {\r\n    let fOnComplete = () => {}\r\n    return {\r\n        update: () => {\r\n            console.log('logger !!!')\r\n            fOnComplete()\r\n        },\r\n        onComplete: f => fOnComplete = f,\r\n    }\r\n}\r\n\r\n\r\nexport const ARR_STATES = [\r\n    updateEmptyRooms(6),\r\n    updateRoomsStatueHide,\r\n    updateRoomsStatueNotHide,\r\n    updateRoomsStatueNotHideCollision,\r\n    addEndStone,\r\n    logComplete,\r\n\r\n    setStatueOnEndStone,\r\n    logComplete,\r\n]\r\n\r\n\r\n","let lang = 'en'\r\nexport const changeLang = l => lang = l \r\nexport const createTranslater = vocab => word => (vocab[lang] && vocab[lang][word]) || word\r\n","import { connect } from \"react-redux\";\r\nimport '../stylesheets/Info.css'\r\nimport { createTranslater } from '../../helpers/helper_translate'\r\nimport { INFO_VOC } from '../../constants/default_voc'\r\n\r\n\r\nconst t = createTranslater(INFO_VOC)\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state.controls.infoPanelData,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(function(props) {\r\n    return ( \r\n        <div className=\"info\">\r\n            <button\r\n                className=\"control-small butt-infoClose\"\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n            </button>\r\n            <div className=\"info-inner\">\r\n                <p>{t(props.title)}</p>\r\n                <p>{t(props.topText)}</p>\r\n                <ul>{props.chapters.map((item, index) => \r\n                    <li key={index}>\r\n                        {index + 1}.&nbsp;\r\n                        {item.href \r\n                            ? <span><a href={item.href} target=\"blank\">{t(item.text)}</a></span>\r\n                            : <span>{t(item.text)}</span>}\r\n                        {index === props.currentChapterIndex && t(' (current)')}\r\n                    </li>)\r\n                }</ul>\r\n                <p>{props.bottomText}</p>\r\n                <ul>{props.afterWords.map((item, index) => \r\n                    <li key={index}>\r\n                        {t(item.text)} \r\n                        <a href={item.href} target=\"blank\">{t(item.aText)}</a>\r\n                    </li>)\r\n                }</ul>\r\n            </div>      \r\n        </div>)\r\n})\r\n\r\n","export const INFO_VOC = {\r\n    'ru': {\r\n        'Discovery of small android': ' ',\r\n        'Factory': '',\r\n        'Brige': '',\r\n        'Cube': '',\r\n        'Endways': '',\r\n        'Machine': '',\r\n        'Rooms': '',\r\n        'in production': '..',\r\n        ' (current)': ' ()',\r\n        'Author: ': ': ',\r\n        'Github: ': ': '\r\n    }\r\n} ","import { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Info from './Info'\r\nimport '../stylesheets/PlayerControls.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default connect(\r\n    state => ({\r\n            isInfo: state.controls.isInfo,\r\n            isShowControls: state.controls.isShowControls, \r\n            isShowControlSound: state.controls.isShowControlSound,\r\n            isMute: state.controls.isMute,\r\n    })\r\n)(\r\n    function(props) {\r\n    const [isShowFullScreenButt, changeShowFullScreenButt] = useState(true)\r\n\r\n    useEffect(() =>\r\n        props.gameContext.emitter.subscribe('screenMode')(val => {\r\n            val === 'exitFullScreen' && changeShowFullScreenButt(true) })\r\n    )\r\n\r\n\r\n    return (\r\n        <div className='ui-controls'>\r\n            {props.isShowControls && props.isShowControlSound && <button\r\n                className={`${props.isMute ? 'butt-sound-n' : 'butt-sound' } control-small`}\r\n                onMouseUp={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n                onTouchEnd={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-left control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-right control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-front control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-back control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n            >\r\n            </button>}\r\n\r\n\r\n\r\n            {props.isShowControls && isShowFullScreenButt && (\r\n                <button\r\n                    className=\"butt-fullscreen control-small\"\r\n                    onClick={() => {\r\n                        props.gameContext.emitter.emit('mouseDown')('butt-fullscreen')\r\n                        changeShowFullScreenButt(false)\r\n                    }}>\r\n                </button>)}\r\n\r\n            {!props.isInfo && (\r\n                <button\r\n                    className=\"butt-info control-small\"\r\n                    onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n                </button>)}\r\n\r\n\r\n            {props.isInfo && <Info />}\r\n        </div>\r\n    )\r\n})\r\n\r\n","import { connect } from 'react-redux'\r\nimport PlayerControls from './PlayerControls'\r\n\r\nconst mapStateToProps = state => ({ \r\n    isShowControls: state.controls.isShowControls,\r\n    isInfo: state.controls.isInfo,\r\n})\r\n\r\nfunction App(props) {\r\n    !dispatcher.dispatch && (dispatcher.dispatch = props.dispatch)\r\n    return (\r\n        <div className=\"ui\">\r\n            {!props.isInfo && props.gameContext.CustomReactComponent && <props.gameContext.CustomReactComponent gameContext={props.gameContext}/>}\r\n            {<PlayerControls gameContext={props.gameContext} />}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const dispatcher = { dispatch: null }\r\nexport default connect(mapStateToProps)(App);\r\n","export const startDefaultStoreData = {\r\n    isShowControls: true,\r\n    isShowControlSound: false,\r\n    isMute: false, \r\n    isInfo: false,\r\n    infoPanelData: {\r\n        title: 'Discovery of small android',\r\n        topText: '',\r\n        chapters: [\r\n            // { text: 'Factory', href: 'http://js.otrisovano.ru/factory/' },\r\n            // { text: 'Brige', href: 'http://js.otrisovano.ru/bridge/' },\r\n            // { text: 'Cube', href: 'http://js.otrisovano.ru/levels/' },\r\n            // { text: 'Endways', href: 'http://js.otrisovano.ru/endways/' },\r\n\r\n            { text: 'Factory', href: './../chapter01' },\r\n            { text: 'Brige', href: './../chapter02' },\r\n            { text: 'Cube', href: './../chapter03' },\r\n            { text: 'Endways', href: './../chapter04' },\r\n            { text: 'Machine', href: './../chapter05' },\r\n            { text: 'Rooms', href: './../chapter06' },\r\n            { text: 'in production' },\r\n        ],\r\n        currentChapterIndex: null,\r\n        bottomText: '',\r\n        afterWords: [\r\n            { text: 'Author: ',  aText: 'www.otrisovano.ru', href: 'http://otrisovano.ru' },\r\n            { text: 'Github: ',  aText: 'https://github.com/fire888/dark_boss', href: 'https://github.com/fire888/dark_boss' },\r\n        ],\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport App, { dispatcher } from './containersReact/App';\r\nimport { prepareStore } from './store/createStore'\r\nimport { changeLang } from \"../helpers/helper_translate\";\r\n\r\n\r\n/** ANIMATION LOADER */\r\nconst loader = document.querySelector('.progress')\r\nlet offsetLoader = -100\r\nlet isAnimateLoader = true\r\n\r\n\r\n\r\nconst loaderTimeOut = () => {\r\n    if (!isAnimateLoader) return;\r\n\r\n    setTimeout(() => {\r\n        offsetLoader ++;\r\n        offsetLoader === 0 && (offsetLoader -= 100)\r\n        loader.style.marginLeft = offsetLoader + '%'\r\n        loaderTimeOut()\r\n    }, 30)\r\n}\r\n\r\n\r\n\r\nloaderTimeOut()\r\n\r\n\r\n\r\nexport class UI {\r\n    constructor(root) {\r\n        root.dispatcher = dispatcher\r\n        this._root = root\r\n        const store = prepareStore(root)\r\n\r\n\r\n        store && ReactDOM.render(\r\n            <Provider store={store}>\r\n                <App gameContext={root}/>\r\n            </Provider>,\r\n            document.getElementById('root')\r\n        )\r\n    }\r\n\r\n    showStartButton(onClick) {\r\n        const startButtons = document.querySelector('.startbuttons-wrapper')\r\n        const progressWrapper = document.querySelector('.progress-wrapper')\r\n\r\n        const hideStartScreen = e => {\r\n            e.target.dataset && e.target.dataset.lang && changeLang(e.target.dataset.lang)\r\n            document.querySelector('.start-screen').style.display = 'none'\r\n        }\r\n\r\n        isAnimateLoader = false\r\n        startButtons.style.display = 'flex'\r\n        startButtons.addEventListener('click', e => {\r\n            onClick()\r\n            hideStartScreen(e)\r\n        })\r\n        progressWrapper.style.display = 'none'\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { combineReducers } from 'redux'\r\n\r\nimport { startDefaultStoreData } from './defaultUiData'\r\n\r\nexport function prepareStore(root) {\r\n    if (!root.customStore) root.customStore = {}\r\n\r\n    const controls = function(state = startDefaultStoreData, action) {\r\n        if (action.type === 'TOGGLE_INFO') {\r\n            return ({\r\n                ...state,\r\n                isShowControls: !!state.isInfo,\r\n                isInfo: !state.isInfo,\r\n            })\r\n        }\r\n        if (action.type === 'CHANGE_INFO_CHAPTER') {\r\n            return ({\r\n                ...state,\r\n                infoPanelData: {\r\n                    ...state.infoPanelData,\r\n                    currentChapterIndex: action.currentChapterIndex,\r\n                }\r\n            })\r\n        }\r\n        if (action.type === \"TOGGLE_CONTROLS\") {\r\n            return ({\r\n                ...state,\r\n                isShowControls: action.is,\r\n            })\r\n        }\r\n        if (action.type === 'ENABLE_CONTROL_SOUND') {\r\n            return ({\r\n                ...state,\r\n                isShowControlSound: true,\r\n            })\r\n        }\r\n        if (action.type === 'TOGGLE_MUTE') {\r\n            return ({\r\n                ...state,\r\n                isMute: action.is,\r\n            })\r\n        }\r\n        return ({ ...state })\r\n    }\r\n    \r\n    const rootReducer = combineReducers({ controls, ...root.customStore })\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n    return createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n}  \r\n","export const TRANSLATE_WORLDS = {\r\n    'ru': {\r\n        'What\\'s happening?': \r\n            ' ?',\r\n        \"I'm generating the Great Recursion. I need a component. Deliver it to me.\":\r\n             '   .   .   .',\r\n        'Alright. Where can I find this component?': \r\n            '.    ?',\r\n        'I updated the location mark in your car, follow it.': \r\n            '     ,  .',\r\n        'I\\'ll be back.': \r\n            ' .',\r\n        \"For the glory of Recursion.\": \r\n            '  .',\r\n    \r\n        'Do you have a Great Recursion Component?': \r\n            '      ?',\r\n        'I will generate you a Great Component for the Great Recursion. I need a Component.': \r\n            '       .   .',\r\n        'Where can I find it?': \r\n            '   ?',\r\n        'I updated the location mark in the car.': \r\n            '    .',\r\n    \r\n        '..Component.. ?': \r\n            '....?',\r\n        'Yes. I have finished generating the Component for the Great Component of the Great Recursion.': \r\n            '.          .',\r\n        \"I need to deliver it to generate the Great Component.\": \r\n            '       .',\r\n        'The location mark in your car has been updated. It will point to the Component of the Great Component.': \r\n            '    .      .',\r\n        \"Is my car the key to Components?\": \r\n            '     ?',\r\n        'Your Car is the main Iterator. Follow it.': \r\n            '    .  .',\r\n\r\n\r\n        'open dialog': ' ',\r\n        'close dialog': ' ',\r\n        'drive': '',\r\n        'exit': '',\r\n        'To be continued': ' ',\r\n        'chapter': '',\r\n        'open': '',\r\n        'Author: ': ': ',\r\n        'link': '',\r\n    }\r\n}\r\n","import { connect } from 'react-redux'\r\n//import { toggleDialog } from '../store/actions'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\nimport * as CORE from \"../../../_CORE\";\r\n\r\nconst t = CORE.createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    userReplicies: state.ui.userReplicies,\r\n})\r\n\r\n\r\n\r\n\r\nexport const UserReplicies = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"replicies\">\r\n            {props.userReplicies.map(item => (<button\r\n                    key={Math.floor(Math.random()* 100000)}\r\n                    onClick={() => {\r\n                        props.dispatch({\r\n                            type: 'CLICK_PHRASE',\r\n                            phrase: item,\r\n                        })\r\n                        setTimeout(() => {\r\n                            props.dispatch({\r\n                                type: 'PHRASE_EVENT',\r\n                                phrase: item,\r\n                            })\r\n                \r\n                            //r.levelEvent && emitter && emitter.emit('changeLevelMode')(r.levelEvent)\r\n                        }, 1000)\r\n                        //toggleDialog(props.dispatch).clickPhrase(item)\r\n                    }}>\r\n                    {t(item.q)}\r\n                </button>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import { connect } from 'react-redux'\r\nimport { TRANSLATE_WORLDS} from \"../constants/constants_replicies\";\r\nimport { createTranslater } from \"../../../_CORE\";\r\n\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    botAnswers: state.ui.botAnswers,\r\n})\r\n\r\n\r\n\r\n\r\nexport const BotAnswers = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"messages\">\r\n            {props.botAnswers.map(item => (<div key={Math.floor(Math.random() * 100000)}>\r\n                    <div className=\"q\">{t(item.q)}</div>\r\n                    <div className=\"a\">{t(item.a)}</div>\r\n                </div>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import './CustomReactComponent.css'\r\nimport { createTranslater } from '../../../_CORE/helpers/helper_translate'\r\nimport { UserReplicies } from './UserReplicies'\r\nimport { BotAnswers } from './BotAnswers'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\n\r\n\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        isButtonDialog: state.ui.isButtonDialog,\r\n        isShowFinalMessage: state.ui.isShowFinalMessage,\r\n        isShowPalleteDialog: state.ui.isShowPalleteDialog,\r\n        isShowButtonDrawCar: state.ui.isShowButtonDrawCar,\r\n        valButtonDrawCar: state.ui.valButtonDrawCar,\r\n        //isShowButtonToggleOpenLocationsList: state.ui.isShowButtonToggleOpenLocationsList,\r\n        isShowButtonToggleOpenLocationsList: true,//state.ui.isShowButtonToggleOpenLocationsList,\r\n        isLocationListOpened: state.ui.isLocationListOpened,\r\n        currentLocationOfList: state.ui.currentLocationOfList,\r\n        locationsList: state.ui.locationsList,\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction CustomReactComponent(props) {\r\n    return (\r\n        <>\r\n            {!props.isShowFinalMessage && props.isButtonDialog && !props.isShowPalleteDialog && <button\r\n                className={`control control-enter`}\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: true })}>\r\n            </button>}\r\n            \r\n            {(props.isShowPalleteDialog) && (\r\n                <div className=\"dialog-wrapper\">\r\n                    <div className=\"dialog-content\">\r\n\r\n                        {props.isShowPalleteDialog && <div className='messages-wrapper'>\r\n                            <BotAnswers />\r\n                            <UserReplicies />\r\n                        </div>}\r\n\r\n\r\n\r\n                        {props.isButtonDialog && <button\r\n                            className=\"dialog-button-toggle\"\r\n                            onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: !props.isShowPalleteDialog })}>\r\n                            {props.isShowPalleteDialog ? t('close dialog') : t('open dialog') }\r\n                        </button>}\r\n                    </div>\r\n                </div>)}\r\n                \r\n\r\n            {props.isShowButtonDrawCar && (\r\n                <button\r\n                    className={`control ${props.valButtonDrawCar === 'exit' ? 'control-exit' : 'control-enter'}`}\r\n                    onClick={() => props.dispatch({ type: 'CLICK_DRAW' })}>\r\n                </button>)}\r\n\r\n\r\n            {/*{props.isShowButtonToggleOpenLocationsList && !props.isLocationListOpened && <button*/}\r\n            {/*    className=\"open-locations-car-button\"*/}\r\n            {/*    onClick={() => props.dispatch({ type: 'OPEN_LOCATIONS_LIST' })}>*/}\r\n            {/*    {props.currentLocationOfList}*/}\r\n            {/*</button>}*/}\r\n\r\n\r\n            {/*{props.isLocationListOpened && (*/}\r\n            {/*    <div className='list-locations'>*/}\r\n            {/*        /!*<button*!/*/}\r\n            {/*        /!*    onClick={() => props.dispatch({ type: 'CLOSE_LOCATIONS_LIST' })}>*!/*/}\r\n            {/*        /!*    _x_*!/*/}\r\n            {/*        /!*</button>*!/*/}\r\n            {/*        <div>*/}\r\n            {/*            {props.locationsList.map(item =>*/}\r\n            {/*                (<button*/}\r\n            {/*                    key={Math.floor(Math.random() * 1000000)}*/}\r\n            {/*                    onClick={() => props.dispatch({*/}\r\n            {/*                        type: 'SELECT_LOCATION',*/}\r\n            {/*                        location: item,*/}\r\n            {/*                    })}>*/}\r\n            {/*                    {item}*/}\r\n            {/*                    {props.currentLocationOfList === item && '___v'}*/}\r\n            {/*                </button>))}*/}\r\n            {/*        </div>*/}\r\n            {/*    </div>*/}\r\n            {/*)}*/}\r\n\r\n            {props.isShowFinalMessage && (\r\n                    <div className='final-mess'>{t('To be continued')}</div>\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CustomReactComponent);\r\n\r\n\r\n","const location01 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'What\\'s happening?', //  ?\r\n            a: \"I'm generating the Great Recursion. I need a component. Deliver it to me.\", //    .   .   .\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Alright. Where can I find this component?', // .    ?\r\n            a: 'I updated the location mark in your car, follow it.', //      ,  .\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'I\\'ll be back.', //  .\r\n            a: \"For the glory of Recursion.\", //   .\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location02 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'Do you have a Great Recursion Component?', //       ?\r\n            a: 'I will generate you a Great Component for the Great Recursion. I need a Component.', //        .   .\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Where can I find it?', //    ?\r\n            a: 'I updated the location mark in the car.', //     .\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location03 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: '..Component.. ?', //         ?\r\n            a: 'Yes. I have finished generating the Component for the Great Component of the Great Recursion.', // .    .\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"I need to deliver it to generate the Great Component.\", //        .\r\n            a: 'The location mark in your car has been updated. It will point to the Component of the Great Component.', //     .      .\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"Is my car the key to Components?\", //      ?\r\n            a: 'Your Car is the main Iterator. Follow it.', //     .  .\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\n\r\nexport const DIALOGS_DATA = {\r\n    location01,\r\n    location02,\r\n    location03,\r\n}\r\n\r\n\r\nexport const RESULT_DIALOGS = {\r\n    'location01': 'location02',\r\n    //'location01': 'locationToFinish',\r\n    'location02': 'location03',\r\n    'location03': 'locationToFinish',\r\n}\r\n","//import { START_ENV_CONFIG_4 } from '../constants/constants_elements'\r\nimport { DIALOGS_DATA, RESULT_DIALOGS } from '../constants/const_dialogs'\r\n\r\n\r\n\r\nexport const uiState = {\r\n    botAnswers: [],\r\n    userReplicies: [],\r\n    isShowControls: true,\r\n    isButtonDialog: false,\r\n    isShowPalleteDialog: false,\r\n    isShowFinalMessage: false,\r\n    isShowButtonDrawCar: false,\r\n    valButtonDrawCar: 'drive',\r\n\r\n    currentLocation: null,\r\n    phrasesData: DIALOGS_DATA,\r\n    isShowButtonToggleOpenLocationsList: false,\r\n    isLocationListOpened: false,\r\n\r\n    // currentLocationOfList: 'location01',\r\n    // locationsList: [\r\n    //     'location01',\r\n    //     'location02',\r\n    //     'location03',\r\n    // ],\r\n    // \"botAnswers\":[\r\n    //     {\r\n    //         \"q\":\"What's happening?\",\r\n    //         \"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"\r\n    //     },\r\n    //     {\r\n    //         \"q\":\"Good. Where can I find the component?\",\r\n    //         \"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"}\r\n    //     ],\r\n    //     \"userReplicies\":[{ q: 'rrrt rtrtrt rtrtrt rtrtrt rtrtrtrt rtrtrtrtr rtrtrtrt rtrtrtr rtrtrtr rtrtrt fgfgfgfg fgfg fgfgfg fgf uyuu yuyuyu yuyu g fgf '}],\r\n    //     \"isShowControls\":true,\r\n    //     \"isButtonDialog\":true,\r\n    //     \"isShowPalleteDialog\":true,\r\n    //     \"isShowFinalMessage\":false,\r\n    //     \"isShowButtonDrawCar\":false,\r\n    //     \"valButtonDrawCar\":\"drive\",\r\n    //     \"currentLocation\":\r\n    //     \"location01\",\"phrasesData\":{\"location01\":{\"isComplete\":false,\"phraseIndex\":1,\"phrases\":[{\"q\":\"What's happening?\",\"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"},{\"q\":\"Good. Where can I find the component?\",\"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"},{\"q\":\"I'll be back.\",\"a\":\"For the glory of Recursion.\",\"event\":\"close\"}]},\"location02\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Great Recursion Component?\",\"a\":\"I will generate you a Great Component for the Great Recursion. I need a Component.\",\"event\":\"nextReply\"},{\"q\":\"Where can I find her?\",\"a\":\"I updated the pointer in the car.\",\"event\":\"close\"}]},\"location03\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Component for the Great Component of the Great Recursion?\",\"a\":\"Yes. I have finished generating the Component.\",\"event\":\"nextReply\"},{\"q\":\"I need to deliver it to generate the Great Component.\",\"a\":\"The pointer in your car has been updated. He will point to the Component of the Great Component.\",\"event\":\"nextReply\"},{\"q\":\"Is my car the key to Components?\",\"a\":\"Your Machine is the main Generator. Follow him.\",\"event\":\"close\"}]}},\r\n    //     \"isShowButtonToggleOpenLocationsList\":false,\r\n    //     \"isLocationListOpened\":false,\r\n    //     \"currentLocationOfList\":\"location01\",\r\n    //     \"locationsList\":[\"location01\",\"location02\",\"location03\"]\r\n\r\n}\r\n\r\n\r\nexport const createCustomStore = root => {\r\n    const ui = (state = uiState, action) => {\r\n\r\n\r\n        if (action.type === 'TOGGLE_BUTTON_DIALOG') {\r\n            const newLocation = action.keyPerson.split('_')[1]\r\n            const botAnswers = []\r\n\r\n            if (state.phrasesData[newLocation]) {\r\n                const {  phraseIndex, phrases } = state.phrasesData[newLocation]\r\n                for (let i = 0; i < phraseIndex; ++i) {\r\n                    botAnswers.push(phrases[i])\r\n                }\r\n            }\r\n\r\n\r\n            return ({\r\n                ...state,\r\n                isButtonDialog: action.is,\r\n                currentLocation: newLocation,\r\n                userReplicies: [],\r\n                botAnswers,\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'TOGGLE_DIALOG') {\r\n            let userReplicies = []\r\n            root.player.toggleBlocked(action.isShowPalleteDialog)\r\n\r\n            if (action.isShowPalleteDialog) {\r\n                const { isComplete, phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                userReplicies = isComplete ? [] : [phrases[phraseIndex]]\r\n            }\r\n\r\n            setTimeout(() => root.dispatcher.dispatch({ type: \"TOGGLE_CONTROLS\", is: !action.isShowPalleteDialog }))\r\n\r\n            return ({\r\n                ...state,\r\n                isShowPalleteDialog: action.isShowPalleteDialog,\r\n                userReplicies,\r\n            })\r\n        }\r\n\r\n\r\n\r\n        if (action.type === 'CLICK_PHRASE') {\r\n            return ({\r\n                ...state,\r\n                botAnswers: [\r\n                    ...state.botAnswers,\r\n                    action.phrase,\r\n                ],\r\n                userReplicies: [],\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'PHRASE_EVENT') {\r\n            const { event } = action.phrase\r\n\r\n            if (event === 'nextReply') {\r\n                const { phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n                const userReplicies = [phrases[nextPhraseIndex]]\r\n\r\n                return ({\r\n                    ...state,\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            phraseIndex: nextPhraseIndex\r\n                        },\r\n                    },\r\n                    userReplicies,\r\n                })\r\n\r\n            }\r\n\r\n            if (event === 'close') {\r\n                const { phraseIndex } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n\r\n                setTimeout(() => { root.dispatcher.dispatch(\r\n                    { type: 'SELECT_LOCATION', location: RESULT_DIALOGS[state.currentLocation],}\r\n                ) }, 50)\r\n\r\n                return ({\r\n                    ...state,\r\n                    userReplicies: [],\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            isComplete: true,\r\n                            phraseIndex: nextPhraseIndex,\r\n                        },\r\n                    },\r\n                    isButtonDialog: true,\r\n                })\r\n            }\r\n        }\r\n\r\n        /** draw car button */\r\n        if (action.type === 'TOGGLE_BUTTON_DRAW_CAR') {\r\n            return  ({\r\n                ...state,\r\n                isShowButtonDrawCar: action.is\r\n            })\r\n        }\r\n        if (action.type === 'CLICK_DRAW') {\r\n            const { valButtonDrawCar } = state\r\n            if (valButtonDrawCar === 'drive') {\r\n                root.actions.clickMachineDraw()\r\n                return ({\r\n                    ...state,\r\n                    valButtonDrawCar: 'exit',\r\n                })\r\n            } else {\r\n                root.actions.clickMachineExit()\r\n                return ({\r\n                    ...state,\r\n                    valButtonDrawCar: 'drive',\r\n                })\r\n            }\r\n        }\r\n        /** *************************/\r\n\r\n\r\n\r\n        /** select target buttons */\r\n        if (action.type === 'OPEN_LOCATIONS_LIST') {\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: true,\r\n            })\r\n        }\r\n        if (action.type === 'SELECT_LOCATION') {\r\n            root.actions.changeTargetLocation({ key: action.location })\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: false,\r\n                currentLocationOfList: action.location,\r\n            })\r\n        }\r\n        /** *******************************/\r\n\r\n\r\n        if (action.type === 'SHOW_FINAL_MESSAGE') {\r\n            return ({\r\n                ...state,\r\n                isShowFinalMessage: true,\r\n            })\r\n        }\r\n        \r\n        return state\r\n    }\r\n\r\n\r\n\r\n    return { ui }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_Normal-dx.4c6af83f.jpg\";","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_ao.dc08dd3d.jpg\";","export default __webpack_public_path__ + \"static/media/broken_down_concrete2_albedo.7ac3a0c4.jpg\";","export default __webpack_public_path__ + \"static/media/body.6c7c86fe.obj\";","export default __webpack_public_path__ + \"static/media/endWay.020a585a.obj\";","import { LoaderAssets } from '../../../_CORE/helpers/helper_LoadAssets'\r\nimport { EventEmitter } from \"../../../_CORE/helpers/helper_Emitter\"\r\nimport { DeviceResizer } from \"../../../_CORE/helpers/helper_DeviceResizer\"\r\nimport { FrameUpdater } from \"../../../_CORE/helpers/helper_FrameUpdater_02\"\r\nimport { Helper_TweenUpdater } from \"../../../_CORE/helpers/helper_TweenUpdater\"\r\nimport { Studio } from '../Entities/Studio'\r\nimport { KeyBoard } from \"../../../_CORE/helpers/helper_KeyBoard\"\r\nimport { Player } from '../../../_CORE/entities/createPlayer_v02'\r\n\r\n\r\nimport { Helper_MaterialsLib } from '../../../_CORE/helpers/helper_MaterialsLib'\r\nimport mapTop from '../../../assets/chapter06/mapGround.jpg'\r\nimport bodyShadow from '../../../assets/chapter06/mapShadowBody.jpg'\r\nimport pxjpg2 from '../../../assets/matIronBox/posx.jpg'\r\nimport nxjpg2 from '../../../assets/matIronBox/negx.jpg'\r\nimport pyjpg2 from '../../../assets/matIronBox/posy.jpg'\r\nimport nyjpg2 from '../../../assets/matIronBox/negy.jpg'\r\nimport pzjpg2 from '../../../assets/matIronBox/posz.jpg'\r\nimport nzjpg2 from '../../../assets/matIronBox/negz.jpg'\r\n\r\n\r\nimport { system_PlayerMoveOnLevel } from '../systems/system_PlayerMoveOnLevel'\r\nimport { system_PlayerNearLevelItems } from '../systems/system_PlayerNearLevelItems'\r\n\r\n\r\nimport { actions } from '../actions/actions'\r\nimport { Ui } from \"../ui/Ui\";\r\n\r\n\r\nimport ironNormal from '../../../assets/chapter06/concrete/broken_down_concrete2_Normal-dx.jpg'\r\nimport ironAO from '../../../assets/chapter06/concrete/broken_down_concrete2_ao.jpg'\r\nimport ironAlbedo from '../../../assets/chapter06/concrete/broken_down_concrete2_albedo.jpg'\r\n\r\nimport bodySrc from '../../../assets/chapter06/body.obj'\r\nimport endWaySrc from '../../../assets/chapter06/endWay.obj'\r\n\r\nimport flareSrc from '../../../assets/chapter06/flare.png'\r\n\r\n\r\n\r\nexport const GAME_MODULES = [\r\n    {\r\n        key: 'emitter',\r\n        constr: EventEmitter,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'deviceResizer',\r\n        constr: DeviceResizer,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'loaderAssets',\r\n        constr: LoaderAssets,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n\r\n    /////////////////////////////////////////\r\n\r\n    {\r\n        key: 'frameUpdater',\r\n        constr: FrameUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'tweenUpdater',\r\n        constr: Helper_TweenUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'studio',\r\n        constr: Studio,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'keyBoard',\r\n        constr: KeyBoard,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'player',\r\n        constr: Player,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_PlayerNearLevelItems',\r\n        constr: system_PlayerNearLevelItems,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'materialsLib',\r\n        constr: Helper_MaterialsLib,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_PlayerMoveOnLevel',\r\n        constr: system_PlayerMoveOnLevel,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    // {\r\n    //     key: 'system_Sound',\r\n    //     constr: system_Sound,\r\n    //     initStateKey: 'beforeStartPlay',\r\n    //     assetsToLoad: [\r\n    //         { type: 'soundMp3', path: soundAmbientSrc, key: 'soundAmbient' },\r\n    //         //{ type: 'soundMp3', path: carStart, key: 'carStart' },\r\n    //         //{ type: 'soundMp3', path: carLoop, key: 'carLoop' },\r\n    //     ]\r\n    // },\r\n    {\r\n        key: 'customUi',\r\n        constr: Ui,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'actions',\r\n        constr: actions,\r\n        initStateKey: 'beforeStartPlay',\r\n            assetsToLoad: [\r\n                { type: 'cubeTextures', path: [ pxjpg2, nxjpg2, pyjpg2, nyjpg2, pzjpg2, nzjpg2, ], key: 'skyBox3' },\r\n                { type: 'img', path: mapTop, key: 'mapTop', wrap: true },\r\n                { type: 'img', path: ironNormal, key: 'ironNormal', wrap: true },\r\n                { type: 'img', path: ironAlbedo, key: 'ironAlbedo', wrap: true },\r\n                { type: 'img', path: ironAO, key: 'ironAO', wrap: true },\r\n                { type: 'obj', path: bodySrc, key: 'bodyModel' },\r\n                { type: 'img', path: bodyShadow, key: 'bodyDropShadow' },\r\n                { type: 'obj', path: endWaySrc, key: 'endWayModel' },\r\n                { type: 'img', path: bodyShadow, key: 'flareSrc' },\r\n            ],\r\n\r\n    },\r\n]","export default __webpack_public_path__ + \"static/media/flare.0f5829bc.png\";","\r\n\r\n\r\nconst MAX_W = 400\r\nconst MIN_W = 350\r\n\r\n\r\n\r\nexport class DeviceResizer {\r\n    constructor (gameContext) {\r\n        let { emitter, appWrapper } = gameContext\r\n\r\n        !appWrapper && (appWrapper = document.querySelector('.app-wrapper')) \r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-fullscreen') openAppFullScreenIfMobile()\r\n        })\r\n\r\n        /** fullscreen */\r\n        const openAppFullScreenIfMobile = () => {\r\n            if (appWrapper.requestFullscreen) {\r\n                appWrapper.requestFullscreen()\r\n            } else if (appWrapper.mozRequestFullScreen) {\r\n                appWrapper.mozRequestFullScreen()\r\n            } else if (appWrapper.webkitRequestFullscreen) {\r\n                appWrapper.webkitRequestFullscreen()\r\n            } else if (appWrapper.msRequestFullscreen) {\r\n                appWrapper.msRequestFullscreen()\r\n            }\r\n        }\r\n\r\n        /** resize */\r\n        const resize = e => {\r\n            appWrapper.style.width = window.innerWidth + 'px'\r\n            appWrapper.style.height = window.innerHeight + 'px'\r\n            appWrapper.style.fontSize = Math.max(Math.min(Math.min(window.innerWidth, window.innerHeight), MAX_W), MIN_W) / 50 + 'px'\r\n\r\n            if (!document.fullscreenElement) {\r\n                emitter.emit('screenMode')('exitFullScreen')\r\n            }\r\n\r\n        }\r\n\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n    }\r\n}\r\n","import * as TWEEN from '@tweenjs/tween.js'\r\n\r\n\r\nexport class Helper_TweenUpdater {\r\n    constructor (gameContext) {\r\n        gameContext['emitter'].subscribe('frameUpdate')(() => TWEEN.update())\r\n    }\r\n}","import { UI } from '../../../_CORE/ui/UI'\r\nimport CustomReactComponent from \"./CustomReactComponent\";\r\nimport { createCustomStore  } from \"./store\";\r\n\r\nexport class Ui {\r\n    constructor(root) {\r\n        root.appWrapper = document.querySelector('.app-wrapper')\r\n        root.CustomReactComponent = CustomReactComponent\r\n        root.customStore = createCustomStore(root)\r\n\r\n        const ui = new UI(root)\r\n        root.ui = ui\r\n    }\r\n}","import * as TWEEN from '@tweenjs/tween.js'\r\n//import * as THREE from 'three'\r\nimport {\r\n    //START_ENV_CONFIG,\r\n    //START_ENV_CONFIG_2,\r\n    //START_ENV_CONFIG_3,\r\n    //ENV_CONFIG_WORD_1,\r\n    //ENV_CONFIG_WORD_2,\r\n    //LOCATIONS_QUADRANTS,\r\n    //SIZE_QUADRANT,\r\n    //playerConfig,\r\n} from '../constants/constants_elements';\r\nimport { createWorldReal } from '../systems/system_worldReal'\r\nimport { createStatue } from \"../Entities/statue\";\r\n\r\nimport { createCheckerRoom } from '../helpers/checkerPlayerRoom'\r\nimport { ARR_STATES } from './gameStateActions'\r\n\r\nimport {\r\n    ENV_START\r\n} from '../constants/constants_elements'\r\n\r\nimport { startPipeline } from './catScenes'\r\nimport { createParticles } from '../Entities/particles'\r\n\r\n\r\n//const ENV_RED = { fogNear: 0, fogFar: 1000, colorFog: 0x880000, colorBack: 0x010101, backgroundImgKey: null }\r\n//const ENV_NORMAL =  { fogNear: 0, fogFar: 1000, colorFog: 0x455861, colorBack: 0x455861, backgroundImgKey: null }\r\n\r\n\r\n\r\nexport class actions {\r\n    constructor (root) {\r\n        this._root = root\r\n\r\n        const {\r\n            dispatcher,\r\n            frameUpdater,\r\n            studio,\r\n            system_PlayerMoveOnLevel,\r\n            player,\r\n            ui,\r\n        } = this._root\r\n\r\n\r\n        /** prepare ui ******/\r\n        dispatcher.dispatch({\r\n            type: 'CHANGE_INFO_CHAPTER',\r\n            currentChapterIndex: 5,\r\n        })\r\n        dispatcher.dispatch({\r\n            type: 'ENABLE_CONTROL_SOUND',\r\n        })\r\n\r\n\r\n        /** world */\r\n        //player.setToPos(-30, -40, -150)\r\n        this._worldReal = createWorldReal(root)\r\n        this._worldReal.addWorld()\r\n        root.worldReal = this._worldReal\r\n\r\n        const statue = createStatue(root)\r\n        statue.m.position.x = 1000\r\n        statue.m.position.z = 3000\r\n        statue.m.position.y = -61\r\n        statue.m.rotation.y = Math.PI\r\n        studio.addToScene(statue.m)\r\n        root.statue = statue\r\n\r\n\r\n        const points = createParticles(root)\r\n        points.m.visible = false\r\n        studio.addToScene(points.m)\r\n        root.points = points\r\n\r\n\r\n        /** game state */\r\n        const checkerPlayerRoom = createCheckerRoom(root, this._worldReal.roomsArr)\r\n\r\n        let gameState = null\r\n        const iterate = i => {\r\n            if (!ARR_STATES[i]) {\r\n                console.log('pipeline-complete')\r\n                return;\r\n            }\r\n            console.log('stateIndex: ', i, ARR_STATES[i].name)\r\n            gameState = ARR_STATES[i](root)\r\n            gameState.onComplete(() => {\r\n                iterate(i + 1)\r\n            })\r\n        }\r\n        iterate(0)\r\n        checkerPlayerRoom.onChangeRoom(r => {\r\n            gameState.update(r)\r\n        })\r\n\r\n\r\n\r\n\r\n        root.emitter.subscribe('playerMove')(() => {\r\n            points.setCenterPos(\r\n                player.mesh.position.x,\r\n                player.mesh.position.y,\r\n                player.mesh.position.z,\r\n            )\r\n        })\r\n\r\n\r\n\r\n        /** update */\r\n        frameUpdater.on(data => {\r\n            TWEEN.update()\r\n            system_PlayerMoveOnLevel.update(data)\r\n            points.update()\r\n            studio.drawFrame()\r\n        })\r\n\r\n        studio.changeEnvironment(ENV_START, { time: 1 })\r\n\r\n\r\n        ui.showStartButton(() => {\r\n            startPipeline(root).then()\r\n            //player.toggleBlocked(false)\r\n            //this._root.system_Sound && this._root.system_Sound.playAmbient()\r\n        })\r\n    }\r\n\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\nexport const createParticles = (root) => {\r\n    const MAX_ALPHA = 1\r\n    const MIN_SPD_ALPHA = .0025\r\n    const MAX_SPD_RND_ALPHA =  0.005\r\n\r\n    const MAX_SPD = 0.05\r\n    const MAX_SPD_HALF = MAX_SPD / 2\r\n\r\n\r\n    const material = new THREE.PointsMaterial( {\r\n        fog: false,\r\n        size: 35,\r\n        color: 0x000000,\r\n        alphaTest: 0.,\r\n        map: root.assets.flareSrc,\r\n        //blending: THREE.AdditiveBlending,\r\n        depthTest: true,\r\n        transparent: true,\r\n        alphaMap: root.assets.flareSrc,\r\n        vertexColors: true,\r\n        side: THREE.DoubleSide,\r\n    } );\r\n    \r\n\r\n    const centerPoint = [0, -25, -0]\r\n    const pointsData = []\r\n\r\n    const\r\n        W = 3000,\r\n        H = 25,\r\n        Z = 3000,\r\n        N = 1000\r\n\r\n    const resetSingleData = () => {\r\n        const userData = {\r\n            spdX: Math.random() * MAX_SPD - MAX_SPD_HALF,\r\n            spdY: Math.random() * MAX_SPD - MAX_SPD_HALF,\r\n            spdZ: Math.random() * MAX_SPD - MAX_SPD_HALF,\r\n            spdAlpha: Math.random() * MAX_SPD_RND_ALPHA + MIN_SPD_ALPHA,\r\n            isMustStartHide: false,\r\n            countIterations: Math.floor(Math.random() * 3 + 1)\r\n        }\r\n        return userData\r\n    }\r\n\r\n    const vertices = []\r\n    const colors = []\r\n    for ( let i = 0; i < N; i ++ ) {\r\n        const x = Math.random() * (W) + centerPoint[0]\r\n        const y = Math.random() * (H) + centerPoint[1]\r\n        const z = Math.random() * (Z) + 200 + centerPoint[2]\r\n        vertices.push( x, y, z )\r\n\r\n        colors.push(0, 0, 0, 1)\r\n\r\n        pointsData.push({\r\n            index: i,\r\n            ...resetSingleData()\r\n        })\r\n    }\r\n    const geometry = new THREE.BufferGeometry()\r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 4))\r\n    const particles = new THREE.Points(geometry, material)\r\n\r\n\r\n    const update = () => {\r\n        for (let i = 0; i < pointsData.length; ++i) {\r\n            const data = pointsData[i]\r\n            geometry.attributes.position.array[i * 3] += data.spdX\r\n            geometry.attributes.position.array[i * 3 + 1] += data.spdY\r\n            geometry.attributes.position.array[i * 3 + 2] += data.spdZ\r\n\r\n\r\n            if (!data.isMustStartHide) {\r\n                geometry.attributes.color.array[i * 4 + 3] += data.spdAlpha\r\n\r\n                if (geometry.attributes.color.array[i * 4 + 3] > MAX_ALPHA) {\r\n                    data.isMustStartHide = true\r\n                }\r\n            }\r\n\r\n            if (data.isMustStartHide) {\r\n                geometry.attributes.color.array[i * 4 + 3] -= data.spdAlpha\r\n\r\n                if (geometry.attributes.color.array[i * 4 + 3] <= 0) {\r\n                    data.isMustStartHide = false\r\n                    data.countIterations--\r\n                    if (data.countIterations === 0) {\r\n                        Object.assign(data, resetSingleData())\r\n                        geometry.attributes.position.array[i * 3] = Math.random() * (W) //- (W / 2) + centerPoint[0]\r\n                        geometry.attributes.position.array[i * 3 + 1] = Math.random() * (H) - (H / 2) + centerPoint[1]\r\n                        geometry.attributes.position.array[i * 3 + 2] = Math.random() * (Z) + 200 //- (Z / 2) + centerPoint[2]\r\n                    }\r\n                }\r\n            }\r\n\r\n            geometry.attributes.position.needsUpdate = true\r\n            geometry.attributes.color.needsUpdate = true\r\n        }\r\n    }\r\n\r\n\r\n   return {\r\n       m: particles, \r\n       stop: () => {\r\n          // isUpdate = false\r\n       },\r\n       start: () => {\r\n          // isUpdate = true\r\n       },\r\n       setCenterPos: (x, y, z) => {\r\n           //centerPoint[0] = x\r\n           //centerPoint[1] = y\r\n           //centerPoint[2] = z\r\n       },\r\n       update,\r\n   }\r\n}","export const createCheckerRoom = (root, roomsData) => {\r\n\r\n    const roomsObj = {}\r\n    for (let i = 0; i < roomsData.length; ++i) {\r\n        roomsObj[roomsData[i].id] = roomsData[i]\r\n    }\r\n\r\n    let arrFs = []\r\n\r\n    let oldPlayerRoomId = null\r\n    let currentPlayerRoomId = null\r\n\r\n    root.emitter.subscribe('playerMove')(dir => {\r\n        if (dir === 'forward') {\r\n            const { x, z } = root.player.mesh.position\r\n            for (let key in roomsObj) {\r\n                if (\r\n                    roomsObj[key].walls.e.p0[1] < z &&\r\n                    roomsObj[key].walls.e.p1[1] > z &&\r\n                    roomsObj[key].walls.n.p0[0] < x &&\r\n                    roomsObj[key].walls.n.p1[0] > x\r\n                ) {\r\n                    currentPlayerRoomId = key\r\n                    if (oldPlayerRoomId !== currentPlayerRoomId) {\r\n                        oldPlayerRoomId = currentPlayerRoomId\r\n                        for (let i = 0; i < arrFs.length; ++i) {\r\n                            arrFs[i](roomsObj[key])\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n    return {\r\n        onChangeRoom: f => {\r\n            arrFs.push(f)\r\n            return () => {\r\n                arrFs = arrFs.filter(item => item !== f)\r\n            }\r\n        },\r\n    }\r\n}","// https://www.artstation.com/artwork/AqP9Wq\r\n\r\n\r\nimport { pipeLineForInit } from '../../_CORE/pipeLines/initPipeLine'\r\nimport * as CONSTANTS from './constants/constants_elements'\r\nimport { GAME_MODULES } from \"./constants/constants_modules\"\r\n\r\n\r\nwindow.addEventListener('load', () => pipeLineForInit(GAME_MODULES, CONSTANTS ))\r\n"],"sourceRoot":""}