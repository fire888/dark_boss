(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{40:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var o={};a.r(o),a.d(o,"SIZE_QUADRANT",(function(){return d})),a.d(o,"LOCATIONS_QUADRANTS",(function(){return m})),a.d(o,"MATERIALS_CONFIG",(function(){return v})),a.d(o,"CONFIG_FOR_INIT",(function(){return y})),a.d(o,"lCol",(function(){return O})),a.d(o,"lW",(function(){return j})),a.d(o,"START_ENV_CONFIG",(function(){return g})),a.d(o,"ENV_CONFIG_WORD_1",(function(){return w})),a.d(o,"ENV_CONFIG_WORD_2",(function(){return C})),a.d(o,"studioConfig",(function(){return _})),a.d(o,"playerConfig",(function(){return x}));var n=a(11),r=a.n(n),s=a(13);function i(){return(i=Object(s.a)(r.a.mark((function e(t,a){var o,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("pageLoaded",t,o={CONSTANTS:a}),n=o.loaderAssets,s=p(t),e.next=6,n.loadAssets(s);case 6:o.assets=e.sent,c("beforeStartPlay",t,o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e,t,a){for(var o=0;o<t.length;++o){var n=t[o],r=n.key,s=n.constr;n.initStateKey===e&&(a[r]=new s(a))}},p=function(e){for(var t=[],a=0;a<e.length;++a)if(e[a].assetsToLoad&&e[a].assetsToLoad.length)for(var o=0;o<e[a].assetsToLoad.length;++o)t.push(e[a].assetsToLoad[o]);return t},l=a(0),u=[1,1,1],h=([].concat(u,u,u,u,u,u),[.5,1,0]),f=([].concat(h,h,h,h,h,h),[1,1,0]),b=([].concat(f,f,f,f,f,f),{iron:{mat:"MeshPhongMaterial",props:{color:13421772,lightMap:"ironAO",lightMapIntensity:.35,normalMap:"ironNormal",normalScale:new l.Vector2(.1,.1),envMap:"skyBox3",reflectivity:.02,shininess:100,specular:131585,vertexColors:!0}},floorMat1:{mat:"MeshPhongMaterial",props:{color:16777215,map:"mapTop",bumpMap:"mapTop",bumpScale:2,reflectivity:.1,shininess:.01,specular:16777215,emissive:5592405}},testBlack:{mat:"MeshPhongMaterial",props:{color:16777215,envMap:"skyBox3",reflectivity:3,specular:16777215,vertexColors:!0}}}),d=5e3,m={"3_-3":"location01","-3_-3":"location02","3_3":"location03","100_1000":"locationToFinish"},v=b,y={isInCar:!1,currentSceneConfig:{isInVirtual:!1,isPlayerInCar:!1,carProps:{keyMesh:"car",keyCollide:"carCollision",position:[0,-50,-100],rotation:[0,2,0]},bodyProps:{keyMesh:"body",position:[-20,-60,-50],rotation:[0,2,0]}}},O=[.3,1,.3],j=.2,g={fogNear:0,fogFar:0,color:4852294,backgroundImgKey:null},w={fogNear:0,fogFar:1e3,color:4544609,backgroundImgKey:null},C={fogNear:1500,fogFar:3e3,color:0,backgroundImgKey:"skyBox"},_={canId:"webgl-canvas",rendererCon:{antialias:!0},amb:{color:16777215,strength:.1},sceneEnvironment:g,composerAddPass:"Saturate"},x={speed:.8,speedRot:.02,speedDown:-.45,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startPos:[0,-45,150],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e4,pos:[0,2,-.5]},frontObjPos:[0,0,-1],backObjPos:[0,0,1],lightDataOne:{color:5592405,strength:1,dist:0,decay:.001,pos:[0,10,0]}},S=a(2),M=a(3),k=a(21),T=a(22),I=function(){var e=null,t=null,a=null,o=null,n=null;return function(r,s){return new Promise((function(i){(function(r){return"obj"===r?e=e||new k.a:"glb"===r||"gltf"===r?a=a||new T.a:"img"===r?t=t||new l.TextureLoader:"cubeTextures"===r?o=o||new l.CubeTextureLoader:"soundMp3"===r?n=n||new l.AudioLoader:void 0})(s).load(r,i)}))}},D=function(){function e(){Object(S.a)(this,e),this.resources={},this._load=I()}return Object(M.a)(e,[{key:"loadAssets",value:function(e){var t=this;return new Promise((function(a){var o=t._load,n=t.resources;function i(e){return c.apply(this,arguments)}function c(){return(c=Object(s.a)(r.a.mark((function t(s){var c,p,l,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e[s]){t.next=5;break}return c=e[s],p=c.key,l=c.path,u=c.type,t.next=4,o(l,u);case 4:n[p]=t.sent;case 5:if(++s,e[s]){t.next=10;break}a(n),t.next=12;break;case 10:return t.next=12,i(s);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}i(0)}))}}]),e}(),P=function(){function e(){Object(S.a)(this,e),this._storage={}}return Object(M.a)(e,[{key:"emit",value:function(e){var t=this;return function(a){return A(t._storage)(e).forEach((function(e){return e(a)}))}}},{key:"subscribe",value:function(e){var t=this;return function(a){return A(t._storage)(e).push(a),function(){return t._storage[e]=t._storage[e].filter((function(e){return e!==a}))}}}},{key:"showAll",value:function(){var e={};for(var t in this._storage)e[t]=this._storage[t].length;console.log(e)}}]),e}(),A=function(e){return function(t){return e[t]=e[t]||[]}},N=a(5),L=a(46),R=function(){function e(){var t=this;Object(S.a)(this,e),this._subscribers=[];var a={time:0,delta:0,count:0,oldTime:0},o=L.a((function(){return a}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0===e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){for(var a=0;a<t._subscribers.length;++a)t._subscribers[a](Object(N.a)({},e));return e}),(function(e){return e.oldTime=e.time,e}),(function(e){return a=e}));!function e(){requestAnimationFrame(e),o(a)}()}return Object(M.a)(e,[{key:"on",value:function(e){var t=this;return this._subscribers.push(e),function(){t._subscribers=t._subscribers.filter((function(t){return t!==e}))}}}]),e}(),E=a(10),F=a(27),G=a(24),z=a(15),B={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel * texel * texel) * vec4(3.);\n}"},U={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D( tDiffuse, vUv );\n  gl_FragColor = (texel + texel * 1.5) * vec4(0.5);\n}"},W=a(23),q=function(){function e(t){var a=this;Object(S.a)(this,e),this._root=t;var o=t.assets,n=t.emitter,r=t.CONSTANTS.studioConfig,s=r.canId,i=r.rendererCon,c=(r.clearColor,r.amb);i.canvas=document.getElementById(s),this._renderer=new l.WebGLRenderer(i),this._renderer.setClearColor(0),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(window.innerWidth,window.innerHeight),this._scene=new l.Scene;var p=t.CONSTANTS.studioConfig.sceneEnvironment,u=p.color,h=p.fogNear,f=p.fogFar,b=p.backgroundImgKey;this._scene.background=o[b]||null,this._scene.fog=new l.Fog(u,h,f);c.color,c.strength;this._lightA=new l.AmbientLight(4544609,.4),this._scene.add(this._lightA),this._playerCamera=new l.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera=new l.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,5e3),this._controlsCamera.position.set(0,0,20);var d=new W.a(this._controlsCamera,this._renderer.domElement);d.target.set(0,0,0),d.update(),this._composer=new F.a(this._renderer),this._renderPass=new G.a(this._scene,this._controlsCamera),this._composer.addPass(this._renderPass),this._root.CONSTANTS.studioConfig.composerAddPass&&("Saturate"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new z.a(B)),"Saturate2"===this._root.CONSTANTS.studioConfig.composerAddPass&&this._composer.addPass(new z.a(U)));var m=new l.Vector3,v=!0,y=null;n.subscribe("keyEvent")((function(e){e.o&&(v?(y=Object(N.a)({},a._scene.fog),a._scene.fog.near=1e4,a._scene.fog.far=2e4,v=!1,a._renderPass.camera=a._controlsCamera,a._playerCamera.getWorldPosition(m),a._controlsCamera.position.x=m.x+100,a._controlsCamera.position.y=m.y+100,a._controlsCamera.position.z=m.z,d.target.set(m.x,m.y,m.z),d.update()):(a._scene.fog.near=y.near,a._scene.fog.far=y.far,v=!0,a._renderPass.camera=a._playerCamera))}));var O=function(){var e={width:window.innerWidth,height:window.innerHeight};a._renderer.setSize(e.width,e.height),a._composer.setSize(e.width,e.height),a._controlsCamera&&(a._controlsCamera.aspect=e.width/e.height,a._controlsCamera.updateProjectionMatrix()),a._playerCamera&&(a._playerCamera.aspect=e.width/e.height,a._playerCamera.updateProjectionMatrix())};window.addEventListener("resize",O),O(),this.addToScene=function(e){return a._scene.add(e)},this.removeFromScene=function(e){return a._scene.remove(e)},this.drawFrame=function(){a._composer.render(a._scene,a._controlsCamera)},n.subscribe("changeSceneEnvironment")((function(e){console.log("deprecated!!","studio","changeSceneEnvironment",e)}))}return Object(M.a)(e,[{key:"setCamera",value:function(e){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),this._playerCamera=e,this._renderPass.camera=this._playerCamera}},{key:"changeEnvironment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._changeFog(e,t),this._changeBackground(e,t)}},{key:"_changeFog",value:function(e,t){var a=this,o=e.fogNear,n=e.fogFar,r=e.color;if(this._scene.fog.near!==o||this._scene.fog.far!==n||this._scene.fog.color!==n){var s={color:this._scene.fog.color,near:this._scene.fog.near,far:this._scene.fog.far},i={color:new l.Color(r),near:o,far:n};new E.a(s).to(i,t&&t.time||3e3).onUpdate((function(){a._scene.fog.color=s.color,a._scene.fog.near=s.near,a._scene.fog.far=s.far,a._renderer.setClearColor(s.color)})).start()}}},{key:"_changeBackground",value:function(e){var t=e.backgroundImgKey;t!==this._backgroundImgKey&&(this._backgroundImgKey=t,this._scene.background=this._root.assets[t]||null)}}]),e}(),K=function(){function e(t){Object(S.a)(this,e);var a=t.emitter,o={up:!1,down:!1,left:!1,right:!1,p:!1},n={up:!0,down:!0,left:!0,right:!0};this.keysEnabled=n,this.keys=o;var r=function(e,t){switch(e){case 38:case 87:n.up&&(o.up=t);break;case 40:case 83:n.down&&(o.down=t);break;case 37:case 65:o.left=t;break;case 39:case 68:o.right=t;break;case 79:o.o=t;break;case 80:o.p=t}a.emit("keyEvent")(o)};document.addEventListener("keydown",(function(e){return r(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){return r(e.keyCode,!1)})),a.subscribe("mouseDown")((function(e){"butt-left"===e&&r(37,!0),"butt-right"===e&&r(39,!0),"butt-front"===e&&r(38,!0),"butt-back"===e&&r(40,!0)})),a.subscribe("mouseUp")((function(e){"butt-left"===e&&r(37,!1),"butt-right"===e&&r(39,!1),"butt-front"===e&&r(38,!1),"butt-back"===e&&r(40,!1)}))}return Object(M.a)(e,[{key:"toggleEnableKeys",value:function(e,t){this.keysEnabled[e]=t,!t&&(this.keys[e]=!1)}}]),e}(),V=function(){function e(t){Object(S.a)(this,e);var a=t.studio,o=t.CONSTANTS.playerConfig,n=(o.startPos,o.startRot,o.cameraData),r=(o.frontObjPos,o.backObjPos,o.lightDataOne);this._camera=null,this.isBlocked=!0,this.isFreeze=!0,this.mesh=new l.Object3D,this.mesh.rotation.fromArray([0,0,0]),this.mesh.userData.type="player",this.bottomObj=new l.Object3D,this.bottomObj.position.fromArray([0,-.02,0]),this.mesh.add(this.bottomObj),this.frontObj=new l.Object3D,this.frontObj.position.fromArray([0,0,-.02]),this.mesh.add(this.frontObj),this.backObj=new l.Object3D,this.backObj.position.fromArray([0,0,.02]),this.mesh.add(this.backObj);var s=n.fov,i=n.ratio,c=n.near,p=n.far;n.pos;if(this._camera=new l.PerspectiveCamera(s,i,c,p),this._camera.position.fromArray([0,0,-2]),this.mesh.add(this._camera),r){var u=r.color,h=r.strenth,f=r.pos,b=new l.PointLight(u,h);b.position.fromArray(f),this.mesh.add(b)}a.setCamera(this._camera),a.addToScene(this.mesh)}return Object(M.a)(e,[{key:"toggleFeeze",value:function(e){this.isFeeze=e}},{key:"toggleCanMove",value:function(e,t){}},{key:"getObj",value:function(){return this.mesh}},{key:"getCamera",value:function(){return this._camera}},{key:"setToPos",value:function(e,t,a){this.mesh.position.set(e,t,a)}}]),e}(),H=function(e,t){for(var a in e)e[a].wrapS&&(e[a].wrapS=e[a].wrapT=l.RepeatWrapping);var o=["bumpMap","envMap","map","normalMap","lightMap","aoMap","alphaMap"],n={},r=function(a){n[a]=new l[t[a].mat](Object(N.a)({},t[a].props)),o.map((function(o){return t[a].props[o]&&(n[a][o]=e[t[a].props[o]])}))};for(var s in t)r(s);return n},Y=a.p+"static/media/mapGround.8bd68b3e.jpg",J=a.p+"static/media/posx.be2d83a2.jpg",Z=a.p+"static/media/negx.d016c8e7.jpg",Q=a.p+"static/media/posy.01cfd221.jpg",X=a.p+"static/media/negy.f01f8356.jpg",$=a.p+"static/media/posz.ef37b8e1.jpg",ee=a.p+"static/media/negz.f346a80a.jpg",te=a(12),ae=function(){function e(){Object(S.a)(this,e),this._arrMeshes=[],this._vecStart=new l.Vector3,this._vecDir=new l.Vector3,this._rayCaster=new l.Raycaster(this._vecStart,this._vecDir)}return Object(M.a)(e,[{key:"setItemToCollision",value:function(e){for(var t=0;t<this._arrMeshes.length;++t)if(this._arrMeshes[t]===e)return;this._arrMeshes.push(e)}},{key:"removeItemFromCollision",value:function(e){this._arrMeshes=this._arrMeshes.filter((function(t){return t!==e}))}},{key:"checkCollisions",value:function(e,t,a){e.getWorldPosition(this._vecStart),t.getWorldPosition(this._vecDir),this._vecDir.sub(this._vecStart);var o=this._rayCaster.intersectObjects(this._arrMeshes);return o[0]&&o[0].distance<a?[!0,o[0]]:[!1,null]}}]),e}(),oe=function(){function e(t){var a=this;Object(S.a)(this,e);var o=t.emitter,n=t.CONSTANTS,r=t.player,s=(t.assets,t.studio,new ae),i=n.playerConfig,c=i.speed,p=i.speedRot,l=!0;r.toggleBlocked=function(e){return l=e},this.isCanMove={forward:!0,back:!0},r.toggleCanMove=function(e,t){return a.isCanMove[e]=t},this.isFreeze=!1;var u={};this.update=function(e){a.isFreeze||(u.left&&r.mesh.rotateY(p*e.count),u.right&&r.mesh.rotateY(-p*e.count),l||(u.up&&a.isCanMove.forward&&function(e){var t=s.checkCollisions(r.mesh,r.frontObj,17),a=Object(te.a)(t,2),n=a[0],i=a[1];n?i.object.userData.type&&"alert"===i.object.userData.type&&o.emit("collision")(i.object.userData.event):(r.mesh.translateZ(-c*e.count),o.emit("playerMove")("forward"))}(e),u.down&&a.isCanMove.back&&function(e){var t=s.checkCollisions(r.mesh,r.backObj,17);Object(te.a)(t,1)[0]||(r.mesh.translateZ(c*e.count),o.emit("playerMove")("back"))}(e),u.p&&console.log("player.mesh.position.fromArray([".concat(r.mesh.position.x,", ").concat(r.mesh.position.y,", ").concat(r.mesh.position.z,"])"))))},o.subscribe("keyEvent")((function(e){u=e})),this._collisionsWalls=s}return Object(M.a)(e,[{key:"addItemToPlayerCollision",value:function(e){this._collisionsWalls.setItemToCollision(e)}},{key:"removeItemFromPlayerCollision",value:function(e){this._collisionsWalls.removeItemFromCollision(e)}},{key:"toggleFreeze",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isFreeze;this.isFreeze=e}}]),e}(),ne=function(){function e(t){var a=this;Object(S.a)(this,e),this._root=t;var o=t.emitter,n=t.player;this._itemsToCheck=[],o.subscribe("playerMove")((function(){for(var e=0;e<a._itemsToCheck.length;++e){var t=n.mesh.position.distanceTo(a._itemsToCheck[e].position);if(!a._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t<a._itemsToCheck[e].userData.nearPlayerItemNear)return a._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!0,void o.emit("checkNear")({item:a._itemsToCheck[e].userData.nearPlayerItemKey,is:!0});a._itemsToCheck[e].userData.nearPlayerIsNearPlayer&&t>a._itemsToCheck[e].userData.nearPlayerItemNear&&(a._itemsToCheck[e].userData.nearPlayerIsNearPlayer=!1,o.emit("checkNear")({item:a._itemsToCheck[e].userData.nearPlayerItemKey,is:!1}))}}))}return Object(M.a)(e,[{key:"setItemToCheck",value:function(e,t,a,o){for(var n=0;n<this._itemsToCheck.length;++n)if(e===this._itemsToCheck[n])return;t&&(e.userData.nearPlayerItemKey=t),a&&(e.userData.nearPlayerItemNear=a),o&&(e.userData.nearPlayerItemFar=o),e.userData.nearPlayerIsNearPlayer=!1,this._itemsToCheck.push(e)}},{key:"removeItemFromCheck",value:function(e){this._itemsToCheck=this._itemsToCheck.filter((function(t){return t!==e}))}}]),e}(),re=a(1),se=Float32Array;function ie(e,t,a){return(a=a||new se(3))[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],a}function ce(e,t){t=t||new se(3);var a=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return a>1e-5&&(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a),t}function pe(e,t,a){return(a=a||new se(3))[0]=e[1]*t[2]-e[2]*t[1],a[1]=e[2]*t[0]-e[0]*t[2],a[2]=e[0]*t[1]-e[1]*t[0],a}function le(e,t){var a=e[0]-t[0],o=e[1]-t[1],n=e[2]-t[2];return a*a+o*o+n*n}function ue(e,t){t=t||new se(16);var a=e[0],o=e[1],n=e[2],r=e[3],s=e[4],i=e[5],c=e[6],p=e[7],l=e[8],u=e[9],h=e[10],f=e[11],b=e[12],d=e[13],m=e[14],v=e[15],y=h*v,O=m*f,j=c*v,g=m*p,w=c*f,C=h*p,_=n*v,x=m*r,S=n*f,M=h*r,k=n*p,T=c*r,I=l*d,D=b*u,P=s*d,A=b*i,N=s*u,L=l*i,R=a*d,E=b*o,F=a*u,G=l*o,z=a*i,B=s*o,U=y*i+g*u+w*d-(O*i+j*u+C*d),W=O*o+_*u+M*d-(y*o+x*u+S*d),q=j*o+x*i+k*d-(g*o+_*i+T*d),K=C*o+S*i+T*u-(w*o+M*i+k*u),V=1/(a*U+s*W+l*q+b*K);return t[0]=V*U,t[1]=V*W,t[2]=V*q,t[3]=V*K,t[4]=V*(O*s+j*l+C*b-(y*s+g*l+w*b)),t[5]=V*(y*a+x*l+S*b-(O*a+_*l+M*b)),t[6]=V*(g*a+_*s+T*b-(j*a+x*s+k*b)),t[7]=V*(w*a+M*s+k*l-(C*a+S*s+T*l)),t[8]=V*(I*p+A*f+N*v-(D*p+P*f+L*v)),t[9]=V*(D*r+R*f+G*v-(I*r+E*f+F*v)),t[10]=V*(P*r+E*p+z*v-(A*r+R*p+B*v)),t[11]=V*(L*r+F*p+B*f-(N*r+G*p+z*f)),t[12]=V*(P*h+L*m+D*c-(N*m+I*c+A*h)),t[13]=V*(F*m+I*n+E*h-(R*h+G*m+D*n)),t[14]=V*(R*c+B*m+A*n-(z*m+P*n+E*c)),t[15]=V*(z*h+N*n+G*c-(F*c+B*h+L*n)),t}var he,fe={copy:function(e,t){return(t=t||new se(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},lookAt:function(e,t,a,o){o=o||new se(16);var n=ce(ie(e,t)),r=ce(pe(a,n)),s=ce(pe(n,r));return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=0,o[4]=s[0],o[5]=s[1],o[6]=s[2],o[7]=0,o[8]=n[0],o[9]=n[1],o[10]=n[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},addVectors:function(e,t,a){return(a=a||new se(3))[0]=e[0]+t[0],a[1]=e[1]+t[1],a[2]=e[2]+t[2],a},subtractVectors:ie,scaleVector:function(e,t,a){return(a=a||new se(3))[0]=e[0]*t,a[1]=e[1]*t,a[2]=e[2]*t,a},distance:function(e,t){return Math.sqrt(le(e,t))},distanceSq:le,normalize:ce,compose:function(e,t,a,o){o=o||new se(16);var n=t[0],r=t[1],s=t[2],i=t[3],c=n+n,p=r+r,l=s+s,u=n*c,h=n*p,f=n*l,b=r*p,d=r*l,m=s*l,v=i*c,y=i*p,O=i*l,j=a[0],g=a[1],w=a[2];return o[0]=(1-(b+m))*j,o[1]=(h+O)*j,o[2]=(f-y)*j,o[3]=0,o[4]=(h-O)*g,o[5]=(1-(u+m))*g,o[6]=(d+v)*g,o[7]=0,o[8]=(f+y)*w,o[9]=(d-v)*w,o[10]=(1-(u+b))*w,o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o},cross:pe,decompose:function(e,t,a,o){var n=fe.length(e.slice(0,3)),r=fe.length(e.slice(4,7)),s=fe.length(e.slice(8,11));(function(e){var t=e[0],a=e[1],o=e[2],n=e[3],r=e[4],s=e[5],i=e[6],c=e[7],p=e[8],l=e[9],u=e[10],h=e[11],f=e[12],b=e[13],d=e[14],m=e[15],v=u*m,y=d*h,O=i*m,j=d*c,g=i*h,w=u*c,C=o*m,_=d*n,x=o*h,S=u*n,M=o*c,k=i*n;return 1/(t*(v*s+j*l+g*b-(y*s+O*l+w*b))+r*(y*a+C*l+S*b-(v*a+_*l+x*b))+p*(O*a+_*s+M*b-(j*a+C*s+k*b))+f*(w*a+x*s+k*l-(g*a+S*s+M*l)))})(e)<0&&(n=-n),t[0]=e[12],t[1]=e[13],t[2]=e[14];var i=fe.copy(e),c=1/n,p=1/r,l=1/s;i[0]*=c,i[1]*=c,i[2]*=c,i[4]*=p,i[5]*=p,i[6]*=p,i[8]*=l,i[9]*=l,i[10]*=l,function(e,t){var a=e[0],o=e[4],n=e[8],r=e[1],s=e[5],i=e[9],c=e[2],p=e[6],l=e[10],u=a+s+l;if(u>0){var h=.5/Math.sqrt(u+1);t[3]=.25/h,t[0]=(p-i)*h,t[1]=(n-c)*h,t[2]=(r-o)*h}else if(a>s&&a>l){var f=2*Math.sqrt(1+a-s-l);t[3]=(p-i)/f,t[0]=.25*f,t[1]=(o+r)/f,t[2]=(n+c)/f}else if(s>l){var b=2*Math.sqrt(1+s-a-l);t[3]=(n-c)/b,t[0]=(o+r)/b,t[1]=.25*b,t[2]=(i+p)/b}else{var d=2*Math.sqrt(1+l-a-s);t[3]=(r-o)/d,t[0]=(n+c)/d,t[1]=(i+p)/d,t[2]=.25*d}}(i,a),o[0]=n,o[1]=r,o[2]=s},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},identity:function(e){return(e=e||new se(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new se(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},orthographic:function(e,t,a,o,n,r,s){return(s=s||new se(16))[0]=2/(t-e),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(o-a),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(n-r),s[11]=0,s[12]=(e+t)/(e-t),s[13]=(a+o)/(a-o),s[14]=(n+r)/(n-r),s[15]=1,s},frustum:function(e,t,a,o,n,r,s){var i=t-e,c=o-a,p=r-n;return(s=s||new se(16))[0]=2*n/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n/c,s[6]=0,s[7]=0,s[8]=(e+t)/i,s[9]=(o+a)/c,s[10]=-(r+n)/p,s[11]=-1,s[12]=0,s[13]=0,s[14]=-2*n*r/p,s[15]=0,s},perspective:function(e,t,a,o,n){n=n||new se(16);var r=Math.tan(.5*Math.PI-.5*e),s=1/(a-o);return n[0]=r/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(a+o)*s,n[11]=-1,n[12]=0,n[13]=0,n[14]=a*o*s*2,n[15]=0,n},translation:function(e,t,a,o){return(o=o||new se(16))[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=e,o[13]=t,o[14]=a,o[15]=1,o},translate:function(e,t,a,o,n){n=n||new se(16);var r=e[0],s=e[1],i=e[2],c=e[3],p=e[4],l=e[5],u=e[6],h=e[7],f=e[8],b=e[9],d=e[10],m=e[11],v=e[12],y=e[13],O=e[14],j=e[15];return e!==n&&(n[0]=r,n[1]=s,n[2]=i,n[3]=c,n[4]=p,n[5]=l,n[6]=u,n[7]=h,n[8]=f,n[9]=b,n[10]=d,n[11]=m),n[12]=r*t+p*a+f*o+v,n[13]=s*t+l*a+b*o+y,n[14]=i*t+u*a+d*o+O,n[15]=c*t+h*a+m*o+j,n},xRotation:function(e,t){t=t||new se(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=o,t[7]=0,t[8]=0,t[9]=-o,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yRotation:function(e,t){t=t||new se(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=a,t[1]=0,t[2]=-o,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=o,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zRotation:function(e,t){t=t||new se(16);var a=Math.cos(e),o=Math.sin(e);return t[0]=a,t[1]=o,t[2]=0,t[3]=0,t[4]=-o,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xRotate:function(e,t,a){a=a||new se(16);var o=e[4],n=e[5],r=e[6],s=e[7],i=e[8],c=e[9],p=e[10],l=e[11],u=Math.cos(t),h=Math.sin(t);return a[4]=u*o+h*i,a[5]=u*n+h*c,a[6]=u*r+h*p,a[7]=u*s+h*l,a[8]=u*i-h*o,a[9]=u*c-h*n,a[10]=u*p-h*r,a[11]=u*l-h*s,e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},yRotate:function(e,t,a){a=a||new se(16);var o=e[0],n=e[1],r=e[2],s=e[3],i=e[8],c=e[9],p=e[10],l=e[11],u=Math.cos(t),h=Math.sin(t);return a[0]=u*o-h*i,a[1]=u*n-h*c,a[2]=u*r-h*p,a[3]=u*s-h*l,a[8]=u*i+h*o,a[9]=u*c+h*n,a[10]=u*p+h*r,a[11]=u*l+h*s,e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},zRotate:function(e,t,a){a=a||new se(16);var o=e[0],n=e[1],r=e[2],s=e[3],i=e[4],c=e[5],p=e[6],l=e[7],u=Math.cos(t),h=Math.sin(t);return a[0]=u*o+h*i,a[1]=u*n+h*c,a[2]=u*r+h*p,a[3]=u*s+h*l,a[4]=u*i-h*o,a[5]=u*c-h*n,a[6]=u*p-h*r,a[7]=u*l-h*s,e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},axisRotation:function(e,t,a){a=a||new se(16);var o=e[0],n=e[1],r=e[2],s=Math.sqrt(o*o+n*n+r*r),i=(o/=s)*o,c=(n/=s)*n,p=(r/=s)*r,l=Math.cos(t),u=Math.sin(t),h=1-l;return a[0]=i+(1-i)*l,a[1]=o*n*h+r*u,a[2]=o*r*h-n*u,a[3]=0,a[4]=o*n*h-r*u,a[5]=c+(1-c)*l,a[6]=n*r*h+o*u,a[7]=0,a[8]=o*r*h+n*u,a[9]=n*r*h-o*u,a[10]=p+(1-p)*l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},axisRotate:function(e,t,a,o){o=o||new se(16);var n=t[0],r=t[1],s=t[2],i=Math.sqrt(n*n+r*r+s*s),c=(n/=i)*n,p=(r/=i)*r,l=(s/=i)*s,u=Math.cos(a),h=Math.sin(a),f=1-u,b=c+(1-c)*u,d=n*r*f+s*h,m=n*s*f-r*h,v=n*r*f-s*h,y=p+(1-p)*u,O=r*s*f+n*h,j=n*s*f+r*h,g=r*s*f-n*h,w=l+(1-l)*u,C=e[0],_=e[1],x=e[2],S=e[3],M=e[4],k=e[5],T=e[6],I=e[7],D=e[8],P=e[9],A=e[10],N=e[11];return o[0]=b*C+d*M+m*D,o[1]=b*_+d*k+m*P,o[2]=b*x+d*T+m*A,o[3]=b*S+d*I+m*N,o[4]=v*C+y*M+O*D,o[5]=v*_+y*k+O*P,o[6]=v*x+y*T+O*A,o[7]=v*S+y*I+O*N,o[8]=j*C+g*M+w*D,o[9]=j*_+g*k+w*P,o[10]=j*x+g*T+w*A,o[11]=j*S+g*I+w*N,e!==o&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o},scaling:function(e,t,a,o){return(o=o||new se(16))[0]=e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},scale:function(e,t,a,o,n){return(n=n||new se(16))[0]=t*e[0],n[1]=t*e[1],n[2]=t*e[2],n[3]=t*e[3],n[4]=a*e[4],n[5]=a*e[5],n[6]=a*e[6],n[7]=a*e[7],n[8]=o*e[8],n[9]=o*e[9],n[10]=o*e[10],n[11]=o*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},multiply:function(e,t,a){a=a||new se(16);var o=t[0],n=t[1],r=t[2],s=t[3],i=t[4],c=t[5],p=t[6],l=t[7],u=t[8],h=t[9],f=t[10],b=t[11],d=t[12],m=t[13],v=t[14],y=t[15],O=e[0],j=e[1],g=e[2],w=e[3],C=e[4],_=e[5],x=e[6],S=e[7],M=e[8],k=e[9],T=e[10],I=e[11],D=e[12],P=e[13],A=e[14],N=e[15];return a[0]=o*O+n*C+r*M+s*D,a[1]=o*j+n*_+r*k+s*P,a[2]=o*g+n*x+r*T+s*A,a[3]=o*w+n*S+r*I+s*N,a[4]=i*O+c*C+p*M+l*D,a[5]=i*j+c*_+p*k+l*P,a[6]=i*g+c*x+p*T+l*A,a[7]=i*w+c*S+p*I+l*N,a[8]=u*O+h*C+f*M+b*D,a[9]=u*j+h*_+f*k+b*P,a[10]=u*g+h*x+f*T+b*A,a[11]=u*w+h*S+f*I+b*N,a[12]=d*O+m*C+v*M+y*D,a[13]=d*j+m*_+v*k+y*P,a[14]=d*g+m*x+v*T+y*A,a[15]=d*w+m*S+v*I+y*N,a},inverse:ue,transformVector:function(e,t,a){a=a||new se(4);for(var o=0;o<4;++o){a[o]=0;for(var n=0;n<4;++n)a[o]+=t[n]*e[4*n+o]}return a},transformPoint:function(e,t,a){a=a||new se(3);var o=t[0],n=t[1],r=t[2],s=o*e[3]+n*e[7]+r*e[11]+e[15];return a[0]=(o*e[0]+n*e[4]+r*e[8]+e[12])/s,a[1]=(o*e[1]+n*e[5]+r*e[9]+e[13])/s,a[2]=(o*e[2]+n*e[6]+r*e[10]+e[14])/s,a},transformDirection:function(e,t,a){a=a||new se(3);var o=t[0],n=t[1],r=t[2];return a[0]=o*e[0]+n*e[4]+r*e[8],a[1]=o*e[1]+n*e[5]+r*e[9],a[2]=o*e[2]+n*e[6]+r*e[10],a},transformNormal:function(e,t,a){a=a||new se(3);var o=ue(e),n=t[0],r=t[1],s=t[2];return a[0]=n*o[0]+r*o[1]+s*o[2],a[1]=n*o[4]+r*o[5]+s*o[6],a[2]=n*o[8]+r*o[9]+s*o[10],a},setDefaultType:function(e){var t=se;return se=e,t}},be=(Math.floor,Math.random),de=function(e,t){return e+be()*(t-e)},me=function(e,t,a,o){return[].concat(Object(re.a)(e),Object(re.a)(t),Object(re.a)(a),Object(re.a)(e),Object(re.a)(a),Object(re.a)(o))},ve=function(e,t,a,o){return[].concat(Object(re.a)(e),Object(re.a)(t),Object(re.a)(a),Object(re.a)(e),Object(re.a)(a),Object(re.a)(o))},ye=function(e){return[].concat(Object(re.a)(e),Object(re.a)(e),Object(re.a)(e),Object(re.a)(e),Object(re.a)(e),Object(re.a)(e))},Oe=function(e,t){var a=Math.atan(t/e);return e<0&&t>0&&(a=Math.PI-Math.abs(a)),e<0&&t<=0&&(a=Math.PI+Math.abs(a)),a},je=function(e,t,a,o,n,r,s){var i=t[0]-e[0],c=a[1]-e[1],p=de(.3*i,.7*i),l=de(.3*c,.7*c);s&&(p=i*s,l=c*s);var u=e[0]+(i-p)/2,h=t[0]-(i-p)/2,f=e[1]+(c-l)/2,b=a[1]-(c-l)/2,d=[u,f,e[2]],m=[h,f,e[2]],v=[h,b,e[2]],y=[u,b,e[2]],O=[];return O.push.apply(O,Object(re.a)(me(d,m,v,y)).concat(Object(re.a)(me(e,t,m,d)),Object(re.a)(me(m,t,a,v)),Object(re.a)(me(y,v,a,o)),Object(re.a)(me(e,d,y,o)))),{vArr:O,cArr:ge(n,r),uArr:[].concat(Object(re.a)(ve([.5,.5],[1,.5],[1,1],[.5,1])),Object(re.a)(ve([0,.5],[.5,.5],[.4,.6],[.1,.6])),Object(re.a)(ve([.4,.6],[.5,.5],[.5,1],[.4,.9])),Object(re.a)(ve([.1,.9],[.4,.9],[.5,1],[0,1])),Object(re.a)(ve([0,.5],[.1,.6],[.1,.9],[0,1])))}},ge=function(e,t){return[].concat(Object(re.a)(ye(e)),Object(re.a)(ye(t)),Object(re.a)(ye(t)),Object(re.a)(ye(t)),Object(re.a)(ye(t)))},we=function(e,t){for(var a=fe.yRotation(t),o=0;o<e.length;o+=3){var n=fe.transformPoint(a,[e[o+0],e[o+1],e[o+2],1]);e[o+0]=n[0],e[o+1]=n[1],e[o+2]=n[2]}},Ce=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=fe.translation(t,a,o),r=0;r<e.length;r+=3){var s=fe.transformPoint(n,[e[r+0],e[r+1],e[r+2],1]);e[r+0]=s[0],e[r+1]=s[1],e[r+2]=s[2]}},_e=function(e,t,a,o){for(var n=fe.scaling(t,a,o),r=0;r<e.length;r+=3){var s=fe.transformPoint(n,[e[r+0],e[r+1],e[r+2],1]);e[r+0]=s[0],e[r+1]=s[1],e[r+2]=s[2]}},xe=function(e){for(var t=0;t<e.length;t+=18){var a=e[t],o=e[t+1],n=e[t+2],r=e[t+3],s=e[t+3+1],i=e[t+3+2],c=e[t+12],p=e[t+12+1],l=e[t+12+2],u=e[t+15],h=e[t+15+1],f=e[t+15+2];e[t]=r,e[t+1]=s,e[t+2]=i,e[t+3]=a,e[t+3+1]=o,e[t+3+2]=n,e[t+12]=u,e[t+12+1]=h,e[t+12+2]=f,e[t+15]=c,e[t+15+1]=p,e[t+15+2]=l}},Se=[1,1,1],Me=[].concat(Se,Se,Se,Se,Se,Se),ke=57,Te=59,Ie=12,De=30,Pe=63,Ae=1.5,Ne=[0,0,1,0,1,1,0,0,1,1,0,1],Le=function(e,t){var a=[],o=[],n=[],r=[],s=e.p0,i=e.p1,c=e.arr,p=e.colorRoom,l=i[0]-s[0],u=s[1]-i[1],h=Math.sqrt(l*l+u*u),f=c.length>0,b=ze({l:h,leftOffset:!0,rightOffset:!0,segment:f?"top":"full",colorRoom:p}),d=Oe(l,u);if(we(b.v,d),Ce(b.v,s[0],-61,s[1]),a.push.apply(a,Object(re.a)(b.v)),o.push.apply(o,Object(re.a)(b.c)),r.push.apply(r,Object(re.a)(b.u)),we(b.b,d),Ce(b.b,s[0],-61,s[1]),n.push.apply(n,Object(re.a)(b.b)),c&&c.length>0)for(var m=0;m<c.length;++m){var v=c[m],y=v.p0,O=v.p1,j=O[0]-y[0],g=y[1]-O[1],w=Math.sqrt(j*j+g*g),C=ze({l:w,leftOffset:0===m,rightOffset:m===c.length-1,segment:"bottom",colorRoom:p}),_=Oe(j,g);we(C.v,_),Ce(C.v,y[0],-61,y[1]),a.push.apply(a,Object(re.a)(C.v)),o.push.apply(o,Object(re.a)(C.c)),r.push.apply(r,Object(re.a)(C.u)),we(C.b,_),Ce(C.b,y[0],-61,y[1]),n.push.apply(n,Object(re.a)(C.b))}return{v:a,c:o,b:n,u:r}},Re=[0,-.000699999975040555,20.271699905395508,0,.9347000122070312,20.271699905395508,0,1.8353999853134155,17.028799057006836,0,7.440899848937988,17.028799057006836,0,7.844900131225586,19.12459945678711,0,8.748000144958496,19.12459945678711,0,9.527199745178223,13.83530044555664,0,20.66309928894043,13.83530044555664,0,21.29990005493164,17.426300048828125,0,23.96380043029785,17.426300048828125,0,24.70680046081543,10.646400451660156,0,67.68000030517578,10.646400451660156,0,67.68000030517578,13.190500259399414,0,70.5458984375,13.190500259399414,0,70.5458984375,4.975500106811523,0,72.16529846191406,4.975500106811523,0,72.16529846191406,2.640399932861328,0,82.96610260009766,2.6317999362945557,0,88,14.853300094604492,0,110,14.853300094604492],Ee=[1,1,1],Fe=[].concat(Ee,Ee,Ee,Ee,Ee,Ee),Ge=[1,0,0],ze=([].concat(Ge,Ge,Ge,Ge,Ge,Ge),function(e){var t=e.l,a=e.leftOffset,o=e.rightOffset,n=e.segment,r=e.colorRoom,s=[].concat(Object(re.a)(r),Object(re.a)(r),Object(re.a)(r),Object(re.a)(r),Object(re.a)(r),Object(re.a)(r)),i=[],c=[],p=[],l=[],u=-1;if("bottom"===n||"full"===n){var h=function(e){var t=e.l,a=e.colorRoom,o=e.leftOffset,n=e.rightOffset,r=o,s=t-n,i=[].concat(Object(re.a)(a),Object(re.a)(a),Object(re.a)(a),Object(re.a)(a),Object(re.a)(a),Object(re.a)(a)),c=[],p=[],l=[];if(t<30&&(p.push.apply(p,Object(re.a)(me([r,ke,Ie],[s,ke,Ie],[s,Te,Ie],[r,Te,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([r,52,2],[s,52,2],[s,ke,Ie],[r,ke,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1)),t>30){var u=t-(o+n),h=.2*u,f=o+u/2;p.push.apply(p,Object(re.a)(me([f-h,De,13],[f+h,De,13],[f+h,Pe,13],[f-h,Pe,13]))),c.push.apply(c,Object(re.a)(i)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f-h-Ae,28.5,14],[f+h+Ae,28.5,14],[f+h,De,13],[f-h,De,13]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f-h-Ae,27.5,2],[f+h+Ae,27.5,2],[f+h+Ae,28.5,14],[f-h-Ae,28.5,14]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f+h,De,13],[f+h+Ae,28.5,14],[f+h+Ae,64.5,14],[f+h,Pe,13]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f+h+Ae,28.5,14],[f+h+Ae,27.5,2],[f+h+Ae,65.5,2],[f+h+Ae,64.5,14]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f-h-Ae,28.5,14],[f-h,De,13],[f-h,Pe,13],[f-h-Ae,64.5,14]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f-h-Ae,27.5,2],[f-h-Ae,28.5,14],[f-h-Ae,64.5,14],[f-h-Ae,64.5,2]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f-h,Pe,13],[f+h,Pe,13],[f+h+Ae,64.5,14],[f-h-Ae,64.5,14]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([r,ke,Ie],[f-h-Ae,ke,Ie],[f-h-Ae,Te,Ie],[r,Te,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([r,52,2],[f-h-Ae,52,2],[f-h-Ae,ke,Ie],[r,ke,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f+h+Ae,ke,Ie],[s,ke,Ie],[s,Te,Ie],[f+h+Ae,Te,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1),p.push.apply(p,Object(re.a)(me([f+h+Ae,52,2],[s,52,2],[s,ke,Ie],[f+h+Ae,ke,Ie]))),c.push.apply(c,Object(re.a)(Me)),l.push(0,0,1,0,1,1,0,0,1,1,0,1)}return{v:p,c:c,u:l}}({l:t,colorRoom:r,leftOffset:a?11:0,rightOffset:o?11:0});i.push.apply(i,Object(re.a)(h.c)),c.push.apply(c,Object(re.a)(h.v)),l.push.apply(l,Object(re.a)(h.u))}for(var f=3;f<Re.length;f+=3)++u,"top"===n&&u<11||"bottom"===n&&u>10||(0!==u||"bottom"!==n&&"full"!==n||p.push.apply(p,Object(re.a)(me([-3.6,Re[f+1-3],Re[f+2-3]],[t+3.6,Re[f+1-3],Re[f+2-3]],[t+3.6,30,Re[f+2]],[-3.6,30,Re[f+2]]))),c.push.apply(c,Object(re.a)(me([0,Re[f+1-3],Re[f+2-3]],[t,Re[f+1-3],Re[f+2-3]],[t,Re[f+1],Re[f+2]],[0,Re[f+1],Re[f+2]]))),l.push.apply(l,Ne),2===u||6===u||16===u?i.push.apply(i,Object(re.a)(s)):i.push.apply(i,Object(re.a)(Fe)));if("top"===n||"full"===n){var b=a?25:7,d=o?25:7,m=Math.floor((t-(b+d))/30),v=87,y=80,O=12.5,j=(t-(b+d))/m;if(m>0)for(var g=0;g<m+1;++g){var w=b+g*j,C=je([w-5,y,O],[w+5,y,O],[w+5,v,O],[w-5,v,O],r,Ee,.5);c.push.apply(c,Object(re.a)(C.vArr)),i.push.apply(i,Object(re.a)(C.cArr)),l.push.apply(l,Object(re.a)(C.uArr)),c.push.apply(c,Object(re.a)(me([w-5,72,1.8],[w+5,72,1.8],[w+5,y,O],[w-5,y,O]))),l.push.apply(l,Ne),c.push.apply(c,Object(re.a)(me([w-5,72,1.8],[w-5,y,O],[w-5,v,O],[w-5,v,1.8]))),l.push.apply(l,Ne),c.push.apply(c,Object(re.a)(me([w+5,y,O],[w+5,72,1.8],[w+5,v,1.8],[w+5,v,O]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),i.push.apply(i,Object(re.a)(Fe)),i.push.apply(i,Object(re.a)(Fe))}}if("full"===n||"bottom"===n){var _=a?30:8,x=o?30:8,S=Math.floor((t-(_+x))/20),M=21,k=8.7,T=(t-(_+x))/S;if(S>0)for(var I=0;I<S+1;++I){var D=_+I*T;c.push.apply(c,Object(re.a)(me([D-3+2,k,15],[D+3-2,k,15],[D+3,M,16.5],[D-3,M,16.5]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([D-3+2-1.5,k,10],[D-3+2,k,15],[D-3,M,16.5],[D-3-1.5,M,10]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([D+3-2,k,15],[D+3-2+1.5,k,10],[D+3+1.5,M,10],[D+3,M,16.5]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([D-3,k,14.5],[D+3,k,14.5],[D+3+3,M,16],[D-3-3,M,16]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([D-3-1,k,11],[D-3,k,14.5],[D-3-3,M,16],[D-3-3-1,M,11]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([D+3,k,14.5],[D+3+1,k,11],[D+3+3+1,M,11],[D+3+3,M,16]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe))}var P=a?22:2,A=o?22:2,N=Math.floor((t-(P+A))/10),L=8.3,R=.6,E=(t-(P+A))/N;if(N>0)for(var F=0;F<N+1;++F){var G=P+F*E;c.push.apply(c,Object(re.a)(me([G-1,R,18.5],[G+1,R,18.5],[G+1,L,18],[G-1,L,18]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([G-1,R,11],[G-1,R,18.5],[G-1,L,18],[G-1,L,11]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe)),c.push.apply(c,Object(re.a)(me([G+1,R,18.5],[G+1,R,11],[G+1,L,11],[G+1,L,18]))),l.push.apply(l,Ne),i.push.apply(i,Object(re.a)(Fe))}}return{v:c,c:i,b:p,u:l}}),Be=[1,1,1],Ue=[].concat(Be,Be,Be,Be,Be,Be),We=[0,0,0],qe=([].concat(We,We,We,We,We,We),[0,0,1,0,1,1,0,0,1,1,0,1]),Ke=null,Ve=null;he=[0,-2.6953001022338867,22.33769989013672,0,3.8533999919891357,21.921899795532227,0,5.635499954223633,21.284500122070312,0,19.557199478149414,20.037200927734375,0,20.696800231933594,20.980899810791016,0,25.771099090576172,21.85650062561035,0,27.770299911499023,20.32659912109375,0,27.770299911499023,19.798900604248047,0,61.1713981628418,19.746400833129883,0,61.1713981628418,20.36400032043457,0,63.55139923095703,22.07699966430664,0,65.46749877929688,21.3710994720459,0,65.95809936523438,22.83650016784668,0,67.88800048828125,22.83650016784668,0,67.8865966796875,21.539499282836914,0,77.65049743652344,21.539499282836914,0,77.66819763183594,24.958099365234375,0,79.78269958496094,24.83370018005371,0,81.02649688720703,27.694400787353516,0,82.51909637451172,27.943199157714844,0,82.51909637451172,26.699399948120117,0,106.7477035522461,26.699399948120117,0,106.7477035522461,28.06760025024414,0,108.36470031738281,28.06760025024414];var He=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"simple";null===Ke&&(Ke=Object(re.a)(he),we(Ke,-Math.PI/4),Ce(Ke,12,0,5),Ve=Object(re.a)(he),we(Ve,Math.PI/4),Ce(Ve,-12,0,5));for(var n=[],r=[],s=[],i=[],c=-1,p=3;p<he.length;p+=3)++c,"bigDoor"!==o&&c>12||(3===p&&"bigDoor"===o&&(n.push.apply(n,Object(re.a)(me([0,-3,10],[a/2,-3,10],[a/2,1,10],[0,1,10]))),r.push.apply(r,Object(re.a)(Ue)),i.push.apply(i,qe),n.push.apply(n,Object(re.a)(me([0,1,10],[a/2,1,10],[a/2,1,0],[0,1,0]))),r.push.apply(r,Object(re.a)(Ue)),i.push.apply(i,qe)),n.push.apply(n,Object(re.a)(me([Ke[p-3],Ke[p+1-3],0],[Ke[p-3],Ke[p+1-3],Ke[p+2-3]],[Ke[p],Ke[p+1],Ke[p+2]],[Ke[p],Ke[p+1],0]))),i.push.apply(i,qe),r.push.apply(r,Object(re.a)(Ue)),n.push.apply(n,Object(re.a)(me([Ke[p-3],Ke[p+1-3],Ke[p+2-3]],[Ve[p-3],Ve[p+1-3],Ve[p+2-3]],[Ve[p],Ve[p+1],Ve[p+2]],[Ke[p],Ke[p+1],Ke[p+2]]))),i.push.apply(i,qe),r.push.apply(r,Object(re.a)(Ue)),c<12?(n.push.apply(n,Object(re.a)(me([Ve[p-3],Ve[p+1-3],Ve[p+2-3]],[Ve[p-3],Ve[p+1-3],0],[Ve[p],Ve[p+1],0],[Ve[p],Ve[p+1],Ve[p+2]]))),i.push.apply(i,qe),r.push.apply(r,Object(re.a)(Ue))):(n.push.apply(n,Object(re.a)(me([Ve[p-3],Ve[p+1-3],Ve[p+2-3]],[a/2,Ve[p+1-3],Ve[p+2-3]],[a/2,Ve[p+1],Ve[p+2]],[Ve[p],Ve[p+1],Ve[p+2]]))),i.push.apply(i,qe),r.push.apply(r,Object(re.a)(Ue))),11===c&&(n.push.apply(n,Object(re.a)(me([Ve[p],Ve[p+1],0],[a/2,Ve[p+1],0],[a/2,Ve[p+1],Ve[p+2]],[Ve[p],Ve[p+1],Ve[p+2]]))),i.push.apply(i,qe),r.push.apply(r,Object(re.a)(Ue))),0===c&&s.push.apply(s,Object(re.a)(me([Ve[p-3],0,Ve[p-1]],[Ve[p-3],0,-Ve[p-1]],[Ve[p-3],50,-Ve[p-1]],[Ve[p-3],50,Ve[p-1]]))));var l=[].concat(n);xe(l),_e(l,-1,1,1),Ce(l,a,0,0),n.push.apply(n,Object(re.a)(l)),i.push.apply(i,i);var u=[].concat(r);r.push.apply(r,Object(re.a)(u));var h=[].concat(n);xe(h),_e(h,1,1,-1),n.push.apply(n,Object(re.a)(h)),r.push.apply(r,r),i.push.apply(i,i);var f=[].concat(s);return xe(f),_e(f,-1,1,1),Ce(f,a,0,0),s.push.apply(s,Object(re.a)(f)),{v:n,c:r,b:s,u:i}},Ye=[1,1,1],Je=[].concat(Ye,Ye,Ye,Ye,Ye,Ye),Ze=[0,0,1,0,1,1,0,0,1,1,0,1],Qe=null,Xe=null,$e=[0,-28.033300399780273,18.110000610351562,0,24.523099899291992,16.341800689697266,0,26.22130012512207,15.079400062561035,0,73.4574966430664,15.079400062561035,0,89.42109680175781,30.165700912475586,0,108.39409637451172,30.165700912475586],et=function(e,t){Qe||(Qe=[].concat($e),we(Qe,-Math.PI/4),Xe=[].concat($e),we(Xe,Math.PI/4));for(var a=[],o=[],n=[],r=[],s=e.p1[0]-e.p0[0],i=e.p0[1]-e.p1[1],c=Math.sqrt(s*s+i*i),p=3;p<$e.length;p+=3)a.push.apply(a,Object(re.a)(me([Qe[p-3],Qe[p-2],Qe[p-1]],[Xe[p-3]+c,Xe[p-2],Xe[p-1]],[Xe[p]+c,Xe[p+1],Xe[p+2]],[Qe[p],Qe[p+1],Qe[p+2]]))),r.push.apply(r,Ze),o.push.apply(o,Object(re.a)(Je)),3===p&&n.push.apply(n,Object(re.a)(me([Qe[p-3]-2,0,Qe[p-1]+2],[Xe[p-3]+c+2,0,Xe[p-1]+2],[Xe[p]+c+2,30,Xe[p+2]+2],[Qe[p]-2,30,Qe[p+2]+2])));var l=Oe(s,i);return we(a,l),Ce(a,e.p0[0],-62,e.p0[1]),we(n,l),Ce(n,e.p0[0],-62,e.p0[1]),{v:a,c:o,b:n,u:r}},tt=null,at=function(e){var t=e.v,a=e.c,o=void 0===a?null:a,n=e.mat,r=void 0===n?null:n,s=e.u,i=void 0===s?null:s,c=new l.BufferGeometry,p=new Float32Array(t);if(c.setAttribute("position",new l.BufferAttribute(p,3)),o){var u=new Float32Array(o);c.setAttribute("color",new l.BufferAttribute(u,3))}if(i){var h=new Float32Array(i);c.setAttribute("uv",new l.BufferAttribute(h,2))}c.computeVertexNormals(),r||tt||(tt=new l.MeshPhongMaterial({color:16777215,vertexColors:!0}));var f=r||tt;return new l.Mesh(c,f)},ot=3e3,nt=3e3,rt=0,st=function(){return++rt},it={id:st(),walls:{n:{id:st(),p0:[0,0],p1:[nt,0]},e:{id:st(),p0:[nt,0],p1:[nt,ot]},s:{id:st(),p0:[0,ot],p1:[nt,ot]},w:{id:st(),p0:[0,0],p1:[0,ot]}}},ct=function(){var e=null;!function t(a){for(var o=function(o){var n=a[o].walls.s.p1[0]-a[o].walls.s.p0[0],r=a[o].walls.e.p1[1]-a[o].walls.e.p0[1];if(n<800&&r<800&&Math.random()<.5&&(a[o].notDivide=!0),a[o].notDivide)return"continue";var s=function(e){var t=e.walls,a=!1,o=!1,n=null;if(t.s.p1[0]-t.s.p0[0]>250&&(a=!0,n="x"),t.e.p1[1]-t.e.p0[1]>250&&(o=!0,n="z"),a&&o&&(n=Math.random()<.5?"x":"z"),!n)return null;var r=[];if("x"===n){var s=(t.s.p1[0]-t.s.p0[0])*(.3+.4*Math.random())+t.s.p0[0];r.push({id:st(),walls:{n:{id:st(),p0:Object(re.a)(t.n.p0),p1:[s,t.n.p1[1]]},e:{id:st(),p0:[s,t.e.p0[1]],p1:[s,t.e.p1[1]]},s:{id:st(),p0:Object(re.a)(t.s.p0),p1:[s,t.s.p1[1]]},w:{id:st(),p0:Object(re.a)(t.w.p0),p1:Object(re.a)(t.w.p1)}}},{id:st(),walls:{n:{id:st(),p0:[s,t.n.p0[1]],p1:Object(re.a)(t.n.p1)},e:{id:st(),p0:Object(re.a)(t.e.p0),p1:Object(re.a)(t.e.p1)},s:{id:st(),p0:[s,t.s.p0[1]],p1:Object(re.a)(t.s.p1)},w:{id:st(),p0:[s,t.w.p0[1]],p1:[s,t.w.p1[1]]}}})}if("z"===n){var i=(t.e.p1[1]-t.e.p0[1])*(.3+.4*Math.random())+t.e.p0[1];r.push({id:st(),walls:{n:{id:st(),p0:Object(re.a)(t.n.p0),p1:Object(re.a)(t.n.p1)},e:{id:st(),p0:Object(re.a)(t.e.p0),p1:[t.e.p1[0],i]},s:{id:st(),p0:[t.s.p0[0],i],p1:[t.s.p1[0],i]},w:{id:st(),p0:Object(re.a)(t.w.p0),p1:[t.w.p0[0],i]}}},{id:st(),walls:{n:{id:st(),p0:[t.n.p0[0],i],p1:[t.n.p1[0],i]},e:{id:st(),p0:[t.e.p0[0],i],p1:Object(re.a)(t.e.p1)},s:{id:st(),p0:Object(re.a)(t.s.p0),p1:Object(re.a)(t.s.p1)},w:{id:st(),p0:[t.w.p0[0],i],p1:Object(re.a)(t.w.p1)}}})}return r}(a[o]);if(!s)return"continue";var i=a.filter((function(e){return e.id!==a[o].id}));return i.push.apply(i,Object(re.a)(s)),e=i,{v:void t(i)}},n=0;n<a.length;++n){var r=o(n);if("continue"!==r&&"object"===typeof r)return r.v}}([it]);for(var t=0;t<e.length;++t)for(var a=e[t].walls.s,o=e[t].walls.e,n=0;n<e.length;++n)if(e[t].id!==e[n].id){var r=e[n].walls.n,s=[Math.max(a.p0[0],r.p0[0]),Math.min(a.p1[0],r.p1[0])];if(r.p0[1]===a.p0[1]&&s[0]>=a.p0[0]&&s[0]<=a.p1[0]&&s[1]>=a.p0[0]&&s[1]<=a.p1[0]&&s[0]>=r.p0[0]&&s[0]<=r.p1[0]&&s[1]>=r.p0[0]&&s[1]<=r.p1[0]){var i=s[1]-s[0];if(i>60){var c={id:st(),x0:s[0]+i/2-15,x1:s[0]+i/2+15};a.doors||(a.doors=[]),a.doors.push(c),r.doors||(r.doors=[]),r.doors.push(c)}}var p=e[n].walls.w,l=[Math.max(p.p0[1],o.p0[1]),Math.min(p.p1[1],o.p1[1])];if(p.p0[0]===o.p0[0]&&l[0]>=o.p0[1]&&l[0]<=o.p1[1]&&l[1]>=o.p0[1]&&l[1]<=o.p1[1]&&l[0]>=p.p0[1]&&l[0]<=p.p1[1]&&l[1]>=p.p0[1]&&l[1]<=p.p1[1]){var u=l[1]-l[0];if(u>60){var h=1e14*Math.random();o.doors||(o.doors=[]),o.doors.push({id:h,z0:l[0]+u/2-15,z1:l[0]+u/2+15}),p.doors||(p.doors=[]),p.doors.push({id:h,z0:l[0]+u/2-15,z1:l[0]+u/2+15})}}}for(var f=[],b=0;b<e.length;++b){var d=e[b].walls.n;if(0===d.p0[1]){var m=[d.p0[0],d.p1[0]],v=m[1]-m[0];if(v>60){var y={id:st(),x0:m[0]+v/2-15,x1:m[0]+v/2+15,keyMode:"bigDoor"};d.doors||(d.doors=[]),d.doors.push(y),f.push(y)}}}for(var O=0;O<e.length;++O){var j=e[O].walls.n;if(j.doors){j.doors.sort((function(e,t){return e.x0-t.x0})),j.wallSegments=[];for(var g=0;g<j.doors.length;++g)0===g&&j.wallSegments.push({p0:Object(re.a)(j.p0),p1:[j.doors[g].x0,j.p0[1]]}),j.doors[g-1]&&j.wallSegments.push({p0:[j.doors[g-1].x1,j.p0[1]],p1:[j.doors[g].x0,j.p0[1]]}),g===j.doors.length-1&&j.wallSegments.push({p0:[j.doors[j.doors.length-1].x1,j.p0[1]],p1:Object(re.a)(j.p1)})}var w=e[O].walls.s;if(w.doors){w.doors.sort((function(e,t){return e.x0-t.x0})),w.wallSegments=[];for(var C=w.doors.length-1;C>-1;--C)C===w.doors.length-1&&w.wallSegments.push({p0:Object(re.a)(w.p1),p1:[w.doors[C].x1,w.p1[1]]}),w.doors[C-1]&&w.wallSegments.push({p0:[w.doors[C].x0,w.p1[1]],p1:[w.doors[C-1].x1,w.p1[1]]}),0===C&&w.wallSegments.push({p0:[w.doors[C].x0,w.p1[1]],p1:Object(re.a)(w.p0)})}var _=e[O].walls.e;if(_.doors){_.doors.sort((function(e,t){return e.z0-t.z0})),_.wallSegments=[];for(var x=0;x<_.doors.length;++x)0===x&&_.wallSegments.push({p0:Object(re.a)(_.p0),p1:[_.p0[0],_.doors[x].z0]}),_.doors[x-1]&&_.wallSegments.push({p0:[_.p0[0],_.doors[x-1].z1],p1:[_.p0[0],_.doors[x].z0]}),x===_.doors.length-1&&_.wallSegments.push({p0:[_.p0[0],_.doors[x].z1],p1:Object(re.a)(_.p1)})}var S=e[O].walls.w;if(S.doors){S.doors.sort((function(e,t){return e.z0-t.z0})),S.wallSegments=[];for(var M=S.doors.length-1;M>-1;--M)M===S.doors.length-1&&S.wallSegments.push({p0:Object(re.a)(S.p1),p1:[S.p1[0],S.doors[M].z1]}),S.doors[M-1]&&S.wallSegments.push({p0:[S.p1[0],S.doors[M].z0],p1:[S.p1[0],S.doors[M-1].z1]}),0===M&&S.wallSegments.push({p0:[S.p1[0],S.doors[M].z0],p1:Object(re.a)(S.p0)})}}for(var k=[],T=[],I=0;I<e.length;++I){var D=[.4*Math.random(),.4*Math.random(),.4*Math.random()],P=e[I].walls.n,A={p0:P.p0,p1:P.p1,arr:[],colorRoom:D};if(P.wallSegments)for(var L=0;L<P.wallSegments.length;++L)A.arr.push(P.wallSegments[L]);T.push(A);var R=e[I].walls.s,E={p0:R.p1,p1:R.p0,arr:[],colorRoom:D};if(R.wallSegments)for(var F=0;F<R.wallSegments.length;++F)E.arr.push(R.wallSegments[F]);T.push(E);var G=e[I].walls.e,z={p0:G.p0,p1:G.p1,arr:[],colorRoom:D};if(G.wallSegments)for(var B=0;B<G.wallSegments.length;++B)z.arr.push(G.wallSegments[B]);T.push(z);var U=e[I].walls.w,W={p0:U.p1,p1:U.p0,arr:[],colorRoom:D};if(U.wallSegments)for(var q=0;q<U.wallSegments.length;++q)W.arr.push(U.wallSegments[q]);T.push(W);var K={p0:R.p0,p1:R.p1,p2:P.p1,p3:P.p0,colorRoom:D};k.push(K)}for(var V={},H=0;H<e.length;++H)for(var Y in e[H].walls)if(e[H].walls[Y].doors)for(var J=0;J<e[H].walls[Y].doors.length;++J){var Z=null,Q=null;"n"!==Y&&"s"!==Y||(Q=e[H].walls[Y].p0[1]),"e"!==Y&&"w"!==Y||(Z=e[H].walls[Y].p0[0]),V[e[H].walls[Y].doors[J].id]=Object(N.a)(Object(N.a)({},e[H].walls[Y].doors[J]),{},{dir:Y,x:Z,z:Q})}for(var X in V)V[X].x0?(V[X].l=V[X].x1-V[X].x0,V[X].p0=[V[X].x0,V[X].z],V[X].p1=[V[X].x1,V[X].z],V[X].angle=0):(V[X].l=V[X].z1-V[X].z0,V[X].p0=[V[X].x,V[X].z0],V[X].p1=[V[X].x,V[X].z1],V[X].angle=-Math.PI/2);var $=JSON.parse(JSON.stringify(it)),ee=[];for(var te in $.walls){if("n"===te){f.sort((function(e,t){return e.x0-t.x0}));for(var ae=f.length-1;ae>-1;--ae)ae===f.length-1&&ee.push({p0:Object(re.a)($.walls[te].p1),p1:[f[ae].x1+10,$.walls[te].p1[1]]}),f[ae-1]&&ee.push({p0:[f[ae].x0-10,$.walls[te].p1[1]],p1:[f[ae-1].x1+10,$.walls[te].p1[1]]}),0===ae&&ee.push({p0:[f[ae].x0-10,$.walls[te].p1[1]],p1:Object(re.a)($.walls[te].p0)})}"s"===te&&ee.push({p0:$.walls[te].p0,p1:$.walls[te].p1}),"e"===te&&ee.push({p0:$.walls[te].p1,p1:$.walls[te].p0}),"w"===te&&ee.push({p0:$.walls[te].p0,p1:$.walls[te].p1})}return{arrOuterWalls:ee,doors:V,arrWallsPrepared:T,floors:k,roomsArr:e}},pt=-61,lt=[1,1,1],ut=[].concat(lt,lt,lt,lt,lt,lt),ht=[1,0,0],ft=([].concat(ht,ht,ht,ht,ht,ht),function(e){e.colorRoom[0]*=1.2,e.colorRoom[1]*=1.2,e.colorRoom[2]*=1.2;for(var t=[].concat(Object(re.a)(e.colorRoom),Object(re.a)(e.colorRoom),Object(re.a)(e.colorRoom),Object(re.a)(e.colorRoom),Object(re.a)(e.colorRoom),Object(re.a)(e.colorRoom)),a=[],o=[],n=[],r=30,s=35,i=e.p1[0]-s-(e.p0[0]+s),c=e.p2[1]+s-(e.p1[1]-s),p=Math.ceil(Math.abs(i/100)),l=Math.ceil(Math.abs(c/100)),u=i/p,h=c/l,f=0;f<p;++f)for(var b=0;b<l;++b)o.push.apply(o,Object(re.a)(me([e.p0[0]+s+f*u,pt,e.p0[1]-s+b*h],[e.p0[0]+s+(f+1)*u,pt,e.p0[1]-s+b*h],[e.p0[0]+s+(f+1)*u,pt,e.p0[1]-s+(b+1)*h],[e.p0[0]+s+f*u,pt,e.p0[1]-s+(b+1)*h]))),a.push.apply(a,Object(re.a)(ut)),n.push(0,0,1,0,1,1,0,0,1,1,0,1);return o.push.apply(o,Object(re.a)(me([e.p0[0]+r,pt,e.p0[1]-r],[e.p0[0]+s,pt,e.p0[1]-s],[e.p3[0]+s,pt,e.p3[1]+s],[e.p3[0]+r,pt,e.p3[1]+r]))),a.push.apply(a,Object(re.a)(t)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p0[0]+r,pt,e.p0[1]-r],[e.p1[0]-r,pt,e.p1[1]-r],[e.p1[0]-s,pt,e.p1[1]-s],[e.p0[0]+s,pt,e.p0[1]-s]))),a.push.apply(a,Object(re.a)(t)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p3[0]+s,pt,e.p3[1]+s],[e.p2[0]-s,pt,e.p2[1]+s],[e.p2[0]-r,pt,e.p2[1]+r],[e.p3[0]+r,pt,e.p3[1]+r]))),a.push.apply(a,Object(re.a)(t)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p1[0]-s,pt,e.p1[1]-s],[e.p1[0]-r,pt,e.p1[1]-r],[e.p2[0]-r,pt,e.p2[1]+r],[e.p2[0]-s,pt,e.p3[1]+s]))),a.push.apply(a,Object(re.a)(t)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p0[0],pt,e.p0[1]],[e.p1[0],pt,e.p1[1]],[e.p1[0]-r,pt,e.p1[1]-r],[e.p0[0]+r,pt,e.p0[1]-r]))),a.push.apply(a,Object(re.a)(ut)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p1[0]-r,pt,e.p1[1]-r],[e.p1[0],pt,e.p1[1]],[e.p2[0],pt,e.p2[1]],[e.p2[0]-r,pt,e.p2[1]+r]))),a.push.apply(a,Object(re.a)(ut)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p3[0],pt,e.p3[1]],[e.p3[0]+r,pt,e.p3[1]+r],[e.p2[0]-r,pt,e.p2[1]+r],[e.p2[0],pt,e.p2[1]]))),a.push.apply(a,Object(re.a)(ut)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),o.push.apply(o,Object(re.a)(me([e.p0[0],pt,e.p0[1]],[e.p0[0]+r,pt,e.p0[1]-r],[e.p3[0]+r,pt,e.p2[1]+r],[e.p3[0],pt,e.p3[1]]))),a.push.apply(a,Object(re.a)(ut)),n.push(0,0,1,0,1,1,0,0,1,1,0,1),{v:o,c:a,b:[],u:n}}),bt=[1,1,1],dt=[].concat(bt,bt,bt,bt,bt,bt),mt=[1,0,0],vt=([].concat(mt,mt,mt,mt,mt,mt),function(e){e.assets;var t=e.materials,a=e.studio,o=(e.system_Assets,e.system_PlayerMoveOnLevel),n=(e.frameUpdater,new l.Mesh(new l.PlaneGeometry(1e4,1e4),t.floorMat1));t.floorMat1.map.repeat.set(180,180),n.rotation.x=-Math.PI/2,n.position.y=-62;var r=function(e){for(var t=ct(),a=t.arrOuterWalls,o=t.doors,n=t.arrWallsPrepared,r=t.floors,s=t.roomsArr,i=[],c=[],p=[],l=[],u=0;u<n.length;++u){var h=Le(n[u]);i.push.apply(i,Object(re.a)(h.v)),c.push.apply(c,Object(re.a)(h.c)),p.push.apply(p,Object(re.a)(h.b)),l.push.apply(l,Object(re.a)(h.u))}for(var f in o){var b=He(e,null,o[f].l,o[f].keyMode||null);we(b.v,o[f].angle),Ce(b.v,o[f].p0[0],-61,o[f].p0[1]),i.push.apply(i,Object(re.a)(b.v)),we(b.b,o[f].angle),Ce(b.b,o[f].p0[0],-61,o[f].p0[1]),p.push.apply(p,Object(re.a)(b.b)),l.push.apply(l,Object(re.a)(b.u)),c.push.apply(c,Object(re.a)(b.c))}for(var d=0;d<a.length;++d){var m=et(a[d]);i.push.apply(i,Object(re.a)(m.v)),c.push.apply(c,Object(re.a)(m.c)),p.push.apply(p,Object(re.a)(m.b)),l.push.apply(l,Object(re.a)(m.u))}for(var v=0;v<r.length;++v){var y=ft(r[v]);i.push.apply(i,Object(re.a)(y.v)),c.push.apply(c,Object(re.a)(y.c)),l.push.apply(l,Object(re.a)(y.u))}for(var O=0;O<r.length;++O)for(var j=r[O],g=j.p1[0]-j.p0[0],w=j.p2[1]-j.p1[1],C=Math.ceil(Math.abs(g/100)),_=Math.ceil(Math.abs(w/100)),x=g/C,S=w/_,M=0;M<C;++M)for(var k=0;k<_;++k)i.push.apply(i,Object(re.a)(me([j.p0[0]+M*x,30,j.p2[1]-k*S],[j.p0[0]+(M+1)*x,30,j.p2[1]-k*S],[j.p0[0]+(M+1)*x,30,j.p2[1]-(k+1)*S],[j.p0[0]+M*x,30,j.p2[1]-(k+1)*S]))),c.push.apply(c,Object(re.a)(dt)),l.push(0,0,1,0,1,1,0,0,1,1,0,1);console.log(e);var T=at({v:i,c:c,u:l,mat:e.materials.iron});e.studio.addToScene(T);var I=at({v:p});return I.visible=!1,e.studio.addToScene(I),{mesh:T,mCollision:I,roomsArr:s}}(e);return{addWorld:function(){o.addItemToPlayerCollision(n),o.addItemToPlayerCollision(r.mCollision),a.addToScene(n)},removeWorld:function(){o.removeItemFromPlayerCollision(n),a.removeFromScene(n)},roomsArr:r.roomsArr}}),yt=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[],n=0;n<e;++n)for(var r=Math.random()*t,s=Math.random()*Math.PI*2,i=Math.random()*Math.PI*2,c=Math.sin(s)*r,p=Math.sin(i)*Math.random()*50,l=Math.cos(s)*r,u=0;u<3;++u)o.push(c+Math.random()*a+2,p+Math.random()*a+2,l+Math.random()*a+2);return o},Ot=function(){function e(t){Object(S.a)(this,e),this._root=t;var a=this._root,o=a.dispatcher,n=a.frameUpdater,r=a.studio,s=a.system_PlayerMoveOnLevel;o.dispatch({type:"CHANGE_INFO_CHAPTER",currentChapterIndex:4}),o.dispatch({type:"ENABLE_CONTROL_SOUND"}),this._worldReal=vt(t),this._worldReal.addWorld();var i=function(e){for(var t=e.assets.bodyModel.children[0],a=[],o=0;o<t.geometry.attributes.position.array.length;o+=3)a.push(1,1,1);var n=new Float32Array(a);t.geometry.setAttribute("color",new l.BufferAttribute(n,3)),t.geometry.attributes.color.needsUpdate=!0;for(var r=[Object(re.a)(t.geometry.attributes.position.array)],s=new l.Mesh(t.geometry,e.materials.testBlack),i=0;i<5;++i){var c=yt(s.geometry.attributes.position.array.length/9,50*Math.random()+20,3*Math.random());r.push(c)}var p=null,u=-100,h=-100;return function e(t){s.rotation.y=2*Math.random()*Math.PI;var a=r[t-1]?t-1:r.length-1,o=r[t]?t:0;if(!r[t]){if(p){var n=p.walls.n.p0[0],i=p.walls.n.p1[0],c=p.walls.e.p0[1],l=i-n,f=p.walls.e.p1[1]-c;u=n+.2*l+Math.random()*l*.6,h=c+.2*f+Math.random()*f*.6}t=0}var b={v:0,x:s.position.x,z:s.position.z};new E.a(b).to({v:1,x:u,z:h},800).onUpdate((function(){for(var e=0;e<s.geometry.attributes.position.array.length;++e)s.geometry.attributes.position.array[e]=b.v*r[o][e]+(1-b.v)*r[a][e];s.geometry.attributes.position.needsUpdate=!0,s.position.x=b.x,s.position.z=b.z})).start(),setTimeout((function(){e(++t)}),800+(0===o?3e3:0))}(1),{m:s,update:function(){},setRoom:function(e){p=e}}}(t);i.m.position.x=0,i.m.position.z=-40,i.m.position.y=-61,i.m.rotation.y=Math.PI,r.addToScene(i.m),function(e,t){for(var a={},o=0;o<t.length;++o)a[t[o].id]=t[o];var n=[];console.log(a);var r=null,s=null;return e.emitter.subscribe("playerMove")((function(t){if("forward"===t){var o=e.player.mesh.position,i=o.x,c=o.z;for(var p in a)if(a[p].walls.e.p0[1]<c&&a[p].walls.e.p1[1]>c&&a[p].walls.n.p0[0]<i&&a[p].walls.n.p1[0]>i){if(r!==(s=p)){r=s;for(var l=0;l<n.length;++l)n[l](a[p])}break}}})),{onChangeRoom:function(e){n.push(e)}}}(t,this._worldReal.roomsArr).onChangeRoom((function(e){console.log("---!!!",e),i.setRoom(e)}));n.on((function(e){E.b(),.01,s.update(e),r.drawFrame()})),this._startPlay()}return Object(M.a)(e,[{key:"_startPlay",value:function(){var e=this._root,t=e.player,a=e.ui,o=e.studio;e.system_PlayerMoveOnLevel,e.system_PlayerNearLevelItems,e.CONSTANTS;t.setToPos(-30,-40,-150),t.mesh.rotation.y=1.3*Math.PI,a.showStartButton((function(){o.changeEnvironment(w,{updateAmb:!1,time:1e3}),t.toggleBlocked(!1)}))}}]),e}(),jt=a(6),gt=a(18),wt=a.n(gt),Ct=a(8),_t=(a(40),"en"),xt=function(e){return function(t){return e[_t]&&e[_t][t]||t}},St=a(4),Mt=xt({ru:{"Discovery of small android":"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0434\u0440\u043e\u0438\u0434\u0430",Factory:"\u0424\u0430\u0431\u0440\u0438\u043a\u0430",Brige:"\u041c\u043e\u0441\u0442",Cube:"\u041a\u0443\u0431",Endways:"\u041d\u0430\u043f\u0440\u044f\u043c\u0438\u043a",Machine:"\u041c\u0430\u0448\u0438\u043d\u0430","in production":"\u0441\u043a\u043e\u0440\u043e.."," (current)":" (\u0442\u0443\u0442)","Author: ":"\u043e\u0442: ","Github: ":"\u0413\u0438\u0442\u0445\u0430\u0431: "}}),kt=Object(Ct.b)((function(e){return Object(N.a)({},e.controls.infoPanelData)}))((function(e){return Object(St.jsxs)("div",{className:"info",children:[Object(St.jsx)("button",{className:"control-small butt-infoClose",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),Object(St.jsxs)("div",{className:"info-inner",children:[Object(St.jsx)("p",{children:Mt(e.title)}),Object(St.jsx)("p",{children:Mt(e.topText)}),Object(St.jsx)("ul",{children:e.chapters.map((function(t,a){return Object(St.jsxs)("li",{children:[a+1,".\xa0",t.href?Object(St.jsx)("span",{children:Object(St.jsx)("a",{href:t.href,target:"blank",children:Mt(t.text)})}):Object(St.jsx)("span",{children:Mt(t.text)}),a===e.currentChapterIndex&&Mt(" (current)")]},a)}))}),Object(St.jsx)("p",{children:e.bottomText}),Object(St.jsx)("ul",{children:e.afterWords.map((function(e,t){return Object(St.jsxs)("li",{children:[Mt(e.text),Object(St.jsx)("a",{href:e.href,target:"blank",children:Mt(e.aText)})]},t)}))})]})]})})),Tt=(a(42),Object(Ct.b)((function(e){return{isInfo:e.controls.isInfo,isShowControls:e.controls.isShowControls,isShowControlSound:e.controls.isShowControlSound,isMute:e.controls.isMute}}))((function(e){var t=Object(jt.useState)(!0),a=Object(te.a)(t,2),o=a[0],n=a[1];return Object(jt.useEffect)((function(){return e.gameContext.emitter.subscribe("screenMode")((function(e){"exitFullScreen"===e&&n(!0)}))})),Object(St.jsxs)("div",{className:"ui-controls",children:[e.isShowControls&&e.isShowControlSound&&Object(St.jsx)("button",{className:"".concat(e.isMute?"butt-sound-n":"butt-sound"," control-small"),onMouseUp:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})},onTouchEnd:function(){e.gameContext.emitter.emit("toggleSound")(!e.isMute),e.dispatch({type:"TOGGLE_MUTE",is:!e.isMute})}}),e.isShowControls&&Object(St.jsx)("button",{className:"butt-left control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-left")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-left")}}),e.isShowControls&&Object(St.jsx)("button",{className:"butt-right control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-right")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-right")}}),e.isShowControls&&Object(St.jsx)("button",{className:"butt-front control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-front")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-front")}}),e.isShowControls&&Object(St.jsx)("button",{className:"butt-back control",onMouseDown:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onTouchStart:function(){return e.gameContext.emitter.emit("mouseDown")("butt-back")},onMouseUp:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")},onTouchEnd:function(){return e.gameContext.emitter.emit("mouseUp")("butt-back")}}),e.isShowControls&&o&&Object(St.jsx)("button",{className:"butt-fullscreen control-small",onClick:function(){e.gameContext.emitter.emit("mouseDown")("butt-fullscreen"),n(!1)}}),!e.isInfo&&Object(St.jsx)("button",{className:"butt-info control-small",onClick:function(){return e.dispatch({type:"TOGGLE_INFO"})}}),e.isInfo&&Object(St.jsx)(kt,{})]})})));var It={dispatch:null},Dt=Object(Ct.b)((function(e){return{isShowControls:e.controls.isShowControls,isInfo:e.controls.isInfo}}))((function(e){return!It.dispatch&&(It.dispatch=e.dispatch),Object(St.jsxs)("div",{className:"ui",children:[!e.isInfo&&e.gameContext.CustomReactComponent&&Object(St.jsx)(e.gameContext.CustomReactComponent,{gameContext:e.gameContext}),Object(St.jsx)(Tt,{gameContext:e.gameContext})]})})),Pt=a(16),At=a(26),Nt={isShowControls:!0,isShowControlSound:!1,isMute:!1,isInfo:!1,infoPanelData:{title:"Discovery of small android",topText:"",chapters:[{text:"Factory",href:"./../chapter01"},{text:"Brige",href:"./../chapter02"},{text:"Cube",href:"./../chapter03"},{text:"Endways",href:"./../chapter04"},{text:"Machine",href:"./../chapter05"},{text:"in production"}],currentChapterIndex:null,bottomText:"",afterWords:[{text:"Author: ",aText:"www.otrisovano.ru",href:"http://otrisovano.ru"},{text:"Github: ",aText:"https://github.com/fire888/dark_boss",href:"https://github.com/fire888/dark_boss"}]}};var Lt=document.querySelector(".progress"),Rt=-100,Et=!0;!function e(){Et&&setTimeout((function(){0===++Rt&&(Rt-=100),Lt.style.marginLeft=Rt+"%",e()}),30)}();var Ft=function(){function e(t){Object(S.a)(this,e),t.dispatcher=It,this._root=t;var a=function(e){e.customStore||(e.customStore={});var t=Object(Pt.b)(Object(N.a)({controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_INFO"===t.type?Object(N.a)(Object(N.a)({},e),{},{isShowControls:!!e.isInfo,isInfo:!e.isInfo}):"CHANGE_INFO_CHAPTER"===t.type?Object(N.a)(Object(N.a)({},e),{},{infoPanelData:Object(N.a)(Object(N.a)({},e.infoPanelData),{},{currentChapterIndex:t.currentChapterIndex})}):"TOGGLE_CONTROLS"===t.type?Object(N.a)(Object(N.a)({},e),{},{isShowControls:t.is}):"ENABLE_CONTROL_SOUND"===t.type?Object(N.a)(Object(N.a)({},e),{},{isShowControlSound:!0}):"TOGGLE_MUTE"===t.type?Object(N.a)(Object(N.a)({},e),{},{isMute:t.is}):Object(N.a)({},e)}},e.customStore)),a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pt.c;return Object(Pt.d)(t,a(Object(Pt.a)(At.a)))}(t);a&&wt.a.render(Object(St.jsx)(Ct.a,{store:a,children:Object(St.jsx)(Dt,{gameContext:t})}),document.getElementById("root"))}return Object(M.a)(e,[{key:"showStartButton",value:function(e){var t=document.querySelector(".startbuttons-wrapper"),a=document.querySelector(".progress-wrapper"),o=function(e){var t;e.target.dataset&&e.target.dataset.lang&&(t=e.target.dataset.lang,_t=t),document.querySelector(".start-screen").style.display="none"};Et=!1,t.style.display="flex",t.addEventListener("click",(function(t){e(),o(t)})),a.style.display="none"}}]),e}(),Gt=(a(43),{ru:{"What's happening?":"\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442?","I'm generating the Great Recursion. I need a component. Deliver it to me.":"\u042f \u0433\u0435\u043d\u0435\u0440\u044e \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u044e. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430. \u0414\u043e\u0441\u0442\u0430\u0432\u044c \u043c\u043d\u0435 \u0435\u0435.","Alright. Where can I find this component?":"\u0425\u043e\u0440\u043e\u0448\u043e. \u0413\u0434\u0435 \u043c\u043d\u0435 \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443?","I updated the location mark in your car, follow it.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435, \u0441\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","I'll be back.":"\u042f \u0432\u0435\u0440\u043d\u0443\u0441\u044c.","For the glory of Recursion.":"\u0412\u043e \u0441\u043b\u0430\u0432\u0443 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","Do you have a Great Recursion Component?":"\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438?","I will generate you a Great Component for the Great Recursion. I need a Component.":"\u042f \u0441\u0433\u0435\u043d\u0435\u0440\u044e \u0442\u0435\u0431\u0435 \u0412\u0435\u043b\u0438\u043a\u0443\u044e \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438. \u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430.","Where can I find it?":"\u0413\u0434\u0435 \u043c\u043d\u0435 \u0435\u0435 \u043d\u0430\u0439\u0442\u0438?","I updated the location mark in the car.":"\u042f \u043e\u0431\u043d\u043e\u0432\u0438\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u043c\u0430\u0448\u0438\u043d\u0435.","..Component.. ?":"..\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430..?","Yes. I have finished generating the Component for the Great Component of the Great Recursion.":"\u0414\u0430. \u042f \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0438.","I need to deliver it to generate the Great Component.":"\u041c\u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0435 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","The location mark in your car has been updated. It will point to the Component of the Great Component.":"\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c \u0432 \u0442\u0432\u043e\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d. \u041e\u043d \u0443\u043a\u0430\u0436\u0435\u0442 \u043d\u0430 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443 \u0412\u0435\u043b\u0438\u043a\u043e\u0439 \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b.","Is my car the key to Components?":"\u041c\u043e\u044f \u043c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u043a\u043b\u044e\u0447 \u043a \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c?","Your Car is the main Iterator. Follow it.":"\u0422\u0432\u043e\u044f \u041c\u0430\u0448\u0438\u043d\u0430 \u044d\u0442\u043e \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0418\u0442\u0435\u0440\u0430\u0442\u043e\u0440. \u0421\u043b\u0435\u0434\u0443\u0439 \u0435\u043c\u0443.","open dialog":"\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433","close dialog":"\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",drive:"\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",exit:"\u0432\u044b\u0439\u0442\u0438","To be continued":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442",chapter:"\u0433\u043b\u0430\u0432\u0430",open:"\u043f\u0443\u0441\u043a","Author: ":"\u0410\u0432\u0442\u043e\u0440: ",link:"\u0441\u0441\u044b\u043b\u043a\u0430"}}),zt=xt(Gt),Bt=Object(Ct.b)((function(e){return{userReplicies:e.ui.userReplicies}}))((function(e){return Object(St.jsx)("div",{className:"replicies",children:e.userReplicies.map((function(t){return Object(St.jsx)("button",{onClick:function(){e.dispatch({type:"CLICK_PHRASE",phrase:t}),setTimeout((function(){e.dispatch({type:"PHRASE_EVENT",phrase:t})}),1e3)},children:zt(t.q)},Math.floor(1e5*Math.random()))}))})})),Ut=xt(Gt),Wt=Object(Ct.b)((function(e){return{botAnswers:e.ui.botAnswers}}))((function(e){return Object(St.jsx)("div",{className:"messages",children:e.botAnswers.map((function(e){return Object(St.jsxs)("div",{children:[Object(St.jsx)("div",{className:"q",children:Ut(e.q)}),Object(St.jsx)("div",{className:"a",children:Ut(e.a)})]},Math.floor(1e5*Math.random()))}))})})),qt=xt(Gt);var Kt=Object(Ct.b)((function(e){return{isButtonDialog:e.ui.isButtonDialog,isShowFinalMessage:e.ui.isShowFinalMessage,isShowPalleteDialog:e.ui.isShowPalleteDialog,isShowButtonDrawCar:e.ui.isShowButtonDrawCar,valButtonDrawCar:e.ui.valButtonDrawCar,isShowButtonToggleOpenLocationsList:!0,isLocationListOpened:e.ui.isLocationListOpened,currentLocationOfList:e.ui.currentLocationOfList,locationsList:e.ui.locationsList}}))((function(e){return Object(St.jsxs)(St.Fragment,{children:[!e.isShowFinalMessage&&e.isButtonDialog&&!e.isShowPalleteDialog&&Object(St.jsx)("button",{className:"control control-enter",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!0})}}),e.isShowPalleteDialog&&Object(St.jsx)("div",{className:"dialog-wrapper",children:Object(St.jsxs)("div",{className:"dialog-content",children:[e.isShowPalleteDialog&&Object(St.jsxs)("div",{className:"messages-wrapper",children:[Object(St.jsx)(Wt,{}),Object(St.jsx)(Bt,{})]}),e.isButtonDialog&&Object(St.jsx)("button",{className:"dialog-button-toggle",onClick:function(){return e.dispatch({type:"TOGGLE_DIALOG",isShowPalleteDialog:!e.isShowPalleteDialog})},children:e.isShowPalleteDialog?qt("close dialog"):qt("open dialog")})]})}),e.isShowButtonDrawCar&&Object(St.jsx)("button",{className:"control ".concat("exit"===e.valButtonDrawCar?"control-exit":"control-enter"),onClick:function(){return e.dispatch({type:"CLICK_DRAW"})}}),e.isShowFinalMessage&&Object(St.jsx)("div",{className:"final-mess",children:qt("To be continued")})]})})),Vt=a(7),Ht={location01:"location02",location02:"location03",location03:"locationToFinish"},Yt={botAnswers:[],userReplicies:[],isShowControls:!0,isButtonDialog:!1,isShowPalleteDialog:!1,isShowFinalMessage:!1,isShowButtonDrawCar:!1,valButtonDrawCar:"drive",currentLocation:null,phrasesData:{location01:{isComplete:!1,phraseIndex:0,phrases:[{q:"What's happening?",a:"I'm generating the Great Recursion. I need a component. Deliver it to me.",event:"nextReply"},{q:"Alright. Where can I find this component?",a:"I updated the location mark in your car, follow it.",event:"nextReply"},{q:"I'll be back.",a:"For the glory of Recursion.",event:"close"}]},location02:{isComplete:!1,phraseIndex:0,phrases:[{q:"Do you have a Great Recursion Component?",a:"I will generate you a Great Component for the Great Recursion. I need a Component.",event:"nextReply"},{q:"Where can I find it?",a:"I updated the location mark in the car.",event:"close"}]},location03:{isComplete:!1,phraseIndex:0,phrases:[{q:"..Component.. ?",a:"Yes. I have finished generating the Component for the Great Component of the Great Recursion.",event:"nextReply"},{q:"I need to deliver it to generate the Great Component.",a:"The location mark in your car has been updated. It will point to the Component of the Great Component.",event:"nextReply"},{q:"Is my car the key to Components?",a:"Your Car is the main Iterator. Follow it.",event:"close"}]}},isShowButtonToggleOpenLocationsList:!1,isLocationListOpened:!1,currentLocationOfList:"location01",locationsList:["location01","location02","location03"]},Jt=a.p+"static/media/broken_down_concrete2_Normal-dx.4c6af83f.jpg",Zt=a.p+"static/media/broken_down_concrete2_ao.dc08dd3d.jpg",Qt=[{key:"emitter",constr:P,initStateKey:"pageLoaded"},{key:"deviceResizer",constr:function e(t){Object(S.a)(this,e);var a=t.emitter,o=t.appWrapper;!o&&(o=document.querySelector(".app-wrapper")),a.subscribe("mouseDown")((function(e){"butt-fullscreen"===e&&n()}));var n=function(){o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen()},r=function(e){o.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px",o.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",document.fullscreenElement||a.emit("screenMode")("exitFullScreen")};window.addEventListener("resize",r),r()},initStateKey:"pageLoaded"},{key:"loaderAssets",constr:D,initStateKey:"pageLoaded"},{key:"frameUpdater",constr:R,initStateKey:"beforeStartPlay"},{key:"tweenUpdater",constr:function e(t){Object(S.a)(this,e),t.emitter.subscribe("frameUpdate")((function(){return E.b()}))},initStateKey:"beforeStartPlay"},{key:"studio",constr:q,initStateKey:"beforeStartPlay"},{key:"keyBoard",constr:K,initStateKey:"beforeStartPlay"},{key:"player",constr:V,initStateKey:"beforeStartPlay"},{key:"system_PlayerNearLevelItems",constr:ne,initStateKey:"beforeStartPlay"},{key:"materialsLib",constr:function e(t){Object(S.a)(this,e);var a=t.assets,o=t.CONSTANTS;t.materials=H(a,o.MATERIALS_CONFIG)},initStateKey:"beforeStartPlay"},{key:"system_Assets",constr:function e(t){Object(S.a)(this,e),this._root=t;t.assets,t.materials},initStateKey:"beforeStartPlay",assetsToLoad:[{type:"cubeTextures",path:[J,Z,Q,X,$,ee],key:"skyBox3"},{type:"img",path:Y,key:"mapTop",wrap:!0},{type:"img",path:Jt,key:"ironNormal",wrap:!0},{type:"img",path:a.p+"static/media/broken_down_concrete2_albedo.7ac3a0c4.jpg",key:"ironAlbedo",wrap:!0},{type:"img",path:Zt,key:"ironAO",wrap:!0},{type:"obj",path:a.p+"static/media/body.98d636eb.obj",key:"bodyModel"}]},{key:"system_PlayerMoveOnLevel",constr:oe,initStateKey:"beforeStartPlay"},{key:"customUi",constr:function e(t){Object(S.a)(this,e),t.appWrapper=document.querySelector(".app-wrapper"),t.CustomReactComponent=Kt,t.customStore=function(e){return{ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,a=arguments.length>1?arguments[1]:void 0;if("TOGGLE_BUTTON_DIALOG"===a.type){var o=a.keyPerson.split("_")[1],n=[];if(t.phrasesData[o])for(var r=t.phrasesData[o],s=r.phraseIndex,i=r.phrases,c=0;c<s;++c)n.push(i[c]);return Object(N.a)(Object(N.a)({},t),{},{isButtonDialog:a.is,currentLocation:o,userReplicies:[],botAnswers:n})}if("TOGGLE_DIALOG"===a.type){var p=[];if(e.player.toggleBlocked(a.isShowPalleteDialog),a.isShowPalleteDialog){var l=t.phrasesData[t.currentLocation],u=l.isComplete,h=l.phraseIndex,f=l.phrases;p=u?[]:[f[h]]}return setTimeout((function(){return e.dispatcher.dispatch({type:"TOGGLE_CONTROLS",is:!a.isShowPalleteDialog})})),Object(N.a)(Object(N.a)({},t),{},{isShowPalleteDialog:a.isShowPalleteDialog,userReplicies:p})}if("CLICK_PHRASE"===a.type)return Object(N.a)(Object(N.a)({},t),{},{botAnswers:[].concat(Object(re.a)(t.botAnswers),[a.phrase]),userReplicies:[]});if("PHRASE_EVENT"===a.type){var b=a.phrase.event;if("nextReply"===b){var d=t.phrasesData[t.currentLocation],m=(d.isComplete,d.phraseIndex)+1,v=[d.phrases[m]];return Object(N.a)(Object(N.a)({},t),{},{phrasesData:Object(N.a)(Object(N.a)({},t.phrasesData),{},Object(Vt.a)({},t.currentLocation,Object(N.a)(Object(N.a)({},t.phrasesData[t.currentLocation]),{},{phraseIndex:m}))),userReplicies:v})}if("close"===b){var y=t.phrasesData[t.currentLocation].phraseIndex+1;return setTimeout((function(){e.dispatcher.dispatch({type:"SELECT_LOCATION",location:Ht[t.currentLocation]})}),50),Object(N.a)(Object(N.a)({},t),{},{userReplicies:[],phrasesData:Object(N.a)(Object(N.a)({},t.phrasesData),{},Object(Vt.a)({},t.currentLocation,Object(N.a)(Object(N.a)({},t.phrasesData[t.currentLocation]),{},{isComplete:!0,phraseIndex:y}))),isButtonDialog:!0})}}return"TOGGLE_BUTTON_DRAW_CAR"===a.type?Object(N.a)(Object(N.a)({},t),{},{isShowButtonDrawCar:a.is}):"CLICK_DRAW"===a.type?"drive"===t.valButtonDrawCar?(e.actions.clickMachineDraw(),Object(N.a)(Object(N.a)({},t),{},{valButtonDrawCar:"exit"})):(e.actions.clickMachineExit(),Object(N.a)(Object(N.a)({},t),{},{valButtonDrawCar:"drive"})):"OPEN_LOCATIONS_LIST"===a.type?Object(N.a)(Object(N.a)({},t),{},{isLocationListOpened:!0}):"SELECT_LOCATION"===a.type?(e.actions.changeTargetLocation({key:a.location}),Object(N.a)(Object(N.a)({},t),{},{isLocationListOpened:!1,currentLocationOfList:a.location})):"SHOW_FINAL_MESSAGE"===a.type?Object(N.a)(Object(N.a)({},t),{},{isShowFinalMessage:!0}):t}}}(t);var a=new Ft(t);t.ui=a},initStateKey:"pageLoaded"},{key:"actions",constr:Ot,initStateKey:"beforeStartPlay"}];window.addEventListener("load",(function(){return function(e,t){return i.apply(this,arguments)}(Qt,o)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.b3a3ee65.chunk.js.map