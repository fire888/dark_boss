{"version":3,"sources":["_CORE/pipeLines/initPipeLine.js","chapter02/src/constants/constants_elements.js","_CORE/helpers/helper_LoadAssets.js","_CORE/helpers/helper_Emitter.js","_CORE/helpers/helper_translate.js","_CORE/ui/containersReact/Info.js","_CORE/constants/default_voc.js","_CORE/ui/containersReact/PlayerControls.js","_CORE/ui/containersReact/App.js","_CORE/ui/store/defaultUiData.js","_CORE/ui/UI.js","_CORE/ui/store/createStore.js","chapter02/src/ui/DialogPallete.js","chapter02/src/constants/constants_replicies.js","chapter02/src/actions/AdderActions.js","chapter02/src/ui/CustomReactComponent.js","chapter02/src/constants/translate.js","chapter02/src/ui/createStore.js","_CORE/shaders/saturate.js","_CORE/shaders/saturate2.js","_CORE/entities/createStudio.js","_CORE/helpers/helper_KeyBoard.js","_CORE/entities/createPlayer.js","_CORE/systems/SystemCollisionsItems.js","_CORE/helpers/helper_MaterialsLib.js","assets/chapter02/skybox/px.jpg","assets/chapter02/skybox/nx.jpg","assets/chapter02/skybox/py.jpg","assets/chapter02/skybox/ny.jpg","assets/chapter02/skybox/pz.jpg","assets/chapter02/skybox/nz.jpg","assets/chapter02/level.obj","chapter02/src/systems/system_Level.js","assets/chapter02/terminal.glb","chapter02/src/entities/Terminal.js","_CORE/helpers/helper_GLTFcopy.js","chapter02/src/systems/system_Terminals.js","_CORE/systems/SystemCheckerNearItem.js","chapter02/src/entities/BridgeMesh.js","chapter02/src/entities/Bridge.js","chapter02/src/constants/constants_modules.js","chapter02/src/ui/Ui.js","_CORE/helpers/helper_DeviceResizer.js","_CORE/helpers/helper_FrameUpater.js","_CORE/helpers/helper_TweenUpdater.js","chapter02/src/systems/system_Platforms.js","chapter02/src/systems/system_DialogsWithTerminals.js","chapter02/src/systems/system_Brige.js","chapter02/src/index.js"],"names":["gameModules","CONSTANTS","a","initModulesByState","root","loaderAssets","dataToLoad","getAssetsFromModulesData","loadAssets","assets","state","modulesData","i","length","key","constr","initStateKey","arr","assetsToLoad","j","push","PI","Math","CURRENT_CHAPTER","MATERIALS_CONFIG","mat","props","side","THREE","color","emissive","bumpScale","shininess","END_ENV","fogNear","fogFar","backgroundImgKey","studioConfig","canId","rendererCon","antialias","amb","strength","clearColor","sceneEnvironment","playerConfig","speed","speedRot","speedDown","offsetFromFloor","offsetFromFloorFactor","offsetWallCollision","level","startRot","startPos","cameraData","fov","ratio","window","innerWidth","innerHeight","near","far","pos","frontObjPos","backObjPos","lightDataOne","R","PLATFORMS_CONFIG","r","angle","y","w1","w2","h","TERMINALS_CONFIG","terminalKey","angleZ","angleY","LAST_TERMINAL_CONFIG","BRIDGE_START_STATE","time","count","twist","strengthTwist","radius","height","rotate","width","floor","x","z","PROGRAMS","createLoaders","objLoader","textureLoader","gltfLoader","cubeTextureLoader","soundLoader","path","type","Promise","resolve","OBJLoader","GLTFLoader","getterLoader","load","LoaderAssets","this","resources","_load","data","iterate","index","EventEmitter","_storage","id","getOrCreateArrFromObj","forEach","action","callback","filter","item","s","console","log","obj","lang","createTranslater","vocab","word","t","connect","controls","infoPanelData","className","onClick","dispatch","title","topText","chapters","map","href","target","text","currentChapterIndex","bottomText","afterWords","aText","isInfo","isShowControls","isShowControlSound","isMute","useState","isShowFullScreenButt","changeShowFullScreenButt","useEffect","gameContext","emitter","subscribe","val","onMouseUp","emit","is","onTouchEnd","onMouseDown","onTouchStart","dispatcher","CustomReactComponent","startDefaultStoreData","loader","document","querySelector","offsetLoader","isAnimateLoader","loaderTimeOut","setTimeout","style","marginLeft","UI","_root","store","customStore","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","prepareStore","ReactDOM","render","getElementById","startButtons","progressWrapper","hideStartScreen","e","l","dataset","display","addEventListener","LIBA","replicies","dialogs","blockPhrases","currentTerminalKey","currentPhraseIndex","message","q","txt","isShow","ind","actionKey","dataAction","phraseIndex","toggleOpenDialog","isToOpen","isButtonDialog","isCloseisButtonDialog","isShowPalleteDialog","isShowFinalMessage","DialogPallete","location","replace","storeStartState","idChangerState","keyProgramBridge","currentLanguage","Saturate","uniforms","value","vertexShader","fragmentShader","Saturate2","Studio","canvas","_renderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","_scene","background","fog","_lightA","add","_playerCamera","_controlsCamera","position","set","OrbitControls","domElement","update","_composer","EffectComposer","_renderPass","RenderPass","addPass","composerAddPass","ShaderPass","vec3","isPlayerView","saveFogData","camera","getWorldPosition","resize","size","aspect","updateProjectionMatrix","addToScene","bind","removeFromScene","remove","_backgroundImgKey","cam","conf","_changeFog","_changeBackground","startData","endData","TWEEN","to","onUpdate","updateAmb","start","KeyBoard","keys","keysEnabled","keyUpdate","keyCode","isDown","event","Player","studio","_camera","isButtonsDisabled","_isBlocked","_isCanMove","_mainObj","fromArray","rotation","userData","bottomObj","frontObj","backObj","strenth","light","systemCollisionFloor","checkCollisions","isBlockedByItem","offset","translateY","systemCollisionItems","translateZ","dir","isOpen","setCamera","SystemCollisionWithItems","_arrMeshes","_vecStart","_vecDir","_rayCaster","mesh","itemKeyEmitCollision","isStopUnits","objFrom","objTo","d","sub","intersects","intersectObjects","distance","object","type2","point","createMaterials","wrapS","wrapT","mapsKeys","materials","keyMap","SystemLevel","_topLevel","traverse","child","name","includes","geometry","wall","setItemToCollision","easyMaterial","dist","createModelTerminal","model","config","copy","gltf","clone","animations","scene","skinnedMeshes","node","isSkinnedMesh","cloneBones","cloneSkinnedMeshes","isBone","skeleton","cloneSkinnedMesh","orderedCloneBones","bones","cloneBone","boneInverses","matrixWorld","GLTFCopy","children","mixer","timeScale","mixerUpdate","delta","openAction","clipAction","loop","sin","cos","startOpen","stopUpdate","reset","play","paused","startClose","SystemTerminals","terminals","createTerminal","terminal","inScene","visible","SystemCheckerNearItem","_itemWorldPos","_mainCheckerWorldPos","_arr","mainMesh","distanceTo","updateMesh","dispose","createGeom","needsUpdate","pointsCarcass","points","w","p","twistPoint","xW","zW","createPointsCarcass","phase","createPointsPath","createGeomFromPoints","vertices","Float32Array","setAttribute","computeVertexNormals","computeBoundingSphere","createBridge","material","currentState","bridge","geom","changeMesh","params","createBridgeMesh","setPose","startProgram","program","doMarathonAnimations","then","newState","arrStates","doNextAnimation","gsap","duration","ease","middleState","onComplete","GAME_MODULES","appWrapper","openTerminal","closeTerminal","player","toggleBlocked","addTopZone","addLastTerminal","JSON","parse","stringify","splice","changeEnvironment","createCustomStore","ui","openAppFullScreenIfMobile","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fontSize","max","min","fullscreenElement","emitFrameUpdate","oldTime","Date","now","isNaN","dataFromChine","animate","requestAnimationFrame","levelSrc","pxjpg","nxjpg","pyjpg","nyjpg","pzjpg","nzjpg","terminalSrc","checkerNear","setItemToCheck","keyTerminalNear","checkNear","isNear","_PROGRAMS","_bridge","_inProgram","showStartButton","pipeLineForInit"],"mappings":"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","file":"static/js/main.a2243007.chunk.js","sourcesContent":["export async function pipeLineForInit (gameModules, CONSTANTS) {\r\n    const root = { CONSTANTS }\r\n\r\n    initModulesByState('pageLoaded', gameModules, root)\r\n\r\n    const { loaderAssets } = root\r\n\r\n    const dataToLoad = getAssetsFromModulesData(gameModules)\r\n    root.assets = await loaderAssets.loadAssets(dataToLoad)\r\n\r\n    initModulesByState('beforeStartPlay', gameModules, root)\r\n}\r\n\r\n\r\nconst initModulesByState = (state, modulesData, root) => {\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        const {  key, constr, initStateKey } = modulesData[i]\r\n        initStateKey === state && (root[key] = new constr(root))\r\n    }\r\n}\r\n\r\nconst getAssetsFromModulesData = modulesData => {\r\n    const arr = []\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        if (modulesData[i].assetsToLoad && modulesData[i].assetsToLoad.length) {\r\n            for (let j = 0; j < modulesData[i].assetsToLoad.length; ++j) {\r\n                arr.push(modulesData[i].assetsToLoad[j])\r\n            }\r\n        }\r\n    }\r\n    return arr\r\n}","import * as THREE from 'three'\r\nconst PI = Math.PI\r\nconst hPI = PI / 2\r\n\r\n\r\nexport const CURRENT_CHAPTER = 1\r\n\r\nexport const MATERIALS_CONFIG = {\r\n    'wall': {\r\n        mat: 'MeshPhongMaterial',\r\n        props: {\r\n            side: THREE.DoubleSide,\r\n            color: '#00c7ea',\r\n            emissive: '#6205b0',\r\n            bumpScale: 0.2,\r\n            shininess: 100,\r\n        },\r\n    },\r\n}\r\n\r\n\r\nexport const END_ENV = { fogNear: -10, fogFar: 0, color: 0x0e2535, backgroundImgKey: null }\r\n\r\nexport const studioConfig = {\r\n    canId: 'webgl-canvas',\r\n    rendererCon: {\r\n        antialias: true\r\n    },\r\n    amb: {\r\n        color: 0xffffff,\r\n        strength: 0.8,\r\n    },\r\n    clearColor: 0x0e2535,\r\n    sceneEnvironment: {\r\n        fogNear: 40,\r\n        fogFar: 300,\r\n        color: 0x0e2535, \r\n        backgroundImgKey: 'envTexture',\r\n    },\r\n}\r\n\r\n\r\n// const speedDown = -0.45\r\nconst speedDown = -0.65\r\nexport const playerConfig = {\r\n    //speed: 0.35,\r\n    speed: 0.8,\r\n    speedRot: 0.02,\r\n    speedDown,\r\n    //offsetFromFloor: 5.0,\r\n    offsetFromFloor: 7.0,\r\n    offsetFromFloorFactor: 1,//speedDown * (-1) + .1,\r\n    offsetWallCollision: 3.5,\r\n    level: -13,\r\n    startRot: [0, 0, 0],\r\n    startPos: [0, 0, 190],\r\n    //positions on platforms for debugging\r\n    //startPos: [-5.614908553125407, -50.81650161743164, -54.48311129133365],\r\n    //startPos: [2.354103517969214, 6.5, -107.29721568841998],\r\n    //startPos: [-24.948354188041503, 72.5, 93.69116998603509 ],\r\n    //startPos: [18.357669772732198, 72.5, -104.50015863788533],\r\n    //startPos: [110.99286970990862, 123.5, 19.3252595736 ],\r\n    //startPos: [34.17306840733142, 156.5, 109.1814716364231],\r\n    //startPos: [40.80743861657082, 249.7961832162714, 96.36024171879704 ],\r\n    //startPos: [-170.75892530136252, 282.5404968261719, -313.3819071475127],\r\n    cameraData: {\r\n        fov: 90,\r\n        ratio: window.innerWidth / window.innerHeight,\r\n        near: 0.1,\r\n        far: 1000,\r\n        pos: [0, 2, -0.5],\r\n    },\r\n    frontObjPos: [0, 0, -1],\r\n    backObjPos: [0, 0, 1],\r\n    lightDataOne: {\r\n        color: 0xccccff, \r\n        strength: 0.3,\r\n        pos: [0, 50, 0],\r\n    },\r\n}\r\n\r\nconst R = 100\r\nexport const PLATFORMS_CONFIG = [\r\n    { r: R, angle: PI + 0.1, y: -5, w1: 70, w2: 40, h: 7, },\r\n    { r: R, angle: 0, y: 61, w1: 70, w2: 40, h: 7, },\r\n    { r: R, angle: PI - 0.1, y: 61, w1: 70, w2: 40, h: 7, },\r\n    { r: R + 20, angle: PI/2, y: 112, w1: 70, w2: 40, h: 7, },\r\n    { r: R + 20, angle: 0.35, y: 145, w1: 70, w2: 40, h: 7, },\r\n    { r: R + 20, angle: 0.35 - 0.2, y: 237, w1: 70, w2: 40, h: 7, },\r\n]\r\n\r\n\r\nexport const TERMINALS_CONFIG = [\r\n    { terminalKey: 'TERMINAL_Z01', r: 20, angle: PI - 0.3, y: -57, angleZ: PI / 2, angleY: 0.1 },\r\n    { terminalKey: 'TERMINAL_Z', r: 50, angle: PI, y: -57, },\r\n    { terminalKey: 'TERMINAL_00', r: R + 20, angle: 0, y: 2, },\r\n    { terminalKey: 'TERMINAL_01', r: R - 5, angle: PI + 0.3, y: 1, },\r\n    { terminalKey: 'TERMINAL_02', r: R - 5, angle: -0.2, y: 67, },\r\n    { terminalKey: 'TERMINAL_03', r: R - 5, angle: PI - 0.2, y: 67, },\r\n    { terminalKey: 'TERMINAL_04', r: R + 10, angle: PI/2 - 0.2, y: 118, },\r\n    { terminalKey: 'TERMINAL_05', r: R + 10, angle: 0.25, y: 151, },\r\n    { terminalKey: 'TERMINAL_06', r: R + 10, angle: 0.1, y: 243, },\r\n]\r\nexport const LAST_TERMINAL_CONFIG = { terminalKey: 'TERMINAL_LAST', r: 350, angle: PI + 0.5, y: 277 }\r\n\r\n\r\n\r\nexport const BRIDGE_START_STATE =\r\n{time: 3000,count: 34,twist: 3.141592653589793,strengthTwist: 1,radius: 0,height: 0,rotate: 3.05840734641021,width: 0,floor: 0,x: 0,y: 0,z: 58,}\r\n// states bridge for debugging\r\n//{time: '3000', count: 60,twist: 11.6840734641021,strengthTwist: 1,radius: 10,height: 78,rotate: 0.858407346410207,width: 0,floor: 0,x: 0,y: -15,z: 0,}\r\n//{time: '3000', count: 100, twist: 1.53407346410207, strengthTwist: 0, radius: 100, height: 2, rotate: 0, width: 10, floor: 17, x: 0, y: 0, z: 0,}\r\n//{time: 1000, count: 100, twist: 0,strengthTwist: 0,radius: 85,height: -73,rotate: PI * 2 + 0.25,width: 12,floor: 30,x: 0,y: 67,z: 0,}\r\n//{time: 3000, count: 100, twist: -2.81592653589793, strengthTwist: 1, radius: 96, height: 0, rotate: -0.341592653589793, width: 8, floor: 18, x: 0, y: 65, z: 0, }\r\n//{ time: 3000,count: 100, twist: 13.7340734641021, strengthTwist: 0.351, radius: 126, height: 52, rotate: -2.84159265358979, width: 10, floor: 17, x: 42, y: 69, z: 0, }\r\n//{ time: 3000,count: 100, twist: -7.21592653589793, strengthTwist: 1, radius: 114, height: 40, rotate: 1.25840734641021, width: 10, floor: 17, x: 0, y: 113, z: 0, }\r\n//{ time: 1500,count: 192, twist: -18.3159265358979, strengthTwist: 1, radius: 40, height: 98, rotate: 0, width: 9, floor: 16.2, x: 8, y: 146, z: 73, }\r\n//{ time: 1000,count: 100, twist: 3.14, strengthTwist: 0.424, radius: 200, height: 40, rotate: 0.6584, width: 7, floor: 90, x: -75, y: 240, z: -10, }\r\n\r\n\r\n\r\n\r\nexport const PROGRAMS = {\r\n    'PROGRAM_NONE': [\r\n        { time: 1000,count: 148, twist: 12.4340734641021, strengthTwist: 0.84, radius: 24, height: 40, rotate: -0.041592653589793, width: 0, floor: 0, x: 0, y: 0, z: 0, },\r\n        { time: 3000,count: 148, twist: 12.4340734641021, strengthTwist: 0.84, radius: -34, height: 40, rotate: -20, width: 5, floor: 0, x: 0, y: 0, z: 0, },\r\n        { time: 3000,count: 70, twist: 20.4340734641021, strengthTwist: 0.84, radius: -40, height: 80, rotate: -40, width: 5, floor: 12, x: 0, y: -20, z: 0, },\r\n        { time: 3000,count: 50, twist: 12, strengthTwist: -0.84, radius: -5, height: -40, rotate: -40, width: 5, floor: 12, x: 0, y: 20, z: 0, },\r\n        { time: 3000,count: 70, twist: 12, strengthTwist: -0.84, radius: 20, height: -40, rotate: -20, width: 10, floor: 12, x: 0, y: 20, z: 0, },\r\n        { time: 3000,count: 100, twist: 20, strengthTwist: 1, radius: 20, height: 40, rotate: 0, width: 5, floor: 0, x: 10, y: 20, z: 0, },\r\n        { time: 3000,count: 148, twist: 20, strengthTwist: 1, radius: 20, height: 80, rotate: 20, width: 0, floor: 0, x: 0, y: -20, z: 0, },\r\n        {time: 20,count: 34,twist: 3.141592653589793,strengthTwist: 1,radius: 0,height: 0,rotate: 3.05840734641021,width: 0,floor: 0,x: 0,y: 0,z: 58,}\r\n    ],\r\n    'PROGRAM_Z': [\r\n        {time: 1500,count: 100,twist: 15.141592653589793,strengthTwist: 1,radius: 50, height: -70, rotate: -10, width: 5, floor: 0,x: 0, y: 30, z: 28,},\r\n        {time: 3000,count: 100,twist: -15.141592653589793,strengthTwist: 1,radius: 20, height: 70, rotate: 3.05, width: 5, floor: 0,x: 0, y: -30, z: 58,},\r\n        {time: 1500,count: 34,twist: 3.141592653589793,strengthTwist: 0,radius: 48,height: 70,rotate: 3.05840734641021,width: 20,floor: 0,x: 0,y: -60,z: 58,}\r\n    ],\r\n    'PROGRAM_00': [\r\n        {time: 700, count: 60, twist: 14.1340734641021, strengthTwist: 1, radius: 30, height: 78, rotate: -Math.PI, width: 7, floor: 0, x: 0, y: -15, z: 0,},\r\n        {time: 700, count: 172, twist: 14.1340734641021, strengthTwist: 0.383, radius: 40, height: 78, rotate: 0.858407346410207, width: 7, floor: 13.3, x: 0, y: -15, z: 0,},\r\n        {time: 2000, count: 172, twist: -18.1659265358979, strengthTwist: 0.486, radius: 40, height: 62, rotate: -Math.PI, width: 7, floor: 20, x: 0, y: -15, z: 0,},\r\n        {time: 3000, count: 300, twist: -18.1659265358979, strengthTwist: 0.922, radius: 64, height: 30, rotate: 0.858407346410207, width: 4, floor: 5.3, x: 0, y: 40, z: 0,},\r\n        {time: 3000, count: 100, twist: 1.53407346410207, strengthTwist: 0, radius: 110, height: 2, rotate: 0, width: 10, floor: 17, x: 0, y: 0, z: 0,},\r\n        {time: 1000, count: 100, twist: 1.53407346410207, strengthTwist: 0, radius: 110, height: 2, rotate: 0, width: 7, floor: 25, x: 0, y: 0, z: 0,},\r\n    ],\r\n    'PROGRAM_01': [\r\n        {time: 3000, count: 160, twist: -10,strengthTwist: 1,radius: 22,height: -40,rotate: PI,width: 3,floor: 17,x: 0,y: 70,z: 0,},\r\n        {time: 3000, count: 100, twist: 0,strengthTwist: 0,radius: 60,height: -78,rotate: PI * 1.5,width: 30,floor: 5,x: 0,y: 70,z: 0,},\r\n        {time: 1000, count: 100, twist: 0,strengthTwist: 0,radius: 85,height: -73,rotate: PI * 2 + 0.25,width: 12,floor: 10,x: 0,y: 67,z: 0,},\r\n        {time: 1000, count: 100, twist: 0,strengthTwist: 0,radius: 85,height: -73,rotate: PI * 2 + 0.25,width: 7,floor: 30,x: 0,y: 67,z: 0,},\r\n    ],\r\n    'PROGRAM_02': [\r\n        {time: 3000, count: 50, twist: -4, strengthTwist: 1, radius: 7, height: 80, rotate: 1.5, width: 5, floor: 7, x: 0, y: 65, z: 0, },    \r\n        {time: 3000, count: 70, twist: 6, strengthTwist: 1, radius: 40, height: -80, rotate: -1.5, width: 8, floor: 7, x: 0, y: 110, z: 0, },    \r\n        {time: 1500, count: 100, twist: -2.81592653589793, strengthTwist: 1, radius: 96, height: 0, rotate: -0.341592653589793, width: 15, floor: 7, x: 0, y: 65, z: 0, },\r\n        {time: 1000, count: 100, twist: -2.81592653589793, strengthTwist: 1, radius: 96, height: 0, rotate: -0.341592653589793, width: 7, floor: 30, x: 0, y: 65, z: 0, },\r\n    ],\r\n    'PROGRAM_03': [\r\n        { time: 3000,count: 300, twist: 13, strengthTwist: 1, radius: 30, height: 52, rotate: 7, width: 7, floor: 5, x: 0, y: 69, z: 0, },\r\n        { time: 1000,count: 300, twist: 13, strengthTwist: 1, radius: -30, height: 52, rotate: 7, width: 7, floor: 5, x: 0, y: 69, z: 0, },\r\n        { time: 3000,count: 300, twist: -13, strengthTwist: 1, radius: 10, height: 52, rotate: 7, width: 5, floor: 5, x: 0, y: 69, z: 0, },\r\n        { time: 3000,count: 100, twist: 13.7340734641021, strengthTwist: 0.351, radius: 126, height: 52, rotate: -2.84159265358979, width: 10, floor: 17, x: 42, y: 69, z: 0, },\r\n        { time: 1000,count: 300, twist: 13.7340734641021, strengthTwist: 0.351, radius: 126, height: 52, rotate: -2.84159265358979, width: 7, floor: 30, x: 42, y: 69, z: 0, },\r\n    ],\r\n    'PROGRAM_04': [\r\n        { time: 1000,count: 300, twist: 13.7340734641021, strengthTwist: 0, radius: 126, height: 0, rotate: -2.84159265358979, width: 7, floor: 30, x: 42, y: 70, z: 0, },\r\n        { time: 3000,count: 300, twist: 13, strengthTwist: 1, radius: 30, height: 52, rotate: 7, width: 7, floor: 5, x: 0, y: 90, z: 0, },\r\n        { time: 1000,count: 300, twist: 13, strengthTwist: 1, radius: -30, height: 52, rotate: 7, width: 7, floor: 5, x: 0, y: 90, z: 0, },\r\n        { time: 3000,count: 300, twist: -13, strengthTwist: 1, radius: 10, height: 52, rotate: 7, width: 5, floor: 5, x: 0, y: 90, z: 0, },\r\n        { time: 3000,count: 100, twist: -7.21592653589793, strengthTwist: 1, radius: 90, height: 40, rotate: 1.25840734641021, width: 10, floor: 17, x: 0, y: 113, z: 0, },\r\n        { time: 1000,count: 100, twist: -7.21592653589793, strengthTwist: 1, radius: 114, height: 40, rotate: 1.25840734641021, width: 10, floor: 17, x: 0, y: 113, z: 0, },\r\n    ],\r\n    'PROGRAM_05': [\r\n        { time: 1500,count: 200, twist: -5, strengthTwist: 1, radius: 10, height: 7, rotate: PI, width: 9, floor: 30, x: 0, y: 133, z: 0, },\r\n        { time: 3000,count: 70, twist: -10, strengthTwist: 1, radius: 30, height: -98, rotate: -5 * PI, width: 5, floor: 0, x: 0, y: 240, z: 0, },\r\n        { time: 3000,count: 50, twist: -10, strengthTwist: 1, radius: -60, height: 98, rotate: -PI, width: -9, floor: 19.2, x: 0, y: 146, z: 0, },\r\n        { time: 1500,count: 192, twist: -18.3159265358979, strengthTwist: 1, radius: 40, height: 98, rotate: 0, width: 9, floor: 16.2, x: 8, y: 146, z: 73, },\r\n    ],\r\n    'PROGRAM_06': [\r\n        { time: 1500,count: 192, twist: -12, strengthTwist: 1, radius: 20, height: 70, rotate: 5, width: 3, floor: 3, x: -75, y: 200, z: 0, },\r\n        { time: 3000,count: 100, twist: 3.14, strengthTwist: 0.424, radius: 200, height: 40, rotate: 0.6584, width: 20, floor: 7, x: -75, y: 240, z: -10, },\r\n        { time: 1000,count: 100, twist: 3.14, strengthTwist: 0.424, radius: 200, height: 40, rotate: 0.6584, width: 7, floor: 90, x: -75, y: 240, z: -10, },\r\n    ],\r\n    'PROGRAM_LAST': [\r\n        {time: 3000, count: 300, twist: 10,strengthTwist: 1, radius: 80,height: 190,rotate: -5,width: 10,floor: 11.5,x: -40,y: 249,z: -30,},\r\n        {time: 3000, count: 200, twist: 31.38, strengthTwist: 1,radius: 24,height: 190,rotate: 0.158407346410207,width: 10,floor: 11.5,x: -20,y: 249,z: -192,},\r\n        {time: 3000, count: 600, twist: 31.38, strengthTwist: 1,radius: -130,height: 190,rotate: -20,width: 10,floor: 20,x: -20,y: 239,z: -192,},\r\n        {time: 3000, count: 200, twist: 6, strengthTwist: 2,radius: -60,height: 190,rotate: -30,width: 10,floor: 20,x: -20,y: 29,z: -182,},\r\n        {time: 3000, count: 200, twist: -16, strengthTwist: 1,radius: -50,height: 190,rotate: -40,width: 10,floor: 0,x: -20,y: 249,z: -182,},\r\n        {time: 1500, count: 200, twist: -30, strengthTwist: 1,radius: -40,height: 190,rotate: -50,width: 0,floor: 0,x: -20,y: 249,z: -192,},\r\n    ],\r\n}\r\n\r\n","import * as THREE from 'three'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { GLTFLoader } from  'three/examples/jsm/loaders/GLTFLoader'\r\n\r\n\r\n\r\n\r\nconst createLoaders = () => {\r\n    let objLoader = null,\r\n        textureLoader = null,\r\n        gltfLoader = null,\r\n        cubeTextureLoader = null,\r\n        soundLoader = null\r\n\r\n\r\n    const getterLoader = type => {\r\n        if (type === 'obj')\r\n            return objLoader = (objLoader || new OBJLoader())\r\n        if (type === 'glb' || type === 'gltf')\r\n            return gltfLoader = (gltfLoader || new GLTFLoader())\r\n        if (type === 'img')\r\n            return textureLoader = (textureLoader || new THREE.TextureLoader())\r\n        if (type === 'cubeTextures') {\r\n            return cubeTextureLoader = (cubeTextureLoader || new THREE.CubeTextureLoader())\r\n        }\r\n        if (type === 'soundMp3') {\r\n            return soundLoader = (soundLoader || new THREE.AudioLoader())\r\n        }\r\n\r\n    }\r\n\r\n    return (path, type) => new Promise(resolve => {\r\n        getterLoader(type).load(path, resolve)\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport class LoaderAssets {\r\n\r\n    constructor () {\r\n        this.resources = {}\r\n        this._load = createLoaders()\r\n    }\r\n\r\n    loadAssets (data) {\r\n        return new Promise(resolve => {\r\n\r\n            const load = this._load\r\n            const resources = this.resources\r\n\r\n            async function iterate (index) {\r\n                if (data[index]) {\r\n                    const { key, path, type } = data[index]\r\n                    resources[key] = await load(path, type)\r\n                }\r\n\r\n                ++index\r\n                !data[index]\r\n                    ? resolve(resources)\r\n                    : await iterate(index)\r\n            }\r\n\r\n           void iterate(0)\r\n        })\r\n    }\r\n}\r\n","export class EventEmitter {\r\n    constructor() {\r\n        this._storage = {}\r\n    }\r\n\r\n    emit (id) {\r\n        return data => getOrCreateArrFromObj(this._storage)(id).forEach(action => action(data))\r\n    }\r\n\r\n    subscribe (id) {\r\n        return callback => {\r\n            getOrCreateArrFromObj(this._storage)(id).push(callback)\r\n            return () => this._storage[id] = this._storage[id].filter(item => item !== callback)\r\n        }\r\n    }\r\n\r\n    showAll () {\r\n        const s = {}\r\n        for (let key in this._storage) {\r\n            s[key] = this._storage[key].length\r\n        }\r\n        console.log(s)\r\n    }\r\n}\r\n\r\n\r\nconst getOrCreateArrFromObj = obj => key => obj[key] = obj[key] || []\r\n\r\n\r\n\r\n\r\n\r\n\r\n","let lang = 'en'\r\nexport const changeLang = l => lang = l \r\nexport const createTranslater = vocab => word => (vocab[lang] && vocab[lang][word]) || word\r\n","import { connect } from \"react-redux\";\r\nimport '../stylesheets/Info.css'\r\nimport { createTranslater } from '../../helpers/helper_translate'\r\nimport { INFO_VOC } from '../../constants/default_voc'\r\n\r\n\r\nconst t = createTranslater(INFO_VOC)\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state.controls.infoPanelData,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(function(props) {\r\n    return ( \r\n        <div className=\"info\">\r\n            <button\r\n                className=\"control butt-infoClose\"\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n                x\r\n            </button>\r\n            <div className=\"info-inner\">\r\n                <p>{t(props.title)}</p>\r\n                <p>{t(props.topText)}</p>\r\n                <ul>{props.chapters.map((item, index) => \r\n                    <li key={index}>\r\n                        {index + 1}.&nbsp;\r\n                        {item.href \r\n                            ? <span><a href={item.href} target=\"blank\">{t(item.text)}</a></span>\r\n                            : <span>{t(item.text)}</span>}\r\n                        {index === props.currentChapterIndex && t(' (current)')}\r\n                    </li>)\r\n                }</ul>\r\n                <p>{props.bottomText}</p>\r\n                <ul>{props.afterWords.map((item, index) => \r\n                    <li key={index}>\r\n                        {t(item.text)} \r\n                        <a href={item.href} target=\"blank\">{t(item.aText)}</a>\r\n                    </li>)\r\n                }</ul>\r\n            </div>      \r\n        </div>)\r\n})\r\n\r\n","export const INFO_VOC = {\r\n    'ru': {\r\n        'Discovery of small android': 'Путешествия дроида',\r\n        'Factory': 'Фабрика',\r\n        'Brige': 'Мост',\r\n        'Cube': 'Куб',\r\n        'Endways': 'Напрямик',\r\n        'Machine': 'Машина',\r\n        'in production': 'скоро..',\r\n        ' (current)': ' (тут)',\r\n        'Author: ': 'от: ',\r\n        'Github: ': 'Гитхаб: '\r\n    }\r\n} ","import { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Info from './Info'\r\nimport '../stylesheets/PlayerControls.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default connect(\r\n    state => ({\r\n            isInfo: state.controls.isInfo,\r\n            isShowControls: state.controls.isShowControls, \r\n            isShowControlSound: state.controls.isShowControlSound,\r\n            isMute: state.controls.isMute,\r\n    })\r\n)(\r\n    function(props) {\r\n    const [isShowFullScreenButt, changeShowFullScreenButt] = useState(true)\r\n\r\n    useEffect(() =>\r\n        props.gameContext.emitter.subscribe('screenMode')(val => {\r\n            val === 'exitFullScreen' && changeShowFullScreenButt(true) })\r\n    )\r\n\r\n\r\n    return (\r\n        <div className='ui-controls'>\r\n            {props.isShowControls && props.isShowControlSound && <button\r\n                className=\"butt-sound control\"\r\n                onMouseUp={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n                onTouchEnd={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n            >\r\n                {props.isMute ? <>&#10236;</> : <>&#10239;</>}\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-left control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n            >\r\n                &#9668;\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-right control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n            >\r\n                &#9658;\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-front control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n            >\r\n                &#9650;\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-back control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n            >\r\n                &#x25BC;\r\n            </button>}\r\n\r\n\r\n\r\n            {props.isShowControls && isShowFullScreenButt && (\r\n                <button\r\n                    className=\"butt-fullscreen control\"\r\n                    onClick={() => {\r\n                        props.gameContext.emitter.emit('mouseDown')('butt-fullscreen')\r\n                        changeShowFullScreenButt(false)\r\n                    }}>\r\n                    &#10066;\r\n                </button>)}\r\n\r\n            {!props.isInfo && (\r\n                <button\r\n                    className=\"butt-info control\"\r\n                    onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n                    i\r\n                </button>)}\r\n\r\n\r\n            {props.isInfo && <Info />}\r\n        </div>\r\n    )\r\n})\r\n\r\n","import { connect } from 'react-redux'\r\nimport PlayerControls from './PlayerControls'\r\n\r\nconst mapStateToProps = state => ({ \r\n    isShowControls: state.controls.isShowControls,\r\n    isInfo: state.controls.isInfo,\r\n})\r\n\r\nfunction App(props) {\r\n    !dispatcher.dispatch && (dispatcher.dispatch = props.dispatch)\r\n    return (\r\n        <div className=\"ui\">\r\n            {!props.isInfo && props.gameContext.CustomReactComponent && <props.gameContext.CustomReactComponent gameContext={props.gameContext}/>}\r\n            {<PlayerControls gameContext={props.gameContext} />}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const dispatcher = { dispatch: null }\r\nexport default connect(mapStateToProps)(App);\r\n","export const startDefaultStoreData = {\r\n    isShowControls: true,\r\n    isShowControlSound: false,\r\n    isMute: false, \r\n    isInfo: false,\r\n    infoPanelData: {\r\n        title: 'Discovery of small android',\r\n        topText: '',\r\n        chapters: [\r\n            // { text: 'Factory', href: 'http://js.otrisovano.ru/factory/' },\r\n            // { text: 'Brige', href: 'http://js.otrisovano.ru/bridge/' },\r\n            // { text: 'Cube', href: 'http://js.otrisovano.ru/levels/' },\r\n            // { text: 'Endways', href: 'http://js.otrisovano.ru/endways/' },\r\n\r\n            { text: 'Factory', href: './../chapter01' },\r\n            { text: 'Brige', href: './../chapter02' },\r\n            { text: 'Cube', href: './../chapter03' },\r\n            { text: 'Endways', href: './../chapter04' },\r\n            { text: 'Machine', href: './../chapter05' },\r\n            { text: 'in production' },\r\n        ],\r\n        currentChapterIndex: null,\r\n        bottomText: '',\r\n        afterWords: [\r\n            { text: 'Author: ',  aText: 'www.otrisovano.ru', href: 'http://otrisovano.ru' },\r\n            { text: 'Github: ',  aText: 'https://github.com/fire888/dark_boss', href: 'https://github.com/fire888/dark_boss' },\r\n        ],\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport App, { dispatcher } from './containersReact/App';\r\nimport { prepareStore } from './store/createStore'\r\nimport { changeLang } from \"../helpers/helper_translate\";\r\n\r\n\r\n/** ANIMATION LOADER */\r\nconst loader = document.querySelector('.progress')\r\nlet offsetLoader = -100\r\nlet isAnimateLoader = true\r\n\r\n\r\n\r\nconst loaderTimeOut = () => {\r\n    if (!isAnimateLoader) return;\r\n\r\n    setTimeout(() => {\r\n        offsetLoader ++;\r\n        offsetLoader === 0 && (offsetLoader -= 100)\r\n        loader.style.marginLeft = offsetLoader + '%'\r\n        loaderTimeOut()\r\n    }, 30)\r\n}\r\n\r\n\r\n\r\nloaderTimeOut()\r\n\r\n\r\n\r\nexport class UI {\r\n    constructor(root) {\r\n        root.dispatcher = dispatcher\r\n        this._root = root\r\n        const store = prepareStore(root)\r\n\r\n\r\n        store && ReactDOM.render(\r\n            <Provider store={store}>\r\n                <App gameContext={root}/>\r\n            </Provider>,\r\n            document.getElementById('root')\r\n        )\r\n    }\r\n\r\n    showStartButton(onClick) {\r\n        const startButtons = document.querySelector('.startbuttons-wrapper')\r\n        const progressWrapper = document.querySelector('.progress-wrapper')\r\n\r\n        const hideStartScreen = e => {\r\n            e.target.dataset && e.target.dataset.lang && changeLang(e.target.dataset.lang)\r\n            document.querySelector('.start-screen').style.display = 'none'\r\n        }\r\n\r\n        isAnimateLoader = false\r\n        startButtons.style.display = 'flex'\r\n        startButtons.addEventListener('click', e => {\r\n            onClick()\r\n            hideStartScreen(e)\r\n        })\r\n        progressWrapper.style.display = 'none'\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { combineReducers } from 'redux'\r\n\r\nimport { startDefaultStoreData } from './defaultUiData'\r\n\r\nexport function prepareStore(root) {\r\n    if (!root.customStore) root.customStore = {}\r\n\r\n    const controls = function(state = startDefaultStoreData, action) {\r\n        if (action.type === 'TOGGLE_INFO') {\r\n            return ({\r\n                ...state,\r\n                isShowControls: !!state.isInfo,\r\n                isInfo: !state.isInfo,\r\n            })\r\n        }\r\n        if (action.type === 'CHANGE_INFO_CHAPTER') {\r\n            return ({\r\n                ...state,\r\n                infoPanelData: {\r\n                    ...state.infoPanelData,\r\n                    currentChapterIndex: action.currentChapterIndex,\r\n                }\r\n            })\r\n        }\r\n        if (action.type === \"TOGGLE_CONTROLS\") {\r\n            return ({\r\n                ...state,\r\n                isShowControls: action.is,\r\n            })\r\n        }\r\n        if (action.type === 'ENABLE_CONTROL_SOUND') {\r\n            return ({\r\n                ...state,\r\n                isShowControlSound: true,\r\n            })\r\n        }\r\n        if (action.type === 'TOGGLE_MUTE') {\r\n            return ({\r\n                ...state,\r\n                isMute: action.is,\r\n            })\r\n        }\r\n        return ({ ...state })\r\n    }\r\n    \r\n    const rootReducer = combineReducers({ controls, ...root.customStore })\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n    return createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n}  \r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { TRANSLATE_WORLDS } from \"../constants/constants_replicies\";\r\nimport * as LIBA from '../../../_CORE/'\r\nconst t = LIBA.createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\nexport default connect(\r\n    state => { \r\n        return ({\r\n            replicies: state.dialogs.replicies,\r\n            blockPhrases: state.dialogs.replicies[state.dialogs.currentTerminalKey][state.dialogs.currentPhraseIndex],\r\n            currentTerminalKey: state.dialogs.currentTerminalKey,\r\n            currentPhraseIndex: state.dialogs.currentPhraseIndex,\r\n    }) }\r\n)(\r\n    function (props) {\r\n        const message = t(props.blockPhrases.q.txt)\r\n        const filteredAnswers = props.blockPhrases.a.filter(item => item.isShow)\r\n        const replicies = filteredAnswers.map((item, ind) =>\r\n                <button\r\n                    key={ind}\r\n                    onClick={()=>props.dispatch({\r\n                            type: 'CLICK_ON_PLAYER_PHRASE',\r\n                            currentTerminalKey: props.currentTerminalKey,\r\n                            actionKey: item.action,\r\n                            dataAction: item.dataAction || null, \r\n                            phraseIndex: ind, \r\n                        })\r\n                    }>\r\n                    {t(item.txt)}\r\n                </button>)\r\n\r\n        // const arrM = messages.map((item, ind)=> {\r\n        //     if (!item.isDone) return <div key={ind}></div>\r\n        //\r\n        //     return (\r\n        //         <div\r\n        //             key={ind}\r\n        //             className='marTop-small'>\r\n        //             <p className='player'>{t(item.player)}</p>\r\n        //             <p>{t(item.nps)}</p>\r\n        //         </div>)\r\n        // })\r\n        //\r\n        //\r\n        // const arrR = messages.map((item, ind)=> {\r\n        //     if (item.isDone) return <div key={ind}></div>\r\n        //\r\n        //     return (\r\n        //         <button\r\n        //             key={ind}\r\n        //             onClick={()=>props.dispatch({ type: 'CLICK_ON_PLAYER_PHRASE', currentBotKey: props.currentBotKey, phraseIndex: ind, })}>\r\n        //             {t(item.player)}\r\n        //         </button>)\r\n        // })\r\n\r\n\r\n        return (\r\n                <div className=\"messages-wrapper\">\r\n                    <div className=\"messages\">\r\n                        {message}\r\n                    </div>\r\n                    <div className=\"replicies\">\r\n                        {replicies}\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n)","export const REPLICIES_CONFIG = {\r\n    'START_MESS': [{\r\n        q: { txt: 'After a long wandering in the desert...' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'close', },\r\n        ],\r\n    }],\r\n    'TERMINAL_Z01': [{\r\n        q: { txt: 'Stranger, I threw you a terminal with a pass phrase. Remember:' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'And blood-black nothingness began to spin...' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'A system of cells interlinked within cells interlinked within cells interlinked within one stem...' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'And dreadfully distinct against the dark, a tall white fountain played.' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'close', dataAction: { idChangerState: 'openPhrasePROGRAM_00' } },\r\n        ],\r\n    },],\r\n    'TERMINAL_Z': [{\r\n        q: { txt: '' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_Z' } },\r\n        ]\r\n    },],\r\n    'TERMINAL_00': [{\r\n        q: { txt: 'Officer K-D-six-dash-three-dot-seven, let\\'s begin. Ready?' },\r\n        a: [\r\n            { txt: 'Yes, sir.',  isShow: true, action: 'next', },\r\n            { txt: 'No.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_NONE', } },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Recite your baseline.' },\r\n        a: [\r\n            { txt: 'I do not remember.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_NONE', } },\r\n            { txt: 'I\\'ll come back later.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_NONE', } },\r\n            { txt: 'And blood-black nothingness began to spin...', isShow: false, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Cells.' },\r\n        a: [\r\n            { txt: 'Cells.', isShow: true, action: 'startBridge',  dataAction: { keyProgramBridge: 'PROGRAM_00', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_01': [{\r\n        q: { txt: 'Have you ever been in an institution? Cells.' },\r\n        a: [\r\n            { txt: 'Cells.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Do they keep you in a cell? Cells.' },\r\n        a: [\r\n            { txt: 'Cells.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_01', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_02': [{\r\n        q: { txt: 'When you\\'re not performing your duties do they keep you in a little box? Cells.' },\r\n        a: [\r\n            { txt: 'Cells.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_02', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_03': [{\r\n        q: { txt: 'What\\'s it like to hold the hand of someone you love? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'next', idChangerState: null },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Did they teach you how to feel finger to finger? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_03', }},\r\n        ],\r\n    },],\r\n    'TERMINAL_04': [{\r\n        q: { txt: 'Do you long for having your heart interlinked? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Do you dream about being interlinked? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'startBridge',  dataAction: { keyProgramBridge: 'PROGRAM_04', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_05': [{\r\n        q: { txt: 'What\\'s it like to hold your child in your arms? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Do you feel that there\\'s a part of you that\\'s missing? Interlinked.' },\r\n        a: [\r\n            { txt: 'Interlinked.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_05', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_06': [{\r\n        q: { txt: 'Within cells interlinked.' },\r\n        a: [\r\n            { txt: 'Within cells interlinked.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'Why don\\'t you say that three times: Within cells interlinked.' },\r\n        a: [\r\n            { txt: 'Within cells interlinked.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: '' },\r\n        a: [\r\n            { txt: 'Within cells interlinked.', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: '' },\r\n        a: [\r\n            { txt: 'Within cells interlinked.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_06', } },\r\n        ],\r\n    },],\r\n    'TERMINAL_LAST' : [{\r\n        q: { txt: 'We\\'re done... Constant K, you can pick up your bonus.' },\r\n        a: [\r\n            { txt: 'Thank you, sir.', isShow: true, action: 'startBridge', dataAction: { keyProgramBridge: 'PROGRAM_LAST', idChangerState: 'resetAllAfterEnd' }},\r\n            { txt: 'Hey...', isShow: false, action: 'close', },\r\n        ],\r\n    },{\r\n        q: { txt: '...' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'next', },\r\n        ],\r\n    },{\r\n        q: { txt: '... ... ...' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'next', },\r\n        ],\r\n    },{\r\n        q: { txt: '...If you read it, you find dropped terminal and got top level of desert. Welcome...' },\r\n        a: [\r\n            { txt: 'Who are you?', isShow: true, action: 'next', },\r\n        ],\r\n    }, {\r\n        q: { txt: 'It does not matter. Later. May be..' },\r\n        a: [\r\n            { txt: '', isShow: true, action: 'close', dataAction: { idChangerState: 'clearMessagesAfterLastEnd' }},\r\n        ],\r\n    },]\r\n}\r\n\r\n\r\n\r\n\r\nexport const TRANSLATE_WORLDS = {\r\n    'ru': {\r\n        'After a long wandering in the desert...': 'После долгого блуждания по пустоши...',\r\n        'Stranger, I threw you a terminal with a pass phrase. Remember:': 'Незнакомец, я сбросил тебе терминал с парольной фразой. Запомни:',\r\n        'And blood-black nothingness began to spin...': 'Кроваво-черное ничто пустилось вить систему клеток,',\r\n        'A system of cells interlinked within cells interlinked within cells interlinked within one stem...' : 'связанных внутри, клеток, связанных внутри, клеток в едином стебле и явственно,',\r\n        'And dreadfully distinct against the dark, a tall white fountain played.': 'до жути на фоне тьмы ввысь белым бил фонтан.',\r\n        'Officer K-D-six-dash-three-dot-seven, let\\'s begin. Ready?': 'Офицер Кей Ди 6.3.7. приступим. Готовы?',\r\n        'Yes, sir.': 'Готов',\r\n        'No.': 'Не готов',\r\n        'Recite your baseline.': 'Ваша контрольная фраза.',\r\n        'I do not remember.': 'Я забыл.',\r\n        'I\\'ll come back later.': 'Я зайду попозже.',\r\n        'Cells.': 'Клетки.',\r\n        'Have you ever been in an institution? Cells.': 'Доводилось ли вам бывать в тюрьме? Клетки.',\r\n        'Do they keep you in a cell? Cells.': 'Вас держат в клетке? Клетки.',\r\n        'When you\\'re not performing your duties do they keep you in a little box? Cells.': 'Когда вы не исполняете обязанности, вас держат в коробке? Клетки.',\r\n        'Interlinked.': 'Связаны.',\r\n        'What\\'s it like to hold the hand of someone you love? Interlinked.': 'Что вы чувствуете держа за руку того кого любите? Связаны.',\r\n        'Did they teach you how to feel finger to finger? Interlinked.': 'Вас учили приставлять палец к пальцу? Связаны.',\r\n        'Do you long for having your heart interlinked? Interlinked.': 'Вы жаждете связать с кем-нибудь сердце? Связаны.',\r\n        'Do you dream about being interlinked? Interlinked.': 'Вам снится связь с кем-либо? Связаны.',\r\n        'What\\'s it like to hold your child in your arms? Interlinked.': 'Что вы чувствуете, держа в руках своего ребенка? Связаны.',\r\n        'Do you feel that there\\'s a part of you that\\'s missing? Interlinked.': 'Вы чувствуете, что вам чего-то не хватает? Связаны.',\r\n        'Within cells interlinked.': 'Клеток связанных внутри.',\r\n        'Why don\\'t you say that three times: Within cells interlinked.': 'Повторите три раза \"клеток связанных внутри',\r\n        'We\\'re done... Constant K, you can pick up your bonus.': 'На этом все. Кей стабилен, можете пройти за бонусом.',\r\n        'Thank you, sir.': 'Спасибо, сэр.',\r\n        '...If you read it, you find dropped terminal and got top level of desert. Welcome...': '...Если ты читаешь это, ты нашел упавший терминал и добрался до верхнего уровня пустоши.',\r\n        'Who are you?': 'Кто ты?',\r\n        'It does not matter. Later. May be..': 'Это неважно. Позже. Может быть..',\r\n        'Hey...': 'Эй...',\r\n    }\r\n}","import { CURRENT_CHAPTER } from '../constants/constants_elements'\r\n\r\n\r\n\r\nexport const toggleOpenDialog = (dispatch, isToOpen) => {\r\n    const time = isToOpen ? 1300 : 0\r\n    dispatch({\r\n        type: 'TOGGLE_TERMINAL_ANIMATION',\r\n        is: isToOpen\r\n    })\r\n    setTimeout(() => {\r\n        dispatch({\r\n            type: 'SHOW_PALLETE_DIALOG',\r\n            is: isToOpen\r\n        })\r\n    }, time)\r\n}\r\n\r\n\r\n\r\n\r\nexport class AdderActions {\r\n    constructor (_root) {\r\n        const { player, ui, dispatcher, emitter } = _root\r\n\r\n        dispatcher.dispatch({ type: 'CHANGE_INFO_CHAPTER', currentChapterIndex: CURRENT_CHAPTER })\r\n        ui.showStartButton(() => player.toggleBlocked(false))\r\n    }\r\n}\r\n\r\n","import { connect } from 'react-redux'\r\nimport DialogPallete from \"./DialogPallete\"\r\nimport './stylesheets/CustomReactComponent.css'\r\nimport { VOC } from '../constants/translate'\r\nimport { toggleOpenDialog } from \"../actions/AdderActions\";\r\n\r\nimport { createTranslater } from \"../../../_CORE/helpers/helper_translate\";\r\nconst t = createTranslater(VOC)\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        isButtonDialog: state.dialogs.isButtonDialog,\r\n        isCloseisButtonDialog: state.dialogs.isCloseisButtonDialog,\r\n        isShowPalleteDialog: state.dialogs.isShowPalleteDialog,\r\n        isShowFinalMessage: state.dialogs.isShowFinalMessage,\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction CustomReactComponent(props) {\r\n    return (\r\n      <>\r\n        {(!props.isShowFinalMessage) && (props.isButtonDialog || props.isShowPalleteDialog) && <div className=\"dialog-wrapper\">\r\n            <div className=\"dialog-content\">           \r\n              {props.isShowPalleteDialog && <DialogPallete />}\r\n              {(props.isButtonDialog || props.isShowPalleteDialog) && \r\n                    <button \r\n                        className=\"dialog-button-toggle\" \r\n                        onClick={() =>\r\n                            toggleOpenDialog(\r\n                                props.dispatch,\r\n                                (props.isButtonDialog && true) || (props.isShowPalleteDialog && false))\r\n                        }\r\n                        style={{ \"display\": props.display }}>\r\n                        {\r\n                          (props.isButtonDialog && t('open')) ||\r\n                          (props.isShowPalleteDialog && t('close'))\r\n                        }       \r\n                    </button>}\r\n            </div>     \r\n          </div>\r\n        }\r\n\r\n        {props.isShowFinalMessage && (\r\n                <div className='final-mess'>\r\n                        <button\r\n                            onClick={() => {\r\n                                window.location.replace('./../chapter03')\r\n                            }}>\r\n                            {t('Continue')}\r\n                        </button>\r\n                </div>\r\n            )}\r\n      </>  \r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CustomReactComponent)\r\n","export const VOC = {\r\n    'ru': {\r\n        'I ...?': 'Я ...?', \r\n        'You ...?': 'Ты ...?', \r\n        'MM ...?': 'М ...?', \r\n        'You is new droid.': 'Ты новый дроид.',\r\n        'I am mechanic. I create your body.': 'Механик. Делаю корпусы дроидов.',\r\n        'Go. Door is unblocked.... Beeeb.': 'Иди, дверь разблокирована.... Бииб.',\r\n        'Once .... Beeeb.. I set basic program in your memory.': 'Секунду .... Бииб.. Программа в память загружена.',\r\n        'I am programmer.': 'Программирую дроидов.',\r\n        'Go. Once... Beeeb.. Door to laboratory unblocked.': 'Ты должен идти в отдел тестирования. Бииб.. Доступ разрешен.',\r\n        'Once .. Beeeb! I give name to you. Droid_Id: 17543-06767-6767': 'Секунду... Бииб. Тестирование прошло успешно.',\r\n        'I am engineer. I test new droids.': 'Тестестировщик, тестирую новых дроидов.',\r\n        'Go.': 'Иди на приемку.',\r\n        'Droid_Id: 17543-06767-6767, Hmm.., marriage. crap.': 'Секунду... Бииб. Халтура, брак ... Ладно ты теперь дроид_17543-06767-6767.',\r\n        'I am scientist. I check your abilities. ... garbage.': 'Приемщик. Проверяю качество сборки. ',\r\n        'Go to store. Doors unblocked.': 'Иди на склад. Доступ дан.',\r\n        'I don’t know anything, go to the boss. ... Beeeb. You have the accesses.': 'Ничего для тебя нет, иди в штаб... Бииб. Статус: модель укомлектована.',\r\n        'You want see Boss. He is absent.': 'Ищешь босса, его нет.',\r\n        'I am guard. I give you a secret mission.':  'Помошник. Я даю тебе секретную миссию.',\r\n        'You must see all around base, and return. Doors unblocked.': 'Ты должен сходить на разведку вокруг базы и доложить. Вперед.',\r\n        'Droid_Id: 17543-06767-6767 with secret mission. I know.': 'Ты дроид с важной секретной миссией.',\r\n        'I am gateman. Beeeb... Door is opened! Good bye!': 'Ответственный за внешний периметр. Бииб... Доступ к воротам дан.',\r\n        'It does not matter.': 'Это не имеет значения.',\r\n        'I am scout. Crazy factory create droids and close gates. You alone in this desert.': 'Дроид. Суммасшедшая фабрика клепает дроидов, дает секретиные миссии и закрывает ворота.',\r\n        'This is the end.': 'Это все. The end.',\r\n\r\n        'open': 'диалог',\r\n        'close': 'закрыть',\r\n    },\r\n}\r\n\r\n","import { REPLICIES_CONFIG } from '../constants/constants_replicies'\r\nimport { END_ENV } from '../constants/constants_elements'\r\nimport { toggleOpenDialog } from '../actions/AdderActions'\r\n\r\nconst storeStartState = {\r\n    replicies: REPLICIES_CONFIG,\r\n    isCloseisButtonDialog: false,\r\n    isButtonDialog: false,\r\n    isShowPalleteDialog: false,\r\n    currentTerminalKey: null,\r\n    currentPhraseIndex: 0,\r\n    currentLanguage: 'en',\r\n    isShowFinalMessage: false,\r\n}\r\n\r\n\r\nexport const createCustomStore = root => {\r\n    \r\n    const dialogs = (store = storeStartState, action) => {\r\n        if (action.type === 'BUTTON_DIALOG_TOGGLE') {\r\n            const {  isButtonDialog, currentTerminalKey } = action\r\n            return {\r\n                ...store,\r\n                isButtonDialog,\r\n                currentTerminalKey,\r\n            }\r\n        }\r\n\r\n        if (action.type === 'TOGGLE_TERMINAL_ANIMATION') {\r\n            action.is\r\n                ? root.terminals.openTerminal(store.currentTerminalKey)\r\n                : root.terminals.closeTerminal(store.currentTerminalKey)\r\n        }\r\n\r\n        if (action.type === 'SHOW_PALLETE_DIALOG') {\r\n            root.player.toggleBlocked(action.is)\r\n            return {\r\n                ...store,\r\n                isButtonDialog: !action.is,\r\n                isShowPalleteDialog: action.is,\r\n            }\r\n        }\r\n\r\n        if (action.type === 'CLICK_ON_PLAYER_PHRASE') {\r\n            if (action.actionKey === 'next') {\r\n                return {\r\n                    ...store,\r\n                    currentPhraseIndex: ++store.currentPhraseIndex,\r\n                }\r\n            }\r\n\r\n            if (action.actionKey === 'startBridge') {\r\n                setTimeout(() => toggleOpenDialog(root.dispatcher.dispatch, false))\r\n                if (action.dataAction) {\r\n                    if (action.dataAction.keyProgramBridge) {\r\n                        root.bridge.startProgram(action.dataAction.keyProgramBridge)\r\n                    }  \r\n                    \r\n                    if (action.dataAction.keyProgramBridge === 'PROGRAM_06') {\r\n                        root.level.addTopZone()\r\n                        root.terminals.addLastTerminal()\r\n                    }\r\n\r\n                    if (action.dataAction.idChangerState) { \r\n                        \r\n                        if (action.dataAction.idChangerState === 'resetAllAfterEnd') {\r\n                            const replicies = JSON.parse(JSON.stringify(store.replicies))\r\n                            replicies['TERMINAL_LAST'].splice(0, 1)\r\n\r\n                            return ({\r\n                                ...store,\r\n                                replicies,\r\n                                currentPhraseIndex: 0,\r\n                            })    \r\n                        }\r\n                    }\r\n                }\r\n                return {\r\n                    ...store,\r\n                    currentPhraseIndex: 0,\r\n                }\r\n            }\r\n\r\n            if (action.actionKey === 'close') {\r\n                setTimeout(() => toggleOpenDialog(root.dispatcher.dispatch, false))\r\n\r\n                if (action.dataAction && action.dataAction.idChangerState) {\r\n                    if (action.dataAction.idChangerState === 'openPhrasePROGRAM_00') {\r\n                        const replicies = JSON.parse(JSON.stringify(store.replicies))\r\n                        replicies['TERMINAL_00'][1]['a'][2].isShow = true \r\n                        return {\r\n                            ...store,\r\n                            replicies,\r\n                            currentPhraseIndex: 0,\r\n                        }\r\n                    }\r\n\r\n\r\n                    if (action.dataAction.idChangerState === 'clearMessagesAfterLastEnd') {\r\n                        setTimeout(() => {\r\n                            root.player.toggleBlocked(true)\r\n                            root.studio.changeEnvironment(END_ENV, { updateAmb: false, time: 1500 }) \r\n\r\n                            setTimeout(() => { root.dispatcher.dispatch({ type: 'SHOW_FINAL_MESSAGE' }) }, 3000)                                     \r\n                        }, 5000)\r\n                        return {\r\n                            ...store,\r\n                            currentPhraseIndex: 0,\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    ...store,\r\n                    currentPhraseIndex: 0,\r\n                }\r\n            }\r\n            \r\n            return ({\r\n                ...store,\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'SHOW_FINAL_MESSAGE') {\r\n            return ({\r\n                ...store,\r\n                isButtonDialog: false,\r\n                isShowPalleteDialog: false,\r\n                isShowFinalMessage: true,\r\n            })\r\n        }\r\n\r\n        return store\r\n    }\r\n\r\n\r\n    return { \r\n        dialogs \r\n    }\r\n}\r\n\r\n\r\n\r\n","export const Saturate = {\r\nuniforms: {\r\n\"tDiffuse\": { value: null },\r\n},\r\n\r\n\r\nvertexShader: `\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\r\n}`,\r\n\r\n\r\nfragmentShader: `\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vec4 texel = texture2D( tDiffuse, vUv );\r\n  gl_FragColor = (texel * texel * texel) * vec4(3.);\r\n}`,\r\n}\r\n","export const Saturate2 = {\r\n    uniforms: {\r\n        \"tDiffuse\": { value: null },\r\n    },\r\n\r\n\r\n    vertexShader: `\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\r\n}`,\r\n\r\n\r\n    fragmentShader: `\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vec4 texel = texture2D( tDiffuse, vUv );\r\n  gl_FragColor = (texel + texel * 1.5) * vec4(0.5);\r\n}`,\r\n}\r\n","import * as THREE from 'three'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport { Saturate } from '../shaders/saturate'\r\nimport { Saturate2 } from '../shaders/saturate2'\r\n\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\n\r\n\r\nexport class Studio {\r\n    constructor(root) {\r\n        this._root = root\r\n        const { assets, emitter, } = root\r\n        const { canId, rendererCon, clearColor, amb } = root.CONSTANTS.studioConfig\r\n\r\n        rendererCon.canvas = document.getElementById(canId)\r\n\r\n        this._renderer = new THREE.WebGLRenderer(rendererCon)\r\n        console.log(clearColor)\r\n        this._renderer.setClearColor(clearColor)\r\n        this._renderer.setPixelRatio(window.devicePixelRatio)\r\n        this._renderer.setSize(window.innerWidth, window.innerHeight)\r\n\r\n        this._scene = new THREE.Scene()\r\n\r\n        {\r\n            const { color, fogNear, fogFar, backgroundImgKey } = root.CONSTANTS.studioConfig.sceneEnvironment\r\n            console.log(color)\r\n\r\n            this._scene.background = assets[backgroundImgKey] || null\r\n            this._scene.fog = new THREE.Fog(color, fogNear, fogFar)\r\n        }\r\n\r\n\r\n        this._lightA = null\r\n        {\r\n            const { color, strength } = amb\r\n            console.log(color)\r\n            this._lightA = new THREE.AmbientLight( color, strength )\r\n            this._scene.add( this._lightA )\r\n        }\r\n\r\n        this._playerCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n\r\n\r\n        this._controlsCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera.position.set(0, 0, 20)\r\n        const controls = new OrbitControls(this._controlsCamera, this._renderer.domElement)\r\n        controls.target.set(0, 0, 0)\r\n        controls.update();\r\n\r\n\r\n        this._composer = new EffectComposer(this._renderer)\r\n        this._renderPass = new RenderPass(this._scene, this._controlsCamera)\r\n        this._composer.addPass(this._renderPass)\r\n        if (this._root.CONSTANTS.studioConfig.composerAddPass) {\r\n            if (this._root.CONSTANTS.studioConfig.composerAddPass === 'Saturate') {\r\n                this._composer.addPass(new ShaderPass(Saturate))\r\n            }\r\n            if (this._root.CONSTANTS.studioConfig.composerAddPass === 'Saturate2') {\r\n                this._composer.addPass(new ShaderPass(Saturate2))\r\n            }\r\n        } \r\n\r\n\r\n\r\n        /** toggle view camera to debug by orbitControls */\r\n        const vec3 = new THREE.Vector3()\r\n        let isPlayerView = true \r\n        let saveFogData = null\r\n        emitter.subscribe('keyEvent')(data => {\r\n            if (!data['o']) {\r\n                return;\r\n            }\r\n\r\n            if (isPlayerView) {\r\n                saveFogData = { ...this._scene.fog }\r\n                this._scene.fog.near = 1000\r\n                this._scene.fog.far = 2000\r\n                isPlayerView = false\r\n                this._renderPass.camera = this._controlsCamera\r\n                this._playerCamera.getWorldPosition(vec3)\r\n                this._controlsCamera.position.x = vec3.x + 100\r\n                this._controlsCamera.position.y = vec3.y + 100\r\n                this._controlsCamera.position.z = vec3.z\r\n                controls.target.set(vec3.x, vec3.y, vec3.z)\r\n                controls.update()\r\n            } else {\r\n                this._scene.fog.near = saveFogData.near\r\n                this._scene.fog.far = saveFogData.far\r\n                isPlayerView = true \r\n                this._renderPass.camera = this._playerCamera\r\n            }\r\n        })\r\n    \r\n        \r\n\r\n        const resize = () => {\r\n            const size = { width: window.innerWidth, height: window.innerHeight }\r\n            this._renderer.setSize(size.width, size.height)\r\n            this._composer.setSize(size.width, size.height)\r\n            if (this._controlsCamera) {\r\n                this._controlsCamera.aspect = size.width/size.height\r\n                this._controlsCamera.updateProjectionMatrix()\r\n            }\r\n            if (this._playerCamera) {\r\n                this._playerCamera.aspect = size.width/size.height\r\n                this._playerCamera.updateProjectionMatrix()\r\n            }\r\n        }\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n\r\n\r\n\r\n\r\n        this.addToScene = this._scene.add.bind(this._scene)\r\n        this.removeFromScene = this._scene.remove.bind(this._scene)\r\n\r\n\r\n\r\n        const drawFrame = () => {\r\n            this._composer.render(this._scene, this._controlsCamera)\r\n        }\r\n        emitter.subscribe('frameUpdate')(drawFrame)\r\n\r\n\r\n\r\n        this._backgroundImgKey = root.CONSTANTS.studioConfig.sceneEnvironment.backgroundImgKey\r\n        emitter.subscribe('changeSceneEnvironment')(sceneEnvironment => {\r\n            console.log('deprecated!!', 'studio', 'changeSceneEnvironment', sceneEnvironment)\r\n        })\r\n    }\r\n\r\n\r\n    /** PUBLIC ****************************************/\r\n\r\n    setCamera (cam) {\r\n        this._playerCamera = cam\r\n        this._renderPass.camera = this._playerCamera\r\n    }\r\n\r\n\r\n    changeEnvironment (sceneEnvironment, conf = null) {\r\n        this._changeFog(sceneEnvironment, conf)\r\n        this._changeBackground(sceneEnvironment, conf)\r\n    }\r\n\r\n\r\n    /** INTERNAL ****************************************/\r\n\r\n    _changeFog (sceneEnvironment, conf) {\r\n        const { fogNear, fogFar, color } = sceneEnvironment\r\n        if (\r\n            this._scene.fog.near !== fogNear ||\r\n            this._scene.fog.far !== fogFar ||\r\n            this._scene.fog.color !== fogFar\r\n        ) {\r\n            const startData = {\r\n                color: this._scene.fog.color,\r\n                near: this._scene.fog.near,\r\n                far: this._scene.fog.far,\r\n            }\r\n            const endData = {\r\n                color: new THREE.Color(color),\r\n                near: fogNear,\r\n                far: fogFar,\r\n            }\r\n\r\n            new TWEEN.Tween(startData)\r\n                .to(endData, (conf && conf.time) || 3000)\r\n                .onUpdate(() => {\r\n                    this._scene.fog.color = startData.color\r\n                    this._scene.fog.near = startData.near\r\n                    this._scene.fog.far = startData.far\r\n                    if (conf) { \r\n                        if (conf.updateAmb) this._lightA.color = startData.color\r\n                    } else {\r\n                        this._lightA.color = startData.color\r\n                    }\r\n                    this._renderer.setClearColor(startData.color)\r\n                })\r\n                .start()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    _changeBackground (sceneEnvironment) {\r\n        const { backgroundImgKey } = sceneEnvironment\r\n\r\n        if (backgroundImgKey !== this._backgroundImgKey) {\r\n            this._backgroundImgKey = backgroundImgKey\r\n            this._scene.background = this._root.assets[backgroundImgKey] || null\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport class KeyBoard {\r\n    constructor (gameContext) {\r\n        const { emitter } = gameContext\r\n\r\n        const keys = {\r\n            'up': false,\r\n            'down': false,\r\n            'left': false,\r\n            'right': false,\r\n            'p': false,\r\n        }\r\n\r\n        const keysEnabled = {\r\n            'up': true,\r\n            'down': true,\r\n            'left': true,\r\n            'right': true,\r\n        }\r\n\r\n        this.keysEnabled = keysEnabled\r\n        this.keys = keys\r\n\r\n\r\n        const keyUpdate = function ( keyCode, isDown ) {\r\n            switch( keyCode ) {\r\n                case 38:\r\n                case 87:\r\n                    keysEnabled['up'] && (keys['up'] = isDown)\r\n                    break;\r\n                case 40:\r\n                case 83:\r\n                    keysEnabled['down'] && (keys['down'] = isDown)\r\n                    break;\r\n                case 37:\r\n                case 65:\r\n                    keys['left'] = isDown\r\n                    break;\r\n                case 39:\r\n                case 68:\r\n                    keys['right'] = isDown\r\n                    break;\r\n                case 79: \r\n                    keys['o'] = isDown\r\n                    break;                \r\n                case 80: \r\n                    keys['p'] = isDown\r\n                default:\r\n                    break;\r\n\r\n            }\r\n            emitter.emit('keyEvent')(keys)\r\n        }\r\n\r\n\r\n\r\n        document.addEventListener('keydown', event => keyUpdate(event.keyCode, true))\r\n        document.addEventListener('keyup', event => keyUpdate(event.keyCode, false))\r\n\r\n\r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, true)\r\n            if (key === 'butt-right') keyUpdate(39, true)\r\n            if (key === 'butt-front') keyUpdate(38, true)\r\n            if (key === 'butt-back') keyUpdate(40, true)\r\n        })\r\n        emitter.subscribe('mouseUp')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, false)\r\n            if (key === 'butt-right') keyUpdate(39, false)\r\n            if (key === 'butt-front') keyUpdate(38, false)\r\n            if (key === 'butt-back') keyUpdate(40, false)\r\n        })\r\n    }\r\n\r\n    toggleEnableKeys (key, is) {\r\n        this.keysEnabled[key] = is\r\n        !is && (this.keys[key] = false)\r\n    }\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\n\r\nexport class Player {\r\n    constructor (root) {\r\n        this._root = root\r\n\r\n        const { emitter, studio, CONSTANTS } = root\r\n\r\n        const {\r\n            startPos,\r\n            startRot,\r\n            cameraData,\r\n            frontObjPos,\r\n            backObjPos,\r\n            lightDataOne,\r\n            speed,\r\n            offsetFromFloor,\r\n            offsetFromFloorFactor,\r\n            offsetWallCollision,\r\n            speedDown,\r\n            speedRot,\r\n        } = CONSTANTS.playerConfig\r\n\r\n\r\n        this._camera = null\r\n        let keys = {}\r\n        let isButtonsDisabled = false\r\n        this._isBlocked = true\r\n        this._isCanMove = {\r\n            'up': true,\r\n            'down': true,\r\n        }\r\n\r\n        this._mainObj = new THREE.Object3D()\r\n        this._mainObj.position.fromArray(startPos)\r\n        this._mainObj.rotation.fromArray(startRot)\r\n        this._mainObj.userData.type = 'player'\r\n\r\n        const bottomObj = new THREE.Object3D() \r\n        bottomObj.position.fromArray([0, -.05, 0])\r\n        this._mainObj.add(bottomObj)\r\n\r\n        const frontObj = new THREE.Object3D()\r\n        frontObj.position.fromArray(frontObjPos)\r\n        this._mainObj.add(frontObj)\r\n        this.frontObj = frontObj\r\n\r\n        const backObj = new THREE.Object3D()\r\n        backObj.position.fromArray(backObjPos)\r\n        this._mainObj.add(backObj)\r\n        this.backObj = backObj\r\n\r\n        {\r\n            const { fov, ratio, near, far, pos } = cameraData\r\n            this._camera = new THREE.PerspectiveCamera(fov, ratio, near, far)\r\n            this._camera.position.fromArray(pos)\r\n            this._mainObj.add(this._camera)\r\n        }\r\n\r\n        {\r\n            const { color, strenth, pos } = lightDataOne\r\n            const light = new THREE.PointLight(color, strenth)\r\n            light.position.fromArray(pos)\r\n            this._mainObj.add(light)\r\n        }\r\n\r\n\r\n        const update = data => {\r\n            if (isButtonsDisabled) return;\r\n\r\n            keys['left'] && (this._mainObj.rotation.y += (speedRot * data.count))\r\n            keys['right'] && (this._mainObj.rotation.y -= (speedRot * data.count))\r\n\r\n\r\n            if (this._isBlocked) return;\r\n\r\n            /** check bottom floors */\r\n            if (this._root.systemCollisionFloor) {\r\n                const [\r\n                    isBlockedByItem, \r\n                    offset,\r\n                    point, \r\n                ] = this._root.systemCollisionFloor.checkCollisions(this._mainObj, bottomObj, offsetFromFloor)\r\n                \r\n                if (!isBlockedByItem) {\r\n                    this._mainObj.position.y += speedDown\r\n                } else {\r\n                    if (offset < (offsetFromFloor - 1))  {\r\n                        this._mainObj.translateY(offsetFromFloor - offsetFromFloorFactor - offset)\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            if (!keys) return;\r\n\r\n            if (keys['up']) {\r\n                if (!this._isCanMove['up']) return;\r\n\r\n                if (this._root.systemCollisionItems) {\r\n                    const [ isBlockedByItem ] \r\n                        = this._root.systemCollisionItems.checkCollisions(this._mainObj, frontObj, offsetWallCollision)\r\n                   \r\n                        \r\n\r\n                    if (isBlockedByItem) return;\r\n                }\r\n\r\n                this._mainObj.translateZ(-speed * data.count)\r\n                emitter.emit('playerMove')({ pos: this._mainObj.position, dir: 'up' })\r\n            }\r\n\r\n            if (keys['down']) {\r\n                if (!this._isCanMove['down']) return;\r\n\r\n                if (this._root.systemCollisionItems) {\r\n                    const [ isBlockedByItem ] \r\n                        = this._root.systemCollisionItems.checkCollisions(this._mainObj, backObj, offsetWallCollision)\r\n                    if (isBlockedByItem) return;\r\n                }\r\n\r\n                this._mainObj.translateZ(speed * data.count)\r\n                emitter.emit('playerMove')({ pos: this._mainObj.position, dir: 'down' })\r\n            }\r\n\r\n            if (keys['p']) {\r\n                console.log(this._mainObj.position)\r\n            }\r\n        }\r\n\r\n\r\n        emitter.subscribe('keyEvent')(data => keys = data)\r\n        emitter.subscribe('frameUpdate')(update)\r\n        emitter.subscribe('toggleDialog')(val => isButtonsDisabled = val.isOpen)\r\n\r\n\r\n        studio.setCamera(this._camera)\r\n        studio.addToScene(this._mainObj)\r\n    }\r\n\r\n    toggleBlocked (val) {\r\n        this._isBlocked = val\r\n    }\r\n\r\n    toggleCanMove(key, val) {\r\n        this._isCanMove[key] = val\r\n    }\r\n\r\n    getObj () {\r\n        return this._mainObj\r\n    }\r\n\r\n    getCamera () {\r\n        return this._camera\r\n    }\r\n    \r\n    setToPos (x, y, z) {\r\n        this._mainObj.position.set(x, y, z)\r\n    }\r\n}\r\n","import * as THREE from \"three\";\r\n\r\n\r\nexport class SystemCollisionWithItems {\r\n    constructor(root) {\r\n        this._root = root\r\n        this._arrMeshes = []\r\n\r\n\r\n        this._vecStart = new THREE.Vector3()\r\n        this._vecDir = new THREE.Vector3()\r\n        this._rayCaster = new THREE.Raycaster(this._vecStart, this._vecDir)\r\n    }\r\n\r\n    setItemToCollision ({\r\n        mesh,\r\n        itemKeyEmitCollision = null,\r\n        isStopUnits = true\r\n    }) {\r\n        mesh.userData.itemKeyEmitCollision = itemKeyEmitCollision\r\n        mesh.userData.isStopUnits = isStopUnits\r\n        this._arrMeshes.push(mesh)\r\n    }\r\n\r\n\r\n    removeItemFromCollision(mesh) {\r\n        this._arrMeshes = this._arrMeshes.filter(item => item !== mesh)\r\n    }\r\n\r\n\r\n    checkCollisions (objFrom, objTo, d) {\r\n        objFrom.getWorldPosition(this._vecStart)\r\n        objTo.getWorldPosition(this._vecDir)\r\n\r\n        this._vecDir.sub(this._vecStart)\r\n\r\n        const intersects = this._rayCaster.intersectObjects(this._arrMeshes)\r\n\r\n        if (intersects[0]) {\r\n            if (intersects[0].distance < d) {\r\n                if (intersects[0].object.userData.itemKeyEmitCollision) {\r\n                    this._root.emitter.emit('collision')({ \r\n                        ...intersects[0].object.userData.itemKeyEmitCollision, \r\n                        type2: objFrom.userData.type \r\n                    })\r\n                }\r\n\r\n                if (intersects[0].object.userData.isStopUnits) {\r\n                    return [ true, intersects[0].distance, intersects[0].point ]\r\n                }\r\n            }\r\n        }\r\n\r\n        return [ false, null ]\r\n    }\r\n}","import * as THREE from 'three'\r\n\r\nexport class Helper_MaterialsLib {\r\n    constructor (gameContext) {\r\n        const { assets, CONSTANTS } = gameContext\r\n\r\n        gameContext.materials = createMaterials(assets, CONSTANTS.MATERIALS_CONFIG)\r\n    }\r\n}\r\n\r\n\r\nconst createMaterials = (assets, MATERIALS_CONFIG) => {\r\n    for (let key in assets)\r\n        assets[key].wrapS && (assets[key].wrapS = assets[key].wrapT = THREE.RepeatWrapping)\r\n\r\n    const mapsKeys = ['bumpMap', 'envMap', 'map', 'normalMap', 'lightMap', 'aoMap', 'alphaMap']\r\n    const materials = {}\r\n    for (let key in MATERIALS_CONFIG) {\r\n        materials[key] = new THREE[MATERIALS_CONFIG[key].mat]({\r\n            ...MATERIALS_CONFIG[key].props\r\n        })\r\n        mapsKeys.map(keyMap =>\r\n            MATERIALS_CONFIG[key].props[keyMap] &&\r\n                (materials[key][keyMap] = assets[MATERIALS_CONFIG[key].props[keyMap]])\r\n        )\r\n    }\r\n    return materials\r\n}","export default __webpack_public_path__ + \"static/media/px.f5c4aa0c.jpg\";","export default __webpack_public_path__ + \"static/media/nx.121dfe88.jpg\";","export default __webpack_public_path__ + \"static/media/py.bf62827d.jpg\";","export default __webpack_public_path__ + \"static/media/ny.c0e82362.jpg\";","export default __webpack_public_path__ + \"static/media/pz.4045bfc4.jpg\";","export default __webpack_public_path__ + \"static/media/nz.8051e1ef.jpg\";","export default __webpack_public_path__ + \"static/media/level.1777a63d.obj\";","import * as THREE from \"three\";\r\n\r\nexport class SystemLevel {\r\n    constructor (root) {\r\n        this.root = root\r\n\r\n        const { \r\n            assets, \r\n            materials, \r\n            studio, \r\n            systemCollisionItems,\r\n            systemCollisionFloor,\r\n        } = root\r\n\r\n        const {\r\n            offsetFromFloor,\r\n        } = root.CONSTANTS.playerConfig\r\n\r\n    \r\n    \r\n        this._topLevel = null\r\n        \r\n        assets['level-rooms'].traverse(child => {\r\n            if (child.name.includes(\"room_\")) {\r\n                studio.addToScene(new THREE.Mesh(child.geometry, materials.wall))\r\n            }\r\n\r\n            if (child.name.includes(\"topworld_\")) {\r\n                this._topLevel = new THREE.Mesh(child.geometry, materials.wall)\r\n                //studio.addToScene(new THREE.Mesh(child.geometry, materials.wall)) // todo remove\r\n            }\r\n        })\r\n\r\n\r\n        assets['level-rooms'].traverse(child => {\r\n            if (child.name === \"room_\") {\r\n                systemCollisionItems.setItemToCollision({\r\n                    mesh: new THREE.Mesh(child.geometry, materials.easyMaterial),\r\n                    dist: 5,\r\n                    isStopUnits: true\r\n                })\r\n\r\n                systemCollisionFloor.setItemToCollision({\r\n                    mesh: new THREE.Mesh(child.geometry, materials.easyMaterial),\r\n                    dist: offsetFromFloor,\r\n                    isStopUnits: true,\r\n                })\r\n            }\r\n\r\n\r\n\r\n            if (child.name.includes(\"topworld_\")) {\r\n                systemCollisionFloor.setItemToCollision({\r\n                    mesh: new THREE.Mesh(child.geometry, materials.easyMaterial),\r\n                    dist: offsetFromFloor,\r\n                    isStopUnits: true,\r\n                })\r\n            }        \r\n        })\r\n    }\r\n\r\n\r\n    addTopZone () {\r\n        console.log('ADD TOP ZONE')\r\n        this.root.studio.addToScene(this._topLevel)\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/terminal.38a626b1.glb\";","import * as THREE from 'three'\r\nimport { GLTFCopy } from '../../../_CORE/helpers/helper_GLTFcopy'\r\n\r\n\r\n\r\nexport const createModelTerminal = (model, config, emitter) => {\r\n    const copy = GLTFCopy(model)\r\n    const mesh = copy.scene.children[0]\r\n    const animations = copy.animations\r\n    const mixer = new THREE.AnimationMixer(mesh)\r\n    mixer.timeScale = 1.7\r\n    const mixerUpdate = data => mixer.update(data.delta)\r\n    const openAction = mixer.clipAction(animations[0])\r\n    openAction.loop = THREE.LoopOnce\r\n\r\n    const { r, angle, angleZ, angleY, y, terminalKey } = config\r\n    mesh.position.set(Math.sin(angle) * r, y, Math.cos(angle) *  r)\r\n    mesh.rotation.set(0, angleY || angle, angleZ || 0)\r\n    mesh.userData.terminalKey = terminalKey\r\n\r\n\r\n    const startOpen = () => {\r\n        const stopUpdate = emitter.subscribe('frameUpdate')(mixerUpdate)\r\n\r\n        openAction.reset()\r\n        mixer.timeScale = 1.7\r\n        openAction.play()\r\n\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                stopUpdate()\r\n                openAction.paused = true\r\n                resolve()\r\n            }, 1100)\r\n        })\r\n    }\r\n\r\n\r\n    const startClose = () => {\r\n        const stopUpdate = emitter.subscribe('frameUpdate')(mixerUpdate)\r\n\r\n        mixer.timeScale = -1.7\r\n        openAction.paused = false\r\n\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                stopUpdate()\r\n                resolve()\r\n            }, 1100)\r\n        })\r\n    }\r\n\r\n\r\n    return {\r\n        startOpen,\r\n        startClose,\r\n        mesh,\r\n    }\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\n\r\n\r\nexport const GLTFCopy = gltf => {\r\n    const clone = {\r\n          animations: gltf.animations,\r\n          scene: gltf.scene.clone(true)\r\n    };\r\n  \r\n    const skinnedMeshes = {};\r\n  \r\n    gltf.scene.traverse(node => {\r\n        if (node.isSkinnedMesh) {\r\n            skinnedMeshes[node.name] = node;\r\n        }\r\n    });\r\n  \r\n    const cloneBones = {};\r\n    const cloneSkinnedMeshes = {};\r\n  \r\n    clone.scene.traverse(node => {\r\n        if (node.isBone) {\r\n            cloneBones[node.name] = node;\r\n        }\r\n  \r\n        if (node.isSkinnedMesh) {\r\n            cloneSkinnedMeshes[node.name] = node;\r\n        }\r\n    });\r\n  \r\n    for (let name in skinnedMeshes) {\r\n        const skinnedMesh = skinnedMeshes[name];\r\n        const skeleton = skinnedMesh.skeleton;\r\n        const cloneSkinnedMesh = cloneSkinnedMeshes[name];\r\n  \r\n        const orderedCloneBones = [];\r\n  \r\n        for (let i = 0; i < skeleton.bones.length; ++i) {\r\n            const cloneBone = cloneBones[skeleton.bones[i].name];\r\n            orderedCloneBones.push(cloneBone);\r\n        }\r\n  \r\n        cloneSkinnedMesh.bind(\r\n            new THREE.Skeleton(orderedCloneBones, skeleton.boneInverses),\r\n            cloneSkinnedMesh.matrixWorld);\r\n    }\r\n  \r\n    return clone;\r\n}","import * as THREE from \"three\";\r\nimport { createModelTerminal } from '../entities/Terminal'\r\n\r\nexport class SystemTerminals {\r\n    constructor (root) {\r\n        const {\r\n            //materials,\r\n            assets,\r\n            studio,\r\n            emitter,\r\n        } = root\r\n\r\n        const {\r\n            LAST_TERMINAL_CONFIG,\r\n            TERMINALS_CONFIG,\r\n        } = root.CONSTANTS\r\n\r\n        this.terminals = {}\r\n\r\n        const createTerminal = config => {\r\n            const terminal = createModelTerminal(assets['terminal'], config, emitter)\r\n            terminal.mesh.userData.inScene = true\r\n            terminal.mesh.userData.key = config.terminalKey\r\n            studio.addToScene(terminal.mesh)\r\n            this.terminals[config.terminalKey] = terminal\r\n        }\r\n\r\n        for (let i = 0; i < TERMINALS_CONFIG.length; i ++) createTerminal(TERMINALS_CONFIG[i])\r\n        \r\n        createTerminal(LAST_TERMINAL_CONFIG)\r\n        this.terminals['TERMINAL_LAST'].mesh.visible = false\r\n\r\n        /** comment */\r\n        //this.addLastTerminal()\r\n    }\r\n\r\n    openTerminal (key) {\r\n        this.terminals[key].startOpen()\r\n    }\r\n\r\n    closeTerminal (key) {\r\n        this.terminals[key].startClose()\r\n    }\r\n\r\n    addLastTerminal () {\r\n        this.terminals['TERMINAL_LAST'].mesh.visible = true\r\n    }\r\n}\r\n","import * as THREE from \"three\";\r\n\r\n\r\nexport class SystemCheckerNearItem {\r\n    constructor() {\r\n        this._itemWorldPos = new THREE.Vector3()\r\n        this._mainCheckerWorldPos = new THREE.Vector3()\r\n\r\n        this._arr = []\r\n    }\r\n\r\n\r\n    setItemToCheck (mesh) {\r\n        this._arr.push(mesh)\r\n    }\r\n\r\n    checkNear (mainMesh, dist) {\r\n        mainMesh.getWorldPosition(this._mainCheckerWorldPos)\r\n\r\n        for (let i = 0; i < this._arr.length; ++i) {\r\n            if (!this._arr[i].userData.inScene) continue;\r\n\r\n            this._arr[i].getWorldPosition(this._itemWorldPos)\r\n            const distance = this._itemWorldPos.distanceTo(this._mainCheckerWorldPos)\r\n            if (distance < dist) {\r\n                return [true, this._arr[i].userData]\r\n            }\r\n        }\r\n\r\n        return [ false, null ]\r\n    }\r\n}\r\n\r\n","import * as THREE from 'three'\r\n\r\n\r\nexport function createBridgeMesh (material) {\r\n    const geom = new THREE.BoxGeometry(3, 2, 3)\r\n    const mesh = new THREE.Mesh(geom, material)\r\n    mesh.name = 'roomBridge'\r\n\r\n    const changeMesh = params => updateMesh(params, mesh)\r\n\r\n    return {\r\n        changeMesh,\r\n        mesh,\r\n    }\r\n}\r\n\r\n\r\n\r\nconst updateMesh = (data, mesh) => {\r\n    mesh.geometry.dispose()\r\n    mesh.geometry = createGeom(data)\r\n    mesh.geometry.needsUpdate = true\r\n\r\n    mesh.position.set(data.x, data.y, data.z)\r\n    mesh.rotation.y = data.rotate + (Math.PI/2 * (1 - data.strengthTwist))\r\n}\r\n\r\n\r\n\r\nconst createGeom = data => {\r\n    const pointsPath = createPointsPath(data)\r\n    const pointsCarcass = createPointsCarcass(pointsPath, data)\r\n    return createGeomFromPoints(pointsCarcass)\r\n}\r\n\r\n\r\n\r\n/**\r\n *         *\r\n *         |\r\n *         |\r\n *         *\r\n *         |\r\n *         |\r\n *         *\r\n */\r\nfunction createPointsPath (data) {\r\n    const {\r\n        count,\r\n        twist,\r\n        radius,\r\n        height,\r\n        strengthTwist,\r\n    } = data\r\n\r\n    const points = []\r\n    for (let i = 0; i < count; i ++) {\r\n        const phase = i / count\r\n\r\n        const d = (radius * 2) * phase * (1 - strengthTwist)\r\n        const twistPoint = twist * phase * strengthTwist\r\n\r\n        const x = Math.sin(twistPoint) * radius + d - (radius * (1 - strengthTwist))\r\n        const y = phase * height\r\n        const z = Math.cos(twistPoint) * radius - (radius * (1 - strengthTwist))\r\n\r\n        points.push({ x, y, z, twistPoint })\r\n    }\r\n    return points\r\n}\r\n\r\n\r\n\r\n/**\r\n *           *--------*\r\n *          /        /\r\n *         *---*----*\r\n *             |\r\n *           *-|-----*\r\n *          /  |    /\r\n *         *---*---*\r\n *             |\r\n *           *-|------*\r\n *          /  |    /\r\n *         *---*---*\r\n */\r\nfunction createPointsCarcass (points, data) {\r\n    const h = data['floor']\r\n    const w = data['width']\r\n\r\n    const p = []\r\n    for (let i = 0; i < points.length; i ++) {\r\n        const { x, y , z, twistPoint } = points[i]\r\n\r\n        const xW = Math.sin(twistPoint) * w\r\n        const zW = Math.cos(twistPoint) * w\r\n\r\n        p.push([\r\n            [x + xW, y, z + zW],\r\n            [x + xW, y + h, z + zW],\r\n            [x - xW, y + h, z - zW],\r\n            [x - xW, y, z - zW],\r\n        ])\r\n    }\r\n    return p\r\n}\r\n\r\n\r\n\r\n/**\r\n *       p[i-2][2]                 p[i-1][2]         p[i][2]\r\n *            *--------------------*------------ *\r\n *           /|                  / |            /|\r\n * p[i-2][1]/ |      p[i-1][1]  /  |   p[i][2] / |\r\n *         *-------------------*--------------*  |\r\n *         |  * ---------------|---*----------|-* p[i][3]\r\n *         | / p[i-2][3]       |  /           | /\r\n *         |/                  | /            |/\r\n *         *-------------------*--------------*\r\n *     p[i-2][0]               p[i-1][0]       p[i][0]\r\n */\r\nconst createGeomFromPoints = data => {\r\n    const points = data\r\n    \r\n    const vertices = [] \r\n    for (let i = 1; i < points.length - 1; i += 2) {\r\n        vertices.push(\r\n\r\n            /** bottom first */\r\n            points[i-1][0][0], points[i-1][0][1], points[i-1][0][2],\r\n            points[i][0][0], points[i][0][1], points[i][0][2],\r\n            points[i][3][0], points[i][3][1], points[i][3][2],\r\n\r\n            points[i-1][0][0], points[i-1][0][1], points[i-1][0][2],\r\n            points[i][3][0], points[i][3][1], points[i][3][2],\r\n            points[i-1][3][0], points[i-1][3][1], points[i-1][3][2],\r\n\r\n            /** left */\r\n\r\n            points[i-1][0][0], points[i-1][0][1], points[i-1][0][2],\r\n            points[i][0][0], points[i][0][1], points[i][0][2],\r\n            points[i][1][0], points[i][1][1], points[i][1][2],\r\n\r\n            points[i-1][0][0], points[i-1][0][1], points[i-1][0][2],\r\n            points[i][1][0], points[i][1][1], points[i][1][2],\r\n            points[i-1][1][0], points[i-1][1][1], points[i-1][1][2],\r\n\r\n\r\n            /** right */\r\n\r\n            points[i][3][0], points[i][3][1], points[i][3][2],\r\n            points[i-1][3][0], points[i-1][3][1], points[i-1][3][2],\r\n            points[i-1][2][0], points[i-1][2][1], points[i-1][2][2],\r\n\r\n            points[i][3][0], points[i][3][1], points[i][3][2],\r\n            points[i-1][2][0], points[i-1][2][1], points[i-1][2][2],\r\n            points[i][2][0], points[i][2][1], points[i][2][2],\r\n\r\n\r\n            /** top */\r\n\r\n            points[i-1][1][0], points[i-1][1][1], points[i-1][1][2],\r\n            points[i][1][0], points[i][1][1], points[i][1][2],\r\n            points[i][2][0], points[i][2][1], points[i][2][2],\r\n\r\n            points[i-1][1][0], points[i-1][1][1], points[i-1][1][2],\r\n            points[i][2][0], points[i][2][1], points[i][2][2],\r\n            points[i-1][2][0], points[i-1][2][1], points[i-1][2][2],\r\n\r\n\r\n            /** bottom second */\r\n\r\n            points[i][0][0], points[i][0][1], points[i][0][2],\r\n            points[i+1][0][0], points[i+1][0][1], points[i+1][0][2],\r\n            points[i+1][3][0], points[i+1][3][1], points[i+1][3][2],\r\n\r\n            points[i][0][0], points[i][0][1], points[i][0][2],\r\n            points[i+1][3][0], points[i+1][3][1], points[i+1][3][2],\r\n            points[i][3][0], points[i][3][1], points[i][3][2],\r\n\r\n\r\n        )\r\n    }    \r\n\r\n    const arr = new Float32Array(vertices)\r\n    const geometry = new THREE.BufferGeometry()\r\n    geometry.setAttribute( 'position', new THREE.BufferAttribute( arr, 3 ) );\r\n    geometry.computeVertexNormals()\r\n    geometry.computeBoundingSphere();\r\n\r\n    return geometry\r\n}","import { createBridgeMesh } from './BridgeMesh'\r\nimport gsap from 'gsap'\r\n\r\n\r\n\r\nexport function createBridge (material) {\r\n    const setPose = state => {\r\n        currentState = state\r\n        bridge.changeMesh(state)\r\n    }\r\n\r\n\r\n    const startProgram = program => {\r\n        return new Promise(resolve => {\r\n            doMarathonAnimations(currentState, program, bridge.changeMesh)\r\n                .then(newState => {\r\n                    currentState = newState\r\n                    resolve()\r\n                })\r\n        })\r\n    }\r\n\r\n\r\n    let currentState = null\r\n    const bridge = createBridgeMesh(material)\r\n\r\n\r\n    return {\r\n        mesh: bridge.mesh,\r\n        setPose,\r\n        startProgram,\r\n    }\r\n}\r\n\r\n\r\n\r\nconst doMarathonAnimations = (currentState, arrStates, action) => {\r\n    return new Promise(resolve => {\r\n        const doNextAnimation = index => {\r\n            const newState = arrStates[index]\r\n\r\n            const obj = { val: 0 }\r\n\r\n            const onUpdate = () => {\r\n                const middleState = {}\r\n                for (let key in currentState)\r\n                    middleState[key] = currentState[key] + (newState[key] - currentState[key]) * obj.val\r\n\r\n                action(middleState)\r\n            }\r\n\r\n            const onComplete = () => {\r\n                currentState = newState\r\n                index ++\r\n                arrStates[index] ? doNextAnimation(index) : resolve(currentState)\r\n            }\r\n\r\n            gsap.to( obj, { duration: newState.time * 0.001, val: 1, ease: \"none\", onUpdate, onComplete })\r\n        }\r\n\r\n        doNextAnimation(0)\r\n    })\r\n}","import { LoaderAssets } from '../../../_CORE/helpers/helper_LoadAssets'\r\nimport { EventEmitter } from \"../../../_CORE/helpers/helper_Emitter\"\r\nimport { CustomUi } from '../ui/Ui'\r\nimport { DeviceResizer } from \"../../../_CORE/helpers/helper_DeviceResizer\"\r\nimport { FrameUpdater } from \"../../../_CORE/helpers/helper_FrameUpater\"\r\nimport { Helper_TweenUpdater } from \"../../../_CORE/helpers/helper_TweenUpdater\"\r\nimport { Studio } from '../../../_CORE/entities/createStudio'\r\nimport { KeyBoard } from \"../../../_CORE/helpers/helper_KeyBoard\"\r\nimport { Player } from '../../../_CORE/entities/createPlayer'\r\nimport { SystemCollisionWithItems } from '../../../_CORE/systems/SystemCollisionsItems'\r\nimport { Helper_MaterialsLib } from '../../../_CORE/helpers/helper_MaterialsLib'\r\n\r\nimport pxjpg from '../../../assets/chapter02/skybox/px.jpg'\r\nimport nxjpg from '../../../assets/chapter02/skybox/nx.jpg'\r\nimport pyjpg from '../../../assets/chapter02/skybox/py.jpg'\r\nimport nyjpg from '../../../assets/chapter02/skybox/ny.jpg'\r\nimport pzjpg from '../../../assets/chapter02/skybox/pz.jpg'\r\nimport nzjpg from '../../../assets/chapter02/skybox/nz.jpg'\r\nimport levelSrc from '../../../assets/chapter02/level.obj'\r\nimport { SystemLevel } from '../systems/system_Level'\r\n\r\nimport { SystemPlatforms } from '../systems/system_Platforms'\r\n\r\nimport terminalSrc from '../../../assets/chapter02/terminal.glb'\r\nimport { SystemTerminals } from '../systems/system_Terminals'\r\n\r\nimport { CheckerDialogWithTerminals } from '../systems/system_DialogsWithTerminals'\r\n\r\nimport { SystemBridge } from '../systems/system_Brige'\r\n\r\n\r\n\r\nimport { AdderActions } from \"../actions/AdderActions\"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const GAME_MODULES = [\r\n    {\r\n        key: 'emitter',\r\n        constr: EventEmitter,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'customUi',\r\n        constr: CustomUi,\r\n        initStateKey: 'pageLoaded',  \r\n    },\r\n    {\r\n         key: 'deviceResizer',\r\n         constr: DeviceResizer,\r\n         initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'loaderAssets',\r\n        constr: LoaderAssets,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n\r\n    // /////////////////////////////////////////\r\n\r\n    {\r\n         key: 'frameUpdater',\r\n         constr: FrameUpdater,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n         key: 'tweenUpdater',\r\n         constr: Helper_TweenUpdater,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n         key: 'studio',\r\n         constr: Studio,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n         key: 'keyBoard',\r\n         constr: KeyBoard,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n         key: 'player',\r\n         constr: Player,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'systemCollisionItems',\r\n        constr: SystemCollisionWithItems,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'systemCollisionFloor',\r\n        constr: SystemCollisionWithItems,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n         key: 'materialsLib',\r\n         constr: Helper_MaterialsLib,\r\n         initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'level',\r\n        constr: SystemLevel,\r\n        initStateKey: 'beforeStartPlay',\r\n        assetsToLoad: [\r\n            { type: 'obj', path: levelSrc, key: 'level-rooms' },\r\n            { type: 'cubeTextures', path: [ pxjpg, nxjpg ,pyjpg, nyjpg, pzjpg, nzjpg ], key: 'envTexture' },\r\n        ],\r\n    },\r\n    {\r\n        key: 'platforms',\r\n        constr: SystemPlatforms,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'terminals',\r\n        constr: SystemTerminals,\r\n        initStateKey: 'beforeStartPlay',\r\n        assetsToLoad: [\r\n            { type: 'glb', path: terminalSrc, key: 'terminal' },\r\n        ]\r\n    },\r\n    {\r\n        key: 'checkerDialogsWithTerminals',\r\n        constr: CheckerDialogWithTerminals,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'bridge',\r\n        constr: SystemBridge,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    // {\r\n    //     key: 'doors',\r\n    //     constr: SystemDoors,\r\n    //     initStateKey: 'beforeStartPlay',\r\n    //     assetsToLoad: [\r\n    //         { type: 'img', path: doorTextureSrc, key: 'doorTexture', wrap: false },\r\n    //     ]\r\n    // },\r\n    // {\r\n    //     key: 'bots',\r\n    //     constr: SystemBots ,\r\n    //     initStateKey: 'beforeStartPlay',\r\n    //     assetsToLoad: [\r\n    //         { type: 'glb', path: botSrc, key: 'bot' },\r\n    //         { type: 'img', path: botMap, key: 'monster-skin' },\r\n    //     ]\r\n    // },\r\n    // {\r\n    //     key: 'playerNearBot',\r\n    //     constr: CheckerDialogWithBot,\r\n    //     initStateKey: 'beforeStartPlay',\r\n    // },\r\n    {\r\n        key: 'adderActions',\r\n        constr: AdderActions,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n]\r\n\r\n","import { UI } from '../../../_CORE/ui/UI'\r\nimport CustomReactComponent from \"./CustomReactComponent\";\r\nimport { createCustomStore  } from \"./createStore\";\r\n\r\nexport class CustomUi {\r\n    constructor(root) {\r\n\r\n        root.appWrapper = document.querySelector('.app-wrapper')\r\n        root.CustomReactComponent = CustomReactComponent\r\n        root.customStore = createCustomStore(root)\r\n\r\n        root.ui = new UI(root)\r\n    } \r\n} \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","\r\n\r\n\r\nconst MAX_W = 400\r\nconst MIN_W = 350\r\n\r\n\r\n\r\nexport class DeviceResizer {\r\n    constructor (gameContext) {\r\n        let { emitter, appWrapper } = gameContext\r\n\r\n        !appWrapper && (appWrapper = document.querySelector('.app-wrapper')) \r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-fullscreen') openAppFullScreenIfMobile()\r\n        })\r\n\r\n        /** fullscreen */\r\n        const openAppFullScreenIfMobile = () => {\r\n            if (appWrapper.requestFullscreen) {\r\n                appWrapper.requestFullscreen()\r\n            } else if (appWrapper.mozRequestFullScreen) {\r\n                appWrapper.mozRequestFullScreen()\r\n            } else if (appWrapper.webkitRequestFullscreen) {\r\n                appWrapper.webkitRequestFullscreen()\r\n            } else if (appWrapper.msRequestFullscreen) {\r\n                appWrapper.msRequestFullscreen()\r\n            }\r\n        }\r\n\r\n        /** resize */\r\n        const resize = e => {\r\n            appWrapper.style.width = window.innerWidth + 'px'\r\n            appWrapper.style.height = window.innerHeight + 'px'\r\n            appWrapper.style.fontSize = Math.max(Math.min(Math.min(window.innerWidth, window.innerHeight), MAX_W), MIN_W) / 50 + 'px'\r\n\r\n            if (!document.fullscreenElement) {\r\n                emitter.emit('screenMode')('exitFullScreen')\r\n            }\r\n\r\n        }\r\n\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n    }\r\n}\r\n","import * as R from 'ramda'\r\n\r\n\r\nexport class FrameUpdater {\r\n    constructor (gameContext) {\r\n        const { emitter } = gameContext\r\n\r\n        const emitFrameUpdate = emitter.emit('frameUpdate')\r\n\r\n        let data = {\r\n            time: 0,\r\n            delta: 0,\r\n            count: 0,\r\n            oldTime: 0\r\n        }\r\n\r\n        const getDataFromGlobalVar = () => data\r\n\r\n        const updateTime = data => {\r\n            data.time = Date.now()\r\n            return data\r\n        }\r\n\r\n        const updateDelta = data => {\r\n            data.delta = (data.time - data.oldTime) * 0.001\r\n            if (isNaN(data.delta) || data.delta > 1000 || data.delta === 0 ) {\r\n                data.delta = 1000 / 60 * 0.001\r\n            }\r\n            return data\r\n        }\r\n\r\n        const updateCount = data => {\r\n            data.count = data.delta / (1/60)\r\n            return data\r\n        }\r\n\r\n        const emit = data => {\r\n            emitFrameUpdate(data)\r\n            return data\r\n        }\r\n\r\n        const updateOldTime = data => {\r\n            data.oldTime = data.time\r\n            return data\r\n        }\r\n\r\n        const saveDataInGlobalVar = dataFromChine => {\r\n            data = dataFromChine\r\n            return data\r\n        }\r\n\r\n        const update = R.pipe(\r\n            getDataFromGlobalVar,\r\n            updateTime,\r\n            updateDelta,\r\n            updateCount,\r\n            emit,\r\n            updateOldTime,\r\n            saveDataInGlobalVar\r\n        )\r\n\r\n        const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            update(data)\r\n        }\r\n\r\n        animate()\r\n    }\r\n}","import * as TWEEN from '@tweenjs/tween.js'\r\n\r\n\r\nexport class Helper_TweenUpdater {\r\n    constructor (gameContext) {\r\n        gameContext['emitter'].subscribe('frameUpdate')(() => TWEEN.update())\r\n    }\r\n}","import * as THREE from \"three\";\r\n\r\nexport class SystemPlatforms {\r\n    constructor (root) {\r\n        const {\r\n            materials,\r\n            studio,\r\n            systemCollisionFloor,\r\n        } = root\r\n\r\n        const {\r\n            PLATFORMS_CONFIG,\r\n        } = root.CONSTANTS\r\n\r\n        for (let i = 0; i < PLATFORMS_CONFIG.length; ++i) {\r\n            const { w1, w2, h, r, angle, y } = PLATFORMS_CONFIG[i]\r\n\r\n            const mesh = new THREE.Mesh(\r\n                new THREE.BoxGeometry(w1, h, w2),\r\n                materials.wall\r\n            )\r\n            mesh.position.set(Math.sin(angle) *  r, y, Math.cos(angle) *  r)\r\n            mesh.rotation.set(0, angle, 0)\r\n            systemCollisionFloor.setItemToCollision({ mesh })\r\n            studio.addToScene(mesh)\r\n        }\r\n    }\r\n}","import { SystemCheckerNearItem } from \"../../../_CORE/systems/SystemCheckerNearItem\";\r\n\r\n\r\nexport class CheckerDialogWithTerminals {\r\n    constructor(root) {\r\n        const { player, terminals, emitter, dispatcher } = root\r\n\r\n        const checkerNear = new SystemCheckerNearItem()\r\n        for (let key in terminals.terminals) {\r\n            checkerNear.setItemToCheck(terminals.terminals[key].mesh)\r\n        }\r\n        const mesh = {\r\n            'up': player.frontObj,\r\n            'down': player.backObj,\r\n        }\r\n        let keyTerminalNear = null\r\n\r\n        emitter.subscribe('playerMove')(({ dir }) => {\r\n            /** check dialog */\r\n            {\r\n\r\n                const [ isNear, data ] = checkerNear.checkNear(mesh[dir], 12)\r\n\r\n                if (!isNear) {\r\n                    if (keyTerminalNear) {\r\n                        keyTerminalNear = null\r\n                        dispatcher.dispatch({ type: 'BUTTON_DIALOG_TOGGLE', isButtonDialog: false, currentTerminalKey: null })\r\n                    }\r\n                } else {\r\n                    if (!keyTerminalNear) {\r\n                        keyTerminalNear = data.key\r\n                        dispatcher.dispatch({ type: 'BUTTON_DIALOG_TOGGLE', isButtonDialog: true, currentTerminalKey: keyTerminalNear })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}","import { createBridge } from '../entities/Bridge'\r\n\r\n\r\nexport class SystemBridge {\r\n    constructor (root) {\r\n        const {\r\n            emitter,\r\n            materials,\r\n            studio,\r\n            systemCollisionFloor,\r\n            CONSTANTS,\r\n        } = root\r\n\r\n        const {\r\n            BRIDGE_START_STATE,\r\n            PROGRAMS,\r\n            playerConfig,\r\n        } = CONSTANTS\r\n\r\n        this._PROGRAMS = PROGRAMS\r\n\r\n        this._bridge = createBridge(materials.wall)\r\n        studio.addToScene(this._bridge.mesh)\r\n        this._bridge.setPose(BRIDGE_START_STATE)\r\n\r\n\r\n        systemCollisionFloor     \r\n            && systemCollisionFloor.setItemToCollision({ \r\n                mesh: this._bridge.mesh, \r\n                dist: playerConfig.offsetFromFloor,\r\n                isStopUnits: true,\r\n            })\r\n\r\n        this._inProgram = false\r\n    }\r\n\r\n    startProgram(key) {\r\n        this._inProgram = true\r\n        this._bridge.startProgram(this._PROGRAMS[key])\r\n            .then(() => this._inProgram = false)\r\n    }\r\n}\r\n\r\n// export function createSystemBridge (emitter, material) {\r\n//     const bridge = createBridge(material)\r\n//     bridge.setPose(START_STATE)\r\n\r\n//     // TODO: remove.\r\n//     emitter.subscribe('updateBridge')(data => bridge.setPose(getValuesFromData(data)))\r\n\r\n//     let inProgram = false\r\n//     emitter.subscribe('startBridgeProgram')(data=> {\r\n//         if (inProgram) return;\r\n//         if (!PROGRAMS[data.keyProgram]) return;\r\n\r\n//         inProgram = true\r\n//         bridge.startProgram(PROGRAMS[data.keyProgram])\r\n//             .then(() => inProgram = false)\r\n//     })\r\n\r\n//     return {\r\n//         mesh: bridge.mesh\r\n//     }\r\n// }\r\n\r\n\r\n\r\n// const getValuesFromData = data => {\r\n//     const newData = {}\r\n//     for (let key in data) newData[key] = data[key].val\r\n//     return newData\r\n// }","import { pipeLineForInit } from '../../_CORE/pipeLines/initPipeLine'\r\nimport * as CONSTANTS from './constants/constants_elements'\r\nimport { GAME_MODULES } from \"./constants/constants_modules\"\r\n\r\n\r\nwindow.addEventListener('load', () => pipeLineForInit(GAME_MODULES, CONSTANTS))\r\n"],"sourceRoot":""}